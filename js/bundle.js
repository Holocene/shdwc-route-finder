!function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e){"use strict";var t=e("q"),n=e("request"),r=e("local/repositories/system"),i=e("local/repositories/wormhole-class"),o=e("local/repositories/bridge"),s=e("local/repositories/scanned-system"),a=e("local/repositories/signature"),u=e("local/repositories/wormhole");e("./helpers"),e("./lib-config");var c=e("local/repositories");c.setFirebaseUrl(siteConfig.firebaseUrl),n(siteConfig.maintenanceServerUrl,function(){}),e("./extensions/signature-repository"),e("./extensions/wormhole-repository");var l=e("angular"),h=l.module("wormholeMapper",["ui.router","ui.bootstrap"]);h.constant("fbRef",new Firebase(siteConfig.firebaseUrl)),e("./controllers"),e("./angular-factories"),e("./directives");var d={staticData:function(){var e=r.initialize(),n=i.initialize();return t.all([e,n])},authorize:["authorizationService",function(e){return e.authorize()}]},f={roles:["user"]},p={roles:["admin"]};h.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("index",{url:"/",templateUrl:"views/front-page.html",resolve:d}).state("login",{url:"/login",controller:"LoginController",params:{ret:null},templateUrl:"views/login.html",resolve:d}).state("login-return",{url:"/login-return?code&dev",controller:"LoginReturnController",templateUrl:"views/login-return.html",resolve:d}).state("accessdenied",{template:"<div class='panel panel-default'><h2>Access Denied</h2></div>",resolve:d}).state("system-list",{url:"/system-list",controller:"SystemListController",templateUrl:"views/system-list.html",resolve:d,data:f}).state("system-list.details",{url:"/:systemName",controller:"SystemDetailsController",templateUrl:"views/system-list.details.html"}).state("wormhole-list",{url:"/wormhole-list",controller:"WormholeListController",templateUrl:"views/wormhole-list.html",resolve:d,data:f}).state("wormhole-list.edit",{templateUrl:"views/wormhole-list.edit.html",params:{wormhole:null}}).state("bridge-list",{url:"/bridge-list",controller:"BridgeListController",templateUrl:"views/bridge-list.html",resolve:d,data:f}).state("bridge-list.edit",{templateUrl:"views/bridge-list.edit.html",controller:"BridgeEditController",params:{bridge:null}}).state("bridge-list.in-range",{templateUrl:"views/bridge-list.in-range.html",params:{bridge:{}},controller:"BridgeSystemsInRangeController"}).state("route-finder",{url:"/route-finder",controller:"RouteFinderSearchController",templateUrl:"views/route-finder.html",reloadOnSearch:!1,resolve:d,data:f}).state("route-finder.find",{controller:"RouteFinderController",templateUrl:"views/route-finder.find.html",params:{start:{},end:{},hi:{},lo:{},nl:{},ws:{},br:{},st:{},wh:{},mbd:{},mr:{}}}).state("map",{url:"/map",controller:"MapController",templateUrl:"views/map.html",resolve:d,data:f}).state("map2",{url:"/map2",controller:"Map2Controller",templateUrl:"views/map2.html",resolve:d,data:f}).state("users",{url:"/users",controller:"UserListController",templateUrl:"views/user-list.html",data:f}).state("user-details",{url:"/users/:user",controller:"UserDetailsController",templateUrl:"views/user-details.html",data:f}).state("leaderboard",{url:"/leaderboard",controller:"LeaderboardController",templateUrl:"views/leaderboard.html",resolve:d,data:f}).state("access-control",{url:"/access-control",controller:"AccessControlController",templateUrl:"views/access-control.html",resolve:d,data:p}).state("payments",{url:"/payments",controller:"PaymentsController",templateUrl:"views/payments.html",resolve:d,data:p}).state("search-log",{url:"/search-log",controller:"RouteLogController",templateUrl:"views/route-log.html",resolve:d,data:p}),t.otherwise("/")}]),h.config(["$provide",function(e){return e.decorator("$rootScope",["$delegate",function(e){return e.safeApply=function(t){var n=e.$$phase;"$apply"===n||"$digest"===n?t&&"function"==typeof t&&t():e.$apply(t)},e}])}]),h.run(function(){d.staticData().then(function(){siteConfig.homeSystem=r.getSystem(siteConfig.homeSystemId),o.initialize(),u.initialize(),s.initialize(),a.initialize()});var t=e("./services/theme-service.js");t.loadTheme()});var g=e("local/repositories/firebase-auth"),m=e("./services/user-service.js"),y=e("local/repositories/user");h.run(["$rootScope","$state","$stateParams","authorizationService",function(e,t,n,r){e.$on("$stateChangeStart",function(t,n,i){e.toState=n,e.toStateParams=i,g.isIdentityResolved()&&r.authorize(),m.getCurrentUser().then(function(e){e&&(e.lastActivity=Date.now(),y.update(e))})})}])},{"./angular-factories":3,"./controllers":10,"./directives":34,"./extensions/signature-repository":43,"./extensions/wormhole-repository":44,"./helpers":45,"./lib-config":46,"./services/theme-service.js":56,"./services/user-service.js":57,angular:78,"local/repositories":179,"local/repositories/bridge":176,"local/repositories/firebase-auth":177,"local/repositories/scanned-system":190,"local/repositories/signature":193,"local/repositories/system":196,"local/repositories/user":199,"local/repositories/wormhole":204,"local/repositories/wormhole-class":201,q:104,request:79}],2:[function(e,t){"use strict";var n=e("local/repositories/firebase-auth"),r=function(e,t){var r={};return r.authorize=function(){var r=n.identity().then(function(){var r=n.isAuthenticated();e.toState.data&&e.toState.data.roles&&e.toState.data.roles.length>0&&!n.isInAnyRole(e.toState.data.roles)&&(r?t.go("accessdenied"):(e.returnToState=e.toState,e.returnToStateParams=e.toStateParams,t.go("login",{retName:e.returnToState.name})))});return r},r};t.exports=r},{"local/repositories/firebase-auth":177}],3:[function(e){"use strict";var t=e("angular").module("wormholeMapper");t.factory("authorizationService",["$rootScope","$state",e("./authorization-service")])},{"./authorization-service":2,angular:78}],4:[function(e,t){"use strict";var n=e("local/repositories/authorization"),r=e("local/repositories/authorization/authorization.js"),i=e("local/eve-api/entity-search"),o=e("local/eve-api/image-server"),s=(e("q"),e("moment"),function(e){this.data=e,this.name=e.name,this.type=e.type,this.picUrl=e.getPortraitUrl(32),this.lastModified=e.lastModified,this.lastModifiedPretty=e.getLastModifiedPretty(),this.lastModifiedFuzzy=e.getLastModifiedFuzzy(),this.note=e.getShortNote(),this.longNote=e.noteIsShort()?null:e.note}),a={name:function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1},type:function(e,t){return e.type<t.type?-1:1},lastModified:function(e,t){return e.lastModified===t.lastModified?a.name(e,t):e.lastModified<t.lastModified?1:-1}};t.exports=function(e){function t(){e.safeApply(function(){var t=n.getArray().map(function(e){return new s(e)}).sort(u);e.items=t})}n.initialize().then(t),n.changed(t);var u=a.name;e.sort=function(e){var n=a[e];if(n===u){var r=u;u=function(e,t){return-1*r(e,t)}}else u=n;t()},e.authSelect=function(t){e.searchQuery=t},e.$watch("searchQuery",function(t){e.search(t)}),e.search=function(t){i(t).then(function(t){e.safeApply(function(){if(t){e.searchResult={id:t.id,name:t.name,type:t.type,corp:t.corporation,alliance:t.alliance,picUrl:o(t.id,t.type,128)};var i=n.getArray().find(function(e){return console.log(e,t),e.id===t.id&&e.type===t.type});console.log("existing",i),e.searchAuth=i?i.clone():new r}else e.searchResult=null})})},e.add=function(e,t){n.set(e.id,e.name,e.type,t)},e.delete=function(e){n.delete(e)},e.$on("$destroy",function(){n.changedRemoveHandler(t)})}},{"local/eve-api/entity-search":109,"local/eve-api/image-server":110,"local/repositories/authorization":172,"local/repositories/authorization/authorization.js":171,moment:102,q:104}],5:[function(e,t){t.exports=e("./access-control.js")},{"./access-control.js":4}],6:[function(e,t){"use strict";var n=e("local/repositories/bridge"),r=e("local/repositories/bridge/bridge.js");t.exports=function(e,t){t.bridge?(e.bridge=t.bridge.clone(),e.isExisting=!0):e.bridge=new r,e.$watchGroup(["bridge.homeSystemId","bridge.bridgeType"],function(){var t=e.bridge.bridgeType;t=t?t:"bridge";var n=e.bridge.getHomeSystem();n=n?n.systemName:"new",n=e.homeSystem?e.homeSystem.systemName:n,e.bridge.name="The "+n+" "+t}),e.bridgeTypes=r.possibleBridgeTypes,e.canSave=function(){return e.bridge.homeSystemId&&e.bridge.bridgeType},e.save=function(){e.bridge.id?n.updateBridge(e.bridge):n.createBridge(e.bridge),e.close()},e.delete=function(){n.deleteBridge(e.bridge),e.close()},e.close=function(){e.$parent.unselect()}}},{"local/repositories/bridge":176,"local/repositories/bridge/bridge.js":175}],7:[function(e,t){"use strict";var n=e("q"),r=e("local/repositories/bridge"),i=e("local/repositories/scanned-system");t.exports=function(e,t){function o(){e.safeApply(function(){var t=s.getSystemsInRange().map(function(t){t=i.getSystem(t.id);var n={data:t,jumpsHome:e.homeSystem.getStaticJumpsToSystem(t),jumpsBridge:s.getHomeSystem().getStaticJumpsToSystem(t),name:t.systemName,dist:t.getDistanceFromSystem(s.getHomeSystem()).toFixed(2)+"ly",isPinned:t.isPinned};return n}).sort(function(e,t){return e.dist<t.dist?-1:1});e.systems=t})}var s=t.bridge;e.bridge=s,e.homeSystem=siteConfig.homeSystem,e.jumpsMode="bridge",n.all([r.initialize(),i.initialize()]).then(o),r.bridgesChanged(o),i.systemsChanged(o),e.toggleJumpMode=function(){e.jumpsMode="bridge"===e.jumpsMode?"home":"bridge"},e.togglePinned=function(e){e.isPinned=!e.isPinned,i.updateSystem(e)},e.close=function(){e.$parent.unselect()},e.$on("$destroy",function(){r.bridgesChangedRemoveHandler(o),i.systemsChangedRemoveHandler(o)})}},{"local/repositories/bridge":176,"local/repositories/scanned-system":190,q:104}],8:[function(e,t){"use strict";var n=e("local/repositories/bridge"),r=function(e){this.bridge=e,this.homeSystem=e.getHomeSystem(),this.name=e.name,this.bridgeRange=e.getBridgeRange()+" light years",this.bridgeType=e.getBridgeTypePretty(),this.systemsInRange=e.getSystemsInRange().length},i={homeSystem:function(e,t){return e.homeSystem===t.homeSystem?0:e.homeSystem.systemName<t.homeSystem.systemName?-1:1},type:function(e,t){return e.bridgeType===t.bridgeType?i.homeSystem(e,t):e.bridgeType<t.bridgeType?-1:1},systemsInRange:function(e,t){return e.systemsInRange==t.systemsInRange?0:e.systemsInRange<t.systemsInRange?-1:1}};t.exports=function(e,t){function o(){e.safeApply(function(){var t=n.getBridgesArray().map(function(e){return new r(e)}).sort(s);e.bridges=t})}n.initialize().then(o),n.bridgesChanged(o);var s=i.homeSystem;e.edit=function(n){e.selected===n?e.unselect():(e.selected=n,t.go("bridge-list.edit",{bridge:n.bridge}))},e.create=function(){e.selected=void 0,t.go("bridge-list.edit",{bridgeDetails:null})},e.unselect=function(){e.selected=void 0,t.go("bridge-list")},e.systemsInRange=function(n){e.selected=n,t.go("bridge-list.in-range",{bridge:n.bridge})},e.sort=function(e){var t=i[e];if(t===s){var n=s;s=function(e,t){return-1*n(e,t)}}else s=t;o()},e.$on("$destroy",function(){n.bridgesChangedRemoveHandler(o)})}},{"local/repositories/bridge":176}],9:[function(e,t){"use strict";var n=e("../services/user-service"),r=e("local/repositories/firebase-auth"),i=e("../services/theme-service.js"),o=function(e,t){function o(t){if(t){var r={};t.roles.forEach(function(e){r[e]=!0}),n.getCurrentUser().then(function(t){e.safeApply(function(){e.user=t,e.userRoles=r})})}else e.user=null,e.roles={}}e.siteConfig=siteConfig,r.identity().then(function(e){o(e)}),r.principalChanged(function(e){o(e)}),e.setBodyClass=function(t){e.bodyClass=t},e.is=function(e){return t.includes(e)},e.logout=function(){r.logout(),t.go("index")},e.themes={},i.getAllThemes().sort().forEach(function(t){e.themes[t]=t.charAt(0).toUpperCase()+t.slice(1)}),delete e.themes.default,e.setTheme=function(e){i.saveTheme(e)},e.hasTheme=function(e){return e===i.getCurrentTheme()}};t.exports=o},{"../services/theme-service.js":56,"../services/user-service":57,"local/repositories/firebase-auth":177}],10:[function(e){"use strict";var t=e("angular").module("wormholeMapper");t.controller("GlobalController",["$scope","$state","$timeout",e("./global-controller.js")]),t.controller("BridgeListController",["$scope","$state",e("./bridge-list/bridge-list.js")]),t.controller("BridgeEditController",["$scope","$stateParams",e("./bridge-list/bridge-list.edit.js")]),t.controller("BridgeSystemsInRangeController",["$scope","$stateParams",e("./bridge-list/bridge-list.in-range.js")]),t.controller("LoginController",["$scope","$state",e("./login/login.js")]),t.controller("LoginReturnController",["$scope","$state","$timeout",e("./login/login-return.js")]),t.controller("MapController",["$scope","$state",e("./map")]),t.controller("Map2Controller",["$scope","$state",e("./map/map2.js")]),t.controller("RouteFinderSearchController",["$scope","$state","$timeout",e("./route-finder/route-finder.search.js")]),t.controller("RouteFinderController",["$scope","$state","$stateParams","$timeout",e("./route-finder/route-finder.display.js")]),t.controller("SystemListController",["$scope","$state","$timeout","$q",e("./system-list/system-list.js")]),t.controller("SystemDetailsController",["$scope","$state","$stateParams","$q",e("./system-list/system-list.details.js")]),t.controller("WormholeListController",["$scope","$state","$timeout",e("./wormhole-list/wormhole-list.js")]),t.controller("WormholeEditController",["$scope","$stateParams",e("./wormhole-list/wormhole-list.edit.js")]),t.controller("UserListController",["$scope","$state",e("./user-list")]),t.controller("UserDetailsController",["$scope","$state","$stateParams",e("./user-details")]),t.controller("LeaderboardController",["$scope","$state",e("./leaderboard")]),t.controller("AccessControlController",["$scope","$state",e("./access-control")]),t.controller("PaymentsController",["$scope","$state",e("./payments")]),t.controller("RouteLogController",["$scope",e("./route-log")])},{"./access-control":5,"./bridge-list/bridge-list.edit.js":6,"./bridge-list/bridge-list.in-range.js":7,"./bridge-list/bridge-list.js":8,"./global-controller.js":9,"./leaderboard":11,"./login/login-return.js":13,"./login/login.js":14,"./map":15,"./map/map2.js":17,"./payments":18,"./route-finder/route-finder.display.js":20,"./route-finder/route-finder.search.js":21,"./route-log":22,"./system-list/system-list.details.js":24,"./system-list/system-list.js":25,"./user-details":26,"./user-list":28,"./wormhole-list/wormhole-list.edit.js":31,"./wormhole-list/wormhole-list.js":32,angular:78}],11:[function(e,t){"use strict";t.exports=e("./leaderboard.js")},{"./leaderboard.js":12}],12:[function(e,t){"use strict";{var n=e("local/repositories/user"),r=e("local/repositories/leaderboard"),i=e("q");e("moment")}t.exports=function(e){function t(){e.safeApply(function(){var e=n.getArray().map(function(e){var t=r.get(e.id);return{usr:e,ldr:t}});o(e)})}function o(t){e.hasLoadedLeaderboard=!0;var n=Date.now(),r=n-864e5,i=t.map(function(e){return{usr:e.usr,data:e.ldr.getTotal()}}),o=t.map(function(e){return{usr:e.usr,data:e.ldr.getDayForTime(n)}}).filter(function(e){return e.data}),a=t.map(function(e){return{usr:e.usr,data:e.ldr.getDayForTime(r)}}).filter(function(e){return e.data}),u=t.map(function(e){return{usr:e.usr,data:e.ldr.getDaysTotal(10)}}).filter(function(e){return e.data});e.whAdded={today:s(o,"wormholesAdded"),yesterday:s(a,"wormholesAdded"),last10:s(u,"wormholesAdded"),allTime:s(i,"wormholesAdded")},e.whComplete={today:s(o,"totalWormholesCompleted"),yesterday:s(a,"totalWormholesCompleted"),last10:s(u,"totalWormholesCompleted"),allTime:s(i,"totalWormholesCompleted")}}function s(e,t){return e.map(function(e){return{user:e.usr,score:e.data[t]}}).filter(function(e){return e.score>0})}i.all([n.initialize(),r.initialize()]).then(t),n.changed(t),r.changed(t),e.$on("$destroy",function(){r.changedRemoveHandler(t),n.changedRemoveHandler(t)})}},{"local/repositories/leaderboard":180,"local/repositories/user":199,moment:102,q:104}],13:[function(e,t){var n=e("../../services/user-service");t.exports=function(e,t,r){function i(r){var i=r.characterInfo,o=r.token;e.statusText="Authenticating to database...",n.login(o,i).then(function(){e.statusText="Success!",t.go("system-list")}).fail(function(){e.statusText=errorMsg,e.failed=!0})}e.loginContacts=siteConfig.loginContacts;var o=t.params.code;o||t.params.dev||t.go("login");var s=siteConfig.serverLoginUrl,a={type:siteConfig.type,authCode:o};return siteConfig.devCodeO&&"o"===t.params.dev?void i({token:siteConfig.devCodeO}):siteConfig.devCodeP&&"p"===t.params.dev?void i({token:siteConfig.devCodeP}):($.post(s,a).done(function(e){i(e)}).fail(function(t){r(function(){e.failed=!0,e.statusText=t.responseText?t.responseText:"Login request failed in unknown manner. Check Noscript."})}),e.failed=!1,void(e.statusText="Querying login server..."))}},{"../../services/user-service":57}],14:[function(e,t){t.exports=function(e,t){var n=siteConfig.redirectUri.replace("#","%23"),r=siteConfig.clientId,i="",o=siteConfig.ssoHost+"/oauth/authorize/?response_type=code&redirect_uri={0}&client_id={1}&scope=&state={2}".format(n,r,i);e.ssoUrl=o,e.returnToState=t.params.retName}},{}],15:[function(e,t){t.exports=e("./map.js")},{"./map.js":16}],16:[function(e,t){var n=e("local/repositories/system"),r=e("local/repositories/scanned-system"),i=e("local/repositories/wormhole"),o=(e("local/pathfinder"),e("../../services/sigma-js-service")),s=e("q");t.exports=function(e){e.setBodyClass("hide-background-image"),s.all([n.initialize(),i.initialize(),r.initialize()]).done(function(){var e=document.getElementById("sigma-container"),t=new o(e);t.createData(n.getSystemsArray(),i.getArray()),t.render()}),e.$on("$destroy",function(){e.setBodyClass(null)})}},{"../../services/sigma-js-service":51,"local/pathfinder":159,"local/repositories/scanned-system":190,"local/repositories/system":196,"local/repositories/wormhole":204,q:104}],17:[function(e,t){var n=e("local/repositories/system"),r=e("local/repositories/scanned-system"),i=e("local/repositories/wormhole"),o=(e("local/pathfinder"),e("q")),s=e("../../services/viva-graph-service");t.exports=function(e){var t={};e.setBodyClass("hide-background-image"),o.all([n.initialize(),i.initialize(),r.initialize()]).done(function(){var n=document.getElementById("map-container");t=s(n),t.run(),t.toggleAutoLayout(),e.safeApply(function(){e.hasInitialized=!0})}),e.autoLayoutRunning=!0,e.toggleAutolayout=function(){t.toggleAutoLayout(),e.autoLayoutRunning=!e.autoLayoutRunning},e.savePositions=function(){t.savePositions()},e.loadPositions=function(){t.loadPositions()},e.resetPositions=function(){t.resetPositions()},e.hasWormholes=!1,e.toggleWormholes=function(){if(e.hasWormholes)t.removeWormholes();else{var n=i.getArray();t.addWormholes(n)}e.hasWormholes=!e.hasWormholes},e.$on("$destroy",function(){e.setBodyClass(null)})}},{"../../services/viva-graph-service":58,"local/pathfinder":159,"local/repositories/scanned-system":190,"local/repositories/system":196,"local/repositories/wormhole":204,q:104}],18:[function(e,t){t.exports=e("./payments.js")},{"./payments.js":19}],19:[function(e,t){"use strict";function n(e){return a(e).format("0,0")+" ISK"}var r=e("local/repositories/user"),i=e("local/repositories/leaderboard"),o=e("local/repositories/metadata"),s=e("q"),a=(e("moment"),e("numeral")),u=function(e,t,n){this.data=e,this.leaderboard=t,this.name=e.name,this.alliance=e.alliance?e.alliance:"-",this.picUrl=e.getPortraitUrl(32);var r=t.getTotal(),i=t.getFindsPaidFor();this.consts=n,this.wormholesAdded=r.wormholesAdded-i.wormholesAdded,this.wormholesCompleted=r.wormholesCompleted-i.wormholesCompleted};u.prototype.getTotalPaid=function(){return this.leaderboard.totalPaidAmount},u.prototype.getTotalPaidPretty=function(){return n(this.getTotalPaid())},u.prototype.getAmountDue=function(){var e=this.wormholesAdded*this.consts.wormholesAdded,t=this.wormholesCompleted*this.consts.wormholesCompleted;return e+t},u.prototype.getAmountDuePretty=function(){return n(this.getAmountDue())};var c={};u.prototype.getReconciled=function(){return c[this.data.id]},u.prototype.toggleReconcile=function(){c[this.data.id]=!c[this.data.id]};var l={name:function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1},alliance:function(e,t){return e.alliance===t.alliance?l.name(e,t):e.alliance.toLowerCase()<t.alliance.toLowerCase()?-1:1},totalPaid:function(e,t){return e.getTotalPaid()===t.getTotalPaid()?l.name(e,t):e.getTotalPaid()<t.getTotalPaid()?1:-1},amountDue:function(e,t){return e.getAmountDue()===t.getAmountDue()?l.name(e,t):e.getAmountDue()<t.getAmountDue()?1:-1},added:function(e,t){return e.wormholesAdded===t.wormholesAdded?l.name(e,t):e.wormholesAdded<t.wormholesAdded?1:-1},completed:function(e,t){return e.wormholesCompleted===t.wormholesCompleted?l.name(e,t):e.wormholesCompleted<t.wormholesCompleted?1:-1}},h={noncontributors:function(e){return e.getTotalPaid()>0||e.wormholesAdded>0||e.wormholesCompleted>0}};t.exports=function(e){function t(){e.safeApply(function(){e.hasLoaded=!0,f.wormholesAdded=o.get("iskPerWormholeAdded"),f.wormholesCompleted=o.get("iskPerWormholeCompleted"),e.wormholeValues=f;var t={totalPaid:0,wormholesAdded:0,wormholesCompleted:0},s=r.getArray().map(function(e){var n=i.get(e.id),r=new u(e,n,f);return t.totalPaid+=r.getTotalPaid(),t.wormholesAdded+=r.wormholesAdded,t.wormholesCompleted+=r.wormholesCompleted,r});s=s.sort(d),s=s.filter(h.noncontributors),e.items=s,e.totals={totalPaid:n(t.totalPaid),wormholesAdded:t.wormholesAdded,wormholesCompleted:t.wormholesCompleted},Object.defineProperty(e.totals,"amountDue",{get:function(){var t=e.items.reduce(function(e,t){return e+t.getAmountDue()},0);return n(t)}})})}function a(e){var t=(e.data,e.leaderboard),n=e.getAmountDue(),r=t.totalPaidAmount,o=n+r;t.totalPaidAmount=o,t.setFindsPaidFor(t.getTotal()),i.update(t)}s.all([r.initialize(),i.initialize(),o.initialize()]).then(t);var d=l.name,f={wormholesAdded:0,wormholesCompleted:0,wormholesAddedPretty:function(){return n(this.wormholesAdded)},wormholesCompletedPretty:function(){return n(this.wormholesCompleted)}};e.sort=function(e){var n=l[e];if(n===d){var r=d;d=function(e,t){return-1*r(e,t)}}else d=n;t()},e.getTotalReconciled=function(){var t=e.items;if(!t)return!1;var r=t.reduce(function(e,t){return t.getReconciled()?e+t.getAmountDue():e},0);return n(r)},e.canSaveReconciliations=function(){var t=e.items;return t?t.some(function(e){return e.getReconciled()}):!1},e.saveReconciliations=function(){var n=e.items;n=n.filter(function(e){return e.getReconciled()});var r="Reconcile "+n.length+" payments? This is not reversible.",o=confirm(r);if(o){i.supressChanged(!0);for(var s=0;s<n.length;s++)a(n[s]);i.supressChanged(!1),c={},t()}},e.$watch("wormholeValues",function(e){void 0!=e&&(e.wormholesAdded=Number(e.wormholesAdded),e.wormholesCompleted=Number(e.wormholesCompleted),o.set("iskPerWormholeAdded",e.wormholesAdded),o.set("iskPerWormholeCompleted",e.wormholesCompleted))},!0),e.$on("$destroy",function(){o.changedRemoveHandler(t)})}},{"local/repositories/leaderboard":180,"local/repositories/metadata":185,"local/repositories/user":199,moment:102,numeral:103,q:104}],20:[function(e,t){"use strict";var n=e("local/repositories/bridge"),r=e("local/repositories/wormhole"),i=e("local/pathfinder"),o=e("../wormhole-list/wormhole-details.js"),s=e("../../models/ship-classes");t.exports=function(e,t,a){function u(){e.linksChanged=!0}function c(){e.linksChanged=!1,e.isFindingPaths=!0;var t=h.br.map(function(e){return n.getBridge(e)}),o=h.wh?r.getArray():[];console.log(h);var s={startSys:h.start,endSys:h.end,wormholes:o,bridges:t,highsec:h.hi,lowsec:h.lo,nullsec:h.nl,wspace:h.ws,maxPaths:h.mr,minBridgeDistance:h.mbd};i.findPaths(s).done(function(t){t.forEach(function(e){l(e)}),e.safeApply(function(){e.foundPaths=t,e.isFindingPaths=!1,e.hasFoundPaths=e.foundPaths.length>0})})}function l(e){e.routePartition.forEach(function(e){if("wormhole"===e.type){e.wormholeDetails=e.wormholes.map(function(e){return new o(e)});var t=e.startSystem;e.wormholeDetails.forEach(function(e){if(e.nearSystem=t,e.startSystem===t){e.farSystem=e.endSystem;var n=e.wormhole.getStartSignature()}else{e.farSystem=e.startSystem;var n=e.wormhole.getEndSignature()}e.wormholeId=n?n.id:"-",t=e.farSystem})}})}var h=a;return h.start&&h.end?(e.toggleExpandPartition=function(e){e.expanded=!e.expanded},e.recalculatePaths=c,e.shipClass=s.cruiser,e.showTimeToExpire=!1,e.toggleShowTimeToExpire=function(){e.showTimeToExpire=!e.showTimeToExpire},e.getPathTimeTooltip=function(t){return t.hasWormholes?e.showTimeToExpire?t.getAgeFuzzy():t.getDateExpiresFuzzy():null},c(),r.changed(u),n.bridgesChanged(u),void e.$on("$destroy",function(){r.changedRemoveHandler(u),n.bridgesChangedRemoveHandler(u)})):void t.go("route-finder")}},{"../../models/ship-classes":47,"../wormhole-list/wormhole-details.js":30,"local/pathfinder":159,"local/repositories/bridge":176,"local/repositories/wormhole":204}],21:[function(e,t){"use strict";var n=e("../../services/route-search-params-service"),r=e("../../services/user-service.js"),i=e("local/repositories/user"),o=e("local/repositories/route-log/l.js");t.exports=function(e,t){function s(){if(e.startSystem&&e.endSystem){n.setParams(e);var r=n.getParamsForFinder();r.start=e.startSystem,r.end=e.endSystem,a(r.start,r.end),t.go("route-finder.find",r)}else t.go("route-finder")}function a(e,t){r.getCurrentUser().done(function(n){n&&(n.routesSearched++,i.update(n),o(n.id,e.id,t.id))})}n.initialize().done(function(){e.safeApply(function(){n.getParamsToEditor(e)})}),console.log(e.maxQueryTime),e.$watch("systemTypes",s,!0),e.$watch("transportMethods",s,!0),e.$watch("minBridgeDistance",s),e.$watch("maxResults",s),e.$watchGroup(["startSystem","endSystem"],s),e.reverse=function(){var t=e.startSystem;e.startSystem=e.endSystem,e.endSystem=t}}},{"../../services/route-search-params-service":48,"../../services/user-service.js":57,"local/repositories/route-log/l.js":188,"local/repositories/user":199}],22:[function(e,t){t.exports=e("./route-log.js")},{"./route-log.js":23}],23:[function(e,t){"use strict";var n=e("local/repositories/route-log"),r=e("local/repositories/system"),i=e("local/repositories/user"),o=e("q"),s=e("moment"),a=function(e){this.data=e,this.startSystem=r.getSystem(e.ssid),this.endSystem=r.getSystem(e.esid),this.user=i.get(e.uid),this.time=e.time,this.id=""+e.time+e.uid,this.datePretty=s(e.time).format("YYYY-MM-DD"),this.timePretty=s(e.time).format("HH:mm:ss"),this.nullsec=this.startSystem.isNullsec()||this.endSystem.isNullsec(),this.lowsec=this.startSystem.isLowsec()||this.endSystem.isLowsec(),this.highsec=this.startSystem.isHighsec()||this.endSystem.isHighsec(),this.wspace=this.startSystem.isWormholeSpace()||this.endSystem.isWormholeSpace()};t.exports=function(e){function t(){e.safeApply(function(){var t=n.getArray().map(function(e){return new a(e)}).sort(u);e.items=t})}var s=o.all([n.initialize(),r.initialize(),i.initialize()]);s.then(t),n.changed(t);var u=function(e,t){return e.time<t.time?1:-1};e.$on("$destroy",function(){n.changedRemoveHandler(t)})}},{"local/repositories/route-log":187,"local/repositories/system":196,"local/repositories/user":199,moment:102,q:104}],24:[function(e,t){"use strict";var n=e("local/repositories/system"),r=e("local/repositories/scanned-system"),i=e("local/repositories/wormhole"),o=e("local/repositories/signature"),s=e("../../services/scanning-service"),a=e("../../services/route-search-params-service.js"),u=e("local/repositories/signature/signature.js"),c=e("local/repositories/scanned-system//scanned-system"),l=function(e){this.data=e,this.id=e.id,this.name=e.systemName,this.lastScannedPretty=e.getLastScannedPretty(),this.lastScannedFuzzy=e.getLastScannedFuzzy(),this.lastPartialScanPretty=e.getLastPartialScanPretty(),this.lastPartialScanFuzzy=e.getLastPartialScanFuzzy(),this.security=e.getSecurityPretty(),this.region=e.regionName,this.numWormholes=e.getWormholes().length,this.dotlanLink="http://evemaps.dotlan.net/system/"+this.name,this.wormhol_esLink="http://wh.pasta.gg/"+this.name,this.eveeyeLink="https://eveeye.com/?opt=W&system="+this.name,this.isWspace=e.isWormholeSpace();var t=siteConfig.homeSystem;this.homeSystem=t.systemName,this.distance=e.getStaticJumpsToSystem(t),null===this.distance&&(this.distance="∞"),this.note=e.note,this.connectedSystems=e.getGates()},h=function(e,t,n){this.wormhole=e,this.signature=n,this.newSig=this.signature,e.startSystemId==t.id?(this.destination=e.getEndSystem(),this.destType="end"):e.endSystemId==t.id&&(this.destination=e.getStartSystem(),this.destType="start"),this.wormholeClass=e.getWormholeClass(),this.id=this.signature?this.signature.id:"-",this.staticJumps=e.getStaticJumps(),this.staticJumpsNoHighsec=e.getStaticJumpsNoHighsec();var r="∞";this.equivJumps=this.staticJumps?this.staticJumps:r,this.equivLowsecJumps=this.staticJumpsNoHighsec?this.staticJumpsNoHighsec:r;var i=e.getCreator();this.user=i?i.name:null,this.note=e.getShortNote(),this.longNote=e.noteIsShort()?null:e.note};h.prototype.isDuplicate=function(){return this.wormhole.hasDuplicate()};var d=function(e){this.sig=e,this.note=e.getShortNote(),this.longNote=e.noteIsShort()?null:e.note},f=function(e,t,f,p){function g(e){v=e,m(v)}function m(t){e.sys=new l(t);var n=s.getUnusedSignatures(y),r=s.getWormholesWithSignatures(t);e.wormholes=r.map(function(e){return new h(e.wormhole,y,e.signature)}),e.sigs=n.map(function(e){return new d(e)}),e.show=!0}var y=n.getSystemByName(f.systemName);if(!y)return void t.go("system-list");e.$parent.setSelected(y);var v,b=p.all([r.initialize(),i.initialize(),o.initialize()]);b.then(function(){var e=r.getSystem(y.id);r.systemChanged(y.id,g),g(e)}),e.sigTypes=u.allowedTypes,e.togglePinned=function(){v.isPinned=!v.isPinned,r.updateSystem(v)},e.toggleStarred=function(){v.isStarred=!v.isStarred,r.updateSystem(v)},e.toggleEditNote=function(){e.editingNote||(e.newNote=e.sys.note),e.editingNote=!e.editingNote},e.isSafeNoteLength=function(){return!e.newNote||e.newNote.length<c.MAX_NOTE_LENGTH},e.saveNote=function(){v.note=e.newNote,e.toggleEditNote(),r.updateSystem(v)},e.markAsScanned=function(){s.makeSystemObservation(y)},e.findRouteTo=function(){var e=siteConfig.homeSystem,n=y;a.setSystems(e,n),t.go("route-finder")},e.togglePasteSignatues=function(){e.pastingScanResults=!e.pastingScanResults},e.pasteScanResults=function(){if(!e.pastedScanResultData)return void(e.pastingScanResults=!1);var t=e.pastedScanResultData;e.pastedScanResultData=null;var n=s.pasteSignatureData(y,t);n?e.pastingScanResults=!1:alert("Couldn't parse signatures. Did you paste the correct data?")},e.todo=function(){alert("Unimplemented")},e.go=function(e){t.go("system-list.details",{systemName:e.systemName})},e.newWormhole=function(){e.wormholes.forEach(function(e){e.isEditing=!1}),e.showNewWormhole=!0},e.editWormhole=function(t){e.showNewWormhole=!1,t.isEditing?t.isEditing=!1:(e.wormholes.forEach(function(e){e.isEditing=!1}),t.isEditing=!0)},e.deleteWormhole=function(e){i.delete(e)},e.closeWormhole=function(){e.showNewWormhole=!1,e.wormholes.forEach(function(e){e.isEditing=!1})},e.observeWormhole=function(e){s.makeWormholeObservation(e)},e.newSig=function(){e.sigs.forEach(function(e){e.isEditing=!1}),e.showNewSig=!0},e.editSig=function(t){e.showNewSig=!1,t.isEditing?t.isEditing=!1:(e.sigs.forEach(function(e){e.isEditing=!1}),t.isEditing=!0)},e.deleteSig=function(e){o.deleteSignature(e)},e.closeSig=function(){e.showNewSig=!1,e.sigs.forEach(function(e){e.isEditing=!1})},e.observeSig=function(e){s.makeSignatureObservation(e)},e.$on("$destroy",function(){e.$parent.setSelected(null),r.systemChangedRemoveHandler(y.id,g)})};t.exports=f},{"../../services/route-search-params-service.js":48,"../../services/scanning-service":49,"local/repositories/scanned-system":190,"local/repositories/scanned-system//scanned-system":192,"local/repositories/signature":193,"local/repositories/signature/signature.js":195,"local/repositories/system":196,"local/repositories/wormhole":204}],25:[function(e,t){"use strict";
var n=e("local/repositories/scanned-system"),r=e("local/repositories/wormhole"),i=function(e){this.data=e,this.id=e.id,this.name=e.systemName,this.lastScannedPretty=e.getLastScannedPretty(),this.lastScannedFuzzy=e.getLastScannedFuzzy(),this.lastPartialScanPretty=e.getLastPartialScanPretty(),this.lastPartialScanFuzzy=e.getLastPartialScanFuzzy();var t=siteConfig.homeSystem;this.distance=e.getStaticJumpsToSystem(t),null===this.distance&&(this.distance="∞"),this.security=e.getSecurityPretty(),this.region=e.regionName,this.numWormholes=e.getWormholes().length,this.lastScanned=e.lastScanned,this.lastPartial=e.lastPartialScan};i.prototype.isRecent=function(e){var t="full"==e?this.lastScanned:this.lastPartial;return t+288e5>(new Date).getTime()},i.prototype.isMedium=function(e){var t="full"==e?this.lastScanned:this.lastPartial;return!this.isRecent(e)&&t+864e5>(new Date).getTime()},i.prototype.isOld=function(e){return!this.isRecent(e)&&!this.isMedium(e)},i.prototype.isSelected=function(e){return e&&this.id==e.id};var o={pinned:function(e,t){return e.data.isPinned&&t.data.isPinned?o.lastScanned(e,t):e.data.isPinned?-1:1},starred:function(e,t){return e.data.isStarred&&t.data.isStarred||!e.data.isStarred&&!t.data.isStarred?o.pinned(e,t):e.data.isStarred?-1:1},name:function(e,t){return e.name<t.name?-1:1},lastScanned:function(e,t){var n=e.data.lastScanned,r=t.data.lastScanned;return n==r?o.name(e,t):r>n?-1:1},lastPartialScan:function(e,t){var n=e.data.lastPartialScan,r=t.data.lastPartialScan;return n==r?o.name(e,t):r>n?-1:1},wormholes:function(e,t){return e.numWormholes==t.numWormholes?0:e.numWormholes<t.numWormholes?-1:1},distance:function(e,t){var n=isNumber(e.distance)?e.distance:1e3,r=isNumber(t.distance)?t.distance:1e3;return n==r?0:r>n?-1:1},region:function(e,t){return e.region==t.region?o.lastScanned(e,t):e.region<t.region?-1:1}},s=function(e,t,s,a){function u(){e.safeApply(function(){var t=n.getSystemsArray().filter(function(e){return e.isPinned||e.isStarred}).map(function(e){return new i(e)}).sort(h);e.scannedSystems=t})}var c=a.all([n.initialize(),r.initialize()]);c.then(u),n.systemsChanged(u),r.changed(u),e.home=siteConfig.homeSystem.systemName;var l=function(t,n){return"full"==e.scanMode?o.lastScanned(t,n):o.lastPartialScan(t,n)},h=o.starred;e.scanMode="full";var d=function(t,n){return"distance"==e.distanceMode?o.distance(t,n):o.region(t,n)};e.distanceMode="distance",e.sort=function(e){var t=o[e];if("lastScan"==e?t=l:"distance"==e&&(t=d),t===h){var n=h;h=function(e,t){return-1*n(e,t)}}else h=t;u()},e.toggleScanMode=function(){e.scanMode="full"==e.scanMode?"partial":"full",u()},e.toggleDistanceMode=function(){e.distanceMode="distance"==e.distanceMode?"region":"distance",u()},e.$watch("selectedSystem",function(e){e?t.go("system-list.details",{systemName:e.systemName}):t.go("system-list")}),e.clearSearch=function(){t.go("system-list")},e.go=function(t){e.setSelected(e.selectedSystem==t?null:t)},e.setSelected=function(t){t!==e.selectedSystem&&(e.selectedSystem=t,e.searchQuery=t?t.systemName:null)},e.$on("$destroy",function(){n.systemsChangedRemoveHandler(u),r.changedRemoveHandler(u)})};t.exports=s},{"local/repositories/scanned-system":190,"local/repositories/wormhole":204}],26:[function(e,t){"use strict";t.exports=e("./user-details.js")},{"./user-details.js":27}],27:[function(e,t){"use strict";var n=e("local/repositories/user"),r=e("local/repositories/leaderboard"),i=e("q"),o=(e("moment"),function(e,t){this.data=e,this.id=e.id,this.name=e.name,this.corporation=e.corporation,this.alliance=e.alliance?e.alliance:"-",this.picUrl=e.getPortraitUrl(64);var n=t.getTotal();this.totals=n,this.wa=n.wormholedAdded,this.wpc=n.wormholesPartCompleted,this.fwpc=n.foreignWormholesPartCompleted,this.wc=n.wormholesCompleted,this.fwc=n.foreignWormholesCompleted,this.sps=n.systemsPartScanned,this.ss=n.systemsFullScanned,this.l=n.likes}),s=function(e){this.datePretty=e.getPeriodStartPretty(),this.totals=e,this.wa=e.wormholesAdded,this.wpc=e.wormholesPartCompleted+e.foreignWormholesPartCompleted,this.wc=e.wormholesCompleted+e.foreignWormholesCompleted,this.sps=e.systemsPartScanned,this.ss=e.systemsFullScanned,this.l=e.likes};t.exports=function(e,t,a){function u(){e.safeApply(function(){var i=n.getByName(c);if(!i)return void t.go("users");var a=r.get(i.id),u=new o(i,a),l=a.getDays(10).map(function(e){return new s(e)});e.usrDtls=u,e.days=l})}var c=a.user;i.all([n.initialize(),r.initialize()]).then(u),n.changed(u),r.changed(u),e.$on("$destroy",function(){r.changedRemoveHandler(u),n.changedRemoveHandler(u)})}},{"local/repositories/leaderboard":180,"local/repositories/user":199,moment:102,q:104}],28:[function(e,t){"use strict";t.exports=e("./user-list.js")},{"./user-list.js":29}],29:[function(e,t){"use strict";var n=e("local/repositories/user"),r=e("local/repositories/leaderboard"),i=e("q"),o=(e("moment"),function(e,t){this.data=e,this.name=e.name,this.corporation=e.corporation,this.alliance=e.alliance?e.alliance:"-",this.picUrl=e.getPortraitUrl(32),this.lastActivity=e.lastActivity,this.lastActivityPretty=e.getLastActivityPretty(),this.lastActivityFuzzy=e.getLastActivityFuzzy(),this.routesSearched=e.routesSearched,this.wormholesAdded=t.getTotal().wormholesAdded,this.lastModified=t.lastModified,this.lastModifiedPretty=t.getLastModifiedPretty(),this.lastModifiedFuzzy=t.getLastModifiedFuzzy()}),s={name:function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1},corporation:function(e,t){return e.corporation==t.corporation?s.name:e.corporation.toLowerCase()<t.corporation.toLowerCase()?-1:1},alliance:function(e,t){return e.alliance==t.alliance?s.corporation:e.alliance.toLowerCase()<t.alliance.toLowerCase()?-1:1}},a=function(e){return s[e]||(s[e]=function(t,n){return t[e]===n[e]?s.name(t,n):t[e]<n[e]?1:-1}),s[e]};t.exports=function(e,t){function u(){e.safeApply(function(){var t=n.getArray().map(function(e){var t=r.get(e.id);return new o(e,t)}).sort(c);e.items=t})}i.all([n.initialize(),r.initialize()]).then(u),n.changed(u),r.changed(u);var c=s.name;e.select=function(e){t.go("user-details",{user:e.name})},e.sort=function(e){var t=a(e);if(t===c){var n=c;c=function(e,t){return-1*n(e,t)}}else c=t;u()},e.$on("$destroy",function(){r.changedRemoveHandler(u),n.changedRemoveHandler(u)})}},{"local/repositories/leaderboard":180,"local/repositories/user":199,moment:102,q:104}],30:[function(e,t){"use strict";var n=function(e){this.wormhole=e,this.startSystem=e.getStartSystem(),this.endSystem=e.getEndSystem();var t=e.getClosestEndToHome();if(t)this.nearSystem=t,this.farSystem=t===this.startSystem?this.endSystem:this.startSystem;else{var n=this.startSystem.systemName<this.endSystem.systemName;this.nearSystem=n?this.startSystem:this.endSystem,this.farSystem=n?this.endSystem:this.startSystem}this.dateFound=e.getDateFoundPretty(),this.dateFoundFuzzy=e.getDateFoundFuzzy(),this.dateExpires=e.getDateExpiresPretty(),this.dateExpiresFuzzy=e.getDateExpiresFuzzy(),this.className=e.getClassNamePretty(),this.wormholeClass=e.getWormholeClass(),this.maxShipSize=e.getMaxShipSizePretty(),this.staticJumps=e.getStaticJumps(),this.staticJumpsNoHighsec=e.getStaticJumpsNoHighsec();var r="∞";this.equivJumps=this.staticJumps?this.staticJumps:r,this.equivLowsecJumps=this.staticJumpsNoHighsec?this.staticJumpsNoHighsec:r,this.closestEndName=t?t.systemName:"(no route)",this.distanceFromHome=t?t.getStaticJumpsToSystem(siteConfig.homeSystem):r,this.isDuplicate=e.hasDuplicate(),this.transientDuplicate=!1,this.note=e.getShortNote(),this.longNote=e.noteIsShort()?null:e.note;var i=e.getCreator();this.user=i?i.name:null};t.exports=n},{}],31:[function(e,t){"use strict";var n=e("local/repositories/wormhole"),r=e("local/repositories/wormhole/wormhole.js"),i=function(e,t){t.wormhole?(console.log(t),e.wormhole=t.wormhole.clone(),e.isExisting=!0):e.wormhole=new r,e.$watchGroup(["wormhole.startSystemId","wormhole.endSystemId"],function(){e.$parent.setTransientDuplicate(e.wormhole)}),e.canSave=function(){var t=e.wormhole.startSystemId&&e.wormhole.endSystemId,n=!e.wormhole.noteIsTooLong();return t&&n},e.save=function(){e.wormhole.id?n.update(e.wormhole):n.create(e.wormhole),e.close()},e.delete=function(){n.delete(e.wormhole),e.close()},e.close=function(){e.$parent.unselect()}};t.exports=i},{"local/repositories/wormhole":204,"local/repositories/wormhole/wormhole.js":206}],32:[function(e,t){"use strict";var n=e("./wormhole-details"),r=e("local/repositories/wormhole"),i={near:function(e,t){return e.nearSystem===t.nearSystem&&e.farSystem==t.farSystem?0:e.nearSystem===t.nearSystem?i.far(e,t):e.nearSystem.systemName<t.nearSystem.systemName?-1:1},far:function(e,t){return e.farSystem===t.farSystem?i.near(e,t):e.farSystem.systemName<t.farSystem.systemName?-1:1},"class":function(e,t){return e.class==t.class?0:e.class<t.class?-1:1},timeFound:function(e,t){var n=e.wormhole.getDateFound(),r=t.wormhole.getDateFound();return r>n?1:-1},timeExpires:function(e,t){var n=e.wormhole.getDateExpires(),r=t.wormhole.getDateExpires();return r>n?-1:1},jumps:function(e,t){var n=isNumber(e.staticJumps)?e.staticJumps:1e3,r=isNumber(t.staticJumps)?t.staticJumps:1e3;return n===r?i.near(e,t):r>n?-1:1},distance:function(e,t){var n=isNumber(e.distanceFromHome)?e.distanceFromHome:1e3,r=isNumber(t.distanceFromHome)?t.distanceFromHome:1e3;return n===r?i.near(e,t):r>n?-1:1}},o=function(e,t,o){function s(){o(function(){var t=r.getArray().map(function(e){return new n(e)}).sort(a);e.wormholes=t})}e.home=siteConfig.homeSystem;var a=i.timeFound;r.initialize().then(s),r.changed(s),e.edit=function(n){e.selected===n?e.unselect():(e.selected=n,t.go("wormhole-list.edit",{wormhole:n.wormhole}))},e.create=function(){e.selected=void 0,t.go("wormhole-list.edit")},e.unselect=function(){e.selected=void 0,e.setTransientDuplicate(null),t.go("wormhole-list")},e.setTransientDuplicate=function(t){e.wormholes.forEach(function(e){e.isTransientDuplicate=t&&t.id!==e.wormhole.id?e.wormhole.isDuplicate(t):!1})},e.sort=function(e){var t=i[e];if(t===a){var n=a;a=function(e,t){return-1*n(e,t)}}else a=t;s()},e.$on("$destroy",function(){r.changedRemoveHandler(s)})};t.exports=o},{"./wormhole-details":30,"local/repositories/wormhole":204}],33:[function(e){var t=e("angular").module("wormholeMapper");t.directive("triggerOnEnter",function(){var e={restrict:"A"};return e.link=function(e,t,n){$(t).keypress(function(t){13==t.which&&e.$eval(n.triggerOnEnter)})},e}),t.directive("systemDetailsTooltip",function(){var e={restrict:"A"};return e.scope={system:"=systemDetailsTooltip",tooltipPlacement:"@"},e.controller=["$scope","$state",function(e,t){e.clicked=function(){t.go("system-list.details",{systemName:e.system.systemName})}}],e.link=function(e,t){t=$(t);var n=e.system,r=n.getWormholes();if(r.length>0)var i=1===r.length?"1 wormhole":"{0} wormholes".format(r.length);var o="{0} / {1}".format(n.getSecurityPretty(),n.regionName);i&&(o=o+" / "+i);var s={title:o,placement:e.tooltipPlacement};t.tooltip(s),t.is("a")&&t.on("click",function(t){e.clicked(),t.stopPropagation()})},e}),t.directive("wormholeClassDetailsTooltip",function(){var e={restrict:"A"};return e.scope={"class":"=wormholeClassDetailsTooltip",tooltipPlacement:"@"},e.link=function(e,t){if(e.class){t=$(t);var n={title:e.class.getTooltip(),placement:e.tooltipPlacement,trigger:"hover"};t.tooltip(n);var r="<div><strong>{0}</strong>: {1}</div>",i="<div>",o=e.class.getPopoverData();for(key in o)i+=r.format(key,o[key]);i+="</div>";var s={title:e.class.className,content:i,html:!0,trigger:"focus"};t.attr("tabindex",0),t.popover(s),t.is("a")&&t.on("click",function(e){console.log("lol"),t.tooltip("hide"),e.stopPropagation()})}},e}),t.directive("focusOnCondition",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){t.$watch(r.focusOnCondition,function(t){t&&e(function(){n[0].focus()})})}}}])},{angular:78}],34:[function(e){"use strict";var t=e("angular").module("wormholeMapper");e("./directives"),t.directive("toggleList",e("./toggle-list")),t.directive("toggleListPopover",["$compile",e("./toggle-list-popover")]),t.directive("editWormhole",e("./system-list-directives/edit-wormhole")),t.directive("editSignature",e("./system-list-directives/edit-signature")),t.directive("systemSearch",["$compile",e("./repository-search/system-search")]),t.directive("wormholeSearch",["$compile",e("./repository-search/wormhole-class-search")]),t.directive("leaderboardPart",e("./leaderboard-part")),t.directive("sigmaJs",e("./sigma.js"))},{"./directives":33,"./leaderboard-part":35,"./repository-search/system-search":36,"./repository-search/wormhole-class-search":37,"./sigma.js":38,"./system-list-directives/edit-signature":39,"./system-list-directives/edit-wormhole":40,"./toggle-list":42,"./toggle-list-popover":41,angular:78}],35:[function(e,t){"use strict";var n=function(){var e={restrict:"E",templateUrl:"views/directives/leaderboard-part.html",scope:{inData:"=leaderboardStats",title:"@title",showTotal:"@showTotal",expandable:"@expandable",numRecords:"@maxRecords"},controller:["$scope","$state",function(e){var t,n,r;e.numRecords||(e.numRecords=10),void 0===e.showTotal&&(e.showTotal=!0),e.$watch("inData",function(){if(e.inData){e.hasLoaded=!0,e.total=0,e.remainder=0;var i=e.inData.sort(function(e,t){return e.score<t.score?1:-1}).map(function(t){return e.total+=t.score,{picUrl:t.user.getPortraitUrl(32),name:t.user.name,score:t.score}});t=i,n=i.slice(0,e.numRecords),r=i.slice(e.numRecords).reduce(function(e,t){return e+t.score},0),e.isExpanded=!1,e.data=n,e.remainder=r}}),e.toggleShowAll=function(){e.isExpanded?(e.isExpanded=!1,e.data=n,e.remainder=r):(e.isExpanded=!0,e.data=t,e.remainder=0)}}]};return e};t.exports=n},{}],36:[function(e,t){"use strict";var n=e("local/repositories/system"),r=function(e){var t={restrict:"A",priority:1e3,terminal:!0};return t.scope={systemSearch:"=",usrSearchQuery:"=searchQuery",useId:"@systemSearchUseId",initialSearch:"="},t.controller=["$scope","$timeout",function(e){if(e.systemSearch=e.systemSearch?e.systemSearch:null,e.systemSearch)if(e.useId){var t=n.getSystem(e.systemSearch);e.searchQuery=t?t.systemName:""}else e.searchQuery=e.systemSearch.systemName;else e.searchQuery=e.initialSearch;e.search=function(e,t){return n.searchSystems(e,t,!0)},e.$watch("systemSearch",function(t){t&&void 0!==e.usrSearchQuery&&(e.usrSearchQuery=t.systemName)}),e.$watch("usrSearchQuery",function(t){void 0!==t&&t!=e.searchQuery&&(e.searchQuery=t)}),e.$watch("searchQuery",function(t){void 0!==e.usrSearchQuery&&(e.usrSearchQuery=t);var r=n.getSystemByName(t);e.systemSearch=r?e.useId?r.id:r:null})}],t.link=function(t,n){n.attr("typeahead","system.systemName for system in search($viewValue,5)"),n.attr("ng-model","searchQuery"),n.removeAttr("system-search"),n.removeAttr("data-system-search"),e(n)(t)},t};t.exports=r},{"local/repositories/system":196}],37:[function(e,t){"use strict";var n=e("local/repositories/wormhole-class"),r=function(e){var t={restrict:"A",priority:1e3,terminal:!0};return t.scope={wormholeSearch:"=",usrSearchQuery:"=searchQuery",useId:"&wormholeSearchUseId",initialSearch:"="},t.controller=["$scope",function(e){if(e.wormholeSearch=e.wormholeSearch?e.wormholeSearch:null,e.wormholeSearch)if(e.useId){var t=n.getWormholeClass(e.wormholeSearch);e.searchQuery=t?t.className:""}else e.searchQuery=e.wormholeSearch.className;else e.searchQuery=e.initialSearch;e.search=function(e,t){return n.searchWormholeClasses(e,t,!0)},e.$watch("usrSearchQuery",function(t){void 0!==t&&t!=e.searchQuery&&(e.searchQuery=t)}),e.$watch("searchQuery",function(t){void 0!==e.usrSearchQuery&&(e.usrSearchQuery=t);var r=n.getWormholeClass(t);e.wormholeSearch=r?e.useId?r.className:r:null})}],t.link=function(t,n){n.attr("typeahead","wc.className for wc in search($viewValue,5)"),n.attr("ng-model","searchQuery"),n.removeAttr("wormhole-search"),n.removeAttr("data-wormhole-search"),e(n)(t)},t};t.exports=r},{"local/repositories/wormhole-class":201}],38:[function(e,t){"use strict";var n=e("local/third-party/sigma"),r=function(){var e={link:function(e,t){t=jQuery(t);var r="#fff",i="#000",o=new n({renderers:[{container:t[0],type:"webgl"}],settings:{mouseZoomDuration:200,mouseInteriaDuration:200,doubleClickZoomDuration:1e3,mouseInertiaRatio:5,hideEdgesOnMove:!1,verbose:!0,immutable:!1,zoomMin:.075,zoomMax:1.5,defaultNodeColor:"#50abff",minNodeSize:0,maxNodeSize:0,defaultEdgeColor:"#326ba0",minEdgeSize:0,maxEdgeSize:0,defaultLabelColor:r,labelThreshold:3.2,enableHovering:!0,defaultLabelHoverColor:r,defaultHoverLabelBGColor:i}});e.sigmaLoaded&&e.sigmaLoaded(o)}};return e};t.exports=r},{"local/third-party/sigma":207}],39:[function(e,t){"use strict";var n=e("local/repositories/signature"),r=e("local/repositories/signature/signature.js"),i=function(){var e={templateUrl:"views/directives/system-list.details.edit-signature.html"};return e.scope={targetSignature:"=editSignature",systemId:"=signatureSystemId",parentClose:"&onClose"},e.controller=["$scope",function(e){if(!e.systemId)throw"must set systemId";e.targetSignature?(e.isExisting=!0,e.signature=e.targetSignature.clone()):e.signature=new r,e.allowedTypes=r.allowedTypes,e.canSave=function(){if(!e.signature.id)return!1;var t=e.signature.id.toUpperCase().trim();return t.match(/^[A-Z0-9\-]+$/)},e.save=function(){if(e.canSave()){var t=e.signature;t.systemId=e.systemId,n.updateSignature(t),e.close()}},e.close=function(){e.parentClose&&e.parentClose()}}],e};t.exports=i},{"local/repositories/signature":193,"local/repositories/signature/signature.js":195}],40:[function(e,t){"use strict";var n=(e("local/repositories/signature"),e("local/repositories/system")),r=e("../../services/scanning-service"),i=e("local/repositories/wormhole/wormhole.js"),o=function(){var e={templateUrl:"views/directives/system-list.details.edit-wormhole.html"};return e.scope={targetWormhole:"=editWormhole",currSig:"=currentSignature",systemId:"=thisSystemId",parentClose:"&onClose"},e.controller=["$scope",function(e){if(!e.systemId)throw"must set thisSystemId";e.targetWormhole?(e.isExisting=!0,e.wormhole=e.targetWormhole.clone(),e.eolState=!!e.targetWormhole.eolTime,e.sig=e.currSig,e.destination=e.wormhole.startSystemId===e.systemId?e.wormhole.getEndSystem():e.wormhole.getStartSystem()):(e.wormhole=new i,e.wormhole.startSystemId=e.systemId);var t=n.getSystem(e.systemId);e.allowedSigs=r.getUnusedSignatures(t,"wormhole"),e.sig&&e.allowedSigs.push(e.sig),e.allowedSigs=e.allowedSigs.sort(function(e,t){return e.id<t.id?-1:1}),e.canSave=function(){return e.destination&&!e.wormhole.noteIsTooLong()},e.toggleEol=function(){e.wormhole.eolTime=e.wormhole.eolTime?null:Date.now()},e.save=function(){e.canSave()&&(e.wormhole.startSystemId===e.systemId?e.wormhole.endSystemId=e.destination.id:e.wormhole.startSystemId=e.destination.id,r.saveWormholeWithSignature(e.wormhole,e.currSig,e.sig),e.close())},e.close=function(){e.parentClose&&e.parentClose()}}],e};t.exports=o},{"../../services/scanning-service":49,"local/repositories/signature":193,"local/repositories/system":196,"local/repositories/wormhole/wormhole.js":206}],41:[function(e,t){var n,r=function(e){return n||($("body").on("click",function(e){$("[data-toggle-list-popover]").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")})}),n=!0),{restrict:"A",scope:{data:"=toggleListPopover",placement:"@"},link:function(t,n){t.placement=t.placement?t.placement:"left";var r='<div class="list-group" data-toggle-list="data"></div>',i='<div class="popover popover-toggle-list" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>',o={content:e($(r))(t),template:i,placement:t.placement,html:!0,date:t.date};$(n).popover(o)}}};t.exports=r},{}],42:[function(e,t){"use strict";var n=function(){var e={};return e.templateUrl="views/directives/toggle-list.html",e.scope={data:"=toggleList",threeValue:"@threeValue"},e.controller=["$scope",function(e){function t(e){return o(e)?e.value:e}function n(e){var n=Object.keys(e).map(function(t){return e[t]}),r=function(e){return t(e)};return n.every(r)?"all":n.some(r)?"some":"none"}function r(e,t){a?(e[t]++,e[t]>2&&(e[t]=0)):o(e[t])?e[t].value=!e[t].value:e[t]=!e[t]}function i(e){var t=n(e),r=!("some"===t||"all"===t);Object.keys(e).forEach(function(t){o(e[t])?e[t].value=r:e[t]=r})}function o(e){return"object"!=typeof e?!1:void 0!==e.value}function s(e){return"object"!=typeof e?!1:void 0===e.value}var a=(e.data,e.threeValue?!0:!1);e.test="Test content",e.getName=function(t){return o(e.data[t])?e.data[t].name:t},e.getValue=function(r){return s(e.data[r])?n(e.data[r]):t(e.data[r])},e.toggle=function(t){s(e.data[t])?i(e.data[t]):r(e.data,t)},e.isNested=function(t){return s(e.data[t])}}],e};t.exports=n},{}],43:[function(e){"use strict";{var t=e("local/repositories/signature");e("../services/user-service.js"),t.createSignature,t.updateSignature}},{"../services/user-service.js":57,"local/repositories/signature":193}],44:[function(e){"use strict";function t(e,t){return r.getCurrentUser().then(function(n){var r=n?n.id:0,i=(new Date).getTime();return e.log||(e.log={}),e.log[i]={user:r,type:t},e})}var n=e("local/repositories/wormhole"),r=e("../services/user-service.js"),i=n.create,o=n.update;n.create=function(e){return t(e,"c").then(function(e){return i(e)})},n.update=function(e){return t(e,"u").then(function(e){return o(e)})}},{"../services/user-service.js":57,"local/repositories/wormhole":204}],45:[function(){(function(e){"use strict";Array.prototype.remove=function(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)},Array.prototype.detectChanges=function(e,t,n){var r=this;if(t=t?t:"id",n=n?n:"lastModified",r.length!==e.length)return!0;for(var i=0;i<r.length;i++){var o=r[i],s=e.find(function(e){return e[t]===o[t]});if(!s)return!0;if(s[n]&&o[n]){if(s[n].getTime&&o[n].getTime){if(s[n].getTime()!==o[n].getTime())return!0}else if(s[n]!==o[n])return!0}else if(s[n]!==o[n])return!0}return!1},String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})}),e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},e.getWatchers=function(e){function t(e){var r=n(e.data().$isolateScope),i=n(e.data().$scope),o=i.concat(r);return angular.forEach(e.children(),function(e){o=o.concat(t(angular.element(e)))}),o}function n(e){return e?e.$$watchers||[]:[]}e=angular.element(e||document.documentElement);return t(e)},e.countWatchers=function(){return getWatchers().length}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(e){"use strict";var t=e("moment");t.locale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"seconds",m:"1 minute",mm:"%d minutes",h:"1 hour",hh:"%d hours",d:"1 day",dd:"%d days",M:"1 month",MM:"%d months",y:"1 year",yy:"%d years"}})},{moment:102}],47:[function(e,t){"use strict";var n={};n.frigate={friendlyName:"Frigate",mass:16e5,alignTime:4,warpTime20:20},n.cruiser={friendlyName:"Cruiser",mass:15e6,alignTime:6,warpTime20:33},n.battlecruiser={friendlyName:"Battlecruiser",mass:17e6,alignTime:8,warpTime20:44},n.battleship={friendlyName:"Battleship",mass:1e8,alignTime:11,warpTime20:54},n.capital={friendlyName:"Capital Ship",mass:12e8,alignTime:31,warpTime20:71},t.exports=n},{}],48:[function(e,t){"use strict";function n(){var e=r.getBridges(),t=r.getBridgesArray(),n=i.transportMethods.Titans,o=i.transportMethods["Black Ops"];"object"!=typeof n&&(n={}),"object"!=typeof o&&(o={}),t.forEach(function(e){"titan"===e.bridgeType?n[e.id]||(n[e.id]={name:e.name,value:!0}):"blackops"===e.bridgeType&&(o[e.id]||(o[e.id]={name:e.name,value:!1}))});var s=function(t){e[t]||delete this[t]};Object.keys(n).forEach(s,n),Object.keys(o).forEach(s,o),n=0===Object.keys(n).length?!1:n,o=0===Object.keys(o).length?!1:o,i.transportMethods.Titans=n,i.transportMethods["Black Ops"]=o}var r=e("local/repositories/bridge"),i={};i.startSystemQuery="",i.endSystemQuery="",i.systemTypes={Highsec:0,Lowsec:0,Nullsec:0,"Wormhole space":0},i.transportMethods={Titans:!0,"Black Ops":!1,Wormholes:!0},i.minBridgeDistance=3,i.maxResults=20,i.setSystems=function(e,t){i.startSystemQuery=e.systemName,i.endSystemQuery=t.systemName},i.setParams=function(e){i.systemTypes=e.systemTypes,i.startSystemQuery=e.startSystemQuery,i.endSystemQuery=e.endSystemQuery,i.minBridgeDistance=e.minBridgeDistance,i.maxResults=e.maxResults},i.getParamsToEditor=function(e){e.systemTypes=i.systemTypes,e.transportMethods=i.transportMethods,e.startSystemQuery=i.startSystemQuery,e.endSystemQuery=i.endSystemQuery,e.minBridgeDistance=i.minBridgeDistance,e.maxResults=i.maxResults},i.getParamsForFinder=function(){var e,t;return e="object"!=typeof i.transportMethods.Titans?[]:Object.keys(i.transportMethods.Titans).filter(function(e){return i.transportMethods.Titans[e].value}),t="object"!=typeof i.transportMethods["Black Ops"]?[]:Object.keys(i.transportMethods["Black Ops"]).filter(function(e){return i.transportMethods["Black Ops"][e].value}),{hi:i.systemTypes.Highsec,lo:i.systemTypes.Lowsec,nl:i.systemTypes.Nullsec,ws:i.systemTypes["Wormhole space"],br:e.concat(t),st:i.transportMethods.Stargates,wh:i.transportMethods.Wormholes,mbd:i.minBridgeDistance,mr:i.maxResults}},i.hasInitialized=!1,i.initialize=function(){var e=r.initialize().then(function(){i.hasInitialized=!0,n(),r.bridgesChanged(n)});return e},t.exports=i},{"local/repositories/bridge":176}],49:[function(e,t){"use strict";function n(e,t,n){e&&(e.wormholeId=void 0,r.updateSignature(e)),t&&(t.wormholeId=n,r.updateSignature(t))}var r=e("local/repositories/signature"),i=e("local/repositories/wormhole"),o=e("local/repositories/scanned-system"),s=e("./signature-parser-service"),a={};a.makeSystemObservation=function(e,t){var n=o.getSystem(e.id);t?n.lastPartialScan=(new Date).getTime():n.lastScanned=(new Date).getTime(),o.updateSystem(n)},a.makeSignatureObservation=function(e){e.lastScanned=(new Date).getTime(),r.updateSignature(e)},a.makeWormholeObservation=function(e){e._lastObserved=(new Date).getTime(),i.update(e)},a.getWormholesWithSignatures=function(e){var t=e.getWormholes(),n=e.getSignatures();return t.map(function(e){var t=n.find(function(t){return t.wormholeId==e.id});return{wormhole:e,signature:t}})},a.getUnusedSignatures=function(e,t){var n=e.getWormholes(),r=e.getSignatures();return r.filter(function(e){return t&&e.type!=t?!1:!n.some(function(t){return t.id==e.wormholeId})})},a.saveWormholeWithSignature=function(e,t,r){if(e.id){var o=e.id;i.update(e),n(t,r,o)}else i.create(e).then(function(e){n(t,r,e)})},a.pasteSignatureData=function(e,t){var n=s.getSignatures(e.id,t);if(!n||0==n.length)return!1;var i=e.getSignatures(),o=[],u=[];n.forEach(function(e){var t=i.find(function(t){return t.equals(e)});t?(t.type=e.type?e.type:t.type,t.lastScanned=(new Date).getTime(),u.push(t)):o.push(e)}),r.supressChanged(!0),o.forEach(function(e){r.createSignature(e)}),u.forEach(function(e){r.updateSignature(e)}),r.supressChanged(!1);var c=u.some(function(e){return!e.type}),l=o.some(function(e){return!e.type}),h=c||l;return a.makeSystemObservation(e,h),!0},t.exports=a},{"./signature-parser-service":55,"local/repositories/scanned-system":190,"local/repositories/signature":193,"local/repositories/wormhole":204}],50:[function(e,t){function n(e,t,n){n||(n="g");var r=e.id<t.id;this.sys1=r?e:t,this.sys2=r?t:e,this.id=this.sys1.id+"_"+this.sys2.id+"_"+n,this.source=this.sys1.id+"",this.target=this.sys2.id+""}t.exports=n},{}],51:[function(e,t){t.exports=e("./sigma-js-service.js")},{"./sigma-js-service.js":53}],52:[function(e,t){function n(e){this.system=e,this.id=e.id+"",this.x=this.system.xpos,this.y=-this.system.zpos,this.system.isWormholeSpace()?(this.y-=1e3,this.x-=650):0===this.system.getGates().length&&(this.hide=!0),this.label=e.systemName,this.system.isHighsec()&&(this.color="#00be39"),this.system.isLowsec()&&(this.color="#b95f00"),this.system.isNullsec()&&(this.color="#be0000"),this.system.isWormholeSpace()&&(this.color="#428bca"),this.size=1}t.exports=n},{}],53:[function(e,t){function n(e){this.element=e,this.nodes=[],this.edges=[],this.sigma=r(e)}function r(t){var n=e("local/third-party/sigma"),r=e("./sigma-settings.js"),i=new n({renderers:[{container:t,type:"webgl"}],settings:r});return i}function i(e){var t=[],n=[];e||(e=[]);for(var r=0,i=e.length;i>r;r++){var o=e[r];t.push(new s(o)),o.getGates().forEach(function(e){o.id<e.id&&n.push(new a(o,e))})}return{nodes:t,edges:n}}function o(e){e||(e=[]);for(var t={},n=0;n<e.length;n++){var r=e[n],i=new a(r.getStartSystem(),r.getEndSystem(),"w");t[i.id]=i}return Object.keys(t).map(function(e){return t[e]})}t.exports=n;var s=e("./node.js"),a=e("./edge.js");n.prototype.createData=function(e,t){var n=i(e),r=o(t);this.nodes=n.nodes,this.edges=n.edges.concat(r),this.sigma.graph.clear(),this.sigma.graph.read({nodes:this.nodes,edges:this.edges})},n.prototype.render=function(){this.sigma.refresh(),console.log(this.sigma.graph.nodes()[0])}},{"./edge.js":50,"./node.js":52,"./sigma-settings.js":54,"local/third-party/sigma":207}],54:[function(e,t){t.exports={clone:!1,immutable:!0,verbose:!0,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#fff",defaultEdgeColor:"#fff",defaultNodeColor:"#fff",defaultLabelSize:14,edgeColor:"default",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:6,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#fff",hoverFont:"",singleHover:!0,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,scalingMode:"inside",sideMargin:0,minEdgeSize:0,maxEdgeSize:0,minNodeSize:0,maxNodeSize:0,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:3.5,doubleClickZoomingRatio:3.5,zoomMin:.025,zoomMax:1.1,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:2,touchInertiaDuration:200,touchInertiaRatio:2,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200}},{}],55:[function(e,t){"use strict";function n(e){return e=e.trim(),Object.keys(i).find(function(t){var n=i[t];return n.indexOf(e)>-1})}var r=["Cosmic Signature","Kosmische Signatur","Источник Сигналов"],i={wormhole:["Wormhole","Wurmloch","Червоточина"],gas:["Gas Site","Gasgebiet","ГАЗ: район добычи газа"],relic:["Relic Site","Reliktgebiet","АРТЕФАКТЫ: район поиска артефактов"],combat:["Combat Site","Kampfgebiet","ОПАСНО: район повышенной опасности"],data:["Data Site","Datengebiet","ДАННЫЕ: район сбора данных"],ore:["Ore Site","Mineraliengebiet","РУДА: район добычи руды"]},o={};o.parseData=function(e){try{var t=e.trim().split("\n"),n=t.map(function(e){var t=e.split("	");return t.length<6?null:{id:t[0].trim(),scanGroup:t[1].trim(),group:t[2].trim(),type:t[3].trim(),readingStrength:t[4].trim(),distance:t[5].trim()}}).filter(function(e){return null!==e})}catch(r){return console.error(r),null}return n},o.getSignatures=function(e,t){var i=o.parseData(t);if(!i||0===i.length)return null;var s=i.filter(function(e){return r.indexOf(e.scanGroup)>-1});return s=s.map(function(t){return{id:t.id,systemId:e,type:n(t.group)}})},t.exports=o},{}],56:[function(e,t){var n=e("store"),r={},i={"default":{main:"https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css",custom:"css/theme.default.custom.css"},cerulean:{main:"css/theme.cerulean.min.css"},cyborg:{main:"css/theme.cyborg.min.css"},darkly:{main:"css/theme.darkly.min.css"},journal:{main:"css/theme.journal.min.css"},readable:{main:"css/theme.readable.min.css"},sandstone:{main:"css/theme.sandstone.min.css"},simplex:{main:"css/theme.simplex.min.css"},slate:{main:"css/theme.slate.min.css"},united:{main:"css/theme.united.min.css"},yeti:{main:"css/theme.yeti.min.css"},adamYawl:{main:"https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css",custom:"css/theme.adamYawl.custom.css"}};
r.getAllThemes=function(){return Object.keys(i)},r.getCurrentTheme=function(){var e=n.get("theme");return i[e]?e:"default"},r.saveTheme=function(e){n.set("theme",e),r.setTheme(e)},r.loadTheme=function(){var e=n.get("theme");r.setTheme(e)},r.setTheme=function(e){var t=i[e];t||(t=i["default"]);var n=document.getElementById("bootstrap-css"),r=document.getElementById("theme-css"),o=t.main,s=t.custom?t.custom:"";n.href=o,r.href=s},t.exports=r},{store:105}],57:[function(e,t){"use strict";var n=e("local/repositories/user"),r=e("local/repositories/firebase-auth"),i=(e("q"),{});i.getCurrentUser=function(){return r.identity().then(function(e){return e?n.initialize().then(function(){var t=n.get(e.uid);return t}):null})},i.login=function(e,t){return r.loginWithFirebase(e).then(function(){return t?n.initialize().then(function(){var e=n.get(t.id);e||(e={id:t.id}),e.name=t.name,e.corporation=t.corporation,e.alliance=t.alliance,e.lastLogin=Date.now(),n.update(e)}):void 0})},t.exports=i},{"local/repositories/firebase-auth":177,"local/repositories/user":199,q:104}],58:[function(e,t){t.exports=e("./viva-graph-service.js")},{"./viva-graph-service.js":76}],59:[function(e,t){function n(e,t){function n(n){t.fire("node.highlight",n);var r=e.getLinks(n.id);r.forEach(function(e){t.fire("link.highlight",e)})}function r(n){t.fire("node.unhighlight",n);var r=e.getLinks(n.id);r.forEach(function(e){t.fire("link.unhighlight",e)})}function i(e){t.fire("label.highlight",e);var r=e.data.region.getNodes();for(var i in r)n(r[i])}function o(e){t.fire("label.unhighlight",e);var n=e.data.region.getNodes();for(var i in n)r(n[i])}t.refire("link.wormhole.mouseenter","link.highlight"),t.refire("link.wormhole.mouseleave","link.unhighlight"),t.subscribe("node.system.mouseenter",n),t.subscribe("node.system.mouseleave",r),t.subscribe("node.region.mouseenter",n),t.subscribe("node.region.mouseleave",r),t.subscribe("label.region.mouseenter",i),t.subscribe("label.region.mouseleave",o)}t.exports=n},{}],60:[function(e,t){function n(){function e(e){return n[e]||(n[e]=[]),n[e]}function t(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(i.fromId===t&&i.toId===n)return void e.splice(r,1)}}var n={},r=[],i={add:function(t){var n=t.fromId,i=t.toId;e(n).push(t),e(i).push(t),r.push(t)},remove:function(n){var r=n.fromId,i=n.toId;t(e(r),r,i),t(e(i),r,i)},getLinksForId:function(t){return e(t)},getExisting:function(t,n){for(var r=e(t),i=0;i<r.length;i++)if(r[i].toId===n)return r[i];return null},getArray:function(){return r},countUpOrAdd:function(e){var t=i.getExisting(e.fromId,e.toId);return t?(t.count++,t):(e.count=1,i.add(e),e)},countDownOrRemove:function(e){return e.count>1?(e.count--,!1):(i.remove(e),!0)}};return i}t.exports=n},{}],61:[function(e,t){t.exports=e("./make-graphics.js")},{"./make-graphics.js":62}],62:[function(e,t){function n(e,t,n){var a=r.Graph.View.svgGraphics(),u=i(e,t,a,n),c=o(e,t,a,n),l=s(e,t,a,n);return a.node(u.make),a.placeNode(u.place),a.link(c.make),a.placeLink(c.place),a.label(l.make),a.placeLabel(l.place),a}t.exports=n;var r=e("local/third-party/viva-graph-js"),i=e("./make-nodes.js"),o=e("./make-links.js"),s=e("./make-labels.js")},{"./make-labels.js":63,"./make-links.js":64,"./make-nodes.js":65,"local/third-party/viva-graph-js":270}],63:[function(e,t){function n(e,t,n,i){function o(e){var t=n.getLabelUI(e.id);t.addClass("highlight")}function s(e){var t=n.getLabelUI(e.id);t.removeClass("highlight")}function a(e){if(e.data.region){var t=e.data.region.name,n=r.Graph.svg("text").text(t).addClass("viva-label").addClass("region");return n.data=e,n.addEventListener("mouseenter",l),n.addEventListener("mouseleave",h),n.addEventListener("click",c),d?d(e,n):n}}function u(e,t,n){if(n.data.region){var r=n.data.region,i=r.getCenter,o=i();e.attr("x",o.x-20),e.attr("y",o.y)}}function c(e){var t=e.currentTarget,n=t.data;i.fire("label.region.click",n)}function l(e){var t=e.currentTarget,n=t.data;i.fire("label.region.mouseenter",n)}function h(e){var t=e.currentTarget,n=t.data;i.fire("label.region.mouseleave",n)}var d=null;return i.subscribe("label.highlight",o),i.subscribe("label.unhighlight",s),i.subscribe("overlays-manager.changed",function(e){d=e.mutateLabel}),{make:a,place:u,highlight:o,unhighlight:s}}t.exports=n;var r=e("local/third-party/viva-graph-js")},{"local/third-party/viva-graph-js":270}],64:[function(e,t){function n(e,t,n,i){function o(e){var t=n.getLinkUI(e.id).visiblePath;t.addClass("highlight")}function s(e){var t=n.getLinkUI(e.id).visiblePath;t.removeClass("highlight")}function a(e){var n=r.Graph.svg("g");n.data=e;var i=r.Graph.svg("path").addClass("viva-edge");if(e.data&&e.data.wormhole)i.addClass("wormhole");else{i.addClass("gate");var o=t.getNode(e.toId),s=t.getNode(e.fromId);o.data.region||s.data.region?i.addClass("regional-gate"):o.data.system.regionName!==s.data.system.regionName&&i.addClass("regional-gate")}var a=r.Graph.svg("path").attrs({"stroke-width":8,opacity:0,stroke:"white"});return a.addEventListener("click",c),a.addEventListener("mouseenter",l),a.addEventListener("mouseleave",h),n.visiblePath=i,n.append(i),n.append(a),f?f(e,n):n}function u(e,t,n){for(var r="M"+t.x+","+t.y+"L"+n.x+","+n.y,i=0;i<e.childNodes.length;i++){var o=e.childNodes[i];o.attr("d",r)}}function c(e){var t=e.currentTarget.parentElement,n=t.data,r=d(n)+"mouseclick";i.fire(r,n)}function l(e){var t=e.currentTarget.parentElement,n=t.data,r=d(n)+"mouseenter";i.fire(r,n)}function h(e){var t=e.currentTarget.parentElement,n=t.data,r=d(n)+"mouseleave";i.fire(r,n)}function d(e){return e.data&&e.data.wormhole?"link.wormhole.":"link.gate."}var f=null;return i.subscribe("link.highlight",o),i.subscribe("link.unhighlight",s),i.subscribe("overlays-manager.changed",function(e){f=e.mutateLink}),{make:a,place:u}}t.exports=n;var r=e("local/third-party/viva-graph-js")},{"local/third-party/viva-graph-js":270}],65:[function(e,t){function n(e,t,n,s){function a(e){var t;e.data.system?t=i.Graph.svg("g").addClasses(["viva-node","system"]):e.data.region&&(t=i.Graph.svg("g").addClasses(["viva-node","region"])),t.data=e;var n=o(t);return e.data.system?(n.setLabel(i.Graph.svg("text").text(e.data.system.systemName)),n.setIconRect(10,10)):(n.setLabel(i.Graph.svg("text").text(e.data.region.name)),n.setIconCircle(20)),n.saveAsDefault(),t.addEventListener("click",h),t.addEventListener("mouseenter",d),t.addEventListener("mouseleave",f),p?p(e,t):t}function u(e,t){var n=0;e.attr("transform","translate("+(t.x-n)+","+(t.y-n)+")")}function c(e){var t=n.getNodeUI(e.id);t.addClass("highlight")}function l(e){var t=n.getNodeUI(e.id);t.removeClass("highlight")}function h(e){var t=e.currentTarget,n=t.data,i=r(n)+"click";s.fire(i,[n])}function d(e){var t=e.currentTarget,n=t.data,i=r(n)+"mouseenter";s.fire(i,n)}function f(e){var t=e.currentTarget,n=t.data,i=r(n)+"mouseleave";s.fire(i,n)}var p=null;return s.subscribe("node.highlight",c),s.subscribe("node.unhighlight",l),s.subscribe("overlays-manager.changed",function(e){p=e.mutateNode}),{make:a,place:u,highlight:c,unhighlight:l}}function r(e){return e.data.system?"node.system.":"node.region."}t.exports=n;var i=e("local/third-party/viva-graph-js"),o=e("./node-editor.js")},{"./node-editor.js":66,"local/third-party/viva-graph-js":270}],66:[function(e,t){function n(e){function t(e,t){var n=i.Graph.svg("rect").attr("width",e).attr("height",t).attr("x",-e/2).attr("y",-t/2);h(n,e/2,t/2)}function n(e){var t=i.Graph.svg("rect").attr("r",e);h(t,e,e)}function o(e,t,n){var o=r(0,0,e,10,20),s=i.Graph.svg("polygon").attr("points",o);h(s,n,n/2)}function s(){return e.querySelector(".node-icon")}function a(t){var n=e.querySelector(".node-label");n&&e.removeChild(n),t.addClass("node-label"),e.append(t);var r=e._labOffsetX||0,i=e._labOffsetY||0;d(r,i)}function u(){return e.querySelector(".node-label")}function c(){var t=e._defaultIcon,n=e._defaultLabel;h(t),a(n)}function l(){e._defaultIcon=s(),e._defaultLabel=u()}function h(t,n,r){var i=e.querySelector(".node-icon");i&&e.removeChild(i),t.addClass("node-icon"),e.append(t),e._labOffsetX=n,e._labOffsetY=r,d(n,r)}function d(e,t){var n=u();n&&(n.attr("x",e+1+"px"),n.attr("y",t+"px"))}var f={setIconRect:t,setIconCircle:n,setIconStar:o,getIcon:s,setLabel:a,getLabel:u,setToDefault:c,saveAsDefault:l};return f}function r(e,t,n,r,i){for(var o="",s=Math.PI/n,a=0;2*n>a;a++){var u=0==(1&a)?r:i,c=e+Math.cos(a*s)*u,l=t+Math.sin(a*s)*u;0==a?o=l+","+c:o+=", "+l+","+c}return o}var i=e("local/third-party/viva-graph-js");t.exports=n},{"local/third-party/viva-graph-js":270}],67:[function(e,t){function n(e){function t(e,t){n[e]||(n[e]=[]),n[e].push(t)}e||(e={});var n={},r={fire:function(e,t){r.fireMultiArg(e,[t])},fireMultiArg:function(t,r){var i=n[t];if(e.debug){var o=i?i.length:0;if(console.log("firing: ",t," args: ",r,"listeners: ",o),!Array.isArray(r))throw"Arguments must be an array"}if(i)for(var s=0;s<i.length;s++){var a=i[s];a.apply(null,r)}},subscribe:function(e,n){Array.isArray(e)?e.forEach(function(){t(e,n)}):t(e,n)},refire:function(e,n){t(e,function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];r.fireMultiArg(n,e)})}};return r}t.exports=n},{}],68:[function(e,t){function n(e,t){var n=e.data.system;if(n.id==o){var r=i(t);r.setIconStar(5,10,20),t.addClass("special")}return t}function r(e,t){i(t).setToDefault(),t.removeClass("special")}var i=(e("local/third-party/viva-graph-js"),e("../make-graphics/node-editor")),o=siteConfig.homeSystemId,s={mutateNode:n,clearNode:r};t.exports=s},{"../make-graphics/node-editor":66,"local/third-party/viva-graph-js":270}],69:[function(e,t){t.exports=e("./overlays-manager.js")},{"./overlays-manager.js":70}],70:[function(e,t){function n(e,t,n){function i(e){if(!s[e])throw"Invalid overlay";var t=s[e];g[e]||(t.initialize?t.initialize().done(function(){a(e)}):a(e))}function a(e){var t=s[e];d(t),g[e]=t,p=r(p,g),n.fire("overlays-manager.changed",p)}function u(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r],a=s[i];if(!a)throw"Invalid overlay";g[i]||(a.initialize&&t.push(a.initialize()),n.push(i))}n.length>0&&o.all(t).done(function(){c(n)})}function c(e){for(var t=0;t<e.length;t++){var i=e[t],o=s[i];d(o),g[i]=o}p=r(p,g),n.fire("overlays-manager.changed",p)}function l(e){var t=g[e];t&&(delete g[e],p=r(p,g),f(p),d(mode),n.fire("overlays-manager.changed",p))}function h(){f(p),g={},p={},n.fire("overlays-manager.changed",p)}function d(n){n.mutateNode&&e.forEachNode(function(e){var r=t.getNodeUI(e.id);n.mutateNode(e,r)}),n.mutateLink&&e.forEachLink(function(e){var r=t.getLinkUI(e.id);n.mutateLink(e,r)}),n.mutateLabel&&e.forEachNode(function(e){var r=t.getLabelUI(e.id);n.mutateLabel(e,r)})}function f(n){n.clearNode&&e.forEachNode(function(e){var r=t.getNodeUI(e.id);n.clearNode(e,r)}),n.clearLink&&e.forEachLink(function(e){var r=t.getLinkUI(e.id);n.clearLink(e,r)}),n.clearLabel&&e.forEachNode(function(e){var r=t.getLabelUI(e.id);n.clearLabel(e,r)})}var p={},g={};n.subscribe("overlays-manager.add-overlay",i),n.subscribe("overlays-manager.add-overlays",u),n.subscribe("overlays-manager.remove-overlay",l),n.subscribe("overlays-manager.clear",h);var m={addOverlay:i,addOverlays:u,removeOverlay:l,clear:h,getCurrentMode:function(){return p}};return m}function r(e,t){e||(e={});var n=Object.assign({},e);for(var r in t){var o=t[r];n.mutateNode=i(n.mutateNode,o.mutateNode),n.mutateLink=i(n.mutateLink,o.mutateLink),n.mutateLabel=i(n.mutateLabel,o.mutateLabel),n.clearNode=i(n.clearNode,o.clearNode),n.clearLink=i(n.clearLink,o.clearLink),n.clearLabel=i(n.clearLabel,o.clearLabel)}return n}function i(e,t){return e||t?e&&!t?e:!e&&t?t:function(n,r){return r=e.call(this,n,r),t.call(this,n,r)}:null}t.exports=n;var o=(e("local/third-party/viva-graph-js"),e("q")),s={securityStatus:e("./security-status.js"),starredSystems:e("./starred-systems.js"),homeSystem:e("./home-system.js")}},{"./home-system.js":68,"./security-status.js":71,"./starred-systems.js":72,"local/third-party/viva-graph-js":270,q:104}],71:[function(e,t){function n(e,t){var n=e.data.system;return n&&(n.isHighsec()&&t.addClass("highsec"),n.isLowsec()&&t.addClass("lowsec"),n.isNullsec()&&t.addClass("nullsec"),n.isWormholeSpace()&&t.addClass("wormholespace")),t}function r(e,t){t.removeClasses(["highsec","lowsec","nullsec","wormholespace"])}var i={mutateNode:n,clearNode:r};t.exports=i},{}],72:[function(e,t){function n(){return o.initialize()}function r(e,t){var n=e.data.system;if(n){var r=o.getSystem(n.id);if(r.isStarred){t.addClass("special");var i=s(t);i.setIconRect(20,20)}}return t}function i(e,t){t.removeClass("special"),editor.setToDefault()}var o=e("local/repositories/scanned-system"),s=e("../make-graphics/node-editor"),a={initialize:n,mutateNode:r,clearNode:i};t.exports=a},{"../make-graphics/node-editor":66,"local/repositories/scanned-system":190}],73:[function(e,t){function n(e){var t={},n=[],o={};for(var s in e){var a=e[s];if(!t[s]){var u=i(a,e,t);n.push(u);var c=r(u,n);Object.keys(u).forEach(function(e){o[e]=c}),n[c]=u}}n=n.sort(function(e,t){return e=Object.keys(e),t=Object.keys(t),e.length===t.length?0:e.length<t.length});for(var l={},o={},h=0;h<n.length;h++){var d=n[h],c=r(d,l);Object.keys(d).forEach(function(e){o[e]=c}),l[c]=d}return{lookup:o,partitions:l}}function r(e,t){for(var n=Object.keys(e).length,r=s>n?"Fragment":o(e),i=r,a=0;t[i];)i=r+" #"+ ++a;return i}function i(e,t,n){for(var r={},i=e.regionName,o=[e];o.length>0;){var s=o.pop();r[s.id]=s,n[s.id]=!0,s.getGates().forEach(function(e){n[e.id]||t[e.id]&&e.regionName===i&&o.push(e)})}return r}function o(e){var t=Object.keys(e);return e[t[0]].regionName}t.exports=n;var s=4},{}],74:[function(e,t){function n(e,t,n,i,o){function s(){i.expandAllRegions(),e.forEachNode(function(e){var n=t.getNodePosition(e.id),r=e.data.system;n.x=100*r.xpos,n.y=100*-r.zpos}),n.rerender()}function a(){var n={};e.forEachNode(function(e){var r=t.getNodePosition(e.id);n[e.id]={x:r.x,y:r.y}}),r.set("vivaGraphLocations",n)}function u(){var i=r.get("vivaGraphLocations");i?(Object.keys(i).forEach(function(n){if(e.getNode(n)){var r=t.getNodePosition(n),o=i[n];r.x=o.x,r.y=o.y}}),n.rerender()):s()}return o.subscribe("positions-manager.save-positions",a),o.subscribe("positions-manager.reset-positions",s),o.subscribe("positions-manager.load-positions",u),{resetPositions:s,savePositions:a,loadPositions:u}}var r=e("store");t.exports=n},{store:105}],75:[function(e,t){function n(e,t,n,s){function a(e,t,n){b.add({fromId:e,toId:t,data:n})}function u(e,t,n){b.remove({fromId:e,toId:t,data:n})}function c(t,n){var r={id:t,nodes:{},getCenter:function(){return g(v[t].nodes)},getNodes:function(){return v[t].nodes}};n||(n={}),Object.assign(r,n),v[t]=r;var i=e.addLabel(t,{region:r});v[t].label=i}function l(e){for(var t in v){var n=v[t];if(n.isCollapsed)for(var r in n.nodes)if(r==e)return t}return e}function h(e,t){v[t]||c(t),v[t].nodes[e.id]=e}function d(){Object.keys(v).forEach(function(e){p(e)})}function f(r){var o=v[r],s=o.nodes,a=Object.keys(o.nodes);if(!o.isCollapsed){for(var u=[],c={},l=0;l<a.length;l++){for(var h=a[l],d=e.getLinks(h),f=0;f<d.length;f++){var p=d[f];s[p.toId]&&s[p.fromId]||u.push(p),e.removeLink(p)}var m=e.getNode(h),b=t.getNodePosition(h),w={id:h,position:b,data:m.data};c[w.id]=w,e.removeNode(h)}var x=(a.length,e.addNode(r,{region:o})),E=t.getNodePosition(r),S=g(c);E.x=S.x,E.y=S.y;for(var _={},l=0;l<u.length;l++){var p=u[l],T=i(p,s);if(!_[T]){var A=y(r,T);A=Math.max(A,150),e.addLink(r,T,p.data,A),_[T]=!0}}o.regionNode=x,o.removedNodes=c,o.isCollapsed=!0,o.initialPosition=S,e.removeLabel(r),n.rerender()}}function p(r){{var i=v[r],o=i.removedNodes;i.removedLinks}if(i.isCollapsed){var s=t.getNodePosition(r),a={x:i.initialPosition.x-s.x,y:i.initialPosition.y-s.y};i.removedNodes=null,i.regionNode=null,i.initialPosition=null,i.isCollapsed=!1,e.removeNode(r);for(var u in o){var c=o[u];e.addNode(u,c.data);var h=t.getNodePosition(u),d=c.position;h.x=d.x-a.x,h.y=d.y-a.y}for(var u in o)for(var f=b.getLinksForId(u),p=0;p<f.length;p++){var g=f[p],w=l(g.fromId),x=l(g.toId),E=g.data;if(!e.hasLink(w,x)){var S=void 0;(m(w)||m(x))&&(S=y(w,x)),e.addLink(w,x,E,S)}}e.addLabel(r,{region:i}),n.rerender()}}function g(e){var n=0,r=0;for(var i in e){var o=e[i];if(o.position)var s=o.position;else var s=t.getNodePosition(o.id);n+=s.x,r+=s.y}var a=Object.keys(e).length,u=n/a,c=r/a;return{x:u,y:c}}function m(t){var n=e.getNode(t);return!!n.data.region}function y(e,n){var i=t.getNodePosition(e),o=t.getNodePosition(n);return r(i,o)}s.subscribe("region-controller.collapse-region",f),s.subscribe("region-controller.expand-region",p);var v={},b=o(),w={addRegion:c,addNodeToRegion:h,collapseRegion:f,expandRegion:p,expandAllRegions:d,getNodeIdForSystemId:l,trackLink:a,untrackLink:u};return w}function r(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function i(e,t){var n=e.toId,r=e.fromId;return t[n]?r:n}var o=e("./link-manager.js");t.exports=n},{"./link-manager.js":60}],76:[function(e,t){function n(e){{var t=y({debug:!1}),n=l(e,t),a=n.graph,u=n.layout,c=n.graphics,h=n.renderer,d=!1,f=s(),p=g(f),E=m(a,u,h,t);x(a,c,t),v(a,t),b(a,h,E,t),w(a,u,h,E,t)}t.fire("overlays-manager.add-overlays",["securityStatus","starredSystems","homeSystem"]);var S=r(a,f,p.lookup);i(a,f,E),o(S,E);var _={run:function(){h.run(),_.panToHome(),d=!0},resetPositions:function(){t.fire("positions-manager.reset-positions")},savePositions:function(){t.fire("positions-manager.save-positions")},loadPositions:function(){t.fire("positions-manager.load-positions")},panToHome:function(){var e=u.getNodePosition(siteConfig.homeSystemId);h.moveTo(e.x,e.y)},toggleAutoLayout:function(){d?h.pause():h.resume(),d=!d},addWormholes:function(e){t.fire("wormholes-manager.add-wormholes",e)},removeWormholes:function(){t.fire("wormholes-manager.remove-wormholes")}};return _.loadPositions(),_}function r(e,t,n){var r={};return Object.keys(t).forEach(function(i){var o=t[i],s={system:o,special:c(o)},a=e.addNode(o.id,s),u=n[i];u.startsWith("Fragment")||(r[u]||(r[u]=[]),r[u].push(a))}),r}function i(e,t,n){Object.keys(t).forEach(function(r){var i=t[r],o=i.getGates();for(j=0;j<o.length;j++){var s=o[j];if(t[s.id]&&i.id<s.id){{var a={gate:!0,from:i.id,to:s.id};e.addLink(i.id,s.id,a)}n.trackLink(i.id,s.id,a)}}})}function o(e,t){Object.keys(e).forEach(function(n){var r=e[n],i=n.split("#")[0].trim();t.addRegion(n,{name:i});for(var o=0;o<r.length;o++){var s=r[o];t.addNodeToRegion(s,n)}})}function s(){for(var e=h.getSystemsArray(),t={},n=0,r=e.length;r>n;n++){var i=e[n];a(i)&&(t[i.id]=i)}return t}function a(e){return e.isWormholeSpace()?!1:e.isNullsec()&&!u(e)?!1:e.isHighsec()?!1:!0}function u(e){return e.getGates().some(function(e){return e.isLowsec()})}function c(e){return e=d.getSystem(e.id),e.id===siteConfig.homeSystemId||e.isStarred}function l(e,t){var n=f.Graph.graph(),r=f.Graph.Layout.forceDirected(n,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20}),i=p(r,n,t),o=f.Graph.View.renderer(n,{layout:r,graphics:i,container:e,zoomSpeed:4});return{graph:n,layout:r,graphics:i,renderer:o}}t.exports=n;var h=e("local/repositories/system"),d=e("local/repositories/scanned-system"),f=e("local/third-party/viva-graph-js"),p=e("./make-graphics"),g=e("./partition-systems.js"),m=e("./region-controller.js"),y=e("./messenger.js"),v=e("./interaction-manager.js"),b=e("./wormholes-manager.js"),w=e("./positions-manager.js"),x=e("./overlays-manager")},{"./interaction-manager.js":59,"./make-graphics":61,"./messenger.js":67,"./overlays-manager":69,"./partition-systems.js":73,"./positions-manager.js":74,"./region-controller.js":75,"./wormholes-manager.js":77,"local/repositories/scanned-system":190,"local/repositories/system":196,"local/third-party/viva-graph-js":270}],77:[function(e,t){function n(e,t,n,r){function i(r){for(var i=0;i<r.length;i++){var o=r[i],s=o.getStartSystem().id,a=o.getEndSystem().id,u=n.getNodeIdForSystemId(s),c=n.getNodeIdForSystemId(a);if(e.getNode(u)&&e.getNode(c)){var l={initialFrom:s,initialTo:a,wormhole:o};n.trackLink(s,a,l);{e.addLink(u,c,l)}}}t.rerender()}function o(){var r=[];e.forEachLink(function(e){e.data&&e.data.wormhole&&r.push(e)}),r.forEach(function(t){var r=t.data.initialFrom,i=t.data.initialTo;n.untrackLink(r,i,t.data),e.removeLink(t)}),t.rerender()}r.subscribe("wormholes-manager.add-wormholes",i),r.subscribe("wormholes-manager.remove-wormholes",o);var s={addWormholes:i,removeWormholes:o};return s}t.exports=n},{}],78:[function(e,t){t.exports=angular},{}],79:[function(e,t,n){!function(e,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof n?t.exports=r():e.returnExports=r()}(this,function(){function e(i,o){if("function"!=typeof o)throw new Error("Bad callback given: "+o);if(!i)throw new Error("No options given");var a=i.onResponse;if(i="string"==typeof i?{uri:i}:JSON.parse(JSON.stringify(i)),i.onResponse=a,i.verbose&&(e.log=r()),i.url&&(i.uri=i.url,delete i.url),!i.uri&&""!==i.uri)throw new Error("options.uri is a required argument");if("string"!=typeof i.uri)throw new Error("options.uri must be a string");for(var u=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],c=0;c<u.length;c++)if(i[u[c]])throw new Error("options."+u[c]+" is not supported");if(i.callback=o,i.method=i.method||"GET",i.headers=i.headers||{},i.body=i.body||null,i.timeout=i.timeout||e.DEFAULT_TIMEOUT,i.headers.host)throw new Error("Options.headers.host is not supported");i.json&&(i.headers.accept=i.headers.accept||"application/json","GET"!==i.method&&(i.headers["content-type"]="application/json"),"boolean"!=typeof i.json?i.body=JSON.stringify(i.json):"string"!=typeof i.body&&(i.body=JSON.stringify(i.body)));var l=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")};if(i.qs){var h="string"==typeof i.qs?i.qs:l(i.qs);i.uri=-1!==i.uri.indexOf("?")?i.uri+"&"+h:i.uri+"?"+h}var d=function(e){var t={};t.boundry="-------------------------------"+Math.floor(1e9*Math.random());var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push("--"+t.boundry+'\nContent-Disposition: form-data; name="'+r+'"\n\n'+e[r]+"\n");return n.push("--"+t.boundry+"--"),t.body=n.join(""),t.length=t.body.length,t.type="multipart/form-data; boundary="+t.boundry,t};if(i.form){if("string"==typeof i.form)throw"form name unsupported";if("POST"===i.method){var f=(i.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(i.headers["content-type"]=f,f){case"application/x-www-form-urlencoded":i.body=l(i.form).replace(/%20/g,"+");break;case"multipart/form-data":var p=d(i.form);i.body=p.body,i.headers["content-type"]=p.type;break;default:throw new Error("unsupported encoding:"+f)}}}return i.onResponse=i.onResponse||n,i.onResponse===!0&&(i.onResponse=o,i.callback=n),!i.headers.authorization&&i.auth&&(i.headers.authorization="Basic "+s(i.auth.username+":"+i.auth.password)),t(i)}function t(t){function n(){h=!0;var n=new Error("ETIMEDOUT");return n.code="ETIMEDOUT",n.duration=t.timeout,e.log.error("Timeout",{id:l._id,milliseconds:t.timeout}),t.callback(n,l)}function r(){if(h)return e.log.debug("Ignoring timed out state change",{state:l.readyState,id:l.id});if(e.log.debug("State change",{state:l.readyState,id:l.id,timed_out:h}),l.readyState===a.OPENED){e.log.debug("Request started",{id:l.id});for(var n in t.headers)l.setRequestHeader(n,t.headers[n])}else l.readyState===a.HEADERS_RECEIVED?i():l.readyState===a.LOADING?(i(),s()):l.readyState===a.DONE&&(i(),s(),u())}function i(){if(!g.response){if(g.response=!0,e.log.debug("Got response",{id:l.id,status:l.status}),clearTimeout(l.timeoutTimer),l.statusCode=l.status,d&&0==l.statusCode){var n=new Error("CORS request rejected: "+t.uri);return n.cors="rejected",g.loading=!0,g.end=!0,t.callback(n,l)}t.onResponse(null,l)}}function s(){g.loading||(g.loading=!0,e.log.debug("Response body loading",{id:l.id}))}function u(){if(!g.end){if(g.end=!0,e.log.debug("Request done",{id:l.id}),l.body=l.responseText,t.json)try{l.body=JSON.parse(l.responseText)}catch(n){return t.callback(n,l)}t.callback(null,l,l.body)}}var l=new a,h=!1,d=o(t.uri),f="withCredentials"in l;if(c+=1,l.seq_id=c,l.id=c+": "+t.method+" "+t.uri,l._id=l.id,d&&!f){var p=new Error("Browser does not support cross-origin request: "+t.uri);return p.cors="unsupported",t.callback(p,l)}l.timeoutTimer=setTimeout(n,t.timeout);var g={response:!1,loading:!1,end:!1};return l.onreadystatechange=r,l.open(t.method,t.uri,!0),d&&(l.withCredentials=!!t.withCredentials),l.send(t.body),l}function n(){}function r(){var e,t,r={},o=["trace","debug","info","warn","error"];for(t=0;t<o.length;t++)e=o[t],r[e]=n,"undefined"!=typeof console&&console&&console[e]&&(r[e]=i(console,e));return r}function i(e,t){function n(n,r){return"object"==typeof r&&(n+=" "+JSON.stringify(r)),e[t].call(e,n)}return n}function o(e){var t,n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{t=location.href}catch(r){t=document.createElement("a"),t.href="",t=t.href}var i=n.exec(t.toLowerCase())||[],o=n.exec(e.toLowerCase()),s=!(!o||o[1]==i[1]&&o[2]==i[2]&&(o[3]||("http:"===o[1]?80:443))==(i[3]||("http:"===i[1]?80:443)));return s}function s(e){var t,n,r,i,o,s,a,u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,h=0,d="",f=[];if(!e)return e;do t=e.charCodeAt(l++),n=e.charCodeAt(l++),r=e.charCodeAt(l++),u=t<<16|n<<8|r,i=u>>18&63,o=u>>12&63,s=u>>6&63,a=63&u,f[h++]=c.charAt(i)+c.charAt(o)+c.charAt(s)+c.charAt(a);while(l<e.length);switch(d=f.join(""),e.length%3){case 1:d=d.slice(0,-2)+"==";break;case 2:d=d.slice(0,-1)+"="}return d}var a=XMLHttpRequest;if(!a)throw new Error("missing XMLHttpRequest");e.log={trace:n,debug:n,info:n,warn:n,error:n};var u=18e4,c=0;e.withCredentials=!1,e.DEFAULT_TIMEOUT=u,e.defaults=function(t){var n=function(e){var n=function(n,r){n="string"==typeof n?{uri:n}:JSON.parse(JSON.stringify(n));for(var i in t)void 0===n[i]&&(n[i]=t[i]);return e(n,r)};return n},r=n(e);return r.get=n(e.get),r.post=n(e.post),r.put=n(e.put),r.head=n(e.head),r};var l=["get","put","post","head"];return l.forEach(function(t){var n=t.toUpperCase(),r=t.toLowerCase();e[r]=function(t){"string"==typeof t?t={method:n,uri:t}:(t=JSON.parse(JSON.stringify(t)),t.method=n);var r=[t].concat(Array.prototype.slice.apply(arguments,[1]));return e.apply(this,r)}}),e.couch=function(t,r){function i(e,t,n){if(e)return r(e,t,n);if((t.statusCode<200||t.statusCode>299)&&n.error){e=new Error("CouchDB error: "+(n.error.reason||n.error.error));for(var i in n)e[i]=n[i];return r(e,t,n)}return r(e,t,n)}"string"==typeof t&&(t={uri:t}),t.json=!0,t.body&&(t.json=t.body),delete t.body,r=r||n;var o=e(t,i);return o},e})},{}],80:[function(){},{}],81:[function(e,t,n){function r(e,t){var n=this;if(!(n instanceof r))return new r(e,t);var i,o=typeof e;if("number"===o)i=+e;else if("string"===o)i=r.byteLength(e,t);else{if("object"!==o||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&j(e.data)&&(e=e.data),i=+e.length}if(i>R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R.toString(16)+" bytes");0>i?i=0:i>>>=0,r.TYPED_ARRAY_SUPPORT?n=r._augment(new Uint8Array(i)):(n.length=i,n._isBuffer=!0);var s;if(r.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)n._set(e);else if(A(e))if(r.isBuffer(e))for(s=0;i>s;s++)n[s]=e.readUInt8(s);else for(s=0;i>s;s++)n[s]=(e[s]%256+256)%256;else if("string"===o)n.write(e,0,t);else if("number"===o&&!r.TYPED_ARRAY_SUPPORT)for(s=0;i>s;s++)n[s]=0;return i>0&&i<=r.poolSize&&(n.parent=F),n}function i(e,t){if(!(this instanceof i))return new i(e,t);var n=new r(e,t);return delete n.parent,n}function o(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[n+s]=a}return s}function s(e,t,n,r){var i=L(k(t,e.length-n),e,n,r);return i}function a(e,t,n,r){var i=L(M(t),e,n,r);return i}function u(e,t,n,r){return a(e,t,n,r)}function c(e,t,n,r){var i=L(N(t),e,n,r);return i}function l(e,t,n,r){var i=L(P(t,e.length-n),e,n,r);return i}function h(e,t,n){return D.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function d(e,t,n){var r="",i="";n=Math.min(e.length,n);for(var o=t;n>o;o++)e[o]<=127?(r+=I(i)+String.fromCharCode(e[o]),i=""):i+="%"+e[o].toString(16);return r+I(i)}function f(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function p(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function g(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;o++)i+=C(e[o]);return i}function m(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function y(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function v(e,t,n,i,o,s){if(!r.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>o||s>t)throw new RangeError("value is out of bounds");if(n+i>e.length)throw new RangeError("index out of range")}function b(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function w(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function x(e,t,n,r,i,o){if(t>i||o>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function E(e,t,n,r,i){return i||x(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),O.write(e,t,n,r,23,4),n+4}function S(e,t,n,r,i){return i||x(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),O.write(e,t,n,r,52,8),n+8}function _(e){if(e=T(e).replace(z,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function T(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function A(e){return j(e)||r.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function C(e){return 16>e?"0"+e.toString(16):e.toString(16)}function k(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;r>s;s++){if(n=e.charCodeAt(s),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&((t-=3)>-1&&o.push(239,191,189),i=null);if(128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(2097152>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function M(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function P(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);s++)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function N(e){return D.toByteArray(_(e))}function L(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}function I(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}var D=e("base64-js"),O=e("ieee754"),j=e("is-array");n.Buffer=r,n.SlowBuffer=i,n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var R=1073741823,F={};r.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),r.isBuffer=function(e){return!(null==e||!e._isBuffer)},r.compare=function(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,s=Math.min(n,i);s>o&&e[o]===t[o];o++);return o!==s&&(n=e[o],i=t[o]),i>n?-1:n>i?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;
default:return!1}},r.concat=function(e,t){if(!j(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new r(0);if(1===e.length)return e[0];var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var i=new r(t),o=0;for(n=0;n<e.length;n++){var s=e[n];s.copy(i,o),o+=s.length}return i},r.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":n=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;case"hex":n=e.length>>>1;break;case"utf8":case"utf-8":n=k(e).length;break;case"base64":n=N(e).length;break;default:n=e.length}return n},r.prototype.length=void 0,r.prototype.parent=void 0,r.prototype.toString=function(e,t,n){var r=!1;if(t>>>=0,n=void 0===n||1/0===n?this.length:n>>>0,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return g(this,t,n);case"utf8":case"utf-8":return d(this,t,n);case"ascii":return f(this,t,n);case"binary":return p(this,t,n);case"base64":return h(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}},r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===r.compare(this,e)},r.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},r.prototype.compare=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:r.compare(this,e)},r.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(r.isBuffer(e))return n(this,e,t);if("number"==typeof e)return r.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},r.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},r.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},r.prototype.write=function(e,t,n,r){if(isFinite(t))isFinite(n)||(r=n,n=void 0);else{var i=r;r=t,t=n,n=i}if(t=Number(t)||0,0>n||0>t||t>this.length)throw new RangeError("attempt to write outside buffer bounds");var h=this.length-t;n?(n=Number(n),n>h&&(n=h)):n=h,r=String(r||"utf8").toLowerCase();var d;switch(r){case"hex":d=o(this,e,t,n);break;case"utf8":case"utf-8":d=s(this,e,t,n);break;case"ascii":d=a(this,e,t,n);break;case"binary":d=u(this,e,t,n);break;case"base64":d=c(this,e,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":d=l(this,e,t,n);break;default:throw new TypeError("Unknown encoding: "+r)}return d},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var i;if(r.TYPED_ARRAY_SUPPORT)i=r._augment(this.subarray(e,t));else{var o=t-e;i=new r(o,void 0);for(var s=0;o>s;s++)i[s]=this[s+e]}return i.length&&(i.parent=this.parent||this),i},r.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||y(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},r.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||y(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},r.prototype.readUInt8=function(e,t){return t||y(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return t||y(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return t||y(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return t||y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return t||y(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||y(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},r.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||y(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},r.prototype.readInt8=function(e,t){return t||y(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){t||y(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(e,t){t||y(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(e,t){return t||y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return t||y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return t||y(e,4,this.length),O.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return t||y(e,4,this.length),O.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return t||y(e,8,this.length),O.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return t||y(e,8,this.length),O.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||v(this,e,t,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i>>>0&255;return t+n},r.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||v(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o>>>0&255;return t+n},r.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||v(this,e,t,1,255,0),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},r.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||v(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):b(this,e,t,!0),t+2},r.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||v(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):b(this,e,t,!1),t+2},r.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||v(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):w(this,e,t,!0),t+4},r.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||v(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):w(this,e,t,!1),t+4},r.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||v(this,e,t,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var i=0,o=1,s=0>e?1:0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=(e/o>>0)-s&255;return t+n},r.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||v(this,e,t,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var i=n-1,o=1,s=0>e?1:0;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=(e/o>>0)-s&255;return t+n},r.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||v(this,e,t,1,127,-128),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},r.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||v(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):b(this,e,t,!0),t+2},r.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||v(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):b(this,e,t,!1),t+2},r.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||v(this,e,t,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):w(this,e,t,!0),t+4},r.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||v(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):w(this,e,t,!1),t+4},r.prototype.writeFloatLE=function(e,t,n){return E(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){return E(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){return S(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){return S(this,e,t,!1,n)},r.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&n>i&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n;if(1e3>o||!r.TYPED_ARRAY_SUPPORT)for(var s=0;o>s;s++)e[s+t]=this[s+n];else e._set(this.subarray(n,n+o),t);return o},r.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=k(e.toString()),o=i.length;for(r=t;n>r;r++)this[r]=i[r%o]}return this}},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r.TYPED_ARRAY_SUPPORT)return new r(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var U=r.prototype;r._augment=function(e){return e.constructor=r,e._isBuffer=!0,e._set=e.set,e.get=U.get,e.set=U.set,e.write=U.write,e.toString=U.toString,e.toLocaleString=U.toString,e.toJSON=U.toJSON,e.equals=U.equals,e.compare=U.compare,e.indexOf=U.indexOf,e.copy=U.copy,e.slice=U.slice,e.readUIntLE=U.readUIntLE,e.readUIntBE=U.readUIntBE,e.readUInt8=U.readUInt8,e.readUInt16LE=U.readUInt16LE,e.readUInt16BE=U.readUInt16BE,e.readUInt32LE=U.readUInt32LE,e.readUInt32BE=U.readUInt32BE,e.readIntLE=U.readIntLE,e.readIntBE=U.readIntBE,e.readInt8=U.readInt8,e.readInt16LE=U.readInt16LE,e.readInt16BE=U.readInt16BE,e.readInt32LE=U.readInt32LE,e.readInt32BE=U.readInt32BE,e.readFloatLE=U.readFloatLE,e.readFloatBE=U.readFloatBE,e.readDoubleLE=U.readDoubleLE,e.readDoubleBE=U.readDoubleBE,e.writeUInt8=U.writeUInt8,e.writeUIntLE=U.writeUIntLE,e.writeUIntBE=U.writeUIntBE,e.writeUInt16LE=U.writeUInt16LE,e.writeUInt16BE=U.writeUInt16BE,e.writeUInt32LE=U.writeUInt32LE,e.writeUInt32BE=U.writeUInt32BE,e.writeIntLE=U.writeIntLE,e.writeIntBE=U.writeIntBE,e.writeInt8=U.writeInt8,e.writeInt16LE=U.writeInt16LE,e.writeInt16BE=U.writeInt16BE,e.writeInt32LE=U.writeInt32LE,e.writeInt32BE=U.writeInt32BE,e.writeFloatLE=U.writeFloatLE,e.writeFloatBE=U.writeFloatBE,e.writeDoubleLE=U.writeDoubleLE,e.writeDoubleBE=U.writeDoubleBE,e.fill=U.fill,e.inspect=U.inspect,e.toArrayBuffer=U.toArrayBuffer,e};var z=/[^+\/0-9A-z\-]/g},{"base64-js":82,ieee754:83,"is-array":84}],82:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s||t===h?62:t===a||t===d?63:u>t?-1:u+10>t?t-u+26+26:l+26>t?t-l:c+26>t?t-c+26:void 0}function n(e){function n(e){c[h++]=e}var r,i,s,a,u,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;u="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,c=new o(3*e.length/4-u),s=u>0?e.length-4:e.length;var h=0;for(r=0,i=0;s>r;r+=4,i+=3)a=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&a)):1===u&&(a=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(a>>8&255),n(255&a)),c}function i(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,s,a=e.length%3,u="";for(i=0,s=e.length-a;s>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],u+=n(o);switch(a){case 1:o=e[e.length-1],u+=t(o>>2),u+=t(o<<4&63),u+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],u+=t(o>>10),u+=t(o>>4&63),u+=t(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),h="-".charCodeAt(0),d="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],83:[function(e,t,n){n.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-l)-1,f>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+h],h+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return s?0/0:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+h>=1?d/u:d*Math.pow(2,1-h),t*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*u-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+f]=255&s,f+=p,s/=256,c-=8);e[n+f-p]|=128*g}},{}],84:[function(e,t){var n=Array.isArray,r=Object.prototype.toString;t.exports=n||function(e){return!!e&&"[object Array]"==r.call(e)}},{}],85:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,a=new Array(i-1),u=1;i>u;u++)a[u-1]=arguments[u];n.apply(this,a)}else if(o(n)){for(i=arguments.length,a=new Array(i-1),u=1;i>u;u++)a[u-1]=arguments[u];for(c=n.slice(),i=c.length,u=0;i>u;u++)c[u].apply(this,a)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var i;i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],86:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],87:[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],88:[function(e,t){function n(){if(!s){s=!0;for(var e,t=o.length;t;){e=o,o=[];for(var n=-1;++n<t;)e[n]();t=o.length}s=!1}}function r(){}var i=t.exports={},o=[],s=!1;i.nextTick=function(e){o.push(e),s||setTimeout(n,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],89:[function(e,t){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":90}],90:[function(e,t){(function(n){function r(e){return this instanceof r?(u.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function o(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}t.exports=r;var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},a=e("core-util-is");a.inherits=e("inherits");var u=e("./_stream_readable"),c=e("./_stream_writable");a.inherits(r,u),o(s(c.prototype),function(e){r.prototype[e]||(r.prototype[e]=c.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":92,"./_stream_writable":94,_process:88,"core-util-is":95,inherits:86}],91:[function(e,t){function n(e){return this instanceof n?void r.call(this,e):new n(e)}t.exports=n;var r=e("./_stream_transform"),i=e("core-util-is");i.inherits=e("inherits"),i.inherits(n,r),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":93,"core-util-is":95,inherits:86}],92:[function(e,t){(function(n){function r(t,n){var r=e("./_stream_duplex");t=t||{};var i=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(k||(k=e("string_decoder/").StringDecoder),this.decoder=new k(t.encoding),this.encoding=t.encoding)}function i(t){e("./_stream_duplex");return this instanceof i?(this._readableState=new r(t,this),this.readable=!0,void A.call(this)):new i(t)}function o(e,t,n,r,i){var o=c(t,n);if(o)e.emit("error",o);else if(C.isNullOrUndefined(n))t.reading=!1,t.ended||l(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||r||(n=t.decoder.write(n)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&h(e)),f(e,t);else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=P)e=P;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||C.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var n=null;return C.isBuffer(t)||C.isString(t)||C.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,h(e)}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(M("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(function(){d(e)}):d(e))}function d(e){M("emit readable"),e.emit("readable"),v(e)}function f(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(function(){p(e,t)}))}function p(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(M("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;M("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&T.listenerCount(e,"data")&&(t.flowing=!0,v(e))}}function m(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(function(){y(e,t)}))}function y(e,t){t.resumeScheduled=!1,e.emit("resume"),v(e),t.flowing&&!t.reading&&e.read(0)}function v(e){var t=e._readableState;if(M("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function b(e,t){var n,r=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!e||e>=i)n=o?r.join(""):_.concat(r,i),r.length=0;else if(e<r[0].length){var a=r[0];n=a.slice(0,e),r[0]=a.slice(e)}else if(e===r[0].length)n=r.shift();else{n=o?"":new _(e);for(var u=0,c=0,l=r.length;l>c&&e>u;c++){var a=r[0],h=Math.min(e-u,a.length);o?n+=a.slice(0,h):a.copy(n,u,0,h),h<a.length?r[0]=a.slice(h):r.shift(),u+=h}}return n}function w(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,n.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function x(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function E(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}t.exports=i;var S=e("isarray"),_=e("buffer").Buffer;i.ReadableState=r;var T=e("events").EventEmitter;T.listenerCount||(T.listenerCount=function(e,t){return e.listeners(t).length});var A=e("stream"),C=e("core-util-is");C.inherits=e("inherits");var k,M=e("util");M=M&&M.debuglog?M.debuglog("stream"):function(){},C.inherits(i,A),i.prototype.push=function(e,t){var n=this._readableState;return C.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=new _(e,t),t="")),o(this,n,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.setEncoding=function(t){return k||(k=e("string_decoder/").StringDecoder),this._readableState.decoder=new k(t),this._readableState.encoding=t,this};var P=8388608;i.prototype.read=function(e){M("read",e);var t=this._readableState,n=e;if((!C.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return M("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?w(this):h(this),null;if(e=u(e,t),0===e&&t.ended)return 0===t.length&&w(this),null;var r=t.needReadable;M("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,M("length less than watermark",r)),(t.ended||t.reading)&&(r=!1,M("reading or ended",r)),r&&(M("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=u(n,t));var i;return i=e>0?b(e,t):null,C.isNull(i)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&w(this),C.isNull(i)||this.emit("data",i),i},i.prototype._read=function(){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function r(e){M("onunpipe"),e===h&&o()}function i(){M("onend"),e.end()}function o(){M("cleanup"),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("drain",m),e.removeListener("error",a),e.removeListener("unpipe",r),h.removeListener("end",i),h.removeListener("end",o),h.removeListener("data",s),!d.awaitDrain||e._writableState&&!e._writableState.needDrain||m()}function s(t){M("ondata");var n=e.write(t);!1===n&&(M("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,h.pause())}function a(t){M("onerror",t),l(),e.removeListener("error",a),0===T.listenerCount(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",c),l()}function c(){M("onfinish"),e.removeListener("close",u),l()}function l(){M("unpipe"),h.unpipe(e)}var h=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,M("pipe count=%d opts=%j",d.pipesCount,t);var f=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,p=f?i:o;d.endEmitted?n.nextTick(p):h.once("end",p),e.on("unpipe",r);var m=g(h);return e.on("drain",m),h.on("data",s),e._events&&e._events.error?S(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",u),e.once("finish",c),e.emit("pipe",h),d.flowing||(M("pipe resume"),h.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=E(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=A.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&h(this,i);else{var o=this;n.nextTick(function(){M("readable nexttick read 0"),o.read(0)})}}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(M("resume"),e.flowing=!0,e.reading||(M("resume read 0"),this.read(0)),m(this,e)),this},i.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(M("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(M("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)C.isFunction(e[i])&&C.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return x(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){M("wrapped _read",t),n&&(n=!1,e.resume())},r},i._fromList=b}).call(this,e("_process"))},{"./_stream_duplex":90,_process:88,buffer:81,"core-util-is":95,events:85,inherits:86,isarray:87,stream:100,"string_decoder/":101,util:80}],93:[function(e,t){function n(e,t){this.afterTransform=function(e,n){return r(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function r(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,a.isNullOrUndefined(n)||e.push(n),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState=new n(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){a.isFunction(this._flush)?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=i;var s=e("./_stream_duplex"),a=e("core-util-is");a.inherits=e("inherits"),a.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(){throw new Error("not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(){var e=this._transformState;a.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},{"./_stream_duplex":90,"core-util-is":95,inherits:86}],94:[function(e,t){(function(n){function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function i(t,n){var r=e("./_stream_duplex");t=t||{};var i=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!t.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){f(n,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(t){var n=e("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new i(t,this),this.writable=!0,void S.call(this)):new o(t)}function s(e,t,r){var i=new Error("write after end");e.emit("error",i),n.nextTick(function(){r(i)})}function a(e,t,r,i){var o=!0;if(!(E.isBuffer(r)||E.isString(r)||E.isNullOrUndefined(r)||t.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),n.nextTick(function(){i(s)}),o=!1}return o}function u(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&E.isString(t)&&(t=new x(t,n)),t}function c(e,t,n,i,o){n=u(t,n,i),E.isBuffer(n)&&(i="buffer");var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;
return a||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new r(n,i,o)):l(e,t,!1,s,n,i,o),a}function l(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,r,i,o){r?n.nextTick(function(){t.pendingcb--,o(i)}):(t.pendingcb--,o(i)),e._writableState.errorEmitted=!0,e.emit("error",i)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function f(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if(d(r),t)h(e,r,i,t,o);else{var s=y(e,r);s||r.corked||r.bufferProcessing||!r.buffer.length||m(e,r),i?n.nextTick(function(){p(e,r,s,o)}):p(e,r,s,o)}}function p(e,t,n,r){n||g(e,t),t.pendingcb--,r(),b(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function m(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],r=0;r<t.buffer.length;r++)n.push(t.buffer[r].callback);t.pendingcb++,l(e,t,!0,t.length,t.buffer,"",function(e){for(var r=0;r<n.length;r++)t.pendingcb--,n[r](e)}),t.buffer=[]}else{for(var r=0;r<t.buffer.length;r++){var i=t.buffer[r],o=i.chunk,s=i.encoding,a=i.callback,u=t.objectMode?1:o.length;if(l(e,t,!1,u,o,s,a),t.writing){r++;break}}r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}t.bufferProcessing=!1}function y(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function v(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function b(e,t){var n=y(e,t);return n&&(0===t.pendingcb?(v(e,t),t.finished=!0,e.emit("finish")):v(e,t)),n}function w(e,t,r){t.ending=!0,b(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0}t.exports=o;var x=e("buffer").Buffer;o.WritableState=i;var E=e("core-util-is");E.inherits=e("inherits");var S=e("stream");E.inherits(o,S),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return E.isFunction(t)&&(n=t,t=null),E.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),E.isFunction(n)||(n=function(){}),r.ended?s(this,r,n):a(this,r,e,n)&&(r.pendingcb++,i=c(this,r,e,t,n)),i},o.prototype.cork=function(){var e=this._writableState;e.corked++},o.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||m(this,e))},o.prototype._write=function(e,t,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(e,t,n){var r=this._writableState;E.isFunction(e)?(n=e,e=null,t=null):E.isFunction(t)&&(n=t,t=null),E.isNullOrUndefined(e)||this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(this,e("_process"))},{"./_stream_duplex":90,_process:88,buffer:81,"core-util-is":95,inherits:86,stream:100}],95:[function(e,t,n){(function(e){function t(e){return Array.isArray(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function l(e){return h(e)&&"[object RegExp]"===y(e)}function h(e){return"object"==typeof e&&null!==e}function d(e){return h(e)&&"[object Date]"===y(e)}function f(e){return h(e)&&("[object Error]"===y(e)||e instanceof Error)}function p(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function m(t){return e.isBuffer(t)}function y(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=s,n.isString=a,n.isSymbol=u,n.isUndefined=c,n.isRegExp=l,n.isObject=h,n.isDate=d,n.isError=f,n.isFunction=p,n.isPrimitive=g,n.isBuffer=m}).call(this,e("buffer").Buffer)},{buffer:81}],96:[function(e,t){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":91}],97:[function(e,t,n){n=t.exports=e("./lib/_stream_readable.js"),n.Stream=e("stream"),n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":90,"./lib/_stream_passthrough.js":91,"./lib/_stream_readable.js":92,"./lib/_stream_transform.js":93,"./lib/_stream_writable.js":94,stream:100}],98:[function(e,t){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":93}],99:[function(e,t){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":94}],100:[function(e,t){function n(){r.call(this)}t.exports=n;var r=e("events").EventEmitter,i=e("inherits");i(n,r),n.Readable=e("readable-stream/readable.js"),n.Writable=e("readable-stream/writable.js"),n.Duplex=e("readable-stream/duplex.js"),n.Transform=e("readable-stream/transform.js"),n.PassThrough=e("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function i(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,e.end())}function s(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(u(),0===r.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",n),e.removeListener("drain",i),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),e.removeListener("error",a),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",n),e.on("drain",i),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",s));var l=!1;return c.on("error",a),e.on("error",a),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},{events:85,inherits:86,"readable-stream/duplex.js":89,"readable-stream/passthrough.js":96,"readable-stream/readable.js":97,"readable-stream/transform.js":98,"readable-stream/writable.js":99}],101:[function(e,t,n){function r(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,u=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&56319>=r){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},{buffer:81}],102:[function(e,t){(function(n){(function(r){function i(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function o(e,t){return kt.call(e,t)}function s(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function a(e){Et.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function u(e,t){var n=!0;return g(function(){return n&&(a(e),n=!1),t.apply(this,arguments)},t)}function c(e,t){wn[e]||(a(t),wn[e]=!0)}function l(e,t){return function(n){return v(e.call(this,n),t)}}function h(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function d(){}function f(e,t){t!==!1&&D(e),m(this,e),this._d=new Date(+e._d)}function p(e){var t=C(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,s=t.day||0,a=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*c+6e4*u+36e5*a,this._days=+s+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=Et.localeData(),this._bubble()}function g(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function m(e,t){var n,r,i;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Rt.length>0)for(n in Rt)r=Rt[n],i=t[r],"undefined"!=typeof i&&(e[r]=i);return e}function y(e){return 0>e?Math.ceil(e):Math.floor(e)}function v(e,t,n){for(var r=""+Math.abs(e),i=e>=0;r.length<t;)r="0"+r;return(i?n?"+":"":"-")+r}function b(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function w(e,t){var n;return t=U(t,e),e.isBefore(t)?n=b(e,t):(n=b(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function x(e,t){return function(n,r){var i,o;return null===r||isNaN(+r)||(c(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=Et.duration(n,r),E(this,i,e),this}}function E(e,t,n,r){var i=t._milliseconds,o=t._days,s=t._months;r=null==r?!0:r,i&&e._d.setTime(+e._d+i*n),o&&mt(e,"Date",gt(e,"Date")+o*n),s&&pt(e,gt(e,"Month")+s*n),r&&Et.updateOffset(e,o||s)}function S(e){return"[object Array]"===Object.prototype.toString.call(e)}function _(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function T(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(r=0;i>r;r++)(n&&e[r]!==t[r]||!n&&M(e[r])!==M(t[r]))&&s++;return s+o}function A(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=fn[e]||pn[t]||t}return e}function C(e){var t,n,r={};for(n in e)o(e,n)&&(t=A(n),t&&(r[t]=e[n]));return r}function k(e){var t,n;if(0===e.indexOf("week"))t=7,n="day";else{if(0!==e.indexOf("month"))return;t=12,n="month"}Et[e]=function(i,o){var s,a,u=Et._locale[e],c=[];if("number"==typeof i&&(o=i,i=r),a=function(e){var t=Et().utc().set(n,e);return u.call(Et._locale,t,i||"")},null!=o)return a(o);for(s=0;t>s;s++)c.push(a(s));return c}}function M(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function P(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function N(e,t,n){return lt(Et([e,11,31+t-n]),t,n).week}function L(e){return I(e)?366:365}function I(e){return e%4===0&&e%100!==0||e%400===0}function D(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Pt]<0||e._a[Pt]>11?Pt:e._a[Nt]<1||e._a[Nt]>P(e._a[Mt],e._a[Pt])?Nt:e._a[Lt]<0||e._a[Lt]>24||24===e._a[Lt]&&(0!==e._a[It]||0!==e._a[Dt]||0!==e._a[Ot])?Lt:e._a[It]<0||e._a[It]>59?It:e._a[Dt]<0||e._a[Dt]>59?Dt:e._a[Ot]<0||e._a[Ot]>999?Ot:-1,e._pf._overflowDayOfYear&&(Mt>t||t>Nt)&&(t=Nt),e._pf.overflow=t)}function O(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===r)),e._isValid}function j(e){return e?e.toLowerCase().replace("_","-"):e}function R(e){for(var t,n,r,i,o=0;o<e.length;){for(i=j(e[o]).split("-"),t=i.length,n=j(e[o+1]),n=n?n.split("-"):null;t>0;){if(r=F(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&T(i,n,!0)>=t-1)break;t--}o++}return null}function F(t){var n=null;if(!jt[t]&&Ft)try{n=Et.locale(),e("./locale/"+t),Et.locale(n)}catch(r){}return jt[t]}function U(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(Et.isMoment(e)||_(e)?+e:+Et(e))-+n,n._d.setTime(+n._d+r),Et.updateOffset(n,!1),n):Et(e).local()}function z(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function B(e){var t,n,r=e.match(Wt);for(t=0,n=r.length;n>t;t++)r[t]=bn[r[t]]?bn[r[t]]:z(r[t]);return function(i){var o="";for(t=0;n>t;t++)o+=r[t]instanceof Function?r[t].call(i,e):r[t];return o}}function W(e,t){return e.isValid()?(t=Y(t,e.localeData()),gn[t]||(gn[t]=B(t)),gn[t](e)):e.localeData().invalidDate()}function Y(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Yt.lastIndex=0;r>=0&&Yt.test(e);)e=e.replace(Yt,n),Yt.lastIndex=0,r-=1;return e}function q(e,t){var n,r=t._strict;switch(e){case"Q":return en;case"DDDD":return nn;case"YYYY":case"GGGG":case"gggg":return r?rn:Gt;case"Y":case"G":case"g":return sn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?on:Xt;case"S":if(r)return en;case"SS":if(r)return tn;case"SSS":if(r)return nn;case"DDD":return Ht;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Vt;case"a":case"A":return t._locale._meridiemParse;case"x":return Jt;case"X":return Zt;case"Z":case"ZZ":return Kt;case"T":return Qt;case"SSSS":return $t;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?tn:qt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return qt;case"Do":return r?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(Z(J(e.replace("\\","")),"i"))}}function H(e){e=e||"";var t=e.match(Kt)||[],n=t[t.length-1]||[],r=(n+"").match(hn)||["-",0,0],i=+(60*r[1])+M(r[2]);return"+"===r[0]?-i:i}function G(e,t,n){var r,i=n._a;switch(e){case"Q":null!=t&&(i[Pt]=3*(M(t)-1));break;case"M":case"MM":null!=t&&(i[Pt]=M(t)-1);break;case"MMM":case"MMMM":r=n._locale.monthsParse(t,e,n._strict),null!=r?i[Pt]=r:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(i[Nt]=M(t));break;case"Do":null!=t&&(i[Nt]=M(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=M(t));break;case"YY":i[Mt]=Et.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":i[Mt]=M(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":i[Lt]=M(t);break;case"m":case"mm":i[It]=M(t);break;case"s":case"ss":i[Dt]=M(t);break;case"S":case"SS":case"SSS":case"SSSS":i[Ot]=M(1e3*("0."+t));break;case"x":n._d=new Date(M(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=H(t);break;case"dd":case"ddd":case"dddd":r=n._locale.weekdaysParse(t),null!=r?(n._w=n._w||{},n._w.d=r):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=M(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=Et.parseTwoDigitYear(t)}}function X(e){var t,n,r,o,s,a,u;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(s=1,a=4,n=i(t.GG,e._a[Mt],lt(Et(),1,4).year),r=i(t.W,1),o=i(t.E,1)):(s=e._locale._week.dow,a=e._locale._week.doy,n=i(t.gg,e._a[Mt],lt(Et(),s,a).year),r=i(t.w,1),null!=t.d?(o=t.d,s>o&&++r):o=null!=t.e?t.e+s:s),u=ht(n,r,o,a,s),e._a[Mt]=u.year,e._dayOfYear=u.dayOfYear}function $(e){var t,n,r,o,s=[];if(!e._d){for(r=K(e),e._w&&null==e._a[Nt]&&null==e._a[Pt]&&X(e),e._dayOfYear&&(o=i(e._a[Mt],r[Mt]),e._dayOfYear>L(o)&&(e._pf._overflowDayOfYear=!0),n=st(o,0,e._dayOfYear),e._a[Pt]=n.getUTCMonth(),e._a[Nt]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;7>t;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Lt]&&0===e._a[It]&&0===e._a[Dt]&&0===e._a[Ot]&&(e._nextDay=!0,e._a[Lt]=0),e._d=(e._useUTC?st:ot).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm),e._nextDay&&(e._a[Lt]=24)}}function V(e){var t;e._d||(t=C(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],$(e))}function K(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Q(e){if(e._f===Et.ISO_8601)return void tt(e);e._a=[],e._pf.empty=!0;var t,n,i,o,s,a=""+e._i,u=a.length,c=0;for(i=Y(e._f,e._locale).match(Wt)||[],t=0;t<i.length;t++)o=i[t],n=(a.match(q(o,e))||[])[0],n&&(s=a.substr(0,a.indexOf(n)),s.length>0&&e._pf.unusedInput.push(s),a=a.slice(a.indexOf(n)+n.length),c+=n.length),bn[o]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(o),G(o,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=u-c,a.length>0&&e._pf.unusedInput.push(a),e._pf.bigHour===!0&&e._a[Lt]<=12&&(e._pf.bigHour=r),e._isPm&&e._a[Lt]<12&&(e._a[Lt]+=12),e._isPm===!1&&12===e._a[Lt]&&(e._a[Lt]=0),$(e),D(e)}function J(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function Z(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function et(e){var t,n,r,i,o;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(i=0;i<e._f.length;i++)o=0,t=m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=s(),t._f=e._f[i],Q(t),O(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==r||r>o)&&(r=o,n=t));g(e,n||t)}function tt(e){var t,n,r=e._i,i=an.exec(r);if(i){for(e._pf.iso=!0,t=0,n=cn.length;n>t;t++)if(cn[t][1].exec(r)){e._f=cn[t][0]+(i[6]||" ");break}for(t=0,n=ln.length;n>t;t++)if(ln[t][1].exec(r)){e._f+=ln[t][0];break}r.match(Kt)&&(e._f+="Z"),Q(e)}else e._isValid=!1}function nt(e){tt(e),e._isValid===!1&&(delete e._isValid,Et.createFromInputFallback(e))}function rt(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function it(e){var t,n=e._i;n===r?e._d=new Date:_(n)?e._d=new Date(+n):null!==(t=Ut.exec(n))?e._d=new Date(+t[1]):"string"==typeof n?nt(e):S(n)?(e._a=rt(n.slice(0),function(e){return parseInt(e,10)}),$(e)):"object"==typeof n?V(e):"number"==typeof n?e._d=new Date(n):Et.createFromInputFallback(e)}function ot(e,t,n,r,i,o,s){var a=new Date(e,t,n,r,i,o,s);return 1970>e&&a.setFullYear(e),a}function st(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function at(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function ut(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function ct(e,t,n){var r=Et.duration(e).abs(),i=Ct(r.as("s")),o=Ct(r.as("m")),s=Ct(r.as("h")),a=Ct(r.as("d")),u=Ct(r.as("M")),c=Ct(r.as("y")),l=i<mn.s&&["s",i]||1===o&&["m"]||o<mn.m&&["mm",o]||1===s&&["h"]||s<mn.h&&["hh",s]||1===a&&["d"]||a<mn.d&&["dd",a]||1===u&&["M"]||u<mn.M&&["MM",u]||1===c&&["y"]||["yy",c];return l[2]=t,l[3]=+e>0,l[4]=n,ut.apply({},l)}function lt(e,t,n){var r,i=n-t,o=n-e.day();return o>i&&(o-=7),i-7>o&&(o+=7),r=Et(e).add(o,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function ht(e,t,n,r,i){var o,s,a=st(e,0,1).getUTCDay();return a=0===a?7:a,n=null!=n?n:i,o=i-a+(a>r?7:0)-(i>a?7:0),s=7*(t-1)+(n-i)+o+1,{year:s>0?e:e-1,dayOfYear:s>0?s:L(e-1)+s}}function dt(e){var t,n=e._i,i=e._f;return e._locale=e._locale||Et.localeData(e._l),null===n||i===r&&""===n?Et.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),Et.isMoment(n)?new f(n,!0):(i?S(i)?et(e):Q(e):it(e),t=new f(e),t._nextDay&&(t.add(1,"d"),t._nextDay=r),t))}function ft(e,t){var n,r;if(1===t.length&&S(t[0])&&(t=t[0]),!t.length)return Et();for(n=t[0],r=1;r<t.length;++r)t[r][e](n)&&(n=t[r]);return n}function pt(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),P(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function gt(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function mt(e,t,n){return"Month"===t?pt(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function yt(e,t){return function(n){return null!=n?(mt(this,e,n),Et.updateOffset(this,t),this):gt(this,e)}}function vt(e){return 400*e/146097}function bt(e){return 146097*e/400}function wt(e){Et.duration.fn[e]=function(){return this._data[e]}}function xt(e){"undefined"==typeof ender&&(St=At.moment,At.moment=e?u("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",Et):Et)}for(var Et,St,_t,Tt="2.8.4",At="undefined"!=typeof n?n:this,Ct=Math.round,kt=Object.prototype.hasOwnProperty,Mt=0,Pt=1,Nt=2,Lt=3,It=4,Dt=5,Ot=6,jt={},Rt=[],Ft="undefined"!=typeof t&&t&&t.exports,Ut=/^\/?Date\((\-?\d+)/i,zt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Bt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Wt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Yt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,qt=/\d\d?/,Ht=/\d{1,3}/,Gt=/\d{1,4}/,Xt=/[+\-]?\d{1,6}/,$t=/\d+/,Vt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Kt=/Z|[\+\-]\d\d:?\d\d/gi,Qt=/T/i,Jt=/[\+\-]?\d+/,Zt=/[\+\-]?\d+(\.\d{1,3})?/,en=/\d/,tn=/\d\d/,nn=/\d{3}/,rn=/\d{4}/,on=/[+-]?\d{6}/,sn=/[+-]?\d+/,an=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,un="YYYY-MM-DDTHH:mm:ssZ",cn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ln=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],hn=/([\+\-]|\d\d)/gi,dn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),fn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},pn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},gn={},mn={s:45,m:45,h:22,d:26,M:11},yn="DDD w W M D d".split(" "),vn="M D H h m s w W".split(" "),bn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+v(Math.abs(e),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return M(this.milliseconds()/100)},SS:function(){return v(M(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+v(M(e/60),2)+":"+v(M(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+v(M(e/60),2)+v(M(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},wn={},xn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];yn.length;)_t=yn.pop(),bn[_t+"o"]=h(bn[_t],_t);for(;vn.length;)_t=vn.pop(),bn[_t+_t]=l(bn[_t],2);bn.DDDD=l(bn.DDD,3),g(d.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var r,i,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(i=Et.utc([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=Et([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.apply(t,[n]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return lt(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),Et=function(e,t,n,i){var o;return"boolean"==typeof n&&(i=n,n=r),o={},o._isAMomentObject=!0,o._i=e,o._f=t,o._l=n,o._strict=i,o._isUTC=!1,o._pf=s(),dt(o)},Et.suppressDeprecationWarnings=!1,Et.createFromInputFallback=u("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),Et.min=function(){var e=[].slice.call(arguments,0);return ft("isBefore",e)},Et.max=function(){var e=[].slice.call(arguments,0);return ft("isAfter",e)},Et.utc=function(e,t,n,i){var o;return"boolean"==typeof n&&(i=n,n=r),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=n,o._i=e,o._f=t,o._strict=i,o._pf=s(),dt(o).utc()},Et.unix=function(e){return Et(1e3*e)},Et.duration=function(e,t){var n,r,i,s,a=e,u=null;return Et.isDuration(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(u=zt.exec(e))?(n="-"===u[1]?-1:1,a={y:0,d:M(u[Nt])*n,h:M(u[Lt])*n,m:M(u[It])*n,s:M(u[Dt])*n,ms:M(u[Ot])*n}):(u=Bt.exec(e))?(n="-"===u[1]?-1:1,i=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},a={y:i(u[2]),M:i(u[3]),d:i(u[4]),h:i(u[5]),m:i(u[6]),s:i(u[7]),w:i(u[8])}):"object"==typeof a&&("from"in a||"to"in a)&&(s=w(Et(a.from),Et(a.to)),a={},a.ms=s.milliseconds,a.M=s.months),r=new p(a),Et.isDuration(e)&&o(e,"_locale")&&(r._locale=e._locale),r},Et.version=Tt,Et.defaultFormat=un,Et.ISO_8601=function(){},Et.momentProperties=Rt,Et.updateOffset=function(){},Et.relativeTimeThreshold=function(e,t){return mn[e]===r?!1:t===r?mn[e]:(mn[e]=t,!0)},Et.lang=u("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return Et.locale(e,t)}),Et.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?Et.defineLocale(e,t):Et.localeData(e),n&&(Et.duration._locale=Et._locale=n)),Et._locale._abbr},Et.defineLocale=function(e,t){return null!==t?(t.abbr=e,jt[e]||(jt[e]=new d),jt[e].set(t),Et.locale(e),jt[e]):(delete jt[e],null)},Et.langData=u("moment.langData is deprecated. Use moment.localeData instead.",function(e){return Et.localeData(e)}),Et.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Et._locale;if(!S(e)){if(t=F(e))return t;e=[e]}return R(e)},Et.isMoment=function(e){return e instanceof f||null!=e&&o(e,"_isAMomentObject")},Et.isDuration=function(e){return e instanceof p};for(_t=xn.length-1;_t>=0;--_t)k(xn[_t]);Et.normalizeUnits=function(e){return A(e)},Et.invalid=function(e){var t=Et.utc(0/0);return null!=e?g(t._pf,e):t._pf.userInvalidated=!0,t},Et.parseZone=function(){return Et.apply(null,arguments).parseZone()},Et.parseTwoDigitYear=function(e){return M(e)+(M(e)>68?1900:2e3)},g(Et.fn=f.prototype,{clone:function(){return Et(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d
},toISOString:function(){var e=Et(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():W(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):W(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return O(this)},isDSTShifted:function(){return this._a?this.isValid()&&T(this._a,(this._isUTC?Et.utc(this._a):Et(this._a)).toArray())>0:!1},parsingFlags:function(){return g({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=W(this,e||Et.defaultFormat);return this.localeData().postformat(t)},add:x(1,"add"),subtract:x(-1,"subtract"),diff:function(e,t,n){var r,i,o,s=U(e,this),a=6e4*(this.zone()-s.zone());return t=A(t),"year"===t||"month"===t?(r=432e5*(this.daysInMonth()+s.daysInMonth()),i=12*(this.year()-s.year())+(this.month()-s.month()),o=this-Et(this).startOf("month")-(s-Et(s).startOf("month")),o-=6e4*(this.zone()-Et(this).startOf("month").zone()-(s.zone()-Et(s).startOf("month").zone())),i+=o/r,"year"===t&&(i/=12)):(r=this-s,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-a)/864e5:"week"===t?(r-a)/6048e5:r),n?i:y(i)},from:function(e,t){return Et.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(Et(),e)},calendar:function(e){var t=e||Et(),n=U(t,this).startOf("day"),r=this.diff(n,"days",!0),i=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this,Et(t)))},isLeapYear:function(){return I(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=at(e,this.localeData()),this.add(e-t,"d")):t},month:yt("Month",!0),startOf:function(e){switch(e=A(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=A(e),e===r||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){var n;return t=A("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=Et.isMoment(e)?e:Et(e),+this>+e):(n=Et.isMoment(e)?+e:+Et(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=A("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=Et.isMoment(e)?e:Et(e),+e>+this):(n=Et.isMoment(e)?+e:+Et(e),+this.clone().endOf(t)<n)},isSame:function(e,t){var n;return t=A(t||"millisecond"),"millisecond"===t?(e=Et.isMoment(e)?e:Et(e),+this===+e):(n=+Et(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:u("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=Et.apply(null,arguments),this>e?this:e}),max:u("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=Et.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n,r=this._offset||0;return null==e?this._isUTC?r:this._dateTzOffset():("string"==typeof e&&(e=H(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),r!==e&&(!t||this._changeInProgress?E(this,Et.duration(r-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Et.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?Et(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return P(this.year(),this.month())},dayOfYear:function(e){var t=Ct((Et(this).startOf("day")-Et(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=lt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=lt(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=lt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return N(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return N(this.year(),e.dow,e.doy)},get:function(e){return e=A(e),this[e]()},set:function(e,t){return e=A(e),"function"==typeof this[e]&&this[e](t),this},locale:function(e){var t;return e===r?this._locale._abbr:(t=Et.localeData(e),null!=t&&(this._locale=t),this)},lang:u("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===r?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),Et.fn.millisecond=Et.fn.milliseconds=yt("Milliseconds",!1),Et.fn.second=Et.fn.seconds=yt("Seconds",!1),Et.fn.minute=Et.fn.minutes=yt("Minutes",!1),Et.fn.hour=Et.fn.hours=yt("Hours",!0),Et.fn.date=yt("Date",!0),Et.fn.dates=u("dates accessor is deprecated. Use date instead.",yt("Date",!0)),Et.fn.year=yt("FullYear",!0),Et.fn.years=u("years accessor is deprecated. Use year instead.",yt("FullYear",!0)),Et.fn.days=Et.fn.day,Et.fn.months=Et.fn.month,Et.fn.weeks=Et.fn.week,Et.fn.isoWeeks=Et.fn.isoWeek,Et.fn.quarters=Et.fn.quarter,Et.fn.toJSON=Et.fn.toISOString,g(Et.duration.fn=p.prototype,{_bubble:function(){var e,t,n,r=this._milliseconds,i=this._days,o=this._months,s=this._data,a=0;s.milliseconds=r%1e3,e=y(r/1e3),s.seconds=e%60,t=y(e/60),s.minutes=t%60,n=y(t/60),s.hours=n%24,i+=y(n/24),a=y(vt(i)),i-=y(bt(a)),o+=y(i/30),i%=30,a+=y(o/12),o%=12,s.days=i,s.months=o,s.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return y(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*M(this._months/12)},humanize:function(e){var t=ct(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=Et.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=Et.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=A(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=A(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*vt(t),"month"===e?n:n/12;switch(t=this._days+Math.round(bt(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:Et.fn.lang,locale:Et.fn.locale,toIsoString:u("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||o?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale}}),Et.duration.fn.toString=Et.duration.fn.toISOString;for(_t in dn)o(dn,_t)&&wt(_t.toLowerCase());Et.duration.fn.asMilliseconds=function(){return this.as("ms")},Et.duration.fn.asSeconds=function(){return this.as("s")},Et.duration.fn.asMinutes=function(){return this.as("m")},Et.duration.fn.asHours=function(){return this.as("h")},Et.duration.fn.asDays=function(){return this.as("d")},Et.duration.fn.asWeeks=function(){return this.as("weeks")},Et.duration.fn.asMonths=function(){return this.as("M")},Et.duration.fn.asYears=function(){return this.as("y")},Et.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===M(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Ft?t.exports=Et:"function"==typeof define&&define.amd?(define("moment",function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(At.moment=St),Et}),xt(!0)):xt()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],103:[function(e,t){(function(){function e(e){this._value=e}function n(e,t,n,r){var i,o,s=Math.pow(10,t);return o=(n(e*s)/s).toFixed(t),r&&(i=new RegExp("0{1,"+r+"}$"),o=o.replace(i,"")),o}function r(e,t,n){var r;return r=t.indexOf("$")>-1?o(e,t,n):t.indexOf("%")>-1?s(e,t,n):t.indexOf(":")>-1?a(e,t):c(e._value,t,n)}function i(e,t){var n,r,i,o,s,a=t,c=["KB","MB","GB","TB","PB","EB","ZB","YB"],l=!1;if(t.indexOf(":")>-1)e._value=u(t);else if(t===y)e._value=0;else{for("."!==g[m].delimiters.decimal&&(t=t.replace(/\./g,"").replace(g[m].delimiters.decimal,".")),n=new RegExp("[^a-zA-Z]"+g[m].abbreviations.thousand+"(?:\\)|(\\"+g[m].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+g[m].abbreviations.million+"(?:\\)|(\\"+g[m].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+g[m].abbreviations.billion+"(?:\\)|(\\"+g[m].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+g[m].abbreviations.trillion+"(?:\\)|(\\"+g[m].currency.symbol+")?(?:\\))?)?$"),s=0;s<=c.length&&!(l=t.indexOf(c[s])>-1?Math.pow(1024,s+1):!1);s++);e._value=(l?l:1)*(a.match(n)?Math.pow(10,3):1)*(a.match(r)?Math.pow(10,6):1)*(a.match(i)?Math.pow(10,9):1)*(a.match(o)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=l?Math.ceil(e._value):e._value}return e._value}function o(e,t,n){var r,i,o=t.indexOf("$"),s=t.indexOf("("),a=t.indexOf("-"),u="";return t.indexOf(" $")>-1?(u=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(u=" ",t=t.replace("$ ","")):t=t.replace("$",""),i=c(e._value,t,n),1>=o?i.indexOf("(")>-1||i.indexOf("-")>-1?(i=i.split(""),r=1,(s>o||a>o)&&(r=0),i.splice(r,0,g[m].currency.symbol+u),i=i.join("")):i=g[m].currency.symbol+u+i:i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,u+g[m].currency.symbol),i=i.join("")):i=i+u+g[m].currency.symbol,i}function s(e,t,n){var r,i="",o=100*e._value;return t.indexOf(" %")>-1?(i=" ",t=t.replace(" %","")):t=t.replace("%",""),r=c(o,t,n),r.indexOf(")")>-1?(r=r.split(""),r.splice(-1,0,i+"%"),r=r.join("")):r=r+i+"%",r}function a(e){var t=Math.floor(e._value/60/60),n=Math.floor((e._value-60*t*60)/60),r=Math.round(e._value-60*t*60-60*n);return t+":"+(10>n?"0"+n:n)+":"+(10>r?"0"+r:r)}function u(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*Number(t[0])*60,n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&&(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)}function c(e,t,r){var i,o,s,a,u,c,l=!1,h=!1,d=!1,f="",p=!1,v=!1,b=!1,w=!1,x=!1,E="",S="",_=Math.abs(e),T=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],A="",C=!1;if(0===e&&null!==y)return y;if(t.indexOf("(")>-1?(l=!0,t=t.slice(1,-1)):t.indexOf("+")>-1&&(h=!0,t=t.replace(/\+/g,"")),t.indexOf("a")>-1&&(p=t.indexOf("aK")>=0,v=t.indexOf("aM")>=0,b=t.indexOf("aB")>=0,w=t.indexOf("aT")>=0,x=p||v||b||w,t.indexOf(" a")>-1?(f=" ",t=t.replace(" a","")):t=t.replace("a",""),_>=Math.pow(10,12)&&!x||w?(f+=g[m].abbreviations.trillion,e/=Math.pow(10,12)):_<Math.pow(10,12)&&_>=Math.pow(10,9)&&!x||b?(f+=g[m].abbreviations.billion,e/=Math.pow(10,9)):_<Math.pow(10,9)&&_>=Math.pow(10,6)&&!x||v?(f+=g[m].abbreviations.million,e/=Math.pow(10,6)):(_<Math.pow(10,6)&&_>=Math.pow(10,3)&&!x||p)&&(f+=g[m].abbreviations.thousand,e/=Math.pow(10,3))),t.indexOf("b")>-1)for(t.indexOf(" b")>-1?(E=" ",t=t.replace(" b","")):t=t.replace("b",""),s=0;s<=T.length;s++)if(i=Math.pow(1024,s),o=Math.pow(1024,s+1),e>=i&&o>e){E+=T[s],i>0&&(e/=i);break}return t.indexOf("o")>-1&&(t.indexOf(" o")>-1?(S=" ",t=t.replace(" o","")):t=t.replace("o",""),S+=g[m].ordinal(e)),t.indexOf("[.]")>-1&&(d=!0,t=t.replace("[.]",".")),a=e.toString().split(".")[0],u=t.split(".")[1],c=t.indexOf(","),u?(u.indexOf("[")>-1?(u=u.replace("]",""),u=u.split("["),A=n(e,u[0].length+u[1].length,r,u[1].length)):A=n(e,u.length,r),a=A.split(".")[0],A=A.split(".")[1].length?g[m].delimiters.decimal+A.split(".")[1]:"",d&&0===Number(A.slice(1))&&(A="")):a=n(e,null,r),a.indexOf("-")>-1&&(a=a.slice(1),C=!0),c>-1&&(a=a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+g[m].delimiters.thousands)),0===t.indexOf(".")&&(a=""),(l&&C?"(":"")+(!l&&C?"-":"")+(!C&&h?"+":"")+a+A+(S?S:"")+(f?f:"")+(E?E:"")+(l&&C?")":"")}function l(e,t){g[e]=t}function h(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function d(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){var n=h(e),r=h(t);return n>r?n:r},-1/0)}var f,p="1.5.3",g={},m="en",y=null,v="0,0",b="undefined"!=typeof t&&t.exports;f=function(t){return f.isNumeral(t)?t=t.value():0===t||"undefined"==typeof t?t=0:Number(t)||(t=f.fn.unformat(t)),new e(Number(t))},f.version=p,f.isNumeral=function(t){return t instanceof e},f.language=function(e,t){if(!e)return m;if(e&&!t){if(!g[e])throw new Error("Unknown language : "+e);m=e}return(t||!g[e])&&l(e,t),f},f.languageData=function(e){if(!e)return g[m];if(!g[e])throw new Error("Unknown language : "+e);return g[e]},f.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),f.zeroFormat=function(e){y="string"==typeof e?e:null},f.defaultFormat=function(e){v="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,r,i=this.length>>>0,o=!1;for(1<arguments.length&&(r=t,o=!0),n=0;i>n;++n)this.hasOwnProperty(n)&&(o?r=e(r,this[n],n,this):(r=this[n],o=!0));if(!o)throw new TypeError("Reduce of empty array with no initial value");return r}),f.fn=e.prototype={clone:function(){return f(this)},format:function(e,t){return r(this,e?e:v,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:i(this,e?e:v)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){function t(e,t){return e+n*t}var n=d.call(null,this._value,e);return this._value=[this._value,e].reduce(t,0)/n,this},subtract:function(e){function t(e,t){return e-n*t}var n=d.call(null,this._value,e);return this._value=[e].reduce(t,this._value*n)/n,this},multiply:function(e){function t(e,t){var n=d(e,t);return e*n*t*n/(n*n)}return this._value=[this._value,e].reduce(t,1),this},divide:function(e){function t(e,t){var n=d(e,t);return e*n/(t*n)}return this._value=[this._value,e].reduce(t),this},difference:function(e){return Math.abs(f(this._value).subtract(e).value())}},b&&(t.exports=f),"undefined"==typeof ender&&(this.numeral=f),"function"==typeof define&&define.amd&&define([],function(){return f})}).call(this)},{}],104:[function(e,t,n){(function(e){!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof n&&"object"==typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof self)throw new Error("This environment was not anticiapted by Q. Please file a bug.");self.Q=e()}}(function(){"use strict";function t(e){return function(){return $.apply(e,arguments)}}function n(e){return e===Object(e)}function r(e){return"[object StopIteration]"===nt(e)||e instanceof q}function i(e,t){if(B&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(rt)){for(var n=[],r=t;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(e.stack);var i=n.join("\n"+rt+"\n");e.stack=o(i)}}function o(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var i=t[r];u(i)||s(i)||!i||n.push(i)}return n.join("\n")}function s(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function a(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function u(e){var t=a(e);if(!t)return!1;var n=t[0],r=t[1];return n===Y&&r>=H&&at>=r}function c(){if(B)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],r=a(n);if(!r)return;return Y=r[0],r[1]}}function l(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function h(e){return e instanceof g?e:b(e)?k(e):C(e)}function d(){function e(e){t=e,o.source=e,K(n,function(t,n){h.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,r=void 0}var t,n=[],r=[],i=Z(d.prototype),o=Z(g.prototype);if(o.promiseDispatch=function(e,i,o){var s=V(arguments);n?(n.push(s),"when"===i&&o[1]&&r.push(o[1])):h.nextTick(function(){t.promiseDispatch.apply(t,s)})},o.valueOf=function(){if(n)return o;var e=y(t);return v(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},h.longStackSupport&&B)try{throw new Error}catch(s){o.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){t||e(h(n))},i.fulfill=function(n){t||e(C(n))},i.reject=function(n){t||e(A(n))},i.notify=function(e){t||K(r,function(t,n){h.nextTick(function(){n(e)})},void 0)},i}function f(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=d();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function p(e){return f(function(t,n){for(var r=0,i=e.length;i>r;r++)h(e[r]).then(t,n)})}function g(e,t,n){void 0===t&&(t=function(e){return A(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=Z(g.prototype);if(r.promiseDispatch=function(n,i,o){var s;try{s=e[i]?e[i].apply(r,o):t.call(r,i,o)}catch(a){s=A(a)}n&&n(s)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function m(e,t,n,r){return h(e).then(t,n,r)}function y(e){if(v(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function v(e){return e instanceof g}function b(e){return n(e)&&"function"==typeof e.then}function w(e){return v(e)&&"pending"===e.inspect().state}function x(e){return!v(e)||"fulfilled"===e.inspect().state}function E(e){return v(e)&&"rejected"===e.inspect().state}function S(){it.length=0,ot.length=0,st||(st=!0)}function _(e,t){st&&(ot.push(e),it.push(t&&"undefined"!=typeof t.stack?t.stack:"(no stack) "+t))}function T(e){if(st){var t=Q(ot,e);-1!==t&&(ot.splice(t,1),it.splice(t,1))}}function A(e){var t=g({when:function(t){return t&&T(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return _(t,e),t}function C(e){return g({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return tt(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function k(e){var t=d();return h.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function M(e){return g({isDef:function(){}},function(t,n){return O(e,t,n)},function(){return h(e).inspect()})}function P(e,t,n){return h(e).spread(t,n)}function N(e){return function(){function t(e,t){var s;if("undefined"==typeof StopIteration){try{s=n[e](t)}catch(a){return A(a)}return s.done?h(s.value):m(s.value,i,o)}try{s=n[e](t)}catch(a){return r(a)?h(a.value):A(a)}return m(s,i,o)}var n=e.apply(this,arguments),i=t.bind(t,"next"),o=t.bind(t,"throw");return i()}}function L(e){h.done(h.async(e)())}function I(e){throw new q(e)}function D(e){return function(){return P([this,j(arguments)],function(t,n){return e.apply(t,n)})}}function O(e,t,n){return h(e).dispatch(t,n)}function j(e){return m(e,function(e){var t=0,n=d();return K(e,function(r,i,o){var s;v(i)&&"fulfilled"===(s=i.inspect()).state?e[o]=s.value:(++t,m(i,function(r){e[o]=r,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:o,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function R(e){return m(e,function(e){return e=J(e,h),m(j(J(e,function(e){return m(e,G,G)})),function(){return e})})}function F(e){return h(e).allSettled()}function U(e,t){return h(e).then(void 0,void 0,t)}function z(e,t){return h(e).nodeify(t)}var B=!1;try{throw new Error}catch(W){B=!!W.stack}var Y,q,H=c(),G=function(){},X=function(){function t(){for(;n.next;){n=n.next;var e=n.task;n.task=void 0;var r=n.domain;r&&(n.domain=void 0,r.enter());try{e()}catch(o){if(s)throw r&&r.exit(),setTimeout(t,0),r&&r.enter(),o;setTimeout(function(){throw o},0)}r&&r.exit()}i=!1}var n={task:void 0,next:null},r=n,i=!1,o=void 0,s=!1;if(X=function(t){r=r.next={task:t,domain:s&&e.domain,next:null},i||(i=!0,o())},"undefined"!=typeof e&&e.nextTick)s=!0,o=function(){e.nextTick(t)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){o=u,a.port1.onmessage=t,t()};var u=function(){a.port2.postMessage(0)};o=function(){setTimeout(t,0),u()}}else o=function(){setTimeout(t,0)};return X}(),$=Function.call,V=t(Array.prototype.slice),K=t(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(t=e(t,this[n],n));return t}),Q=t(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),J=t(Array.prototype.map||function(e,t){var n=this,r=[];return K(n,function(i,o,s){r.push(e.call(t,o,s,n))},void 0),r}),Z=Object.create||function(e){function t(){}return t.prototype=e,new t},et=t(Object.prototype.hasOwnProperty),tt=Object.keys||function(e){var t=[];for(var n in e)et(e,n)&&t.push(n);return t},nt=t(Object.prototype.toString);q="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var rt="From previous event:";h.resolve=h,h.nextTick=X,h.longStackSupport=!1,"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(h.longStackSupport=!0),h.defer=d,d.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):e.resolve(arguments.length>2?V(arguments,1):n)}},h.Promise=f,h.promise=f,f.race=p,f.all=j,f.reject=A,f.resolve=h,h.passByCopy=function(e){return e},g.prototype.passByCopy=function(){return this},h.join=function(e,t){return h(e).join(t)},g.prototype.join=function(e){return h([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},h.race=p,g.prototype.race=function(){return this.then(h.race)},h.makePromise=g,g.prototype.toString=function(){return"[object Promise]"},g.prototype.then=function(e,t,n){function r(t){try{return"function"==typeof e?e(t):t}catch(n){return A(n)}}function o(e){if("function"==typeof t){i(e,a);try{return t(e)}catch(n){return A(n)}}return A(e)}function s(e){return"function"==typeof n?n(e):e}var a=this,u=d(),c=!1;return h.nextTick(function(){a.promiseDispatch(function(e){c||(c=!0,u.resolve(r(e)))},"when",[function(e){c||(c=!0,u.resolve(o(e)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=s(e)}catch(r){if(n=!0,!h.onerror)throw r;h.onerror(r)}n||u.notify(t)}]),u.promise},h.tap=function(e,t){return h(e).tap(t)},g.prototype.tap=function(e){return e=h(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},h.when=m,g.prototype.thenResolve=function(e){return this.then(function(){return e})},h.thenResolve=function(e,t){return h(e).thenResolve(t)},g.prototype.thenReject=function(e){return this.then(function(){throw e})},h.thenReject=function(e,t){return h(e).thenReject(t)},h.nearer=y,h.isPromise=v,h.isPromiseAlike=b,h.isPending=w,g.prototype.isPending=function(){return"pending"===this.inspect().state},h.isFulfilled=x,g.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},h.isRejected=E,g.prototype.isRejected=function(){return"rejected"===this.inspect().state};var it=[],ot=[],st=!0;h.resetUnhandledRejections=S,h.getUnhandledReasons=function(){return it.slice()},h.stopUnhandledRejectionTracking=function(){S(),st=!1},S(),h.reject=A,h.fulfill=C,h.master=M,h.spread=P,g.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},h.async=N,h.spawn=L,h["return"]=I,h.promised=D,h.dispatch=O,g.prototype.dispatch=function(e,t){var n=this,r=d();return h.nextTick(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},h.get=function(e,t){return h(e).dispatch("get",[t])},g.prototype.get=function(e){return this.dispatch("get",[e])},h.set=function(e,t,n){return h(e).dispatch("set",[t,n])},g.prototype.set=function(e,t){return this.dispatch("set",[e,t])},h.del=h["delete"]=function(e,t){return h(e).dispatch("delete",[t])},g.prototype.del=g.prototype["delete"]=function(e){return this.dispatch("delete",[e])},h.mapply=h.post=function(e,t,n){return h(e).dispatch("post",[t,n])},g.prototype.mapply=g.prototype.post=function(e,t){return this.dispatch("post",[e,t])},h.send=h.mcall=h.invoke=function(e,t){return h(e).dispatch("post",[t,V(arguments,2)])},g.prototype.send=g.prototype.mcall=g.prototype.invoke=function(e){return this.dispatch("post",[e,V(arguments,1)])},h.fapply=function(e,t){return h(e).dispatch("apply",[void 0,t])},g.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},h["try"]=h.fcall=function(e){return h(e).dispatch("apply",[void 0,V(arguments,1)])},g.prototype.fcall=function(){return this.dispatch("apply",[void 0,V(arguments)])},h.fbind=function(e){var t=h(e),n=V(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(V(arguments))])}},g.prototype.fbind=function(){var e=this,t=V(arguments);return function(){return e.dispatch("apply",[this,t.concat(V(arguments))])}},h.keys=function(e){return h(e).dispatch("keys",[])},g.prototype.keys=function(){return this.dispatch("keys",[])},h.all=j,g.prototype.all=function(){return j(this)},h.allResolved=l(R,"allResolved","allSettled"),g.prototype.allResolved=function(){return R(this)},h.allSettled=F,g.prototype.allSettled=function(){return this.then(function(e){return j(J(e,function(e){function t(){return e.inspect()}return e=h(e),e.then(t,t)}))})},h.fail=h["catch"]=function(e,t){return h(e).then(void 0,t)},g.prototype.fail=g.prototype["catch"]=function(e){return this.then(void 0,e)},h.progress=U,g.prototype.progress=function(e){return this.then(void 0,void 0,e)},h.fin=h["finally"]=function(e,t){return h(e)["finally"](t)},g.prototype.fin=g.prototype["finally"]=function(e){return e=h(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},h.done=function(e,t,n,r){return h(e).done(t,n,r)},g.prototype.done=function(t,n,r){var o=function(e){h.nextTick(function(){if(i(e,s),!h.onerror)throw e;h.onerror(e)})},s=t||n||r?this.then(t,n,r):this;"object"==typeof e&&e&&e.domain&&(o=e.domain.bind(o)),s.then(void 0,o)},h.timeout=function(e,t,n){return h(e).timeout(t,n)},g.prototype.timeout=function(e,t){var n=d(),r=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},h.delay=function(e,t){return void 0===t&&(t=e,e=void 0),h(e).delay(t)},g.prototype.delay=function(e){return this.then(function(t){var n=d();return setTimeout(function(){n.resolve(t)},e),n.promise})},h.nfapply=function(e,t){return h(e).nfapply(t)},g.prototype.nfapply=function(e){var t=d(),n=V(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},h.nfcall=function(e){var t=V(arguments,1);return h(e).nfapply(t)},g.prototype.nfcall=function(){var e=V(arguments),t=d();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},h.nfbind=h.denodeify=function(e){var t=V(arguments,1);return function(){var n=t.concat(V(arguments)),r=d();return n.push(r.makeNodeResolver()),h(e).fapply(n).fail(r.reject),r.promise}},g.prototype.nfbind=g.prototype.denodeify=function(){var e=V(arguments);return e.unshift(this),h.denodeify.apply(void 0,e)},h.nbind=function(e,t){var n=V(arguments,2);return function(){function r(){return e.apply(t,arguments)}var i=n.concat(V(arguments)),o=d();return i.push(o.makeNodeResolver()),h(r).fapply(i).fail(o.reject),o.promise}},g.prototype.nbind=function(){var e=V(arguments,0);return e.unshift(this),h.nbind.apply(void 0,e)},h.nmapply=h.npost=function(e,t,n){return h(e).npost(t,n)},g.prototype.nmapply=g.prototype.npost=function(e,t){var n=V(t||[]),r=d();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},h.nsend=h.nmcall=h.ninvoke=function(e,t){var n=V(arguments,2),r=d();return n.push(r.makeNodeResolver()),h(e).dispatch("post",[t,n]).fail(r.reject),r.promise},g.prototype.nsend=g.prototype.nmcall=g.prototype.ninvoke=function(e){var t=V(arguments,1),n=d();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},h.nodeify=z,g.prototype.nodeify=function(e){return e?void this.then(function(t){h.nextTick(function(){e(null,t)})},function(t){h.nextTick(function(){e(t)})}):this};var at=c();return h})}).call(this,e("_process"))},{_process:88}],105:[function(e,t){!function(e){function n(){try{return a in e&&e[a]}catch(t){return!1}}function r(e){return e.replace(/^d/,"___$&").replace(f,"___")}var i,o={},s=e.document,a="localStorage",u="script";if(o.disabled=!1,o.version="1.3.17",o.set=function(){},o.get=function(){},o.has=function(e){return void 0!==o.get(e)},o.remove=function(){},o.clear=function(){},o.transact=function(e,t,n){null==n&&(n=t,t=null),null==t&&(t={});var r=o.get(e,t);n(r),o.set(e,r)},o.getAll=function(){},o.forEach=function(){},o.serialize=function(e){return JSON.stringify(e)
},o.deserialize=function(e){if("string"!=typeof e)return void 0;try{return JSON.parse(e)}catch(t){return e||void 0}},n())i=e[a],o.set=function(e,t){return void 0===t?o.remove(e):(i.setItem(e,o.serialize(t)),t)},o.get=function(e,t){var n=o.deserialize(i.getItem(e));return void 0===n?t:n},o.remove=function(e){i.removeItem(e)},o.clear=function(){i.clear()},o.getAll=function(){var e={};return o.forEach(function(t,n){e[t]=n}),e},o.forEach=function(e){for(var t=0;t<i.length;t++){var n=i.key(t);e(n,o.get(n))}};else if(s.documentElement.addBehavior){var c,l;try{l=new ActiveXObject("htmlfile"),l.open(),l.write("<"+u+">document.w=window</"+u+'><iframe src="/favicon.ico"></iframe>'),l.close(),c=l.w.frames[0].document,i=c.createElement("div")}catch(h){i=s.createElement("div"),c=s.body}var d=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(i),c.appendChild(i),i.addBehavior("#default#userData"),i.load(a);var n=e.apply(o,t);return c.removeChild(i),n}},f=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");o.set=d(function(e,t,n){return t=r(t),void 0===n?o.remove(t):(e.setAttribute(t,o.serialize(n)),e.save(a),n)}),o.get=d(function(e,t,n){t=r(t);var i=o.deserialize(e.getAttribute(t));return void 0===i?n:i}),o.remove=d(function(e,t){t=r(t),e.removeAttribute(t),e.save(a)}),o.clear=d(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(a);for(var n,r=0;n=t[r];r++)e.removeAttribute(n.name);e.save(a)}),o.getAll=function(){var e={};return o.forEach(function(t,n){e[t]=n}),e},o.forEach=d(function(e,t){for(var n,r=e.XMLDocument.documentElement.attributes,i=0;n=r[i];++i)t(n.name,o.deserialize(e.getAttribute(n.name)))})}try{var p="__storejs__";o.set(p,p),o.get(p)!=p&&(o.disabled=!0),o.remove(p)}catch(h){o.disabled=!0}o.enabled=!o.disabled,"undefined"!=typeof t&&t.exports&&this.module!==t?t.exports=o:"function"==typeof define&&define.amd?define(o):e.store=o}(Function("return this")())},{}],106:[function(e,t){"use strict";function n(e){var t=o(e);return t?u(t):r(e).then(function(t){return s(e,t),t})}function r(e){var t=u.defer(),n=l+e;return a.get(n,function(e,n,r){e?t.reject(e):c.parseString(r,function(e,n){if(e)t.reject(e);else try{var r=i(n);t.resolve(r)}catch(o){t.reject("Error reading response.")}})}),t.promise}function i(e){return e=e.eveapi.result[0],{id:Number(e.characterID[0]),name:e.characterName[0],corporationId:Number(e.corporationID[0]),corporation:e.corporation[0],allianceId:e.allianceID?Number(e.allianceID[0]):null,alliance:e.alliance?e.alliance[0]:null}}function o(e){var t=h[e];return t?t.expires<Date.now()?null:t.data:null}function s(e,t){var n=Date.now()+36e5;h[e]={expires:n,data:t}}var a=e("request"),u=e("q"),c=e("xml2js"),l="https://api.eveonline.com/Eve/CharacterInfo.xml.aspx?characterId=",h={};t.exports=n},{q:114,request:111,xml2js:117}],107:[function(e,t){t.exports=e("./character-info.js")},{"./character-info.js":106}],108:[function(e,t){"use strict";function n(e){if(!e)return c(null);if(e=e.trim(),""==e)return c(null);var t=s(e);if(t)return c(t);var n=r(e).then(function(t){var n=c.defer();return t&&"character"===t.type?h(t.id).then(function(e){t.corporation=e.corporation,t.alliance=e.alliance}).finally(function(){n.resolve(t)}):n.resolve(t),n.promise.then(function(t){return a(e,t),t})});return n}function r(e){var t=c.defer(),n=d+e;return u.get(n,function(e,n,r){e?t.reject(e):l.parseString(r,function(e,n){if(e)t.reject(e);else try{var r=i(n);t.resolve(r)}catch(o){t.reject("Error reading response.")}})}),t.promise}function i(e){e=e.eveapi.result[0].rowset[0].row[0].$;var t={id:Number(e.ownerID),name:e.ownerName,type:o(e.ownerGroupID)};return t.type?t:null}function o(e){var e=Number(e);return 1===e?"character":2===e?"corporation":32===e?"alliance":null}function s(e){var t=f[e];return t?t.expires<Date.now()?null:t.data:null}function a(e,t){var n=Date.now()+36e5;f[e]={expires:n,data:t}}var u=e("request"),c=e("q"),l=e("xml2js"),h=e("../character-info"),d="https://api.eveonline.com/eve/OwnerID.xml.aspx?names=",f={};t.exports=n},{"../character-info":107,q:114,request:111,xml2js:117}],109:[function(e,t){t.exports=e("./entity-search.js")},{"./entity-search.js":108}],110:[function(e,t){"use strict";function n(e,t,n){var r="character"===t?".jpg":".png";return"https://image.eveonline.com/"+t+"/"+e+"_"+n+r}t.exports=n},{}],111:[function(e,t,n){arguments[4][79][0].apply(n,arguments)},{dup:79}],112:[function(require,module,exports){!function(){function n(e){return void 0!==e}function ba(){}function ca(e){e.Qb=function(){return e.ef?e.ef:e.ef=new e}}function da(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function ea(e){return"array"==da(e)}function fa(e){var t=da(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){return"string"==typeof e}function ga(e){return"number"==typeof e}function ha(e){return"function"==da(e)}function ia(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function ja(e){return e.call.apply(e.bind,arguments)}function ka(e,t){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function q(){return q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka,q.apply(null,arguments)}function la(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),e.apply(this,n)}}function na(e,t){function n(){}n.prototype=t.prototype,e.oc=t.prototype,e.prototype=new n,e.Ag=function(e,n){return t.prototype[n].apply(e,Array.prototype.slice.call(arguments,2))}}function oa(a){if(a=String(a),/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)}function pa(){this.Id=void 0}function qa(e,t,n){switch(typeof t){case"string":ra(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?t:"null");break;case"boolean":n.push(t);break;case"undefined":n.push("null");break;case"object":if(null==t){n.push("null");break}if(ea(t)){var r=t.length;n.push("[");for(var i="",o=0;r>o;o++)n.push(i),i=t[o],qa(e,e.Id?e.Id.call(t,String(o),i):i,n),i=",";n.push("]");break}n.push("{"),r="";for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&(i=t[o],"function"!=typeof i&&(n.push(r),ra(o,n),n.push(":"),qa(e,e.Id?e.Id.call(t,o,i):i,n),r=","));n.push("}");break;case"function":break;default:throw Error("Unknown type: "+typeof t)}}function ra(e,t){t.push('"',e.replace(ta,function(e){if(e in sa)return sa[e];var t=e.charCodeAt(0),n="\\u";return 16>t?n+="000":256>t?n+="00":4096>t&&(n+="0"),sa[e]=n+t.toString(16)}),'"')}function ua(e){return"undefined"!=typeof JSON&&n(JSON.parse)?JSON.parse(e):oa(e)}function t(e){if("undefined"!=typeof JSON&&n(JSON.stringify))e=JSON.stringify(e);else{var t=[];qa(new pa,e,t),e=t.join("")}return e}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function va(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wa(e){var t={};return va(e,function(e,n){t[e]=n}),t}function xa(e){this.xc=e,this.Hd="firebase:"}function ya(){this.ha={}}function za(e){try{if("undefined"!=typeof window&&"undefined"!=typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new xa(t)}}catch(n){}return new ya}function Ca(e,t,n,r,i){this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.Cb=t,this.yb=n,this.yg=r,this.Gd=i||"",this.Ka=Aa.get("host:"+e)||this.host}function Da(e,t){t!==e.Ka&&(e.Ka=t,"s-"===e.Ka.substr(0,2)&&Aa.set("host:"+e.host,e.Ka))}function Ea(){this.Ta=-1}function Fa(){this.Ta=-1,this.Ta=64,this.R=[],this.be=[],this.Af=[],this.Dd=[],this.Dd[0]=128;for(var e=1;e<this.Ta;++e)this.Dd[e]=0;this.Rd=this.Tb=0,this.reset()}function Ga(e,t,n){n||(n=0);var r=e.Af;if(p(t))for(var i=0;16>i;i++)r[i]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(i=0;16>i;i++)r[i]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(i=16;80>i;i++){var o=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=4294967295&(o<<1|o>>>31)}t=e.R[0],n=e.R[1];for(var s,a=e.R[2],u=e.R[3],c=e.R[4],i=0;80>i;i++)40>i?20>i?(o=u^n&(a^u),s=1518500249):(o=n^a^u,s=1859775393):60>i?(o=n&a|u&(n|a),s=2400959708):(o=n^a^u,s=3395469782),o=(t<<5|t>>>27)+o+c+s+r[i]&4294967295,c=u,u=a,a=4294967295&(n<<30|n>>>2),n=t,t=o;e.R[0]=e.R[0]+t&4294967295,e.R[1]=e.R[1]+n&4294967295,e.R[2]=e.R[2]+a&4294967295,e.R[3]=e.R[3]+u&4294967295,e.R[4]=e.R[4]+c&4294967295}function Ha(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ma()).toString(36)}function Oa(e,t){var n=Pa(e,t,void 0);return 0>n?null:p(e)?e.charAt(n):e[n]}function Pa(e,t,n){for(var r=e.length,i=p(e)?e.split(""):e,o=0;r>o;o++)if(o in i&&t.call(n,i[o],o,e))return o;return-1}function Qa(e,t){var n=Ia(e,t);n>=0&&w.splice.call(e,n,1)}function Ra(e){return w.splice.apply(e,Sa(arguments,1))}function Sa(e,t,n){return 2>=arguments.length?w.slice.call(e,t):w.slice.call(e,t,n)}function Ta(e,t){e.sort(t||Ua)}function Ua(e,t){return e>t?1:t>e?-1:0}function Ya(e){return-1!=Va.indexOf(e)}function fb(e,t){if(!fa(e))throw Error("encodeByteArray takes an array as a parameter");gb();for(var n=t?db:cb,r=[],i=0;i<e.length;i+=3){var o=e[i],s=i+1<e.length,a=s?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,o=(3&o)<<4|a>>4,a=(15&a)<<2|c>>6,c=63&c;u||(c=64,s||(a=64)),r.push(n[l],n[o],n[a],n[c])}return r.join("")}function gb(){if(!cb){cb={},db={},eb={};for(var e=0;65>e;e++)cb[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),db[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e),eb[db[e]]=e}}function x(e,t){if(!e)throw ib(t)}function ib(e){return Error("Firebase INTERNAL ASSERT FAILED:"+e)}function jb(e){try{var t;if("undefined"!=typeof atob)t=atob(e);else{gb();for(var n=eb,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;var a=i<e.length?n[e.charAt(i)]:64;++i;var u=i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!=a&&(r.push(s<<4&240|a>>2),64!=u&&r.push(a<<6&192|u))}if(8192>r.length)t=String.fromCharCode.apply(null,r);else{for(e="",n=0;n<r.length;n+=8192)e+=String.fromCharCode.apply(null,Sa(r,n,n+8192));t=e}}return t}catch(c){kb("base64Decode failed: ",c)}return null}function lb(e){var t=mb(e);e=new Fa,e.update(t);var t=[],n=8*e.Rd;56>e.Tb?e.update(e.Dd,56-e.Tb):e.update(e.Dd,e.Ta-(e.Tb-56));for(var r=e.Ta-1;r>=56;r--)e.be[r]=255&n,n/=256;for(Ga(e,e.be),r=n=0;5>r;r++)for(var i=24;i>=0;i-=8)t[n]=e.R[r]>>i&255,++n;return fb(t)}function nb(){for(var e="",n=0;n<arguments.length;n++)e=fa(arguments[n])?e+nb.apply(null,arguments[n]):"object"==typeof arguments[n]?e+t(arguments[n]):e+arguments[n],e+=" ";return e}function kb(){if(!0===pb&&(pb=!1,null===ob&&!0===Ba.get("logging_enabled")&&qb(!0)),ob){var e=nb.apply(null,arguments);ob(e)}}function rb(e){return function(){kb(e,arguments)}}function sb(){if("undefined"!=typeof console){var e="FIREBASE INTERNAL ERROR: "+nb.apply(null,arguments);"undefined"!=typeof console.error?console.error(e):console.log(e)}}function tb(){var e=nb.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+e)}function z(){if("undefined"!=typeof console){var e="FIREBASE WARNING: "+nb.apply(null,arguments);"undefined"!=typeof console.warn?console.warn(e):console.log(e)}}function ub(e){var t="",n="",r="",i=!0,o="https",s="";if(p(e)){var a=e.indexOf("//");a>=0&&(o=e.substring(0,a-1),e=e.substring(a+2)),a=e.indexOf("/"),-1===a&&(a=e.length),t=e.substring(0,a),e=e.substring(a+1);var u=t.split(".");if(3===u.length){for(a=u[2].indexOf(":"),i=a>=0?"https"===o||"wss"===o:!0,n=u[1],r=u[0],s="",e=("/"+e).split("/"),a=0;a<e.length;a++)if(0<e[a].length){u=e[a];try{u=decodeURIComponent(u.replace(/\+/g," "))}catch(c){}s+="/"+u}r=r.toLowerCase()}else 2===u.length&&(n=u[0])}return{host:t,domain:n,vg:r,Cb:i,scheme:o,Pc:s}}function vb(e){return ga(e)&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)}function wb(e){if("complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}function xb(e,t){if(e===t)return 0;if("[MIN_NAME]"===e||"[MAX_NAME]"===t)return-1;if("[MIN_NAME]"===t||"[MAX_NAME]"===e)return 1;var n=yb(e),r=yb(t);return null!==n?null!==r?0==n-r?e.length-t.length:n-r:-1:null!==r?1:t>e?-1:1}function zb(e,n){if(n&&e in n)return n[e];throw Error("Missing required key ("+e+") in object: "+t(n))}function Ab(e){if("object"!=typeof e||null===e)return t(e);var n,r=[];for(n in e)r.push(n);r.sort(),n="{";for(var i=0;i<r.length;i++)0!==i&&(n+=","),n+=t(r[i]),n+=":",n+=Ab(e[r[i]]);return n+"}"}function Bb(e,t){if(e.length<=t)return[e];for(var n=[],r=0;r<e.length;r+=t)n.push(r+t>e?e.substring(r,e.length):e.substring(r,r+t));return n}function Cb(e,t){if(ea(e))for(var n=0;n<e.length;++n)t(n,e[n]);else A(e,t)}function Db(e){x(!vb(e),"Invalid JSON number");var t,n,r,i;for(0===e?(r=n=0,t=-1/0===1/e?1:0):(t=0>e,e=Math.abs(e),e>=Math.pow(2,-1022)?(r=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=r+1023,r=Math.round(e*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074)))),i=[],e=52;e;e-=1)i.push(r%2?1:0),r=Math.floor(r/2);for(e=11;e;e-=1)i.push(n%2?1:0),n=Math.floor(n/2);for(i.push(t?1:0),i.reverse(),t=i.join(""),n="",e=0;64>e;e+=8)r=parseInt(t.substr(e,8),2).toString(16),1===r.length&&(r="0"+r),n+=r;return n.toLowerCase()}function yb(e){return Eb.test(e)&&(e=Number(e),e>=-2147483648&&2147483647>=e)?e:null}function Fb(e){try{e()}catch(t){setTimeout(function(){throw t},Math.floor(0))}}function B(e){if(ha(e)){var t=Array.prototype.slice.call(arguments,1).slice();Fb(function(){e.apply(null,t)})}}function Gb(e,t,n,r){this.me=t,this.Ld=n,this.Rc=r,this.nd=e}function Hb(e,t,n){this.me=e,this.error=t,this.path=n}function Ib(e,t,n){this.Kb=e,this.mb=t,this.vc=n||null}function Jb(e,t,n){this.ba=e,this.mb=t,this.vc=n}function mb(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i>=55296&&56319>=i&&(i-=55296,r++,x(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(i<<10)+(e.charCodeAt(r)-56320)),128>i?t[n++]=i:(2048>i?t[n++]=i>>6|192:(65536>i?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t}function D(e,t,n,r){var i;if(t>r?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function E(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e=e+" failed: "+(r+" argument ")}function F(e,t,r,i){if((!i||n(r))&&!ha(r))throw Error(E(e,t,i)+"must be a valid function.")}function Nb(e,t,r){if(n(r)&&(!ia(r)||null===r))throw Error(E(e,t,!0)+"must be a valid context object.")}function Qb(e){return p(e)&&0!==e.length&&!Ob.test(e)}function Rb(e){return null===e||p(e)||ga(e)&&!vb(e)||ia(e)&&u(e,".sv")}function Sb(e,t,r){r&&!n(t)||Tb(E(e,1,r),t)}function Tb(e,t,r,i){if(r||(r=0),i=i||[],!n(t))throw Error(e+"contains undefined"+Ub(i));if(ha(t))throw Error(e+"contains a function"+Ub(i)+" with contents: "+t.toString());if(vb(t))throw Error(e+"contains "+t.toString()+Ub(i));if(r>1e3)throw new TypeError(e+"contains a cyclic object value ("+i.slice(0,100).join(".")+"...)");if(p(t)&&t.length>10485760/3&&10485760<mb(t).length)throw Error(e+"contains a string greater than 10485760 utf8 bytes"+Ub(i)+" ('"+t.substring(0,50)+"...')");if(ia(t))for(var o in t)if(u(t,o)){var s=t[o];if(".priority"!==o&&".value"!==o&&".sv"!==o&&!Qb(o))throw Error(e+" contains an invalid key ("+o+")"+Ub(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(o),Tb(e,s,r+1,i),i.pop()}}function Ub(e){return 0==e.length?"":" in property '"+e.join(".")+"'"}function Vb(e,t){if(!ia(t)||ea(t))throw Error(E(e,1,!1)+" must be an Object containing the children to replace.");Sb(e,t,!1)}function Wb(e,t,n){if(vb(n))throw Error(E(e,t,!1)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Rb(n))throw Error(E(e,t,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}function Xb(e,t,r){if(!r||n(t))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(E(e,1,r)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Yb(e,t,r,i){if((!i||n(r))&&!Qb(r))throw Error(E(e,t,i)+'was an invalid key: "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Zb(e,t){if(!p(t)||0===t.length||Pb.test(t))throw Error(E(e,1,!1)+'was an invalid path: "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function $b(e,t){if(".info"===G(t))throw Error(e+" failed: Can't modify data under /.info/")}function ac(e,t){if(!p(t))throw Error(E(e,1,!1)+"must be a valid credential (a string).")}function bc(e,t,n){if(!p(n))throw Error(E(e,t,!1)+"must be a valid string.")}function cc(e,t,r,i){if(!(i&&!n(r)||ia(r)&&null!==r))throw Error(E(e,t,i)+"must be a valid object.")}function dc(e,t,n){if(!ia(t)||null===t||!u(t,n))throw Error(E(e,1,!1)+'must contain the key "'+n+'"');if(!p(v(t,n)))throw Error(E(e,1,!1)+'must contain the key "'+n+'" with type "string"')}function ec(e,t){return xb(e.name,t.name)}function fc(e,t){return xb(e,t)}function gc(){}function H(e){return q(e.compare,e)}function jc(e){this.Vb=e}function lc(){}function nc(){this.yc=this.na=this.nc=this.ga=this.ka=!1,this.xb=0,this.Hb="",this.Bc=null,this.Xb="",this.Ac=null,this.Ub="",this.m=L}function pc(e){return x(e.ga,"Only valid if start has been set"),e.Bc}function qc(e){return x(e.ga,"Only valid if start has been set"),e.nc?e.Xb:"[MIN_NAME]"}function rc(e){return x(e.na,"Only valid if end has been set"),e.Ac}function sc(e){return x(e.na,"Only valid if end has been set"),e.yc?e.Ub:"[MAX_NAME]"}function tc(e){return x(e.ka,"Only valid if limit has been set"),e.xb}function uc(e){var t=new nc;return t.ka=e.ka,t.xb=e.xb,t.ga=e.ga,t.Bc=e.Bc,t.nc=e.nc,t.Xb=e.Xb,t.na=e.na,t.Ac=e.Ac,t.yc=e.yc,t.Ub=e.Ub,t.m=e.m,t}function vc(e,t){var n=uc(e);return n.m=t,n}function wc(e){return!(e.ga||e.na||e.ka)}function M(e,t,n,r){this.g=e,this.path=t,this.w=n,this.dc=r}function xc(e){var t=null,n=null;if(e.ga&&(t=pc(e)),e.na&&(n=rc(e)),e.m===mc){if(e.ga){if("[MIN_NAME]"!=qc(e))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if(null!=t&&"string"!=typeof t)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}if(e.na){if("[MAX_NAME]"!=sc(e))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if(null!=n&&"string"!=typeof n)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}}else if(e.m===L){if(null!=t&&!Rb(t)||null!=n&&!Rb(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(x(e.m instanceof jc,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")}function yc(e){if(e.ga&&e.na&&e.ka&&(!e.ka||""===e.Hb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")}function zc(e,t){if(!0===e.dc)throw Error(t+": You can't combine multiple orderBy calls.")}function Dc(e){e=e.w;var t={};if(e.ga&&(t.sp=e.Bc,e.nc&&(t.sn=e.Xb)),e.na&&(t.ep=e.Ac,e.yc&&(t.en=e.Ub)),e.ka){t.l=e.xb;var n=e.Hb;""===n&&(n=e.ga?"l":"r"),t.vf=n}return e.m!==L&&(t.i=e.m.toString()),t}function Ac(e,t,n){var r={cancel:null,Ha:null};if(t&&n)r.cancel=t,F(e,3,r.cancel,!0),r.Ha=n,Nb(e,4,r.Ha);else if(t)if("object"==typeof t&&null!==t)r.Ha=t;else{if("function"!=typeof t)throw Error(E(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r}function P(e,t){if(1==arguments.length){this.n=e.split("/");for(var n=0,r=0;r<this.n.length;r++)0<this.n[r].length&&(this.n[n]=this.n[r],n++);this.n.length=n,this.aa=0}else this.n=e,this.aa=t}function G(e){return e.aa>=e.n.length?null:e.n[e.aa]}function Q(e){return e.n.length-e.aa}function R(e){var t=e.aa;return t<e.n.length&&t++,new P(e.n,t)}function T(e,t){var n=G(e);if(null===n)return t;if(n===G(t))return T(R(e),R(t));throw Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ec(){this.children={},this.dd=0,this.value=null}function Fc(e,t,n){this.yd=e?e:"",this.Oc=t?t:null,this.D=n?n:new Ec}function Gc(e,t){for(var n,r=t instanceof P?t:new P(t),i=e;null!==(n=G(r));)i=new Fc(n,i,v(i.D.children,n)||new Ec),r=R(r);return i}function Hc(e,t){x("undefined"!=typeof t,"Cannot set value to undefined"),e.D.value=t,Ic(e)}function Jc(e,t,n,r){n&&!r&&t(e),e.ca(function(e){Jc(e,t,!0,r)}),n&&r&&t(e)}function Kc(e,t){for(var n=e.parent();null!==n&&!t(n);)n=n.parent()}function Ic(e){if(null!==e.Oc){var t=e.Oc,n=e.yd,r=e.e(),i=u(t.D.children,n);r&&i?(delete t.D.children[n],t.D.dd--,Ic(t)):r||i||(t.D.children[n]=e.D,t.D.dd++,Ic(t))}}function Lc(e,t){this.Ga=e,this.pa=t?t:Mc}function Nc(e,t){for(var n,r=e.pa,i=null;!r.e();){if(n=e.Ga(t,r.key),0===n){if(r.left.e())return i?i.key:null;for(r=r.left;!r.right.e();)r=r.right;return r.key}0>n?r=r.left:n>0&&(i=r,r=r.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}function Oc(e,t,n,r,i){for(this.qf=i||null,this.te=r,this.ac=[],i=1;!e.e();)if(i=t?n(e.key,t):1,r&&(i*=-1),0>i)e=this.te?e.left:e.right;else{if(0===i){this.ac.push(e);break}this.ac.push(e),e=this.te?e.right:e.left}}function U(e){if(0===e.ac.length)return null;var t,n=e.ac.pop();if(t=e.qf?e.qf(n.key,n.value):{key:n.key,value:n.value},e.te)for(n=n.left;!n.e();)e.ac.push(n),n=n.right;else for(n=n.right;!n.e();)e.ac.push(n),n=n.left;return t}function Pc(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:!0,this.left=null!=r?r:Mc,this.right=null!=i?i:Mc}function Qc(e){return e.left.e()?e:Qc(e.left)}function Sc(e){return e.left.e()?Mc:(e.left.$()||e.left.left.$()||(e=Tc(e)),e=e.W(null,null,null,Sc(e.left),null),Rc(e))}function Rc(e){return e.right.$()&&!e.left.$()&&(e=Wc(e)),e.left.$()&&e.left.left.$()&&(e=Uc(e)),e.left.$()&&e.right.$()&&(e=Vc(e)),e}function Tc(e){return e=Vc(e),e.right.left.$()&&(e=e.W(null,null,null,null,Uc(e.right)),e=Wc(e),e=Vc(e)),e}function Wc(e){return e.right.W(null,null,e.color,e.W(null,null,!0,null,e.right.left),null)}function Uc(e){return e.left.W(null,null,e.color,null,e.W(null,null,!0,e.left.right,null))}function Vc(e){return e.W(null,null,!e.color,e.left.W(null,null,!e.left.color,null,null),e.right.W(null,null,!e.right.color,null,null))}function Xc(){}function I(e,t){this.name=e,this.K=t}function Yc(e,t){return new I(e,t)}function Zc(e,t){this.A=e,x(null!==this.A,"LeafNode shouldn't be created with null value."),this.fa=t||K,$c(this.fa),this.wb=null}function dd(e,t){this.td=e,this.Wb=t}function ed(e,t,n){var r=fd(e.td,function(r,i){var o=v(e.Wb,i);if(x(o,"Missing index implementation for "+i),r===hc){if(o.se(t.K)){for(var s=[],a=n.Aa(Yc),u=U(a);u;)u.name!=t.name&&s.push(u),u=U(a);return s.push(t),gd(s,H(o))}return hc}return o=n.get(t.name),s=r,o&&(s=s.remove(new I(t.name,o))),s.Ja(t,t.K)});return new dd(r,e.Wb)}function hd(e,t,n){var r=fd(e.td,function(e){if(e===hc)return e;var r=n.get(t.name);return r?e.remove(new I(t.name,r)):e});return new dd(r,e.Wb)}function bd(e,t,n){this.j=e,(this.fa=t)&&$c(this.fa),this.sb=n,this.wb=null}function ld(e,t){var n;return n=(n=kd(e,t))?(n=n.Ic())&&n.name:e.j.Ic(),n?new I(n,e.j.get(n)):null}function md(e,t){var n;return n=(n=kd(e,t))?(n=n.Zb())&&n.name:e.j.Zb(),n?new I(n,e.j.get(n)):null}function kd(e,t){return t===mc?null:e.sb.get(t.toString())}function J(e,t){if(null===e)return K;var n=null;if("object"==typeof e&&".priority"in e?n=e[".priority"]:"undefined"!=typeof t&&(n=t),x(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Zc(e,J(n));if(e instanceof Array){var r=K,i=e;return A(i,function(e,t){if(u(i,t)&&"."!==t.substring(0,1)){var n=J(e);(n.P()||!n.e())&&(r=r.I(t,n))}}),r.ib(J(n))}var o=[],s=!1,a=e;va(a,function(e){if("string"!=typeof e||"."!==e.substring(0,1)){var t=J(a[e]);t.e()||(s=s||!t.O().e(),o.push(new I(e,t)))}});var c=gd(o,ec,function(e){return e.name},fc);if(s){var l=gd(o,H(L));return new bd(c,J(n),new dd({".priority":l},{".priority":L}))}return new bd(c,J(n),id)}function qd(e){this.count=parseInt(Math.log(e+1)/pd,10),this.Ve=this.count-1,this.Jf=e+1&parseInt(Array(this.count+1).join("1"),2)}function rd(e){var t=!(e.Jf&1<<e.Ve);return e.Ve--,t}function gd(e,t,n,r){function i(t,r){var o=r-t;if(0==o)return null;if(1==o){var s=e[t],a=n?n(s):s;return new Pc(a,s.K,!1,null,null)}var s=parseInt(o/2,10)+t,o=i(t,s),u=i(s+1,r),s=e[s],a=n?n(s):s;return new Pc(a,s.K,!1,o,u)}e.sort(t);var o=function(t){function r(t,r){var u=a-t,c=a;a-=t;var c=i(u+1,c),u=e[u],l=n?n(u):u,c=new Pc(l,u.K,r,null,c);o?o.left=c:s=c,o=c}for(var o=null,s=null,a=e.length,u=0;u<t.count;++u){var c=rd(t),l=Math.pow(2,t.count-(u+1));c?r(l,!1):(r(l,!1),r(l,!0))}return s}(new qd(e.length));return null!==o?new Lc(r||t,o):new Lc(r||t)}function ad(e){return"number"==typeof e?"number:"+Db(e):"string:"+e}function $c(e){if(e.P()){var t=e.N();x("string"==typeof t||"number"==typeof t||"object"==typeof t&&u(t,".sv"),"Priority must be a string or number.")}else x(e===kc||e.e(),"priority of unexpected type.");x(e===kc||e.O().e(),"Priority nodes can't have a priority of their own.")}function sd(){bd.call(this,new Lc(fc),K,id)}function C(e,t,n){this.D=e,this.U=t,this.m=n}function td(e){x(ea(e)&&0<e.length,"Requires a non-empty array"),this.Bf=e,this.Gc={}}function ud(e,t){x(Oa(e.Bf,function(e){return e===t}),"Unknown event: "+t)}function vd(){td.call(this,["visible"]);var e,t;if("undefined"!=typeof document&&"undefined"!=typeof document.addEventListener&&("undefined"!=typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!=typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!=typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!=typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.qc=!0,t){var n=this;document.addEventListener(t,function(){var t=!document[e];t!==n.qc&&(n.qc=t,n.Td("visible",t))},!1)}}function wd(){if(td.call(this,["online"]),this.Lc=!0,"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener){var e=this;window.addEventListener("online",function(){e.Lc||e.Td("online",!0),e.Lc=!0},!1),window.addEventListener("offline",function(){e.Lc&&e.Td("online",!1),e.Lc=!1},!1)}}function A(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function fd(e,t){var n,r={};for(n in e)r[n]=t.call(void 0,e[n],n,e);return r}function Mb(e,t){for(var n in e)if(!t.call(void 0,e[n],n,e))return!1;return!0}function Kb(e){var t,n=0;for(t in e)n++;return n}function Lb(e){for(var t in e)return t}function xd(e){var t,n=[],r=0;for(t in e)n[r++]=e[t];return n}function yd(e){var t,n=[],r=0;for(t in e)n[r++]=t;return n}function nd(e,t){for(var n in e)if(e[n]==t)return!0;return!1}function zd(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r}function Ad(e,t){var n=zd(e,t,void 0);return n&&e[n]}function Bd(e){for(var t in e)return!1;return!0}function Cd(e,t){return t in e?e[t]:void 0}function od(e){var t,n={};for(t in e)n[t]=e[t];return n}function Ed(e){for(var t,n,r=1;r<arguments.length;r++){n=arguments[r];for(t in n)e[t]=n[t];for(var i=0;i<Dd.length;i++)t=Dd[i],Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}}function Fd(){this.wc={}}function Gd(e,t,r){n(r)||(r=1),u(e.wc,t)||(e.wc[t]=0),e.wc[t]+=r}function Hd(e){this.Kf=e,this.vd=null}function Id(e,t){this.uf={},this.Nd=new Hd(e),this.S=t;var n=1e4+2e4*Math.random();setTimeout(q(this.nf,this),Math.floor(n))}function Ld(e){return e=e.toString(),Jd[e]||(Jd[e]=new Fd),Jd[e]}function Md(e,t){var n=e.toString();return Kd[n]||(Kd[n]=t()),Kd[n]}function Od(e,t,n){this.ie=e,this.f=rb(this.ie),this.frames=this.Cc=null,this.kb=this.lb=this.Oe=0,this.Qa=Ld(t),this.Za=(t.Cb?"wss://":"ws://")+t.Ka+"/.ws?v=5","undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(this.Za+="&r=f"),t.host!==t.Ka&&(this.Za=this.Za+"&ns="+t.yb),n&&(this.Za=this.Za+"&s="+n)}function Rd(e,t){if(e.frames.push(t),e.frames.length==e.Oe){var n=e.frames.join("");e.frames=null,n=ua(n),e.cg(n)}}function Qd(e){clearInterval(e.Cc),e.Cc=setInterval(function(){e.oa&&e.oa.send("0"),Qd(e)},Math.floor(45e3))}function Sd(e){this.cc=e,this.Fd=[],this.Mb=0,this.ge=-1,this.Ab=null}function Td(e,t,n){e.ge=t,e.Ab=n,e.ge<e.Mb&&(e.Ab(),e.Ab=null)}function Ud(e,t,n){for(e.Fd[t]=n;e.Fd[e.Mb];){var r=e.Fd[e.Mb];delete e.Fd[e.Mb];for(var i=0;i<r.length;++i)if(r[i]){var o=e;Fb(function(){o.cc(r[i])})}if(e.Mb===e.ge){e.Ab&&(clearTimeout(e.Ab),e.Ab(),e.Ab=null);break}e.Mb++}}function Vd(){this.set={}}function Wd(e,t){A(e.set,function(e,n){t(n,e)})}function Xd(e,t,n){this.ie=e,this.f=rb(e),this.kb=this.lb=0,this.Qa=Ld(t),this.Kd=n,this.zc=!1,this.bd=function(e){t.host!==t.Ka&&(e.ns=t.yb);var n,r=[];for(n in e)e.hasOwnProperty(n)&&r.push(n+"="+e[n]);return(t.Cb?"https://":"http://")+t.Ka+"/.lp?"+r.join("&")}}function ae(e,n){var r=t(n).length;e.kb+=r,Gd(e.Qa,"bytes_received",r)}function $d(e,t,n,r){if(this.bd=r,this.fb=n,this.Fe=new Vd,this.Qc=[],this.ke=Math.floor(1e8*Math.random()),this.Jd=!0,this.Ud=hb(),window["pLPCommand"+this.Ud]=e,window["pRTLPCB"+this.Ud]=t,e=document.createElement("iframe"),e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||kb("No IE domain setting required")}catch(i){e.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}e.contentDocument?e.$a=e.contentDocument:e.contentWindow?e.$a=e.contentWindow.document:e.document&&(e.$a=e.document),this.va=e,e="",this.va.src&&"javascript:"===this.va.src.substr(0,11)&&(e='<script>document.domain="'+document.domain+'";</script>'),e="<html><body>"+e+"</body></html>";
try{this.va.$a.open(),this.va.$a.write(e),this.va.$a.close()}catch(o){kb("frame writing exception"),o.stack&&kb(o.stack),kb(o)}}function ce(e){if(e.Zd&&e.Jd&&e.Fe.count()<(0<e.Qc.length?2:1)){e.ke++;var t={};t.id=e.Xf,t.pw=e.Yf,t.ser=e.ke;for(var t=e.bd(t),n="",r=0;0<e.Qc.length&&1870>=e.Qc[0].We.length+30+n.length;){var i=e.Qc.shift(),n=n+"&seg"+r+"="+i.og+"&ts"+r+"="+i.wg+"&d"+r+"="+i.We;r++}return de(e,t+n,e.ke),!0}return!1}function de(e,t,n){function r(){e.Fe.remove(n),ce(e)}e.Fe.add(n);var i=setTimeout(r,Math.floor(25e3));be(e,t,function(){clearTimeout(i),r()})}function be(e,t,n){setTimeout(function(){try{if(e.Jd){var r=e.va.$a.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=function(){kb("Long-poll script failed to load: "+t),e.Jd=!1,e.close()},e.va.$a.body.appendChild(r)}}catch(i){}},Math.floor(1))}function ee(e){fe(this,e)}function fe(e,t){var n=Od&&Od.isAvailable(),r=n&&!(Aa.ff||!0===Aa.get("previous_websocket_failure"));if(t.yg&&(n||z("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)e.$c=[Od];else{var i=e.$c=[];Cb(ge,function(e,t){t&&t.isAvailable()&&i.push(t)})}}function he(e){if(0<e.$c.length)return e.$c[0];throw Error("No transports available")}function ie(e,t,n,r,i,o){this.id=e,this.f=rb("c:"+this.id+":"),this.cc=n,this.Kc=r,this.ea=i,this.De=o,this.Q=t,this.Ed=[],this.Se=0,this.xf=new ee(t),this.Pa=0,this.f("Connection created"),je(this)}function je(e){var t=he(e.xf);e.J=new t("c:"+e.id+":"+e.Se++,e.Q),e.He=t.responsesRequiredToBeHealthy||0;var n=ke(e,e.J),r=le(e,e.J);e.ad=e.J,e.Xc=e.J,e.C=null,e.vb=!1,setTimeout(function(){e.J&&e.J.open(n,r)},Math.floor(0)),t=t.healthyTimeout||0,t>0&&(e.rd=setTimeout(function(){e.rd=null,e.vb||(e.J&&102400<e.J.kb?(e.f("Connection exceeded healthy timeout but has received "+e.J.kb+" bytes.  Marking connection healthy."),e.vb=!0,e.J.wd()):e.J&&10240<e.J.lb?e.f("Connection exceeded healthy timeout but has sent "+e.J.lb+" bytes.  Leaving connection alive."):(e.f("Closing unhealthy connection after timeout."),e.close()))},Math.floor(t)))}function le(e,t){return function(n){t===e.J?(e.J=null,n||0!==e.Pa?1===e.Pa&&e.f("Realtime connection lost."):(e.f("Realtime connection failed."),"s-"===e.Q.Ka.substr(0,2)&&(Aa.remove("host:"+e.Q.host),e.Q.Ka=e.Q.host)),e.close()):t===e.C?(e.f("Secondary connection lost."),n=e.C,e.C=null,e.ad!==n&&e.Xc!==n||e.close()):e.f("closing an old connection")}}function ke(e,t){return function(n){if(2!=e.Pa)if(t===e.Xc){var r=zb("t",n);if(n=zb("d",n),"c"==r){if(r=zb("t",n),"d"in n)if(n=n.d,"h"===r){var r=n.ts,i=n.v,o=n.h;e.Kd=n.s,Da(e.Q,o),0==e.Pa&&(e.J.start(),me(e,e.J,r),"5"!==i&&z("Protocol version mismatch detected"),n=e.xf,(n=1<n.$c.length?n.$c[1]:null)&&ne(e,n))}else if("n"===r){for(e.f("recvd end transmission on primary"),e.Xc=e.C,n=0;n<e.Ed.length;++n)e.Bd(e.Ed[n]);e.Ed=[],oe(e)}else"s"===r?(e.f("Connection shutdown command received. Shutting down..."),e.De&&(e.De(n),e.De=null),e.ea=null,e.close()):"r"===r?(e.f("Reset packet received.  New host: "+n),Da(e.Q,n),1===e.Pa?e.close():(pe(e),je(e))):"e"===r?sb("Server Error: "+n):"o"===r?(e.f("got pong on primary."),qe(e),re(e)):sb("Unknown control packet command: "+r)}else"d"==r&&e.Bd(n)}else if(t===e.C)if(r=zb("t",n),n=zb("d",n),"c"==r)"t"in n&&(n=n.t,"a"===n?se(e):"r"===n?(e.f("Got a reset on secondary, closing it"),e.C.close(),e.ad!==e.C&&e.Xc!==e.C||e.close()):"o"===n&&(e.f("got pong on secondary."),e.tf--,se(e)));else{if("d"!=r)throw Error("Unknown protocol layer: "+r);e.Ed.push(n)}else e.f("message on old connection")}}function oe(e){e.ad===e.C&&e.Xc===e.C&&(e.f("cleaning up and promoting a connection: "+e.C.ie),e.J=e.C,e.C=null)}function se(e){0>=e.tf?(e.f("Secondary connection is healthy."),e.vb=!0,e.C.wd(),e.C.start(),e.f("sending client ack on secondary"),e.C.send({t:"c",d:{t:"a",d:{}}}),e.f("Ending transmission on primary"),e.J.send({t:"c",d:{t:"n",d:{}}}),e.ad=e.C,oe(e)):(e.f("sending ping on secondary."),e.C.send({t:"c",d:{t:"p",d:{}}}))}function qe(e){e.vb||(e.He--,0>=e.He&&(e.f("Primary connection is healthy."),e.vb=!0,e.J.wd()))}function ne(e,t){e.C=new t("c:"+e.id+":"+e.Se++,e.Q,e.Kd),e.tf=t.responsesRequiredToBeHealthy||0,e.C.open(ke(e,e.C),le(e,e.C)),setTimeout(function(){e.C&&(e.f("Timed out trying to upgrade."),e.C.close())},Math.floor(6e4))}function me(e,t,n){e.f("Realtime connection established."),e.J=t,e.Pa=1,e.Kc&&(e.Kc(n),e.Kc=null),0===e.He?(e.f("Primary connection is healthy."),e.vb=!0):setTimeout(function(){re(e)},Math.floor(5e3))}function re(e){e.vb||1!==e.Pa||(e.f("sending ping on primary."),te(e,{t:"c",d:{t:"p",d:{}}}))}function te(e,t){if(1!==e.Pa)throw"Connection is not connected";e.ad.send(t)}function pe(e){e.f("Shutting down all connections"),e.J&&(e.J.close(),e.J=null),e.C&&(e.C.close(),e.C=null),e.rd&&(clearTimeout(e.rd),e.rd=null)}function ue(e){var t={},n={},r={},i="";try{var o=e.split("."),t=ua(jb(o[0])||""),n=ua(jb(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(s){}return{Bg:t,fe:n,data:r,sg:i}}function ve(e){return e=ue(e).fe,"object"==typeof e&&e.hasOwnProperty("iat")?v(e,"iat"):null}function we(e){e=ue(e);var t=e.fe;return!!e.sg&&!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}function xe(e,t,n,r){this.id=ye++,this.f=rb("p:"+this.id+":"),this.Eb=!0,this.ua={},this.la=[],this.Nc=0,this.Jc=[],this.ia=!1,this.Va=1e3,this.xd=3e5,this.Cd=t,this.Ad=n,this.Ee=r,this.Q=e,this.Ke=null,this.Tc={},this.ng=0,this.Dc=this.ue=null,ze(this,0),vd.Qb().zb("visible",this.fg,this),-1===e.host.indexOf("fblocal")&&wd.Qb().zb("online",this.dg,this)}function Be(e,t,n,r,i){var o=t.Da(),s=t.path.toString();e.f("Listen called for "+s+" "+o),e.ua[s]=e.ua[s]||{},x(!e.ua[s][o],"listen() called twice for same path/queryId."),t={H:i,qd:n,kg:Dc(t),tag:r},e.ua[s][o]=t,e.ia&&Ce(e,s,o,t)}function Ce(e,t,n,r){e.f("Listen on "+t+" for "+n);var i={p:t};r.tag&&(i.q=r.kg,i.t=r.tag),i.h=r.qd(),e.wa("q",i,function(i){if((e.ua[t]&&e.ua[t][n])===r){e.f("listen response",i);var o=i.s;"ok"!==o&&De(e,t,n),i=i.d,r.H&&r.H(o,i)}})}function Ee(e){var t=e.Lb;e.ia&&t&&e.wa("auth",{cred:t.Mf},function(n){var r=n.s;n=n.d||"error","ok"!==r&&e.Lb===t&&delete e.Lb,t.Ye?"ok"!==r&&t.cd&&t.cd(r,n):(t.Ye=!0,t.sc&&t.sc(r,n))})}function Fe(e,t,n,r){e.ia?Ge(e,"o",t,n,r):e.Jc.push({Pc:t,action:"o",data:n,H:r})}function He(e,t,n,r){e.ia?Ge(e,"om",t,n,r):e.Jc.push({Pc:t,action:"om",data:n,H:r})}function Ge(e,t,n,r,i){n={p:n,d:r},e.f("onDisconnect "+t,n),e.wa(t,n,function(e){i&&setTimeout(function(){i(e.s,e.d)},Math.floor(0))})}function Ke(e,t,n,r){Ie(e,"m",t,n,r,void 0)}function Ie(e,t,r,i,o,s){i={p:r,d:i},n(s)&&(i.h=s),e.la.push({action:t,of:i,H:o}),e.Nc++,t=e.la.length-1,e.ia?Le(e,t):e.f("Buffering put: "+r)}function Le(e,t){var n=e.la[t].action,r=e.la[t].of,i=e.la[t].H;e.la[t].lg=e.ia,e.wa(n,r,function(r){e.f(n+" response",r),delete e.la[t],e.Nc--,0===e.Nc&&(e.la=[]),i&&i(r.s,r.d)})}function ze(e,t){x(!e.La,"Scheduling a connect when we're already connected/ing?"),e.Nb&&clearTimeout(e.Nb),e.Nb=setTimeout(function(){e.Nb=null,Oe(e)},Math.floor(t))}function Oe(e){if(e.Eb){e.f("Making a connection attempt"),e.ue=(new Date).getTime(),e.Dc=null;var t=q(e.Bd,e),n=q(e.Kc,e),r=q(e.jf,e),i=e.id+":"+Ae++;e.La=new ie(i,e.Q,t,n,r,function(t){z(t+" ("+e.Q.toString()+")"),e.Eb=!1})}}function Me(e,t,n){n=n?La(n,function(e){return Ab(e)}).join("$"):"default",(e=De(e,t,n))&&e.H&&e.H("permission_denied")}function De(e,t,n){t=new P(t).toString();var r=e.ua[t][n];return delete e.ua[t][n],0===Kb(e.ua[t])&&delete e.ua[t],r}function Ne(e){Ee(e),A(e.ua,function(t,n){A(t,function(t,r){Ce(e,n,r,t)})});for(var t=0;t<e.la.length;t++)e.la[t]&&Le(e,t);for(;e.Jc.length;)t=e.Jc.shift(),Ge(e,t.action,t.Pc,t.data,t.H)}function Pe(){this.j=this.A=null}function Qe(e,t){if(t.e())return e.A=null,e.j=null,!0;if(null!==e.A){if(e.A.P())return!1;var n=e.A;return e.A=null,n.ca(L,function(t,n){e.ic(new P(t),n)}),Qe(e,t)}return null!==e.j?(n=G(t),t=R(t),e.j.contains(n)&&Qe(e.j.get(n),t)&&e.j.remove(n),e.j.e()?(e.j=null,!0):!1):!0}function Re(e,t,n){null!==e.A?n(t,e.A):e.ca(function(e,r){var i=new P(t.toString()+"/"+e);Re(r,i,n)})}function Se(){this.Wc=K}function Te(){this.qb=[]}function Ue(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.Rb();null===n||o.ja(n.Rb())||(e.qb.push(n),n=null),null===n&&(n=new Ve(o)),n.add(i)}n&&e.qb.push(n)}function Cc(e,t,n){Ue(e,n),We(e,function(e){return e.ja(t)})}function Xe(e,t,n){Ue(e,n),We(e,function(e){return e.contains(t)||t.contains(e)})}function We(e,t){for(var n=!0,r=0;r<e.qb.length;r++){var i=e.qb[r];if(i)if(i=i.Rb(),t(i)){for(var i=e.qb[r],o=0;o<i.od.length;o++){var s=i.od[o];if(null!==s){i.od[o]=null;var a=s.Pb();ob&&kb("event: "+s.toString()),Fb(a)}}e.qb[r]=null}else n=!1}n&&(e.qb=[])}function Ve(e){this.Ca=e,this.od=[]}function Ze(e,t,n){this.ed=e||{},this.Sd=t||{},this.lc=n||{},this.ed.remember||(this.ed.remember="default")}function af(e){var t={},n={};return va(e||{},function(e,r){0<=Ia($e,e)?t[e]=r:n[e]=r}),new Ze(t,{},n)}function V(e){var t=Error(v(bf,e),e);return t.code=e,t}function cf(){var e,t=window.opener.frames;for(e=t.length-1;e>=0;e--)try{if(t[e].location.protocol===window.location.protocol&&t[e].location.host===window.location.host&&"__winchan_relay_frame"===t[e].name)return t[e]}catch(n){}return null}function df(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,!1)}function ef(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener&&e.removeEventListener(t,n,!1)}function ff(e){/^https?:\/\//.test(e)||(e=window.location.href);var t=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(e);return t?t[1]:e}function gf(e){var t="";try{e=e.replace("#","");var n={},r=e.replace(/^\?/,"").split("&");for(e=0;e<r.length;e++)if(r[e]){var i=r[e].split("=");n[i[0]]=i[1]}n&&u(n,"__firebase_request_key")&&(t=v(n,"__firebase_request_key"))}catch(o){}return t}function hf(e){var t,n=[];for(t in e)if(u(e,t)){var r=v(e,t);if(ea(r))for(var i=0;i<r.length;i++)n.push(encodeURIComponent(t)+"="+encodeURIComponent(r[i]));else n.push(encodeURIComponent(t)+"="+encodeURIComponent(v(e,t)))}return n.join("&")}function jf(){var e=ub(Ye);return e.scheme+"://"+e.host+"/v2"}function kf(){return!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(navigator.userAgent)}function lf(){var e=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){if((e=e.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&1<e.length)return 8<=parseFloat(e[1])}else if(-1<e.indexOf("Trident")&&(e=e.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&1<e.length)return 8<=parseFloat(e[1]);return!1}function mf(e){e=e||{},e.method||(e.method="GET"),e.headers||(e.headers={}),e.headers.content_type||(e.headers.content_type="application/json"),e.headers.content_type=e.headers.content_type.toLowerCase(),this.options=e}function nf(e){e=e||{},this.Uc=Ha()+Ha()+Ha(),this.kf=e||{}}function of(e){e=e||{},(!e.window_features||-1!==navigator.userAgent.indexOf("Fennec/")||-1!==navigator.userAgent.indexOf("Firefox/")&&-1!==navigator.userAgent.indexOf("Android"))&&(e.window_features=void 0),e.window_name||(e.window_name="_blank"),e.relay_url||(e.relay_url=jf()+"/auth/channel"),this.options=e}function pf(e){e=e||{},e.callback_parameter||(e.callback_parameter="callback"),this.options=e,window.__firebase_auth_jsonp=window.__firebase_auth_jsonp||{}}function qf(e,t,n){setTimeout(function(){try{var r=document.createElement("script");r.type="text/javascript",r.id=e,r.async=!0,r.src=t,r.onerror=function(){var t=document.getElementById(e);null!==t&&t.parentNode.removeChild(t),n&&n(V("NETWORK_ERROR"))};var i=document.getElementsByTagName("head");(i&&0!=i.length?i[0]:document.documentElement).appendChild(r)}catch(o){n&&n(V("NETWORK_ERROR"))}},0)}function rf(e,t){this.Ge=["session",e.Gd,e.yb].join(":"),this.Pd=t}function sf(e){e=e||{},this.Uc=Ha()+Ha()+Ha(),this.kf=e||{}}function tf(e,t,n,r){td.call(this,["auth_status"]),this.Q=e,this.Re=t,this.xg=n,this.Be=r,this.mc=new rf(e,[Aa,Ba]),this.jb=null,uf(this)}function uf(e){Ba.get("redirect_request_id")&&vf(e);var t=e.mc.get();t&&t.token?(wf(e,t),e.Re(t.token,function(n,r){xf(e,n,r,!1,t.token,t)},function(t,n){yf(e,"resumeSession()",t,n)})):wf(e,null)}function zf(e,t,n,r,i,o){"firebaseio-demo.com"===e.Q.domain&&z("Firebase authentication is not supported on demo Firebases (*.firebaseio-demo.com). To secure your Firebase, create a production Firebase at https://www.firebase.com."),e.Re(t,function(o,s){xf(e,o,s,!0,t,n,r||{},i)},function(t,n){yf(e,"auth()",t,n,o)})}function Af(e,t){e.mc.clear(),wf(e,null),e.xg(function(e,n){if("ok"===e)B(t,null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n),i=Error(i),i.code=r,B(t,i)}})}function xf(e,t,n,r,i,o,s,a){"ok"===t?(r&&(t=n.auth,o.auth=t,o.expires=n.expires,o.token=we(i)?i:"",n=null,t&&u(t,"uid")?n=v(t,"uid"):u(o,"uid")&&(n=v(o,"uid")),o.uid=n,n="custom",t&&u(t,"provider")?n=v(t,"provider"):u(o,"provider")&&(n=v(o,"provider")),o.provider=n,e.mc.clear(),we(i)&&(s=s||{},n=Aa,"sessionOnly"===s.remember&&(n=Ba),"none"!==s.remember&&e.mc.set(o,n)),wf(e,o)),B(a,null,o)):(e.mc.clear(),wf(e,null),o=e=(t||"error").toUpperCase(),n&&(o+=": "+n),o=Error(o),o.code=e,B(a,o))}function yf(e,t,n,r,i){z(t+" was canceled: "+r),e.mc.clear(),wf(e,null),e=Error(r),e.code=n.toUpperCase(),B(i,e)}function Bf(e,t,n,r,i){Cf(e);var o=[mf,pf];n=new Ze(r||{},{},n||{}),Df(e,o,"/auth/"+t,n,i)}function Ef(e,t,n,r){Cf(e);var i=[of,nf];n=af(n),"anonymous"===t||"password"===t?setTimeout(function(){B(r,V("TRANSPORT_UNAVAILABLE"))},0):(n.Sd.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height=625,width=625,top="+("object"==typeof screen?.5*(screen.height-625):0)+",left="+("object"==typeof screen?.5*(screen.width-625):0),n.Sd.relay_url=jf()+"/"+e.Q.yb+"/auth/channel",n.Sd.requestWithCredential=q(e.Vc,e),Df(e,i,"/auth/"+t,n,r))}function vf(e){var t=Ba.get("redirect_request_id");if(t){var n=Ba.get("redirect_client_options");Ba.remove("redirect_request_id"),Ba.remove("redirect_client_options");var r=[mf,pf],t={requestId:t,requestKey:gf(document.location.hash)},n=new Ze(n,{},t);try{document.location.hash=document.location.hash.replace(/&__firebase_request_key=([a-zA-z0-9]*)/,"")}catch(i){}Df(e,r,"/auth/session",n)}}function Df(e,t,n,r,i){Ff(e,t,n,r,function(t,n){!t&&n&&n.token&&n.uid?zf(e,n.token,n,r.ed,function(e,t){e?B(i,e):B(i,null,t)}):B(i,t||V("UNKNOWN_ERROR"))})}function Ff(e,t,n,r,i){t=Ka(t,function(e){return"function"==typeof e.isAvailable&&e.isAvailable()}),0===t.length?setTimeout(function(){B(i,V("TRANSPORT_UNAVAILABLE"))},0):(t=new(t.shift())(r.Sd),r=wa(r.lc),r.v="js-2.0.6",r.transport=t.uc(),r.suppress_status_codes=!0,e=jf()+"/"+e.Q.yb+n,t.open(e,r,function(e,t){if(e)B(i,e);else if(t&&t.error){var n=Error(t.error.message);n.code=t.error.code,n.details=t.error.details,B(i,n)}else B(i,null,t)}))}function wf(e,t){var n=null!==e.jb||null!==t;e.jb=t,n&&e.Td("auth_status",t),e.Be(null!==t)}function Cf(e){var t=e.Q;if("firebaseio.com"!==t.domain&&"firebaseio-demo.com"!==t.domain&&"auth.firebase.com"===Ye)throw Error("This custom Firebase server ('"+e.Q.domain+"') does not support delegated login.")}function Gf(e,t){return e&&"object"==typeof e?(x(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e}function Hf(e,t){var n=new Pe;return Re(e,new P(""),function(e,r){n.ic(e,If(r,t))}),n}function If(e,t){var n,r=e.O().N(),r=Gf(r,t);if(e.P()){var i=Gf(e.ta(),t);return i!==e.ta()||r!==e.O().N()?new Zc(i,J(r)):e}return n=e,r!==e.O().N()&&(n=n.ib(new Zc(r))),e.ca(L,function(e,r){var i=If(r,t);i!==r&&(n=n.I(e,i))}),n}function W(e,t,n,r){this.type=e,this.Wa=t,this.nb=n,this.Rc=null,this.$f=r}function Jf(){}function Lf(e,t,n,r){var i,o;return o=X(n),i=X(t),r.e()?n.u?(e=[],i?i.ja(o)||(i.P()?e=Mf(o):o.P()?(e=[],i.P()||i.e()||e.push(new W("children_removed",i))):e=Nf(i,o),e.push(new W("value",o))):(e=Mf(o),e.push(new W("value",o))),0!==e.length||t.u||e.push(new W("value",o)),e):i?Nf(i,o):Mf(o):".priority"===G(r)?!n.u||i&&i.ja(o)?[]:[new W("value",o)]:n.u||1===Q(r)?(i=G(r),o=o.B(i),e.kd(t,n,i,o)):(i=G(r),o.Y(i)?(o=o.B(i),e.kd(t,n,i,o)):[])}function Mf(e){var t=[];return e.P()||e.e()||t.push(new W("children_added",e)),t}function Nf(e,t){var r,i,o,s,a=[],u=[],c=[],l=[],h={},d={};r=e.Aa(L),o=U(r),i=t.Aa(L),s=U(i);for(var f=H(L);null!==o||null!==s;){var p;p=o?s?f(o,s):-1:1,0>p?(p=v(h,o.name),n(p)?(l.push(u[p]),u[p]=null):(d[o.name]=c.length,c.push(o)),o=U(r)):(p>0?(p=v(d,s.name),n(p)?(l.push(s),c[p]=null):(h[s.name]=u.length,u.push(s))):((o=o.K.hash()!==s.K.hash())&&l.push(s),o=U(r)),s=U(i))}for(h=0;h<c.length;h++)(d=c[h])&&a.push(new W("child_removed",d.K,d.name));for(h=0;h<u.length;h++)(c=u[h])&&a.push(new W("child_added",c.K,c.name));for(h=0;h<l.length;h++)u=l[h],a.push(new W("child_changed",u.K,u.name,e.B(u.name)));return a}function Of(e,t,n){this.bb=e,this.Ma=n,this.m=t}function Pf(){}function Tf(e,t){Wf(e,t.F),Wf(e,t.o),Wf(e,t.u),Wf(e,t.X)}function Wf(e,t){x(!t||e.Yb(t),"Expected an indexed snap")}function Yf(e,t){var n=X(e),r=e.ab();return!!(n&&n.Y(t)||r&&r.Y(t))}function Zf(e){this.gb=e,this.index=e.m,this.gb.ga&&n(pc(this.gb))?(e=qc(this.gb),e=this.index.ye(pc(this.gb),e)):e=this.index.Ae(),this.Fb=e,this.gb.na&&n(rc(this.gb))?(e=sc(this.gb),e=this.index.ye(rc(this.gb),e)):e=this.index.ze(),this.pb=e}function $f(e){Zf.call(this,e),this.Ma=!(""===e.Hb?e.ga:"l"===e.Hb),this.bb=tc(e)}function ag(e,t,n,r,i,o){var s,a=H(e.index);s=e.Ma?function(e,t){return-1*a(e,t)}:a,t=X(t),x(t.Ua()===e.bb,"Limit should be full.");var u=new I(n,r),c=e.Ma?ld(t,e.index):md(t,e.index);x(null!=c,"Shouldn't be null, since oldEventCache shouldn't be empty.");var l=0>=H(e.index)(e.Fb,u)&&0>=H(e.index)(u,e.pb);return t.Y(n)?(o=i.de(o,c,1,e.Ma,e.index),i=null,0<o.length&&(i=o[0],i.name===n&&(i=2<=o.length?o[1]:null)),s=null==i?1:s(i,u),l&&!r.e()&&s>=0?t.I(n,r):(n=t.I(n,K),null!=i&&0>=H(e.index)(e.Fb,i)&&0>=H(e.index)(i,e.pb)?n.I(i.name,i.K):n)):r.e()?null:l&&0<=s(c,u)?t.I(n,r).I(c.name,K):null}function bg(e){this.m=e}function cg(e){this.U=e,this.m=e.w.m}function dg(e,t,n,r){var i=[],o=e.m,s=La(Ka(t,function(e){return"child_changed"===e.type&&o.df(e.$f,e.Wa)}),function(e){return new W("child_moved",e.Wa,e.nb)}),a=Pa(t,function(e){return"child_removed"!==e.type&&"child_added"!==e.type});for(la(Ra,t,a,0).apply(null,s);0<t.length;){var s=t[0].type,a=eg(t,s),u=t.slice(0,a);t=t.slice(a),"value"===s||"children_added"===s||"children_removed"===s?x(1===u.length,"We should not have more than one of these at a view"):Ta(u,q(e.Lf,e)),i=i.concat(fg(e,r,u,n))}return i}function eg(e,t){var n=Pa(e,function(e){return e.type!==t});return-1===n?e.length:n}function fg(e,t,n,r){for(var i=[],o=0;o<n.length;++o)for(var s=n[o],a=null,u=null,c=0;c<t.length;++c){var l=t[c];if(l.pf(s.type)){if(!a&&!u)if("children_added"===s.type){var h=e,d=s.Wa,u=[];if(!d.P()&&!d.e())for(var h=d.Aa(h.m),d=null,f=U(h);f;){var p=new W("child_added",f.K,f.name);p.Rc=d,u.push(p),d=f.name,f=U(h)}}else if("children_removed"===s.type){if(h=e,d=s.Wa,u=[],!d.P()&&!d.e())for(h=d.Aa(h.m),d=U(h);d;)u.push(new W("child_removed",d.K,d.name)),d=U(h)}else a=s,"value"!==a.type&&"child_removed"!==a.type&&(a.Rc=r.af(a.nb,a.Wa,e.m));if(a)i.push(l.createEvent(a,e.U));else for(h=0;h<u.length;++h)i.push(l.createEvent(u[h],e.U))}}return i}function gg(e,t){this.U=e;var n=e.w;wc(n)?(this.ec=new bg(n.m),this.ld=Kf):n.ka?(this.ec=new $f(n),this.ld=new Of(tc(n),n.m,this.ec.Ma)):(this.ec=new Zf(n),this.ld=Kf),n=this.ec,this.ha=new Uf(t.F&&n.G(t.F,!1),t.o&&n.G(t.o,!1),t.u&&n.G(t.u),t.X&&n.G(t.X)),this.ya=[],this.le=new cg(e)}function hg(e){return e.U}function Uf(e,t,n,r){this.F=e,this.o=t,this.u=n,this.X=r,x(null==e||null==t,"Only one of serverSnap / serverChildren can be non-null."),x(null==n||null==r,"Only one of eventSnap / eventChildren can be non-null.")}function X(e){return e.u||e.X}function jg(e,t){this.value=e,this.children=t||kg}function mg(e){var t=lg;return A(e,function(e,n){t=t.set(new P(n),e)}),t}function ng(e,t,n){if(null!=e.value&&n(e.value))return{path:S,value:e.value};if(t.e())return null;var r=G(t);return e=e.children.get(r),null!==e?(t=ng(e,R(t),n),null!=t?{path:new P(r).k(t.path),value:t.value}:null):null}function og(e,t){return ng(e,t,function(){return!0})}function pg(e,t,n){if(t.e())return n;var r=G(t);return t=pg(e.children.get(r)||lg,R(t),n),r=t.e()?e.children.remove(r):e.children.Ja(r,t),new jg(e.value,r)}function qg(e,t){return rg(e,S,t)}function rg(e,t,n){var r={};return e.children.Ba(function(e,i){r[e]=rg(i,t.k(e),n)}),n(t,e.value,r)}function sg(e,t,n){return tg(e,t,S,n)}function tg(e,t,n,r){var i=e.value?r(n,e.value):!1;return i?i:t.e()?null:(i=G(t),(e=e.children.get(i))?tg(e,R(t),n.k(i),r):null)}function ug(e,t,n){if(!t.e()){var r=!0;e.value&&(r=n(S,e.value)),!0===r&&(r=G(t),(e=e.children.get(r))&&vg(e,R(t),S.k(r),n))}}function vg(e,t,n,r){if(t.e())return e;e.value&&r(n,e.value);var i=G(t);return(e=e.children.get(i))?vg(e,R(t),n.k(i),r):lg}function Xf(e,t){wg(e,S,t)}function wg(e,t,n){e.children.Ba(function(e,r){wg(r,t.k(e),n)}),e.value&&n(t,e.value)}function xg(e,t){e.children.Ba(function(e,n){n.value&&t(e,n.value)})}function yg(){this.qa={}}function Ag(e){return Ka(xd(e.qa),function(e){return!wc(e.U.w)})}function Bg(e,t){if(wc(t.w))return zg(e);var n=t.Da();return v(e.qa,n)}function zg(e){return Ad(e.qa,function(e){return wc(e.U.w)})||null}function Cg(){this.V=lg,this.ra=[],this.Ec=-1}function Dg(e,t){var n=Pa(e.ra,function(e){return e.Xd===t});x(n>=0,"removeWrite called with nonexistent writeId.");var r=e.ra[n];e.ra.splice(n,1);for(var i=!1,o=!1,s=!1,a=e.ra.length-1;!i&&a>=0;){var u=e.ra[a];a>=n&&Eg(u,r.path)?i=!0:!o&&r.path.contains(u.path)&&(a>=n?o=!0:s=!0),a--}return i||(o||s?Fg(e):r.Oa?e.V=e.V.remove(r.path):A(r.children,function(t,n){e.V=e.V.remove(r.path.k(n))})),n=r.path,og(e.V,n)?s?n:(x(i,"Must have found a shadow"),null):n}function Eg(e,t){return e.Oa?e.path.contains(t):!!zd(e.children,function(n,r){return e.path.k(r).contains(t)})}function Fg(e){e.V=Gg(e.ra,Hg,S),e.Ec=0<e.ra.length?e.ra[e.ra.length-1].Xd:-1}function Hg(e){return e.visible}function Gg(e,t,n){for(var r=lg,i=0;i<e.length;++i){var o=e[i];if(t(o)){var s,a=o.path;o.Oa?(n.contains(a)?(s=T(n,a),o=o.Oa):(s=S,o=o.Oa.da(T(a,n))),r=Ig(r,s,o)):r=Jg(r,o.path,o.children)}}return r}function Ig(e,t,n){var r=og(e,t);if(r){var i=r.value,r=r.path;t=T(r,t),n=i.L(t,n),e=pg(e,r,new jg(n))}else e=pg(e,t,new jg(n));return e}function Jg(e,t,n){var r=og(e,t);if(r){var i=r.value,r=r.path,o=T(r,t),s=i;A(n,function(e,t){s=s.L(o.k(t),e)}),e=pg(e,r,new jg(s))}else A(n,function(n,r){e=pg(e,t.k(r),new jg(n))});return e}function Kg(e,t){this.Gb=e,this.Ib=t}function Lg(e,t,n){this.type=Qf,this.source=e,this.path=t,this.Oa=n}function Mg(e,t){this.type=Sf,this.source=Ng,this.path=e,this.sf=t}function Og(e,t){this.type=Vf,this.source=e,this.path=t}function Pg(e,t,n){this.type=Rf,this.source=e,this.path=t,this.children=n}function Qg(e,t,n,r){this.$e=e,this.Ze=t,this.fc=n,this.wf=r,x(!r||t,"Tagged queries must be from server.")}function Sg(e){this.ma=lg,this.Bb=new Cg,this.Zc={},this.gc={},this.Fc=e}function Ug(e,t,n,r){if(r=Cd(e.Zc,"_"+r),null!=r){var i=Vg(r);return r=i.path,i=i.fc,t=T(r,t),n=new Lg(new Qg(!1,!0,i,!0),t,n),Wg(e,r,n)}return[]}function Xg(e,t,n,r){if(r=Cd(e.Zc,"_"+r)){var i=Vg(r);return r=i.path,i=i.fc,t=T(r,t),n=mg(n),n=new Pg(new Qg(!1,!0,i,!0),t,n),Wg(e,r,n)}return[]}function ah(e){return qg(e,function(e,t,n){if(t&&null!=zg(t))return[zg(t)];var r=[];return t&&(r=Ag(t)),A(n,function(e){r=r.concat(e)}),r})}function dh(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!wc(r.w)){var r=Yg(r),i=e.gc[r];delete e.gc[r],delete e.Zc["_"+i]}}}function $g(e,t,n){var r=t.path,i=ch(e,t);if(n=bh(e,n),t=e.Fc.Le(t,i,n.qd,n.H),r=e.ma.subtree(r),i)x(null==zg(r.value),"If we're adding a query, it shouldn't be shadowed");else for(i=qg(r,function(e,t,n){if(!e.e()&&t&&null!=zg(t))return[hg(zg(t))];var r=[];return t&&(r=r.concat(La(Ag(t),function(e){return e.U}))),A(n,function(e){r=r.concat(e)}),r}),r=0;r<i.length;++r)n=i[r],e.Fc.Od(n,ch(e,n));return t}function bh(e,t){var n=t.U,r=ch(e,n);return{qd:function(){return(t.ab()||K).hash()},H:function(t,i){if("ok"===t){if(i&&"object"==typeof i&&u(i,"w")){var o=v(i,"w");ea(o)&&0<=Ia(o,"no_index")&&z("Using an unspecified index. Consider adding "+('".indexOn": "'+n.w.m.toString()+'"')+" at "+n.path.toString()+" to your security rules for better performance")}if(r){var s=n.path;if(o=Cd(e.Zc,"_"+r))var a=Vg(o),o=a.path,a=a.fc,s=T(o,s),s=new Og(new Qg(!1,!0,a,!0),s),o=Wg(e,o,s);else o=[]}else o=Tg(e,new Og(Rg,n.path));return o}return o="Unknown Error","too_big"===t?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?o="Client doesn't have permission to access the desired data.":"unavailable"==t&&(o="The service is unavailable"),o=Error(t+": "+o),o.code=t.toUpperCase(),e.hb(n,null,o)}}}function Yg(e){return e.path.toString()+"$"+e.Da()}function Vg(e){var t=e.indexOf("$");return x(-1!==t&&t<e.length-1,"Bad queryKey."),{fc:e.substr(t+1),path:new P(e.substr(0,t))}}function ch(e,t){var n=Yg(t);return v(e.gc,n)}function Wg(e,t,n){var r=e.ma.get(t);return x(r,"Missing sync point for query tag that we're tracking"),r.Xa(n,new Kg(t,e.Bb),null)}function Tg(e,t){return eh(e,t,e.ma,null,new Kg(S,e.Bb))}function eh(e,t,n,r,i){if(t.path.e())return fh(e,t,n,r,i);var o=n.get(S);null==r&&null!=o&&(r=o.za(S));var s=[],a=G(t.path),u=t.Mc(a);if((n=n.children.get(a))&&u)var c=r?r.B(a):null,a=i.k(a),s=s.concat(eh(e,u,n,c,a));return o&&(s=s.concat(o.Xa(t,i,r))),s}function fh(e,t,n,r,i){var o=n.get(S);null==r&&null!=o&&(r=o.za(S));var s=[];return n.children.Ba(function(n,o){var a=r?r.B(n):null,u=i.k(n),c=t.Mc(n);c&&(s=s.concat(fh(e,c,o,a,u)))}),o&&(s=s.concat(o.Xa(t,i,r))),s}function gh(e){this.Q=e,this.Qa=Ld(e),this.Z=new Te,this.zd=1,this.S=new xe(this.Q,q(this.Cd,this),q(this.Ad,this),q(this.Ee,this)),this.ug=Md(e,q(function(){return new Id(this.Qa,this.S)},this)),this.pc=new Fc,this.qe=new Se;var t=this;this.ud=new Sg({Le:function(e,n,r,i){return n=[],r=t.qe.Wc.da(e.path),r.e()||(n=t.ud.Sa(e.path,r),setTimeout(function(){i("ok")},0)),n},Od:ba}),hh(this,"connected",!1),this.ea=new Pe,this.T=new tf(e,q(this.S.T,this.S),q(this.S.Pe,this.S),q(this.Be,this)),this.jd=0,this.re=null,this.M=new Sg({Le:function(e,n,r,i){return Be(t.S,e,r,n,function(n,r){var o=i(n,r);Xe(t.Z,e.path,o)}),[]},Od:function(e,n){var r=t.S,i=e.path.toString(),o=e.Da();if(r.f("Unlisten called for "+i+" "+o),De(r,i,o)&&r.ia){var s=Dc(e);r.f("Unlisten on "+i+" for "+o),i={p:i},n&&(i.q=s,i.t=n),r.wa("n",i)}}})}function ih(e){var t=new P(".info/serverTimeOffset");return e=e.qe.Wc.da(t).N()||0,(new Date).getTime()+e}function jh(e){return e=e={timestamp:ih(e)},e.timestamp=e.timestamp||(new Date).getTime(),e}function hh(e,t,n){t=new P("/.info/"+t),n=J(n);var r=e.qe;r.Wc=r.Wc.L(t,n),n=e.ud.Sa(t,n),Xe(e.Z,t,n)}function lh(e){e.f("onDisconnectEvents");var t=jh(e),n=[];Re(Hf(e.ea,t),S,function(t,r){n=n.concat(e.M.Sa(t,r));var i=nh(e,t);kh(e,i)}),e.ea=new Pe,Xe(e.Z,S,n)}function oh(e,t,n,r){var i=J(n);Fe(e.S,t.toString(),i.N(!0),function(n,o){"ok"===n&&e.ea.ic(t,i),mh(r,n,o)})}function ph(e,t,n,r,i){var o=J(n,r);Fe(e.S,t.toString(),o.N(!0),function(n,r){"ok"===n&&e.ea.ic(t,o),mh(i,n,r)})}function qh(e,t,n,r){var i,o=!0;for(i in n)o=!1;o?(kb("onDisconnect().update() called with empty data.  Don't do anything."),mh(r,"ok")):He(e.S,t.toString(),n,function(i,o){if("ok"===i)for(var s in n){var a=J(n[s]);e.ea.ic(t.k(s),a)}mh(r,i,o)})}function Bc(e,t,n){n=".info"===G(t.path)?e.ud.Jb(t,n):e.M.Jb(t,n),Cc(e.Z,t.path,n)}function mh(e,t,n){e&&Fb(function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n),i=Error(i),i.code=r,e(i)}})}function rh(e,t,r,i,o){function s(){}e.f("transaction on "+t);var a=new O(e,t);if(a.zb("value",s),r={path:t,update:r,H:i,status:null,lf:hb(),Qe:o,rf:0,Vd:function(){a.bc("value",s)},Yd:null,sa:null,fd:null,gd:null,hd:null},i=e.M.xa(t,void 0)||K,r.fd=i,i=r.update(i.N()),n(i)){Tb("transaction failed: Data returned ",i),r.status=1,o=Gc(e.pc,t);var c=o.ta()||[];c.push(r),Hc(o,c),"object"==typeof i&&null!==i&&u(i,".priority")?(c=v(i,".priority"),x(Rb(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(e.M.xa(t)||K).O().N(),o=jh(e),i=J(i,c),o=If(i,o),r.gd=i,r.hd=o,r.sa=e.zd++,r=e.M.Fa(t,o,r.sa,r.Qe),Xe(e.Z,t,r),sh(e)}else r.Vd(),r.gd=null,r.hd=null,r.H&&(e=new C(r.fd,new O(e,r.path),L),r.H(null,!1,e))}function sh(e,t){var n=t||e.pc;if(t||th(e,n),null!==n.ta()){var r=uh(e,n);x(0<r.length,"Sending zero length transaction queue"),Na(r,function(e){return 1===e.status})&&vh(e,n.path(),r)}else n.pd()&&n.ca(function(t){sh(e,t)})}function vh(e,t,n){for(var r=La(n,function(e){return e.sa}),i=e.M.xa(t,r)||K,r=i,i=i.hash(),o=0;o<n.length;o++){var s=n[o];x(1===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=2,s.rf++;var a=T(t,s.path),r=r.L(a,s.gd)}r=r.N(!0),e.S.put(t.toString(),r,function(r){e.f("transaction put response",{path:t.toString(),status:r});var i=[];if("ok"===r){for(r=[],o=0;o<n.length;o++){if(n[o].status=3,i=i.concat(e.M.Ea(n[o].sa)),n[o].H){var s=n[o].hd,a=new O(e,n[o].path);r.push(q(n[o].H,null,null,!0,new C(s,a,L)))}n[o].Vd()}for(th(e,Gc(e.pc,t)),sh(e),Xe(e.Z,t,i),o=0;o<r.length;o++)Fb(r[o])}else{if("datastale"===r)for(o=0;o<n.length;o++)n[o].status=4===n[o].status?5:1;else for(z("transaction at "+t.toString()+" failed: "+r),o=0;o<n.length;o++)n[o].status=5,n[o].Yd=r;kh(e,t)}},i)}function kh(e,t){var n=wh(e,t),r=n.path(),n=uh(e,n);return xh(e,n,r),r}function xh(e,t,r){if(0!==t.length){for(var i=[],o=[],s=La(t,function(e){return e.sa}),a=0;a<t.length;a++){var c,l=t[a],h=T(r,l.path),d=!1;if(x(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),5===l.status)d=!0,c=l.Yd,o=o.concat(e.M.Ea(l.sa,!0));else if(1===l.status)if(25<=l.rf)d=!0,c="maxretry",o=o.concat(e.M.Ea(l.sa,!0));else{var f=e.M.xa(l.path,s)||K;l.fd=f;var p=t[a].update(f.N());n(p)?(Tb("transaction failed: Data returned ",p),h=J(p),"object"==typeof p&&null!=p&&u(p,".priority")||(h=h.ib(f.O())),f=l.sa,p=jh(e),p=If(h,p),l.gd=h,l.hd=p,l.sa=e.zd++,Qa(s,f),o=o.concat(e.M.Fa(l.path,p,l.sa,l.Qe)),o=o.concat(e.M.Ea(f,!0))):(d=!0,c="nodata",o=o.concat(e.M.Ea(l.sa,!0)))}Xe(e.Z,r,o),o=[],d&&(t[a].status=3,setTimeout(t[a].Vd,Math.floor(0)),t[a].H&&("nodata"===c?(l=new O(e,t[a].path),i.push(q(t[a].H,null,null,!1,new C(t[a].fd,l,L)))):i.push(q(t[a].H,null,Error(c),!1,null))))}for(th(e,e.pc),a=0;a<i.length;a++)Fb(i[a]);sh(e)}}function wh(e,t){for(var n,r=e.pc;null!==(n=G(t))&&null===r.ta();)r=Gc(r,n),t=R(t);return r}function uh(e,t){var n=[];return yh(e,t,n),n.sort(function(e,t){return e.lf-t.lf}),n}function yh(e,t,n){var r=t.ta();if(null!==r)for(var i=0;i<r.length;i++)n.push(r[i]);t.ca(function(t){yh(e,t,n)})}function th(e,t){var n=t.ta();if(n){for(var r=0,i=0;i<n.length;i++)3!==n[i].status&&(n[r]=n[i],r++);n.length=r,Hc(t,0<n.length?n:null)}t.ca(function(t){th(e,t)})}function nh(e,t){var n=wh(e,t).path(),r=Gc(e.pc,t);return Kc(r,function(t){zh(e,t)}),zh(e,r),Jc(r,function(t){zh(e,t)}),n}function zh(e,t){var n=t.ta();if(null!==n){for(var r=[],i=[],o=-1,s=0;s<n.length;s++)4!==n[s].status&&(2===n[s].status?(x(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=4,n[s].Yd="set"):(x(1===n[s].status,"Unexpected transaction status in abort"),n[s].Vd(),i=i.concat(e.M.Ea(n[s].sa,!0)),n[s].H&&r.push(q(n[s].H,null,Error("set"),!1,null))));for(-1===o?Hc(t,null):n.length=o+1,Xe(e.Z,t.path(),i),s=0;s<r.length;s++)Fb(r[s])}}function Ah(){this.jc={}}function Bh(e){var t=this;if(this.tc=e,this.Qd="*",lf()?this.Hc=this.sd=cf():(this.Hc=window.opener,this.sd=window),!t.Hc)throw"Unable to find relay frame";
df(this.sd,"message",q(this.cc,this)),df(this.sd,"message",q(this.hf,this));try{Ch(this,{a:"ready"})}catch(n){df(this.Hc,"load",function(){Ch(t,{a:"ready"})})}df(window,"unload",q(this.eg,this))}function Ch(e,n){n=t(n),lf()?e.Hc.doPost(n,e.Qd):e.Hc.postMessage(n,e.Qd)}function Z(e,t){this.Sc=e,this.Ca=t}function O(e,t){var n,r,i;if(e instanceof gh)n=e,r=t;else{D("new Firebase",1,2,arguments.length),r=ub(arguments[0]),n=r.vg,"firebase"===r.domain&&tb(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n||tb("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.Cb||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&z("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),n=new Ca(r.host,r.Cb,n,"ws"===r.scheme||"wss"===r.scheme),r=new P(r.Pc),i=r.toString();var o;if(!(o=!p(n.host)||0===n.host.length||!Qb(n.yb))&&(o=0!==i.length)&&(i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),o=!(p(i)&&0!==i.length&&!Pb.test(i))),o)throw Error(E("new Firebase",1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');if(t)if(t instanceof Ah)i=t;else{if(!p(t))throw Error("Expected a valid Firebase.Context for second argument to new Firebase()");i=Ah.Qb(),n.Gd=t}else i=Ah.Qb();o=n.toString();var s=v(i.jc,o);s||(s=new gh(n),i.jc[o]=s),n=s}M.call(this,n,r,oc,!1)}function qb(e,t){x(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?("undefined"!=typeof console&&("function"==typeof console.log?ob=q(console.log,console):"object"==typeof console.log&&(ob=function(e){console.log(e)})),t&&Ba.set("logging_enabled",!0)):e?ob=e:(ob=null,Ba.remove("logging_enabled"))}var h,aa=this,ma=Date.now||function(){return+new Date},sa={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},ta=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;h=xa.prototype,h.set=function(e,n){null==n?this.xc.removeItem(this.Hd+e):this.xc.setItem(this.Hd+e,t(n))},h.get=function(e){return e=this.xc.getItem(this.Hd+e),null==e?null:ua(e)},h.remove=function(e){this.xc.removeItem(this.Hd+e)},h.ff=!1,h.toString=function(){return this.xc.toString()},ya.prototype.set=function(e,t){null==t?delete this.ha[e]:this.ha[e]=t},ya.prototype.get=function(e){return u(this.ha,e)?this.ha[e]:null},ya.prototype.remove=function(e){delete this.ha[e]},ya.prototype.ff=!0;var Aa=za("localStorage"),Ba=za("sessionStorage");Ca.prototype.toString=function(){var e=(this.Cb?"https://":"http://")+this.host;return this.Gd&&(e+="<"+this.Gd+">"),e},na(Fa,Ea),Fa.prototype.reset=function(){this.R[0]=1732584193,this.R[1]=4023233417,this.R[2]=2562383102,this.R[3]=271733878,this.R[4]=3285377520,this.Rd=this.Tb=0},Fa.prototype.update=function(e,t){n(t)||(t=e.length);for(var r=t-this.Ta,i=0,o=this.be,s=this.Tb;t>i;){if(0==s)for(;r>=i;)Ga(this,e,i),i+=this.Ta;if(p(e)){for(;t>i;)if(o[s]=e.charCodeAt(i),++s,++i,s==this.Ta){Ga(this,o),s=0;break}}else for(;t>i;)if(o[s]=e[i],++s,++i,s==this.Ta){Ga(this,o),s=0;break}}this.Tb=s,this.Rd+=t};var w=Array.prototype,Ia=w.indexOf?function(e,t,n){return w.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?Math.max(0,e.length+n):n,p(e))return p(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Ja=w.forEach?function(e,t,n){w.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=p(e)?e.split(""):e,o=0;r>o;o++)o in i&&t.call(n,i[o],o,e)},Ka=w.filter?function(e,t,n){return w.filter.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=[],o=0,s=p(e)?e.split(""):e,a=0;r>a;a++)if(a in s){var u=s[a];t.call(n,u,a,e)&&(i[o++]=u)}return i},La=w.map?function(e,t,n){return w.map.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=Array(r),o=p(e)?e.split(""):e,s=0;r>s;s++)s in o&&(i[s]=t.call(n,o[s],s,e));return i},Ma=w.reduce?function(e,t,n,r){return r&&(t=q(t,r)),w.reduce.call(e,t,n)}:function(e,t,n,r){var i=n;return Ja(e,function(n,o){i=t.call(r,i,n,o,e)}),i},Na=w.every?function(e,t,n){return w.every.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=p(e)?e.split(""):e,o=0;r>o;o++)if(o in i&&!t.call(n,i[o],o,e))return!1;return!0},Va;e:{var Wa=aa.navigator;if(Wa){var Xa=Wa.userAgent;if(Xa){Va=Xa;break e}}Va=""}var Za=Ya("Opera")||Ya("OPR"),$a=Ya("Trident")||Ya("MSIE"),ab=Ya("Gecko")&&-1==Va.toLowerCase().indexOf("webkit")&&!(Ya("Trident")||Ya("MSIE")),bb=-1!=Va.toLowerCase().indexOf("webkit");!function(){var e,t="";return Za&&aa.opera?(t=aa.opera.version,ha(t)?t():t):(ab?e=/rv\:([^\);]+)(\)|;)/:$a?e=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:bb&&(e=/WebKit\/(\S+)/),e&&(t=(t=e.exec(Va))?t[1]:""),$a&&(e=(e=aa.document)?e.documentMode:void 0,e>parseFloat(t))?String(e):t)}();var cb=null,db=null,eb=null,hb=function(){var e=1;return function(){return e++}}(),ob=null,pb=!0,Eb=/^-?\d{1,10}$/;Gb.prototype.Rb=function(){var e=this.Ld.hc();return"value"===this.nd?e.path:e.parent().path},Gb.prototype.oe=function(){return this.nd},Gb.prototype.Pb=function(){return this.me.Pb(this)},Gb.prototype.toString=function(){return this.Rb().toString()+":"+this.nd+":"+t(this.Ld.Xe())},Hb.prototype.Rb=function(){return this.path},Hb.prototype.oe=function(){return"cancel"},Hb.prototype.Pb=function(){return this.me.Pb(this)},Hb.prototype.toString=function(){return this.path.toString()+":cancel"},h=Ib.prototype,h.pf=function(e){return"value"===e},h.createEvent=function(e,t){var n=t.w.m;return new Gb("value",this,new C(e.Wa,t.hc(),n))},h.Pb=function(e){var t=this.vc;if("cancel"===e.oe()){x(this.mb,"Raising a cancel event on a listener with no cancel callback");var n=this.mb;return function(){n.call(t,e.error)}}var r=this.Kb;return function(){r.call(t,e.Ld)}},h.Te=function(e,t){return this.mb?new Hb(this,e,t):null},h.matches=function(e){return e instanceof Ib&&(!e.Kb||!this.Kb||e.Kb===this.Kb)&&e.vc===this.vc},h.cf=function(){return null!==this.Kb},h=Jb.prototype,h.pf=function(e){return e="children_added"===e?"child_added":e,("children_removed"===e?"child_removed":e)in this.ba},h.Te=function(e,t){return this.mb?new Hb(this,e,t):null},h.createEvent=function(e,t){var n=t.hc().k(e.nb);return new Gb(e.type,this,new C(e.Wa,n,t.w.m),e.Rc)},h.Pb=function(e){var t=this.vc;if("cancel"===e.oe()){x(this.mb,"Raising a cancel event on a listener with no cancel callback");var n=this.mb;return function(){n.call(t,e.error)}}var r=this.ba[e.nd];return function(){r.call(t,e.Ld,e.Rc)}},h.matches=function(e){if(e instanceof Jb){if(this.ba&&e.ba){var t=Kb(e.ba);if(t===Kb(this.ba)){if(1===t){var t=Lb(e.ba),n=Lb(this.ba);return!(n!==t||e.ba[t]&&this.ba[n]&&e.ba[t]!==this.ba[n])}return Mb(this.ba,function(t,n){return e.ba[n]===t})}return!1}return!0}return!1},h.cf=function(){return null!==this.ba};var Ob=/[\[\].#$\/\u0000-\u001F\u007F]/,Pb=/[\[\].#$\u0000-\u001F\u007F]/,hc={};gc.prototype.df=function(e,t){return 0!==this.compare(new I("[MIN_NAME]",e),new I("[MIN_NAME]",t))},gc.prototype.Ae=function(){return ic},na(jc,gc),h=jc.prototype,h.se=function(e){return!e.B(this.Vb).e()},h.compare=function(e,t){var n=e.K.B(this.Vb),r=t.K.B(this.Vb),n=n.he(r);return 0===n?xb(e.name,t.name):n},h.ye=function(e,t){var n=J(e),n=K.I(this.Vb,n);return new I(t,n)},h.ze=function(){var e=K.I(this.Vb,kc);return new I("[MAX_NAME]",e)},h.toString=function(){return this.Vb};var L=new jc(".priority");na(lc,gc),h=lc.prototype,h.compare=function(e,t){return xb(e.name,t.name)},h.se=function(){throw ib("KeyIndex.isDefinedOn not expected to be called.")},h.df=function(){return!1},h.Ae=function(){return ic},h.ze=function(){return new I("[MAX_NAME]",K)},h.ye=function(e){return x(p(e),"KeyIndex indexValue must always be a string."),new I(e,K)},h.toString=function(){return".key"};var mc=new lc,oc=new nc;h=nc.prototype,h.ve=function(e){var t=uc(this);return t.ka=!0,t.xb=e,t.Hb="",t},h.we=function(e){var t=uc(this);return t.ka=!0,t.xb=e,t.Hb="l",t},h.xe=function(e){var t=uc(this);return t.ka=!0,t.xb=e,t.Hb="r",t},h.Md=function(e,t){var n=uc(this);return n.ga=!0,n.Bc=e,null!=t?(n.nc=!0,n.Xb=t):(n.nc=!1,n.Xb=""),n},h.md=function(e,t){var r=uc(this);return r.na=!0,r.Ac=e,n(t)?(r.yc=!0,r.Ub=t):(r.Dg=!1,r.Ub=""),r},M.prototype.hc=function(){return D("Query.ref",0,0,arguments.length),new O(this.g,this.path)},M.prototype.ref=M.prototype.hc,M.prototype.zb=function(e,t,n,r){D("Query.on",2,4,arguments.length),Xb("Query.on",e,!1),F("Query.on",2,t,!1);var i=Ac("Query.on",n,r);if("value"===e)Bc(this.g,this,new Ib(t,i.cancel||null,i.Ha||null));else{var o={};o[e]=t,Bc(this.g,this,new Jb(o,i.cancel,i.Ha))}return t},M.prototype.on=M.prototype.zb,M.prototype.bc=function(e,t,n){D("Query.off",0,3,arguments.length),Xb("Query.off",e,!0),F("Query.off",2,t,!0),Nb("Query.off",3,n);var r=null,i=null;"value"===e?r=new Ib(t||null,null,n||null):e&&(t&&(i={},i[e]=t),r=new Jb(i,null,n||null)),i=this.g,r=".info"===G(this.path)?i.ud.hb(this,r):i.M.hb(this,r),Cc(i.Z,this.path,r)},M.prototype.off=M.prototype.bc,M.prototype.gg=function(e,t){function n(s){o&&(o=!1,i.bc(e,n),t.call(r.Ha,s))}D("Query.once",2,4,arguments.length),Xb("Query.once",e,!1),F("Query.once",2,t,!1);var r=Ac("Query.once",arguments[2],arguments[3]),i=this,o=!0;this.zb(e,n,function(t){i.bc(e,n),r.cancel&&r.cancel.call(r.Ha,t)})},M.prototype.once=M.prototype.gg,M.prototype.ve=function(e){if(z("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead."),D("Query.limit",1,1,arguments.length),!ga(e)||Math.floor(e)!==e||0>=e)throw Error("Query.limit: First argument must be a positive integer.");if(this.w.ka)throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var t=this.w.ve(e);return yc(t),new M(this.g,this.path,t,this.dc)},M.prototype.limit=M.prototype.ve,M.prototype.we=function(e){if(D("Query.limitToFirst",1,1,arguments.length),!ga(e)||Math.floor(e)!==e||0>=e)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.w.ka)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new M(this.g,this.path,this.w.we(e),this.dc)},M.prototype.limitToFirst=M.prototype.we,M.prototype.xe=function(e){if(D("Query.limitToLast",1,1,arguments.length),!ga(e)||Math.floor(e)!==e||0>=e)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.w.ka)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new M(this.g,this.path,this.w.xe(e),this.dc)},M.prototype.limitToLast=M.prototype.xe,M.prototype.hg=function(e){if(D("Query.orderByChild",1,1,arguments.length),"$key"===e)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');Yb("Query.orderByChild",1,e,!1),zc(this,"Query.orderByChild");var t=vc(this.w,new jc(e));return xc(t),new M(this.g,this.path,t,!0)},M.prototype.orderByChild=M.prototype.hg,M.prototype.ig=function(){D("Query.orderByKey",0,0,arguments.length),zc(this,"Query.orderByKey");var e=vc(this.w,mc);return xc(e),new M(this.g,this.path,e,!0)},M.prototype.orderByKey=M.prototype.ig,M.prototype.jg=function(){D("Query.orderByPriority",0,0,arguments.length),zc(this,"Query.orderByPriority");var e=vc(this.w,L);return xc(e),new M(this.g,this.path,e,!0)},M.prototype.orderByPriority=M.prototype.jg,M.prototype.Md=function(e,t){D("Query.startAt",0,2,arguments.length),Sb("Query.startAt",e,!0),Yb("Query.startAt",2,t,!0);var r=this.w.Md(e,t);if(yc(r),xc(r),this.w.ga)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return n(e)||(t=e=null),new M(this.g,this.path,r,this.dc)},M.prototype.startAt=M.prototype.Md,M.prototype.md=function(e,t){D("Query.endAt",0,2,arguments.length),Sb("Query.endAt",e,!0),Yb("Query.endAt",2,t,!0);var n=this.w.md(e,t);if(yc(n),xc(n),this.w.na)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new M(this.g,this.path,n,this.dc)},M.prototype.endAt=M.prototype.md,M.prototype.Of=function(e,t){if(D("Query.equalTo",1,2,arguments.length),Sb("Query.equalTo",e,!1),Yb("Query.equalTo",2,t,!0),this.w.ga)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.w.na)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.Md(e,t).md(e,t)},M.prototype.equalTo=M.prototype.Of,M.prototype.Da=function(){var e=Ab(Dc(this));return"{}"===e?"default":e},P.prototype.toString=function(){for(var e="",t=this.aa;t<this.n.length;t++)""!==this.n[t]&&(e+="/"+this.n[t]);return e||"/"},P.prototype.parent=function(){if(this.aa>=this.n.length)return null;for(var e=[],t=this.aa;t<this.n.length-1;t++)e.push(this.n[t]);return new P(e,0)},P.prototype.k=function(e){for(var t=[],n=this.aa;n<this.n.length;n++)t.push(this.n[n]);if(e instanceof P)for(n=e.aa;n<e.n.length;n++)t.push(e.n[n]);else for(e=e.split("/"),n=0;n<e.length;n++)0<e[n].length&&t.push(e[n]);return new P(t,0)},P.prototype.e=function(){return this.aa>=this.n.length};var S=new P("");P.prototype.ja=function(e){if(Q(this)!==Q(e))return!1;for(var t=this.aa,n=e.aa;t<=this.n.length;t++,n++)if(this.n[t]!==e.n[n])return!1;return!0},P.prototype.contains=function(e){var t=this.aa,n=e.aa;if(Q(this)>Q(e))return!1;for(;t<this.n.length;){if(this.n[t]!==e.n[n])return!1;++t,++n}return!0},h=Fc.prototype,h.ta=function(){return this.D.value},h.clear=function(){this.D.value=null,this.D.children={},this.D.dd=0,Ic(this)},h.pd=function(){return 0<this.D.dd},h.e=function(){return null===this.ta()&&!this.pd()},h.ca=function(e){var t=this;A(this.D.children,function(n,r){e(new Fc(r,t,n))})},h.path=function(){return new P(null===this.Oc?this.yd:this.Oc.path()+"/"+this.yd)},h.name=function(){return this.yd},h.parent=function(){return this.Oc},h=Lc.prototype,h.Ja=function(e,t){return new Lc(this.Ga,this.pa.Ja(e,t,this.Ga).W(null,null,!1,null,null))},h.remove=function(e){return new Lc(this.Ga,this.pa.remove(e,this.Ga).W(null,null,!1,null,null))},h.get=function(e){for(var t,n=this.pa;!n.e();){if(t=this.Ga(e,n.key),0===t)return n.value;0>t?n=n.left:t>0&&(n=n.right)}return null},h.e=function(){return this.pa.e()},h.count=function(){return this.pa.count()},h.Ic=function(){return this.pa.Ic()},h.Zb=function(){return this.pa.Zb()},h.Ba=function(e){return this.pa.Ba(e)},h.Aa=function(e){return new Oc(this.pa,null,this.Ga,!1,e)},h.rb=function(e,t){return new Oc(this.pa,e,this.Ga,!1,t)},h.Sb=function(e,t){return new Oc(this.pa,e,this.Ga,!0,t)},h.bf=function(e){return new Oc(this.pa,null,this.Ga,!0,e)},h=Pc.prototype,h.W=function(e,t,n,r,i){return new Pc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},h.count=function(){return this.left.count()+1+this.right.count()},h.e=function(){return!1},h.Ba=function(e){return this.left.Ba(e)||e(this.key,this.value)||this.right.Ba(e)},h.Ic=function(){return Qc(this).key},h.Zb=function(){return this.right.e()?this.key:this.right.Zb()},h.Ja=function(e,t,n){var r,i;return i=this,r=n(e,i.key),i=0>r?i.W(null,null,null,i.left.Ja(e,t,n),null):0===r?i.W(null,t,null,null,null):i.W(null,null,null,null,i.right.Ja(e,t,n)),Rc(i)},h.remove=function(e,t){var n,r;if(n=this,0>t(e,n.key))n.left.e()||n.left.$()||n.left.left.$()||(n=Tc(n)),n=n.W(null,null,null,n.left.remove(e,t),null);else{if(n.left.$()&&(n=Uc(n)),n.right.e()||n.right.$()||n.right.left.$()||(n=Vc(n),n.left.left.$()&&(n=Uc(n),n=Vc(n))),0===t(e,n.key)){if(n.right.e())return Mc;r=Qc(n.right),n=n.W(r.key,r.value,null,null,Sc(n.right))}n=n.W(null,null,null,null,n.right.remove(e,t))}return Rc(n)},h.$=function(){return this.color},h=Xc.prototype,h.W=function(){return this},h.Ja=function(e,t){return new Pc(e,t,null)},h.remove=function(){return this},h.count=function(){return 0},h.e=function(){return!0},h.Ba=function(){return!1},h.Ic=function(){return null},h.Zb=function(){return null},h.$=function(){return!1};var Mc=new Xc;h=Zc.prototype,h.P=function(){return!0},h.O=function(){return this.fa},h.ib=function(e){return new Zc(this.A,e)},h.B=function(e){return".priority"===e?this.fa:K},h.da=function(e){return e.e()?this:".priority"===G(e)?this.fa:K},h.Y=function(){return!1},h.af=function(){return null},h.I=function(e,t){return".priority"===e?this.ib(t):K.I(e,t).ib(this.fa)},h.L=function(e,t){var n=G(e);return null===n?t:(x(".priority"!==n||1===Q(e),".priority must be the last token in a path"),this.I(n,K.L(R(e),t)))},h.e=function(){return!1},h.Ua=function(){return 0},h.N=function(e){return e&&!this.O().e()?{".value":this.ta(),".priority":this.O().N()}:this.ta()},h.hash=function(){if(null===this.wb){var e="";this.fa.e()||(e+="priority:"+ad(this.fa.N())+":");var t=typeof this.A,e=e+(t+":"),e="number"===t?e+Db(this.A):e+this.A;this.wb=lb(e)}return this.wb},h.ta=function(){return this.A},h.he=function(e){if(e===K)return 1;if(e instanceof bd)return-1;x(e.P(),"Unknown node type");var t=typeof e.A,n=typeof this.A,r=Ia(cd,t),i=Ia(cd,n);return x(r>=0,"Unknown leaf type: "+t),x(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.A<e.A?-1:this.A===e.A?0:1:i-r};var cd=["object","boolean","number","string"];Zc.prototype.Wd=function(){return this},Zc.prototype.Yb=function(){return!0},Zc.prototype.ja=function(e){return e===this?!0:e.P()?this.A===e.A&&this.fa.ja(e.fa):!1},Zc.prototype.toString=function(){return"string"==typeof this.A?this.A:'"'+this.A+'"'},dd.prototype.get=function(e){var t=v(this.td,e);if(!t)throw Error("No index defined for "+e);return t===hc?null:t};var id=new dd({".priority":hc},{".priority":L});h=bd.prototype,h.P=function(){return!1},h.O=function(){return this.fa||K},h.ib=function(e){return new bd(this.j,e,this.sb)},h.B=function(e){return".priority"===e?this.O():(e=this.j.get(e),null===e?K:e)},h.da=function(e){var t=G(e);return null===t?this:this.B(t).da(R(e))},h.Y=function(e){return null!==this.j.get(e)},h.I=function(e,t){if(x(t,"We should always be passing snapshot nodes"),".priority"===e)return this.ib(t);var n,r=new I(e,t);return t.e()?(n=this.j.remove(e),r=hd(this.sb,r,this.j)):(n=this.j.Ja(e,t),r=ed(this.sb,r,this.j)),new bd(n,this.fa,r)},h.L=function(e,t){var n=G(e);if(null===n)return t;x(".priority"!==G(e)||1===Q(e),".priority must be the last token in a path");var r=this.B(n).L(R(e),t);return this.I(n,r)},h.e=function(){return this.j.e()},h.Ua=function(){return this.j.count()};var jd=/^(0|[1-9]\d*)$/;h=bd.prototype,h.N=function(e){if(this.e())return null;var t={},n=0,r=0,i=!0;if(this.ca(L,function(o,s){t[o]=s.N(e),n++,i&&jd.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&2*n>r){var o,s=[];for(o in t)s[o]=t[o];return s}return e&&!this.O().e()&&(t[".priority"]=this.O().N()),t},h.hash=function(){if(null===this.wb){var e="";this.O().e()||(e+="priority:"+ad(this.O().N())+":"),this.ca(L,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.wb=""===e?"":lb(e)}return this.wb},h.af=function(e,t,n){return(n=kd(this,n))?(e=Nc(n,new I(e,t)))?e.name:null:Nc(this.j,e)},h.ca=function(e,t){var n=kd(this,e);return n?n.Ba(function(e){return t(e.name,e.K)}):this.j.Ba(t)},h.Aa=function(e){return this.rb(e.Ae(),e)},h.rb=function(e,t){var n=kd(this,t);return n?n.rb(e,function(e){return e}):this.j.rb(e.name,Yc)},h.bf=function(e){return this.Sb(e.ze(),e)},h.Sb=function(e,t){var n=kd(this,t);return n?n.Sb(e,function(e){return e}):this.j.Sb(e.name,Yc)},h.he=function(e){return this.e()?e.e()?0:-1:e.P()||e.e()?1:e===kc?-1:0},h.Wd=function(e){if(e===mc||nd(this.sb.Wb,e.toString()))return this;var t=this.sb,n=this.j;x(e!==mc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,n=n.Aa(Yc),o=U(n);o;)i=i||e.se(o.K),r.push(o),o=U(n);return r=i?gd(r,H(e)):hc,i=e.toString(),n=od(t.Wb),n[i]=e,e=od(t.td),e[i]=r,new bd(this.j,this.fa,new dd(e,n))},h.Yb=function(e){return e===mc||nd(this.sb.Wb,e.toString())},h.ja=function(e){if(e===this)return!0;if(e.P())return!1;if(this.O().ja(e.O())&&this.j.count()===e.j.count()){var t=this.Aa(L);e=e.Aa(L);for(var n=U(t),r=U(e);n&&r;){if(n.name!==r.name||!n.K.ja(r.K))return!1;n=U(t),r=U(e)}return null===n&&null===r}return!1},h.toString=function(){var e="{",t=!0;return this.ca(L,function(n,r){t?t=!1:e+=", ",e+='"'+n+'" : '+r.toString()}),e+="}"};var pd=Math.log(2),K=new bd(new Lc(fc),null,id);na(sd,bd),h=sd.prototype,h.he=function(e){return e===this?0:1},h.ja=function(e){return e===this},h.O=function(){throw ib("Why is this called?")},h.B=function(){return K},h.e=function(){return!1};var kc=new sd,ic=new I("[MIN_NAME]",K);C.prototype.N=function(){return D("Firebase.DataSnapshot.val",0,0,arguments.length),this.D.N()},C.prototype.val=C.prototype.N,C.prototype.Xe=function(){return D("Firebase.DataSnapshot.exportVal",0,0,arguments.length),this.D.N(!0)},C.prototype.exportVal=C.prototype.Xe,C.prototype.Qf=function(){return D("Firebase.DataSnapshot.exists",0,0,arguments.length),!this.D.e()},C.prototype.exists=C.prototype.Qf,C.prototype.k=function(e){D("Firebase.DataSnapshot.child",0,1,arguments.length),ga(e)&&(e=String(e)),Zb("Firebase.DataSnapshot.child",e);var t=new P(e),n=this.U.k(t);return new C(this.D.da(t),n,L)},C.prototype.child=C.prototype.k,C.prototype.Y=function(e){D("Firebase.DataSnapshot.hasChild",1,1,arguments.length),Zb("Firebase.DataSnapshot.hasChild",e);var t=new P(e);return!this.D.da(t).e()},C.prototype.hasChild=C.prototype.Y,C.prototype.O=function(){return D("Firebase.DataSnapshot.getPriority",0,0,arguments.length),this.D.O().N()},C.prototype.getPriority=C.prototype.O,C.prototype.forEach=function(e){if(D("Firebase.DataSnapshot.forEach",1,1,arguments.length),F("Firebase.DataSnapshot.forEach",1,e,!1),this.D.P())return!1;var t=this;return!!this.D.ca(this.m,function(n,r){return e(new C(r,t.U.k(n),L))})},C.prototype.forEach=C.prototype.forEach,C.prototype.pd=function(){return D("Firebase.DataSnapshot.hasChildren",0,0,arguments.length),this.D.P()?!1:!this.D.e()},C.prototype.hasChildren=C.prototype.pd,C.prototype.name=function(){return z("Firebase.DataSnapshot.name() being deprecated. Please use Firebase.DataSnapshot.key() instead."),D("Firebase.DataSnapshot.name",0,0,arguments.length),this.key()},C.prototype.name=C.prototype.name,C.prototype.key=function(){return D("Firebase.DataSnapshot.key",0,0,arguments.length),this.U.key()},C.prototype.key=C.prototype.key,C.prototype.Ua=function(){return D("Firebase.DataSnapshot.numChildren",0,0,arguments.length),this.D.Ua()},C.prototype.numChildren=C.prototype.Ua,C.prototype.hc=function(){return D("Firebase.DataSnapshot.ref",0,0,arguments.length),this.U},C.prototype.ref=C.prototype.hc,td.prototype.Td=function(e){for(var t=this.Gc[e]||[],n=0;n<t.length;n++)t[n].sc.apply(t[n].Ha,Array.prototype.slice.call(arguments,1))},td.prototype.zb=function(e,t,n){ud(this,e),this.Gc[e]=this.Gc[e]||[],this.Gc[e].push({sc:t,Ha:n}),(e=this.pe(e))&&t.apply(n,e)},td.prototype.bc=function(e,t,n){ud(this,e),e=this.Gc[e]||[];for(var r=0;r<e.length;r++)if(e[r].sc===t&&(!n||n===e[r].Ha)){e.splice(r,1);break}},na(vd,td),ca(vd),vd.prototype.pe=function(e){return x("visible"===e,"Unknown event type: "+e),[this.qc]},na(wd,td),ca(wd),wd.prototype.pe=function(e){return x("online"===e,"Unknown event type: "+e),[this.Lc]};var Dd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");Fd.prototype.get=function(){return od(this.wc)},Hd.prototype.get=function(){var e=this.Kf.get(),t=od(e);if(this.vd)for(var n in this.vd)t[n]-=this.vd[n];return this.vd=e,t},Id.prototype.nf=function(){var e,t=this.Nd.get(),n={},r=!1;for(e in t)0<t[e]&&u(this.uf,e)&&(n[e]=t[e],r=!0);r&&(t=this.S,t.ia&&(n={c:n},t.f("reportStats",n),t.wa("s",n))),setTimeout(q(this.nf,this),Math.floor(6e5*Math.random()))};var Jd={},Kd={},Nd=null;"undefined"!=typeof MozWebSocket?Nd=MozWebSocket:"undefined"!=typeof WebSocket&&(Nd=WebSocket);var Pd;Od.prototype.open=function(e,t){this.fb=t,this.cg=e,this.f("Websocket connecting to "+this.Za),this.zc=!1,Aa.set("previous_websocket_failure",!0);try{this.oa=new Nd(this.Za)}catch(n){this.f("Error instantiating WebSocket.");var r=n.message||n.data;return r&&this.f(r),void this.eb()}var i=this;this.oa.onopen=function(){i.f("Websocket connected."),i.zc=!0},this.oa.onclose=function(){i.f("Websocket connection was disconnected."),i.oa=null,i.eb()},this.oa.onmessage=function(e){if(null!==i.oa)if(e=e.data,i.kb+=e.length,Gd(i.Qa,"bytes_received",e.length),Qd(i),null!==i.frames)Rd(i,e);else{e:{if(x(null===i.frames,"We already have a frame buffer"),6>=e.length){var t=Number(e);if(!isNaN(t)){i.Oe=t,i.frames=[],e=null;break e}}i.Oe=1,i.frames=[]}null!==e&&Rd(i,e)}},this.oa.onerror=function(e){i.f("WebSocket error.  Closing connection."),(e=e.message||e.data)&&i.f(e),i.eb()}},Od.prototype.start=function(){},Od.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&1<t.length&&4.4>parseFloat(t[1])&&(e=!0)}return!e&&null!==Nd&&!Pd},Od.responsesRequiredToBeHealthy=2,Od.healthyTimeout=3e4,h=Od.prototype,h.wd=function(){Aa.remove("previous_websocket_failure")},h.send=function(e){Qd(this),e=t(e),this.lb+=e.length,Gd(this.Qa,"bytes_sent",e.length),e=Bb(e,16384),1<e.length&&this.oa.send(String(e.length));for(var n=0;n<e.length;n++)this.oa.send(e[n])},h.Yc=function(){this.ub=!0,this.Cc&&(clearInterval(this.Cc),this.Cc=null),this.oa&&(this.oa.close(),this.oa=null)},h.eb=function(){this.ub||(this.f("WebSocket is closing itself"),this.Yc(),this.fb&&(this.fb(this.zc),this.fb=null))},h.close=function(){this.ub||(this.f("WebSocket is being closed"),this.Yc())},h=Vd.prototype,h.add=function(e,t){this.set[e]=null!==t?t:!0},h.contains=function(e){return u(this.set,e)},h.get=function(e){return this.contains(e)?this.set[e]:void 0},h.remove=function(e){delete this.set[e]},h.clear=function(){this.set={}},h.e=function(){return Bd(this.set)},h.count=function(){return Kb(this.set)};var Yd,Zd;Xd.prototype.open=function(e,t){this.Ue=0,this.ea=t,this.gf=new Sd(e),this.ub=!1;var n=this;this.ob=setTimeout(function(){n.f("Timed out trying to connect."),n.eb(),n.ob=null},Math.floor(3e4)),wb(function(){if(!n.ub){n.Na=new $d(function(e,t,r){if(ae(n,arguments),n.Na)if(n.ob&&(clearTimeout(n.ob),n.ob=null),n.zc=!0,"start"==e)n.id=t,n.mf=r;else{if("close"!==e)throw Error("Unrecognized command received: "+e);t?(n.Na.Jd=!1,Td(n.gf,t,function(){n.eb()})):n.eb()}},function(e,t){ae(n,arguments),Ud(n.gf,e,t)},function(){n.eb()},n.bd);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.Na.Ud&&(e.cb=n.Na.Ud),e.v="5",n.Kd&&(e.s=n.Kd),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f"),e=n.bd(e),n.f("Connecting via long-poll to "+e),be(n.Na,e,function(){})}})},Xd.prototype.start=function(){var e=this.Na,t=this.mf;for(e.Xf=this.id,e.Yf=t,e.Zd=!0;ce(e););e=this.id,t=this.mf,this.$b=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.$b.src=this.bd(n),this.$b.style.display="none",document.body.appendChild(this.$b)},Xd.isAvailable=function(){return!(Zd||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.zg)},h=Xd.prototype,h.wd=function(){},h.Yc=function(){this.ub=!0,this.Na&&(this.Na.close(),this.Na=null),this.$b&&(document.body.removeChild(this.$b),this.$b=null),this.ob&&(clearTimeout(this.ob),this.ob=null)},h.eb=function(){this.ub||(this.f("Longpoll is closing itself"),this.Yc(),this.ea&&(this.ea(this.zc),this.ea=null))},h.close=function(){this.ub||(this.f("Longpoll is being closed."),this.Yc())},h.send=function(e){e=t(e),this.lb+=e.length,Gd(this.Qa,"bytes_sent",e.length),e=mb(e),e=fb(e,!0),e=Bb(e,1840);for(var n=0;n<e.length;n++){var r=this.Na;r.Qc.push({og:this.Ue,wg:e.length,We:e[n]}),r.Zd&&ce(r),this.Ue++}},$d.prototype.close=function(){if(this.Zd=!1,this.va){this.va.$a.body.innerHTML="";var e=this;setTimeout(function(){null!==e.va&&(document.body.removeChild(e.va),e.va=null)},Math.floor(0))}var t=this.fb;t&&(this.fb=null,t())};var ge=[Xd,Od];ie.prototype.wa=function(e){te(this,{t:"d",d:e})},ie.prototype.Bd=function(e){qe(this),this.cc(e)},ie.prototype.close=function(){2!==this.Pa&&(this.f("Closing realtime connection."),this.Pa=2,pe(this),this.ea&&(this.ea(),this.ea=null))};var ye=0,Ae=0;h=xe.prototype,h.wa=function(e,n,r){var i=++this.ng;e={r:i,a:e,b:n},this.f(t(e)),x(this.ia,"sendRequest call when we're not connected not allowed."),this.La.wa(e),r&&(this.Tc[i]=r)},h.T=function(e,t,n){this.Lb={Mf:e,Ye:!1,sc:t,cd:n},this.f("Authenticating using credential: "+e),Ee(this),(t=40==e.length)||(e=ue(e).fe,t="object"==typeof e&&!0===v(e,"admin")),t&&(this.f("Admin auth credential detected.  Reducing max reconnect time."),this.xd=3e4)},h.Pe=function(e){delete this.Lb,this.ia&&this.wa("unauth",{},function(t){e(t.s,t.d)})},h.Ce=function(e,t){this.ia?Ge(this,"oc",e,null,t):this.Jc.push({Pc:e,action:"oc",data:null,H:t})},h.put=function(e,t,n,r){Ie(this,"p",e,t,n,r)},h.Bd=function(e){if("r"in e){this.f("from server: "+t(e));var n=e.r,r=this.Tc[n];r&&(delete this.Tc[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&(n=e.a,r=e.b,this.f("handleServerMessage",n,r),"d"===n?this.Cd(r.p,r.d,!1,r.t):"m"===n?this.Cd(r.p,r.d,!0,r.t):"c"===n?Me(this,r.p,r.q):"ac"===n?(e=r.s,n=r.d,r=this.Lb,delete this.Lb,r&&r.cd&&r.cd(e,n)):"sd"===n?this.Ke?this.Ke(r):"msg"in r&&"undefined"!=typeof console&&console.log("FIREBASE: "+r.msg.replace("\n","\nFIREBASE: ")):sb("Unrecognized action received from server: "+t(n)+"\nAre you using the latest client?"))}},h.Kc=function(e){this.f("connection ready"),this.ia=!0,this.Dc=(new Date).getTime(),this.Ee({serverTimeOffset:e-(new Date).getTime()}),Ne(this),this.Ad(!0)},h.fg=function(e){e&&!this.qc&&this.Va===this.xd&&(this.f("Window became visible.  Reducing delay."),this.Va=1e3,this.La||ze(this,0)),this.qc=e},h.dg=function(e){e?(this.f("Browser went online.  Reconnecting."),this.Va=1e3,this.Eb=!0,this.La||ze(this,0)):(this.f("Browser went offline.  Killing connection; don't reconnect."),this.Eb=!1,this.La&&this.La.close())},h.jf=function(){this.f("data client disconnected"),this.ia=!1,this.La=null;for(var e=0;e<this.la.length;e++){var t=this.la[e];t&&"h"in t.of&&t.lg&&(t.H&&t.H("disconnect"),delete this.la[e],this.Nc--)}if(0===this.Nc&&(this.la=[]),this.Eb)this.qc?this.Dc&&(3e4<(new Date).getTime()-this.Dc&&(this.Va=1e3),this.Dc=null):(this.f("Window isn't visible.  Delaying reconnect."),this.Va=this.xd,this.ue=(new Date).getTime()),e=Math.max(0,this.Va-((new Date).getTime()-this.ue)),e*=Math.random(),this.f("Trying to reconnect in "+e+"ms"),ze(this,e),this.Va=Math.min(this.xd,1.3*this.Va);else for(var n in this.Tc)delete this.Tc[n];this.Ad(!1)},h.tb=function(){this.Eb=!1,this.La?this.La.close():(this.Nb&&(clearTimeout(this.Nb),this.Nb=null),this.ia&&this.jf())},h.kc=function(){this.Eb=!0,this.Va=1e3,this.La||ze(this,0)},Pe.prototype.ic=function(e,t){if(e.e())this.A=t,this.j=null;else if(null!==this.A)this.A=this.A.L(e,t);else{null==this.j&&(this.j=new Vd);var n=G(e);this.j.contains(n)||this.j.add(n,new Pe),n=this.j.get(n),e=R(e),n.ic(e,t)}},Pe.prototype.ca=function(e){null!==this.j&&Wd(this.j,function(t,n){e(t,n)})},Se.prototype.toString=function(){return this.Wc.toString()},Ve.prototype.add=function(e){this.od.push(e)},Ve.prototype.Rb=function(){return this.Ca};var Ye="auth.firebase.com",$e=["remember","redirectTo"],bf={NETWORK_ERROR:"Unable to contact the Firebase server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};mf.prototype.open=function(e,n,r){function i(){r&&(r(V("REQUEST_INTERRUPTED")),r=null)
}var o,s=new XMLHttpRequest,a=this.options.method.toUpperCase();if(df(window,"beforeunload",i),s.onreadystatechange=function(){if(r&&4===s.readyState){var e;if(200<=s.status&&300>s.status){try{e=ua(s.responseText)}catch(t){}r(null,e)}else r(500<=s.status&&600>s.status?V("SERVER_ERROR"):V("NETWORK_ERROR"));r=null,ef(window,"beforeunload",i)}},"GET"===a)e+=(/\?/.test(e)?"":"?")+hf(n),o=null;else{var u=this.options.headers.content_type;"application/json"===u&&(o=t(n)),"application/x-www-form-urlencoded"===u&&(o=hf(n))}s.open(a,e,!0),e={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"},Ed(e,this.options.headers);for(var c in e)s.setRequestHeader(c,e[c]);s.send(o)},mf.isAvailable=function(){return!!window.XMLHttpRequest&&"string"==typeof(new XMLHttpRequest).responseType&&(!(navigator.userAgent.match(/MSIE/)||navigator.userAgent.match(/Trident/))||lf())},mf.prototype.uc=function(){return"json"},nf.prototype.open=function(e,t,n){function r(){n&&(n(V("USER_CANCELLED")),n=null)}var i,o=this,s=ub(Ye);t.requestId=this.Uc,t.redirectTo=s.scheme+"://"+s.host+"/blank/page.html",e+=/\?/.test(e)?"":"?",e+=hf(t),(i=window.open(e,"_blank","location=no"))&&ha(i.addEventListener)?(i.addEventListener("loadstart",function(e){var t;if(t=e&&e.url)e:{var s=e.url;try{var a=document.createElement("a");a.href=s,t=a.host===ub(Ye).host&&"/blank/page.html"===a.pathname;break e}catch(u){}t=!1}t&&(e=gf(e.url),i.removeEventListener("exit",r),i.close(),e=new Ze(null,null,{requestId:o.Uc,requestKey:e}),o.kf.requestWithCredential("/auth/session",e,n),n=null)}),i.addEventListener("exit",r)):n(V("TRANSPORT_UNAVAILABLE"))},nf.isAvailable=function(){return kf()},nf.prototype.uc=function(){return"redirect"},of.prototype.open=function(e,n,r){function i(e){if(s&&(document.body.removeChild(s),s=void 0),h&&(h=clearInterval(h)),ef(window,"message",o),ef(window,"unload",i),l&&!e)try{l.close()}catch(t){a.postMessage("die",c)}l=a=void 0}function o(e){if(e.origin===c)try{var t=ua(e.data);"ready"===t.a?a.postMessage(d,c):"error"===t.a?(i(!1),r&&(r(t.d),r=null)):"response"===t.a&&(i(t.forceKeepWindowOpen),r&&(r(null,t.d),r=null))}catch(n){}}var s,a,u=lf(),c=ff(e);if(c!==ff(this.options.relay_url))r&&setTimeout(function(){r(Error("invalid arguments: origin of url and relay_url must match"))},0);else{u&&(s=document.createElement("iframe"),s.setAttribute("src",this.options.relay_url),s.style.display="none",s.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(s),a=s.contentWindow),e+=(/\?/.test(e)?"":"?")+hf(n);var l=window.open(e,this.options.window_name,this.options.window_features);a||(a=l);var h=setInterval(function(){l&&l.closed&&(i(!1),r&&(r(V("USER_CANCELLED")),r=null))},500),d=t({a:"request",d:n});df(window,"unload",i),df(window,"message",o)}},of.isAvailable=function(){return"postMessage"in window&&!/^file:\//.test(location.href)&&!(kf()||navigator.userAgent.match(/Windows Phone/)||window.Windows&&/^ms-appx:/.test(location.href)||navigator.userAgent.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)||navigator.userAgent.match(/CriOS/)||navigator.userAgent.match(/Twitter for iPhone/)||navigator.userAgent.match(/FBAN\/FBIOS/)||window.navigator.standalone)&&!navigator.userAgent.match(/PhantomJS/)},of.prototype.uc=function(){return"popup"},pf.prototype.open=function(e,t,n){function r(){n&&(n(V("REQUEST_INTERRUPTED")),n=null)}function i(){setTimeout(function(){window.__firebase_auth_jsonp[o]=void 0,Bd(window.__firebase_auth_jsonp)&&(window.__firebase_auth_jsonp=void 0);try{var e=document.getElementById(o);e&&e.parentNode.removeChild(e)}catch(t){}},1),ef(window,"beforeunload",r)}var o="fn"+(new Date).getTime()+Math.floor(99999*Math.random());t[this.options.callback_parameter]="__firebase_auth_jsonp."+o,e+=(/\?/.test(e)?"":"?")+hf(t),df(window,"beforeunload",r),window.__firebase_auth_jsonp[o]=function(e){n&&(n(null,e),n=null),i()},qf(o,e,n)},pf.isAvailable=function(){return!kf()},pf.prototype.uc=function(){return"json"},rf.prototype.set=function(e,t){if(!t){if(!this.Pd.length)throw Error("fb.login.SessionManager : No storage options available!");t=this.Pd[0]}t.set(this.Ge,e)},rf.prototype.get=function(){var e=La(this.Pd,q(this.Tf,this)),e=Ka(e,function(e){return null!==e});return Ta(e,function(e,t){return ve(t.token)-ve(e.token)}),0<e.length?e.shift():null},rf.prototype.Tf=function(e){try{var t=e.get(this.Ge);if(t&&t.token)return t}catch(n){}return null},rf.prototype.clear=function(){var e=this;Ja(this.Pd,function(t){t.remove(e.Ge)})},sf.prototype.open=function(e,t){Ba.set("redirect_request_id",this.Uc),t.requestId=this.Uc,t.redirectTo=t.redirectTo||window.location.href,e+=(/\?/.test(e)?"":"?")+hf(t),window.location=e},sf.isAvailable=function(){return!/^file:\//.test(location.href)&&!kf()},sf.prototype.uc=function(){return"redirect"},na(tf,td),h=tf.prototype,h.ne=function(){return this.jb||null},h.je=function(e,t){Cf(this);var n=af(e);n.lc._method="POST",this.Vc("/users",n,function(e,n){e?B(t,e):B(t,e,n)})},h.Ie=function(e,t){var n=this;Cf(this);var r="/users/"+encodeURIComponent(e.email),i=af(e);i.lc._method="DELETE",this.Vc(r,i,function(e,r){!e&&r&&r.uid&&n.jb&&n.jb.uid&&n.jb.uid===r.uid&&Af(n),B(t,e)})},h.ee=function(e,t){Cf(this);var n="/users/"+encodeURIComponent(e.email)+"/password",r=af(e);r.lc._method="PUT",r.lc.password=e.newPassword,this.Vc(n,r,function(e){B(t,e)})},h.Je=function(e,t){Cf(this);var n="/users/"+encodeURIComponent(e.email)+"/password",r=af(e);r.lc._method="POST",this.Vc(n,r,function(e){B(t,e)})},h.Vc=function(e,t,n){Ff(this,[mf,pf],e,t,n)},h.pe=function(e){return x("auth_status"===e,'initial event must be of type "auth_status"'),[this.jb]};var Kf=new Jf;Jf.prototype.kd=function(e,t,n,r){return(e=X(e))&&e.Y(n)?(e=e.B(n),n=e.ja(r)?[]:r.e()?[new W("child_removed",e,n)]:[new W("child_changed",r,n,e)]):n=r.e()?[]:[new W("child_added",r,n)],0<n.length&&t.u&&n.push(new W("value",X(t))),n},na(Of,Jf),Of.prototype.kd=function(e,t,n,r){var i=X(e)||K,o=X(t)||K;if(i.Ua()<this.bb||o.Ua()<this.bb)return Of.oc.kd.call(this,e,t,n,r);x(!i.P()&&!o.P(),"If it's a leaf node, we should have hit the above case."),e=[];var s=i.B(n);return s.e()?o.Y(n)&&(i=this.Ma?ld(i,this.m):md(i,this.m),e.push(new W("child_removed",i.K,i.name)),e.push(new W("child_added",r,n))):o.Y(n)?r.ja(s)||e.push(new W("child_changed",r,n,i.B(n))):(e.push(new W("child_removed",s,n)),i=this.Ma?ld(o,this.m):md(o,this.m),e.push(new W("child_added",i.K,i.name))),0<e.length&&t.u&&e.push(new W("value",o)),e},h=Pf.prototype,h.Xa=function(e,t,n,r){var i;if(t.type===Qf)return t.source.$e?this.Fa(e,t.path,t.Oa,n,r):(x(t.source.Ze,"Unknown source."),i=t.source.wf,this.Sa(e,t.path,t.Oa,n,r,i));if(t.type===Rf)return t.source.$e?this.ae(e,t.path,t.children,n,r):(x(t.source.Ze,"Unknown source."),i=t.source.wf,this.$d(e,t.path,t.children,n,r,i));if(t.type===Sf){if(t.sf)e:{var o=t.path;if(Tf(this,e),t=e.u,i=e.X,e.F){x(e.u,"Must have event snap if we have server snap");var s=n.Ya(o,e.u,e.F);if(s){if(t=e.u.L(o,s),!o.e()){i=G(o),t=t.B(i),e=this.Ra(e,i,t,e.F,e.o,n,r);break e}t=this.G(t)}}else if(e.o)e.u?(r=n.Ob())?t=this.G(r):(n=n.Ya(o,e.u,e.o))&&(t=this.G(t.L(o,n))):(x(e.X,"We must at least have complete children"),x(!o.e(),"If the path were empty, we would have an event snap from the set"),(n=n.Ya(o,e.X,e.o))&&(i=e.X.L(o,n),i=this.G(i)));else if(e.u)(n=n.Ob())&&(t=this.G(n));else if(e.X){if(x(!o.e(),"If the path was empty, we would have an event snap"),s=G(o),e.X.Y(s)){e=(t=n.Ib.Ob(n.Gb.k(s)))?this.Ra(e,s,t,e.F,e.o,n,r):this.Ra(e,s,K,e.F,e.o,n,null);break e}x(1<Q(o),"Must be a deep set being reverted")}e=new Uf(e.F,e.o,t,i)}else e=this.Ea(e,t.path,n,r);return e}if(t.type===Vf)return t=t.path,Tf(this,e),this.Sa(e,t,(e.ab()||K).da(t),n,r,!1);throw ib("Unknown operation type: "+t.type)},h.Fa=function(e,t,n,r,i){if(Tf(this,e),t.e())return t=this.G(n),new Uf(e.F,e.o,t,null);var o=X(e)||K,s=G(t);return 1===Q(t)||e.u||o.Y(s)?(n=o.B(G(t)).L(R(t),n),this.Ra(e,G(t),n,e.F,e.o,r,i)):e},h.ae=function(e,t,n,r,i){Tf(this,e);var o=this,s=e;return Xf(n,function(n,a){var u=t.k(n);Yf(e,G(u))&&(s=o.Fa(s,u,a,r,i))}),Xf(n,function(n,a){var u=t.k(n);Yf(e,G(u))||(s=o.Fa(s,u,a,r,i))}),s},h.Ea=function(e,t,n,r){var i,o=e.u,s=e.X;if(Tf(this,e),e.F){x(o,"If we have a server snap, we must have an event snap");var a=n.Ya(t,e.u,e.F);if(a){if(!t.e())return i=G(t),t=o.L(t,a).B(i),this.Ra(e,i,t,e.F,e.o,n,r);o=this.G(a)}}else if(e.o)if(o){var u=!1;e.o.ca(L,function(e,t){u||o.B(e).ja(t)||(u=!0),u&&(o=o.I(e,t))}),u&&(o=this.G(o))}else if(s&&(x(0<Q(t),"If it were an empty path, we would have an event snap"),i=G(t),1===Q(t)||s.Y(i))&&(a=n.Ya(t,s,e.o)))return t=s.L(t,a).B(i),this.Ra(e,i,t,e.F,e.o,n,r);return new Uf(e.F,e.o,o,s)},h.Sa=function(e,t,n,r,i,o){var s;Tf(this,e);var a=e.F,u=e.o;if(e.F)a=t.e()?this.G(n,o):this.G(e.F.L(t,n),o);else if(t.e())a=this.G(n,o),u=null;else if(1!==Q(t)||!e.o&&n.e()){if(e.o&&(s=G(t),e.o.Y(s)))var c=e.o.B(s).L(R(t),n),u=this.G(e.o.I(s,c),o)}else u=e.o||this.Ia(K),u=this.G(u.L(t,n),o);if(s=!1,o=e.u,c=e.X,a!==e.F||u!==e.o)if(a&&!o)o=this.G(r.xa(a)),c=null;else if(a&&o&&!n.e()&&a.da(t).ja(o.da(t)))s=!0;else if(n=r.Ya(t,o,a||u)){if(!t.e()){s=G(t),t=R(t);e:{if(o=s,e.u)c=e.u.B(o);else if(e.X)e.X.Y(o)?c=e.X.B(o):(x(t.e(),"According to precondition, this must be true"),c=K);else{if(t.e()){c=n;break e}x(e.F||e.o,"If we do not have event data, we must have server data"),c=(e.F||e.o).B(o)}c=c.e()&&e.ab()?e.ab().B(o).L(t,n):c.L(t,n)}return this.Ra(e,s,c,a,u,r,i)}o=this.G(n),c=null}else s=!0;return x(!s||o===e.u&&c===e.X,"We thought we could skip diffing, but we changed the eventCache."),new Uf(a,u,o,c)},h.$d=function(e,t,n,r,i,o){if(!e.F&&!e.o&&t.e())return e;Tf(this,e);var s=this,a=e;return Xf(n,function(n,u){var c=t.k(n);Yf(e,G(c))&&(a=s.Sa(a,c,u,r,i,o))}),Xf(n,function(n,u){var c=t.k(n);Yf(e,G(c))||(a=s.Sa(a,c,u,r,i,o))}),a},h.Ra=function(e,t,n,r,i){var o=e.u;return e=e.X,o?o=this.G(o.I(t,n)):(e||(e=this.Ia(K)),e=this.G(e.I(t,n))),new Uf(r,i,o,e)},h.G=function(e){return this.Ia(e)},na(Zf,Pf),Zf.prototype.Ia=function(e){return e.Wd(this.index)},Zf.prototype.Yb=function(e){return e.Yb(this.index)},Zf.prototype.G=function(e,t){if(!1===t)return Zf.oc.G.call(this,e,!1);if(e.P())return this.Ia(K);for(var n=this.Ia(e),r=this.Fb,i=this.pb,o=H(this.index),s=n.Aa(this.index),a=U(s);a&&0<o(r,a);)n=n.I(a.name,K),a=U(s);for(s=n.rb(i,this.index),(a=U(s))&&0>=o(a,i)&&(a=U(s));a;)n=n.I(a.name,K),a=U(s);return n},Zf.prototype.Fa=function(e,t,n,r,i){if(Tf(this,e),1<Q(t)){var o=G(t);if((null!==X(e)?X(e):K).Y(o))return Zf.oc.Fa.call(this,e,t,n,r,i);var s=null!==i?i:e.ab(),s=null!==s&&s.Y(o)?s.B(o):null,s=r.k(o).xa(s);return null!==s?(t=s.L(R(t),n),this.Ra(e,o,t,e.F,e.o,r,i)):e}return Zf.oc.Fa.call(this,e,t,n,r,i)},na($f,Zf),$f.prototype.G=function(e,t){if(!1===t)return $f.oc.G.call(this,e,!1);if(e.P())return this.Ia(K);var n,r,i,o,s=this.Ia(e);if(2*this.bb<e.Ua())for(n=this.Ia(K.ib(e.O())),s=this.Ma?s.Sb(this.pb,this.index):s.rb(this.Fb,this.index),r=U(s),i=0;r&&i<this.bb&&(o=this.Ma?0>=H(this.index)(this.Fb,r):0>=H(this.index)(r,this.pb));)n=n.I(r.name,r.K),i++,r=U(s);else{n=this.Ia(e);var a,u,c=H(this.index);if(this.Ma){s=s.bf(this.index),a=this.pb,u=this.Fb;var l=c,c=function(e,t){return-1*l(e,t)}}else s=s.Aa(this.index),a=this.Fb,u=this.pb;i=0;var h=!1;for(r=U(s);r;)!h&&0>=c(a,r)&&(h=!0),(o=h&&i<this.bb&&0>=c(r,u))?i++:n=n.I(r.name,K),r=U(s)}return n},$f.prototype.Ra=function(e,t,n,r,i,o,s){var a=X(e);return!a||a.Ua()<this.bb?$f.oc.Ra.call(this,e,t,n,r,i,o,s):(t=ag(this,e,t,n,o,s||r))?e.u?new Uf(r,i,t,null):new Uf(r,i,null,t):new Uf(r,i,e.u,e.X)},na(bg,Pf),bg.prototype.Ia=function(e){return e.Wd(this.m)},bg.prototype.Yb=function(e){return e.Yb(this.m)},cg.prototype.Lf=function(e,t){if(null==e.nb||null==t.nb)throw ib("Should only compare child_ events.");return this.m.compare(new I(e.nb,e.Wa),new I(t.nb,t.Wa))},h=gg.prototype,h.ab=function(){return this.ha.ab()},h.za=function(e){var t=this.ha.za();return t&&(wc(this.U.w)||!e.e()&&!t.B(G(e)).e())?t.da(e):null},h.e=function(){return 0===this.ya.length},h.Jb=function(e){this.ya.push(e)},h.hb=function(e,t){var n=[];if(t){x(null==e,"A cancel should cancel all event registrations.");var r=this.U.path;Ja(this.ya,function(e){(e=e.Te(t,r))&&n.push(e)})}if(e){for(var i=[],o=0;o<this.ya.length;++o){var s=this.ya[o];if(s.matches(e)){if(e.cf()){i=i.concat(this.ya.slice(o+1));break}}else i.push(s)}this.ya=i}else this.ya=[];return n},h.Xa=function(e,t,n){e.type===Rf&&null!==e.source.fc&&(x(this.ha.za(),"We should always have a full cache before handling merges"),x(!!this.ha.u,"Missing event cache, even though we have a server cache"));var r=this.ha;return t=this.ec.Xa(r,e,t,n),Tf(this.ec,t),this.ha=t,X(t)!==X(r)?(e=Lf(this.ld,r,t,e.path),r=X(t),dg(this.le,e,r,this.ya)):t.u&&!r.u?(x(X(t)===X(r),"Caches should be the same."),r=X(t),dg(this.le,[new W("value",r)],r,this.ya)):[]},Uf.prototype.ab=function(){return this.F||this.o},Uf.prototype.za=function(){return this.F};var ig=new Uf(null,null,null,null),kg=new Lc(function(e,t){return e===t?0:t>e?-1:1}),lg=new jg(null);h=jg.prototype,h.e=function(){return null===this.value&&this.children.e()},h.subtree=function(e){if(e.e())return this;var t=this.children.get(G(e));return null!==t?t.subtree(R(e)):lg},h.set=function(e,t){if(e.e())return new jg(t,this.children);var n=G(e),r=(this.children.get(n)||lg).set(R(e),t),n=this.children.Ja(n,r);return new jg(this.value,n)},h.remove=function(e){if(e.e())return this.children.e()?lg:new jg(null,this.children);var t=G(e),n=this.children.get(t);return n?(e=n.remove(R(e)),t=e.e()?this.children.remove(t):this.children.Ja(t,e),null===this.value&&t.e()?lg:new jg(this.value,t)):this},h.get=function(e){if(e.e())return this.value;var t=this.children.get(G(e));return t?t.get(R(e)):null},h=yg.prototype,h.e=function(){return Bd(this.qa)},h.Xa=function(e,t,n){var r=e.source.fc;if(null!==r)return r=v(this.qa,r),x(null!=r,"SyncTree gave us an op for an invalid query."),r.Xa(e,t,n);var i=[];return A(this.qa,function(r){i=i.concat(r.Xa(e,t,n))}),i},h.Jb=function(e,t,n,r,i){var o=e.Da(),s=v(this.qa,o);return s||(n=(s=n.xa(r))?null:n.ce(i),r=new Uf(r,i,s,n),s=new gg(e,r),this.qa[o]=s),s.Jb(t),e=s,(o=X(e.ha))?(r=Lf(e.ld,ig,e.ha,S),t=dg(e.le,r,o,t?[t]:e.ya)):t=[],t},h.hb=function(e,t,n){var r=e.Da(),i=[],o=[],s=null!=zg(this);if("default"===r){var a=this;A(this.qa,function(e,r){o=o.concat(e.hb(t,n)),e.e()&&(delete a.qa[r],wc(e.U.w)||i.push(e.U))})}else{var u=v(this.qa,r);u&&(o=o.concat(u.hb(t,n)),u.e()&&(delete this.qa[r],wc(u.U.w)||i.push(u.U)))}return s&&null==zg(this)&&i.push(new O(e.g,e.path)),{mg:i,Pf:o}},h.za=function(e){var t=null;return A(this.qa,function(n){t=t||n.za(e)}),t},h=Cg.prototype,h.Ob=function(e){var t=og(this.V,e);if(t){var n=t.value;return e=T(t.path,e),n.da(e)}return null},h.xa=function(e,t,n,r){var i,o;return n||r?(i=this.V.subtree(e),!r&&i.e()?t:r||null!==t||null!==i.value?(i=Gg(this.ra,function(t){return!(!t.visible&&!r||n&&0<=Ia(n,t.Xd)||!t.path.contains(e)&&!e.contains(t.path))},e),o=t||K,Xf(i,function(e,t){o=o.L(e,t)}),o):null):(i=og(this.V,e))?(t=T(i.path,e),i.value.da(t)):(i=this.V.subtree(e),i.e()?t:t||i.value?(o=t||K,Xf(i,function(e,t){o=o.L(e,t)}),o):null)},h.ce=function(e,t){var n=!1,r=K,i=this.Ob(e);return i?(i.P()||i.ca(L,function(e,t){r=r.I(e,t)}),r):t?(r=t,xg(this.V.subtree(e),function(e,t){r=r.I(e,t)}),r):(xg(this.V.subtree(e),function(e,t){n=!0,r=r.I(e,t)}),n?r:null)},h.Ya=function(e,t,n,r){if(x(n||r,"Either existingEventSnap or existingServerSnap must exist"),e=e.k(t),og(this.V,e))return null;if(e=this.V.subtree(e),e.e())return r.da(t);var i=r.da(t);return Xf(e,function(e,t){i=i.L(e,t)}),i},h.de=function(e,t,n,r,i,o){var s;if(e=this.V.subtree(e),e.value?s=e.value:t&&(s=t,Xf(e,function(e,t){s=s.L(e,t)})),s){for(t=[],s=s.Wd(o),e=H(o),i=i?s.Sb(n,o):s.rb(n,o),o=U(i);o&&t.length<r;)0!==e(o,n)&&t.push(o),o=U(i);return t}return[]},h=Kg.prototype,h.Ob=function(){return this.Ib.Ob(this.Gb)},h.xa=function(e,t,n){return this.Ib.xa(this.Gb,e,t,n)},h.ce=function(e){return this.Ib.ce(this.Gb,e)},h.Ya=function(e,t,n){return this.Ib.Ya(this.Gb,e,t,n)},h.de=function(e,t,n,r,i){return this.Ib.de(this.Gb,e,t,n,r,i)},h.k=function(e){return new Kg(this.Gb.k(e),this.Ib)},Lg.prototype.Mc=function(e){return this.path.e()?new Lg(this.source,S,this.Oa.B(e)):new Lg(this.source,R(this.path),this.Oa)},Mg.prototype.Mc=function(){return this.path.e()?this:new Mg(R(this.path),this.sf)},Og.prototype.Mc=function(){return this.path.e()?new Og(this.source,S):new Og(this.source,R(this.path))},Pg.prototype.Mc=function(e){return this.path.e()?(e=this.children.subtree(new P(e)),e.e()?null:e.value?new Lg(this.source,S,e.value):new Pg(this.source,S,e)):(x(G(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Pg(this.source,R(this.path),this.children))};var Qf=0,Rf=1,Sf=2,Vf=3,Ng=new Qg(!0,!1,null,!1),Rg=new Qg(!1,!0,null,!1);h=Sg.prototype,h.Fa=function(e,t,r,i){var o=this.Bb,s=i;return x(r>o.Ec,"Stacking an older write on top of newer ones"),n(s)||(s=!0),o.ra.push({path:e,Oa:t,Xd:r,visible:s}),s&&(o.V=Ig(o.V,e,t)),o.Ec=r,i?Tg(this,new Lg(Ng,e,t)):[]},h.ae=function(e,t,n){var r=this.Bb;return x(n>r.Ec,"Stacking an older merge on top of newer ones"),r.ra.push({path:e,children:t,Xd:n,visible:!0}),r.V=Jg(r.V,e,t),r.Ec=n,t=mg(t),Tg(this,new Pg(Ng,e,t))},h.Ea=function(e,t){t=t||!1;var n=Dg(this.Bb,e);return null==n?[]:Tg(this,new Mg(n,t))},h.Sa=function(e,t){return Tg(this,new Lg(Rg,e,t))},h.$d=function(e,t){var n=mg(t);return Tg(this,new Pg(Rg,e,n))},h.Jb=function(e,t){var n=e.path,r=null,i=!1;ug(this.ma,n,function(e,t){var o=T(e,n);return r=t.za(o),i=i||null!=zg(t),!r});var o=this.ma.get(n);o?(i=i||null!=zg(o),r=r||o.za(S)):(o=new yg,this.ma=this.ma.set(n,o));var s=null;if(!r){var a=!1,s=K;xg(this.ma.subtree(n),function(e,t){var n=t.za(S);n&&(a=!0,s=s.I(e,n))}),a||(s=null)}var u=null!=Bg(o,e);if(!u&&!wc(e.w)){var c=Yg(e);x(!(c in this.gc),"View does not exist, but we have a tag");var l=Zg++;this.gc[c]=l,this.Zc["_"+l]=c}return c=o.Jb(e,t,new Kg(n,this.Bb),r,s),u||i||(o=Bg(o,e),c=c.concat($g(this,e,o))),c},h.hb=function(e,t,n){var r=e.path,i=this.ma.get(r),o=[];if(i&&("default"===e.Da()||null!=Bg(i,e))){o=i.hb(e,t,n),i.e()&&(this.ma=this.ma.remove(r)),i=o.mg,o=o.Pf,t=-1!==Pa(i,function(e){return wc(e.w)});var s=sg(this.ma,r,function(e,t){return null!=zg(t)});if(t&&!s&&(r=this.ma.subtree(r),!r.e()))for(var r=ah(r),a=0;a<r.length;++a){var u=r[a],c=u.U,u=bh(this,u);this.Fc.Le(c,ch(this,c),u.qd,u.H)}if(!s&&0<i.length&&!n)if(t)this.Fc.Od(e,null);else{var l=this;Ja(i,function(e){e.Da();var t=l.gc[Yg(e)];l.Fc.Od(e,t)})}dh(this,i)}return o},h.xa=function(e,t){var n=this.Bb,r=sg(this.ma,e,function(t,n){var r=T(t,e);return(r=n.za(r))?r:void 0});return n.xa(e,r,t,!0)};var Zg=1;h=gh.prototype,h.toString=function(){return(this.Q.Cb?"https://":"http://")+this.Q.host},h.name=function(){return this.Q.yb},h.Cd=function(e,t,n,r){this.jd++;var i=new P(e);t=this.re?this.re(e,t):t,e=[],r?n?(t=fd(t,function(e){return J(e)}),e=Xg(this.M,i,t,r)):(t=J(t),e=Ug(this.M,i,t,r)):n?(r=fd(t,function(e){return J(e)}),e=this.M.$d(i,r)):(r=J(t),e=this.M.Sa(i,r)),r=i,0<e.length&&(r=kh(this,i)),Xe(this.Z,r,e)},h.Ad=function(e){hh(this,"connected",e),!1===e&&lh(this)},h.Ee=function(e){var t=this;Cb(e,function(e,n){hh(t,n,e)})},h.Be=function(e){hh(this,"authenticated",e)},h.Db=function(e,t,n,r){this.f("set",{path:e.toString(),value:t,Cg:n});var i=jh(this);t=J(t,n);var i=If(t,i),o=this.zd++,i=this.M.Fa(e,i,o,!0);Ue(this.Z,i);var s=this;this.S.put(e.toString(),t.N(!0),function(t,n){var i="ok"===t;i||z("set at "+e+" failed: "+t),i=s.M.Ea(o,!i),Xe(s.Z,e,i),mh(r,t,n)}),i=nh(this,e),kh(this,i),Xe(this.Z,i,[])},h.update=function(e,t,n){this.f("update",{path:e.toString(),value:t});var r=!0,i=jh(this),o={};if(A(t,function(e,t){r=!1;var n=J(e);o[t]=If(n,i)}),r)kb("update() called with empty data.  Don't do anything."),mh(n,"ok");else{var s=this.zd++,a=this.M.ae(e,o,s);Ue(this.Z,a);var u=this;Ke(this.S,e.toString(),t,function(t,r){x("ok"===t||"permission_denied"===t,"merge at "+e+" failed.");var i="ok"===t;i||z("update at "+e+" failed: "+t);var i=u.M.Ea(s,!i),o=e;0<i.length&&(o=kh(u,e)),Xe(u.Z,o,i),mh(n,t,r)}),t=nh(this,e),kh(this,t),Xe(this.Z,e,[])}},h.Ce=function(e,t){var n=this;this.S.Ce(e.toString(),function(r,i){"ok"===r&&Qe(n.ea,e),mh(t,r,i)})},h.tb=function(){this.S.tb()},h.kc=function(){this.S.kc()},h.Me=function(e){if("undefined"!=typeof console){e?(this.Nd||(this.Nd=new Hd(this.Qa)),e=this.Nd.get()):e=this.Qa.get();var t,n=Ma(yd(e),function(e,t){return Math.max(t.length,e)},0);for(t in e){for(var r=e[t],i=t.length;n+2>i;i++)t+=" ";console.log(t+r)}}},h.Ne=function(e){Gd(this.Qa,e),this.ug.uf[e]=!0},h.f=function(){kb("r:"+this.S.id+":",arguments)},ca(Ah),Ah.prototype.tb=function(){for(var e in this.jc)this.jc[e].tb()},Ah.prototype.interrupt=Ah.prototype.tb,Ah.prototype.kc=function(){for(var e in this.jc)this.jc[e].kc()},Ah.prototype.resume=Ah.prototype.kc,Bh.prototype.cc=function(e){var t,n=this;try{t=ua(e.data)}catch(r){}t&&"request"===t.a&&(ef(window,"message",this.cc),this.Qd=e.origin,this.tc&&setTimeout(function(){n.tc(n.Qd,t.d,function(e,t){n.If=!t,n.tc=void 0,Ch(n,{a:"response",d:e,forceKeepWindowOpen:t})})},0))},Bh.prototype.eg=function(){try{ef(this.sd,"message",this.hf)}catch(e){}this.tc&&(Ch(this,{a:"error",d:"unknown closed window"}),this.tc=void 0);try{window.close()}catch(t){}},Bh.prototype.hf=function(e){if(this.If&&"die"===e.data)try{window.close()}catch(t){}};var Y={Rf:function(){Yd=Pd=!0}};Y.forceLongPolling=Y.Rf,Y.Sf=function(){Zd=!0},Y.forceWebSockets=Y.Sf,Y.rg=function(e,t){e.g.S.Ke=t},Y.setSecurityDebugCallback=Y.rg,Y.Me=function(e,t){e.g.Me(t)},Y.stats=Y.Me,Y.Ne=function(e,t){e.g.Ne(t)},Y.statsIncrementCounter=Y.Ne,Y.jd=function(e){return e.g.jd},Y.dataUpdateCount=Y.jd,Y.Vf=function(e,t){e.g.re=t},Y.interceptServerData=Y.Vf,Y.bg=function(e){new Bh(e)},Y.onPopupOpen=Y.bg,Y.pg=function(e){Ye=e},Y.setAuthenticationServer=Y.pg,Z.prototype.cancel=function(e){D("Firebase.onDisconnect().cancel",0,1,arguments.length),F("Firebase.onDisconnect().cancel",1,e,!0),this.Sc.Ce(this.Ca,e||null)},Z.prototype.cancel=Z.prototype.cancel,Z.prototype.remove=function(e){D("Firebase.onDisconnect().remove",0,1,arguments.length),$b("Firebase.onDisconnect().remove",this.Ca),F("Firebase.onDisconnect().remove",1,e,!0),oh(this.Sc,this.Ca,null,e)},Z.prototype.remove=Z.prototype.remove,Z.prototype.set=function(e,t){D("Firebase.onDisconnect().set",1,2,arguments.length),$b("Firebase.onDisconnect().set",this.Ca),Sb("Firebase.onDisconnect().set",e,!1),F("Firebase.onDisconnect().set",2,t,!0),oh(this.Sc,this.Ca,e,t)},Z.prototype.set=Z.prototype.set,Z.prototype.Db=function(e,t,n){D("Firebase.onDisconnect().setWithPriority",2,3,arguments.length),$b("Firebase.onDisconnect().setWithPriority",this.Ca),Sb("Firebase.onDisconnect().setWithPriority",e,!1),Wb("Firebase.onDisconnect().setWithPriority",2,t),F("Firebase.onDisconnect().setWithPriority",3,n,!0),ph(this.Sc,this.Ca,e,t,n)},Z.prototype.setWithPriority=Z.prototype.Db,Z.prototype.update=function(e,t){if(D("Firebase.onDisconnect().update",1,2,arguments.length),$b("Firebase.onDisconnect().update",this.Ca),ea(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,z("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Vb("Firebase.onDisconnect().update",e),F("Firebase.onDisconnect().update",2,t,!0),qh(this.Sc,this.Ca,e,t)},Z.prototype.update=Z.prototype.update;var $={};$.rc=xe,$.DataConnection=$.rc,xe.prototype.tg=function(e,t){this.wa("q",{p:e},t)},$.rc.prototype.simpleListen=$.rc.prototype.tg,xe.prototype.Nf=function(e,t){this.wa("echo",{d:e},t)},$.rc.prototype.echo=$.rc.prototype.Nf,xe.prototype.interrupt=xe.prototype.tb,$.zf=ie,$.RealTimeConnection=$.zf,ie.prototype.sendRequest=ie.prototype.wa,ie.prototype.close=ie.prototype.close,$.Uf=function(e){var t=xe.prototype.put;return xe.prototype.put=function(r,i,o,s){n(s)&&(s=e()),t.call(this,r,i,o,s)},function(){xe.prototype.put=t}},$.hijackHash=$.Uf,$.yf=Ca,$.ConnectionTarget=$.yf,$.Da=function(e){return e.Da()},$.queryIdentifier=$.Da,$.Wf=function(e){return e.g.S.ua},$.listens=$.Wf;var Dh=function(){var e=0,t=[];return function(n){var r=n===e;e=n;for(var i=Array(8),o=7;o>=0;o--)i[o]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(n%64),n=Math.floor(n/64);if(x(0===n,"Cannot push at time == 0"),n=i.join(""),r){for(o=11;o>=0&&63===t[o];o--)t[o]=0;t[o]++}else for(o=0;12>o;o++)t[o]=Math.floor(64*Math.random());for(o=0;12>o;o++)n+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(t[o]);return x(20===n.length,"NextPushId: Length should be 20."),n}}();na(O,M);var Eh=O,Fh=["Firebase"],Gh=aa;Fh[0]in Gh||!Gh.execScript||Gh.execScript("var "+Fh[0]);for(var Hh;Fh.length&&(Hh=Fh.shift());)!Fh.length&&n(Eh)?Gh[Hh]=Eh:Gh=Gh[Hh]?Gh[Hh]:Gh[Hh]={};O.prototype.name=function(){return z("Firebase.name() being deprecated. Please use Firebase.key() instead."),D("Firebase.name",0,0,arguments.length),this.key()},O.prototype.name=O.prototype.name,O.prototype.key=function(){D("Firebase.key",0,0,arguments.length);var e;return this.path.e()?e=null:(e=this.path,e=e.aa<e.n.length?e.n[e.n.length-1]:null),e},O.prototype.key=O.prototype.key,O.prototype.k=function(e){if(D("Firebase.child",1,1,arguments.length),ga(e))e=String(e);else if(!(e instanceof P))if(null===G(this.path)){var t=e;t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Zb("Firebase.child",t)}else Zb("Firebase.child",e);return new O(this.g,this.path.k(e))},O.prototype.child=O.prototype.k,O.prototype.parent=function(){D("Firebase.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new O(this.g,e)},O.prototype.parent=O.prototype.parent,O.prototype.root=function(){D("Firebase.ref",0,0,arguments.length);for(var e=this;null!==e.parent();)e=e.parent();return e},O.prototype.root=O.prototype.root,O.prototype.toString=function(){D("Firebase.toString",0,0,arguments.length);var e;if(null===this.parent())e=this.g.toString();else{e=this.parent().toString()+"/";var t=this.key();e+=encodeURIComponent(String(t))}return e},O.prototype.toString=O.prototype.toString,O.prototype.set=function(e,t){D("Firebase.set",1,2,arguments.length),$b("Firebase.set",this.path),Sb("Firebase.set",e,!1),F("Firebase.set",2,t,!0),this.g.Db(this.path,e,null,t||null)},O.prototype.set=O.prototype.set,O.prototype.update=function(e,t){if(D("Firebase.update",1,2,arguments.length),$b("Firebase.update",this.path),ea(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,z("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}if(Vb("Firebase.update",e),F("Firebase.update",2,t,!0),u(e,".priority"))throw Error("update() does not currently support updating .priority.");this.g.update(this.path,e,t||null)},O.prototype.update=O.prototype.update,O.prototype.Db=function(e,t,n){if(D("Firebase.setWithPriority",2,3,arguments.length),$b("Firebase.setWithPriority",this.path),Sb("Firebase.setWithPriority",e,!1),Wb("Firebase.setWithPriority",2,t),F("Firebase.setWithPriority",3,n,!0),".length"===this.key()||".keys"===this.key())throw"Firebase.setWithPriority failed: "+this.key()+" is a read-only object.";this.g.Db(this.path,e,t,n||null)},O.prototype.setWithPriority=O.prototype.Db,O.prototype.remove=function(e){D("Firebase.remove",0,1,arguments.length),$b("Firebase.remove",this.path),F("Firebase.remove",1,e,!0),this.set(null,e)},O.prototype.remove=O.prototype.remove,O.prototype.transaction=function(e,t,r){if(D("Firebase.transaction",1,3,arguments.length),$b("Firebase.transaction",this.path),F("Firebase.transaction",1,e,!1),F("Firebase.transaction",2,t,!0),n(r)&&"boolean"!=typeof r)throw Error(E("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.key()||".keys"===this.key())throw"Firebase.transaction failed: "+this.key()+" is a read-only object.";"undefined"==typeof r&&(r=!0),rh(this.g,this.path,e,t||null,r)},O.prototype.transaction=O.prototype.transaction,O.prototype.qg=function(e,t){D("Firebase.setPriority",1,2,arguments.length),$b("Firebase.setPriority",this.path),Wb("Firebase.setPriority",1,e),F("Firebase.setPriority",2,t,!0),this.g.Db(this.path.k(".priority"),e,null,t)},O.prototype.setPriority=O.prototype.qg,O.prototype.push=function(e,t){D("Firebase.push",0,2,arguments.length),$b("Firebase.push",this.path),Sb("Firebase.push",e,!0),F("Firebase.push",2,t,!0);var n=ih(this.g),n=Dh(n),n=this.k(n);return"undefined"!=typeof e&&null!==e&&n.set(e,t),n},O.prototype.push=O.prototype.push,O.prototype.fb=function(){return $b("Firebase.onDisconnect",this.path),new Z(this.g,this.path)},O.prototype.onDisconnect=O.prototype.fb,O.prototype.T=function(e,t,n){z("FirebaseRef.auth() being deprecated. Please use FirebaseRef.authWithCustomToken() instead."),D("Firebase.auth",1,3,arguments.length),ac("Firebase.auth",e),F("Firebase.auth",2,t,!0),F("Firebase.auth",3,t,!0),zf(this.g.T,e,{},{remember:"none"},t,n)},O.prototype.auth=O.prototype.T,O.prototype.Pe=function(e){D("Firebase.unauth",0,1,arguments.length),F("Firebase.unauth",1,e,!0),Af(this.g.T,e)},O.prototype.unauth=O.prototype.Pe,O.prototype.ne=function(){return D("Firebase.getAuth",0,0,arguments.length),this.g.T.ne()},O.prototype.getAuth=O.prototype.ne,O.prototype.ag=function(e,t){D("Firebase.onAuth",1,2,arguments.length),F("Firebase.onAuth",1,e,!1),Nb("Firebase.onAuth",2,t),this.g.T.zb("auth_status",e,t)},O.prototype.onAuth=O.prototype.ag,O.prototype.Zf=function(e,t){D("Firebase.offAuth",1,2,arguments.length),F("Firebase.offAuth",1,e,!1),Nb("Firebase.offAuth",2,t),this.g.T.bc("auth_status",e,t)},O.prototype.offAuth=O.prototype.Zf,O.prototype.Df=function(e,t,n){D("Firebase.authWithCustomToken",2,3,arguments.length),ac("Firebase.authWithCustomToken",e),F("Firebase.authWithCustomToken",2,t,!1),cc("Firebase.authWithCustomToken",3,n,!0),zf(this.g.T,e,{},n||{},t)},O.prototype.authWithCustomToken=O.prototype.Df,O.prototype.Ef=function(e,t,n){D("Firebase.authWithOAuthPopup",2,3,arguments.length),bc("Firebase.authWithOAuthPopup",1,e),F("Firebase.authWithOAuthPopup",2,t,!1),cc("Firebase.authWithOAuthPopup",3,n,!0),Ef(this.g.T,e,n,t)},O.prototype.authWithOAuthPopup=O.prototype.Ef,O.prototype.Ff=function(e,t,n){D("Firebase.authWithOAuthRedirect",2,3,arguments.length),bc("Firebase.authWithOAuthRedirect",1,e),F("Firebase.authWithOAuthRedirect",2,t,!1),cc("Firebase.authWithOAuthRedirect",3,n,!0);var r=this.g.T;Cf(r);var i=[sf],o=af(n);"anonymous"===e||"firebase"===e?B(t,V("TRANSPORT_UNAVAILABLE")):(Ba.set("redirect_client_options",o.ed),Df(r,i,"/auth/"+e,o,t))},O.prototype.authWithOAuthRedirect=O.prototype.Ff,O.prototype.Gf=function(e,t,n,r){D("Firebase.authWithOAuthToken",3,4,arguments.length),bc("Firebase.authWithOAuthToken",1,e),F("Firebase.authWithOAuthToken",3,n,!1),cc("Firebase.authWithOAuthToken",4,r,!0),p(t)?(bc("Firebase.authWithOAuthToken",2,t),Bf(this.g.T,e+"/token",{access_token:t},r,n)):(cc("Firebase.authWithOAuthToken",2,t,!1),Bf(this.g.T,e+"/token",t,r,n))},O.prototype.authWithOAuthToken=O.prototype.Gf,O.prototype.Cf=function(e,t){D("Firebase.authAnonymously",1,2,arguments.length),F("Firebase.authAnonymously",1,e,!1),cc("Firebase.authAnonymously",2,t,!0),Bf(this.g.T,"anonymous",{},t,e)},O.prototype.authAnonymously=O.prototype.Cf,O.prototype.Hf=function(e,t,n){D("Firebase.authWithPassword",2,3,arguments.length),cc("Firebase.authWithPassword",1,e,!1),dc("Firebase.authWithPassword",e,"email"),dc("Firebase.authWithPassword",e,"password"),F("Firebase.authAnonymously",2,t,!1),cc("Firebase.authAnonymously",3,n,!0),Bf(this.g.T,"password",e,n,t)},O.prototype.authWithPassword=O.prototype.Hf,O.prototype.je=function(e,t){D("Firebase.createUser",2,2,arguments.length),cc("Firebase.createUser",1,e,!1),dc("Firebase.createUser",e,"email"),dc("Firebase.createUser",e,"password"),F("Firebase.createUser",2,t,!1),this.g.T.je(e,t)
},O.prototype.createUser=O.prototype.je,O.prototype.Ie=function(e,t){D("Firebase.removeUser",2,2,arguments.length),cc("Firebase.removeUser",1,e,!1),dc("Firebase.removeUser",e,"email"),dc("Firebase.removeUser",e,"password"),F("Firebase.removeUser",2,t,!1),this.g.T.Ie(e,t)},O.prototype.removeUser=O.prototype.Ie,O.prototype.ee=function(e,t){D("Firebase.changePassword",2,2,arguments.length),cc("Firebase.changePassword",1,e,!1),dc("Firebase.changePassword",e,"email"),dc("Firebase.changePassword",e,"oldPassword"),dc("Firebase.changePassword",e,"newPassword"),F("Firebase.changePassword",2,t,!1),this.g.T.ee(e,t)},O.prototype.changePassword=O.prototype.ee,O.prototype.Je=function(e,t){D("Firebase.resetPassword",2,2,arguments.length),cc("Firebase.resetPassword",1,e,!1),dc("Firebase.resetPassword",e,"email"),F("Firebase.resetPassword",2,t,!1),this.g.T.Je(e,t)},O.prototype.resetPassword=O.prototype.Je,O.goOffline=function(){D("Firebase.goOffline",0,0,arguments.length),Ah.Qb().tb()},O.goOnline=function(){D("Firebase.goOnline",0,0,arguments.length),Ah.Qb().kc()},O.enableLogging=qb,O.ServerValue={TIMESTAMP:{".sv":"timestamp"}},O.SDK_VERSION="2.0.6",O.INTERNAL=Y,O.Context=Ah,O.TEST_ACCESS=$}(),module.exports=Firebase},{}],113:[function(e,t,n){arguments[4][102][0].apply(n,arguments)},{dup:102}],114:[function(e,t,n){arguments[4][104][0].apply(n,arguments)},{_process:88,dup:104}],115:[function(e,t,n){(function(){var t;t=e("../lib/xml2js"),n.stripBOM=function(e){return"﻿"===e[0]?e.substring(1):e}}).call(this)},{"../lib/xml2js":117}],116:[function(e,t,n){(function(){var e;e=new RegExp(/(?!xmlns)^.*:/),n.normalize=function(e){return e.toLowerCase()},n.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},n.stripPrefix=function(t){return t.replace(e,"")}}).call(this)},{}],117:[function(e,t,n){(function(t){(function(){var r,i,o,s,a,u,c,l={}.hasOwnProperty,h=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d=function(e,t){return function(){return e.apply(t,arguments)}};c=e("sax"),o=e("events"),i=e("xmlbuilder"),r=e("./bom"),u=e("./processors"),s=function(e){return"object"==typeof e&&null!=e&&0===Object.keys(e).length},a=function(e,t){var n,r,i;for(r=0,i=e.length;i>r;r++)n=e[r],t=n(t);return t},n.processors=u,n.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,async:!1,strict:!0,attrNameProcessors:null,tagNameProcessors:null},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,childkey:"$$",charsAsChildren:!1,async:!1,strict:!0,attrNameProcessors:null,tagNameProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1}},n.ValidationError=function(e){function t(e){this.message=e}return h(t,e),t}(Error),n.Builder=function(){function e(e){var t,r,i;this.options={},i=n.defaults[.2];for(t in i)l.call(i,t)&&(r=i[t],this.options[t]=r);for(t in e)l.call(e,t)&&(r=e[t],this.options[t]=r)}return e.prototype.buildObject=function(e){var t,r,o,s,a;return t=this.options.attrkey,r=this.options.charkey,1===Object.keys(e).length&&this.options.rootName===n.defaults[.2].rootName?(a=Object.keys(e)[0],e=e[a]):a=this.options.rootName,o=function(e,n){var i,o,s,a,u,c,h,d;if("object"!=typeof n)e.txt(n);else for(u in n)if(l.call(n,u))if(o=n[u],u===t){if("object"==typeof o)for(i in o)c=o[i],e=e.att(i,c)}else if(u===r)e=e.txt(o);else if("object"==typeof o&&null!=(null!=o?o.constructor:void 0)&&null!=(null!=o&&null!=(h=o.constructor)?h.name:void 0)&&"Array"===(null!=o&&null!=(d=o.constructor)?d.name:void 0))for(a in o)l.call(o,a)&&(s=o[a],e="string"==typeof s?e.ele(u,s).up():arguments.callee(e.ele(u),s).up());else e="object"==typeof o?arguments.callee(e.ele(u),o).up():e.ele(u,o.toString()).up();return e},s=i.create(a,this.options.xmldec,this.options.doctype,{headless:this.options.headless}),o(s,e).end(this.options.renderOpts)},e}(),n.Parser=function(e){function i(e){this.parseString=d(this.parseString,this),this.reset=d(this.reset,this),this.assignOrPush=d(this.assignOrPush,this);var t,r,i;if(!(this instanceof n.Parser))return new n.Parser(e);this.options={},i=n.defaults[.2];for(t in i)l.call(i,t)&&(r=i[t],this.options[t]=r);for(t in e)l.call(e,t)&&(r=e[t],this.options[t]=r);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(u.normalize)),this.reset()}return h(i,e),i.prototype.assignOrPush=function(e,t,n){return t in e?(e[t]instanceof Array||(e[t]=[e[t]]),e[t].push(n)):e[t]=this.options.explicitArray?[n]:n},i.prototype.reset=function(){var e,t,n,r;return this.removeAllListeners(),this.saxParser=c.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(e){return function(t){return e.saxParser.resume(),e.saxParser.errThrown?void 0:(e.saxParser.errThrown=!0,e.emit("error",t))}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,r=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(n){return function(i){var o,s,u,c,h;if(u={},u[t]="",!n.options.ignoreAttrs){h=i.attributes;for(o in h)l.call(h,o)&&(e in u||n.options.mergeAttrs||(u[e]={}),s=i.attributes[o],c=n.options.attrNameProcessors?a(n.options.attrNameProcessors,o):o,n.options.mergeAttrs?n.assignOrPush(u,c,s):u[e][c]=s)}return u["#name"]=n.options.tagNameProcessors?a(n.options.tagNameProcessors,i.name):i.name,n.options.xmlns&&(u[n.options.xmlnskey]={uri:i.uri,local:i.local}),r.push(u)}}(this),this.saxParser.onclosetag=function(e){return function(){var n,i,o,a,u,c,l,h,d;if(c=r.pop(),u=c["#name"],delete c["#name"],n=c.cdata,delete c.cdata,h=r[r.length-1],c[t].match(/^\s*$/)&&!n?(i=c[t],delete c[t]):(e.options.trim&&(c[t]=c[t].trim()),e.options.normalize&&(c[t]=c[t].replace(/\s{2,}/g," ").trim()),1===Object.keys(c).length&&t in c&&!e.EXPLICIT_CHARKEY&&(c=c[t])),s(c)&&(c=void 0!==e.options.emptyTag?e.options.emptyTag:i),null!=e.options.validator){d="/"+function(){var e,t,n;for(n=[],e=0,t=r.length;t>e;e++)a=r[e],n.push(a["#name"]);return n}().concat(u).join("/");try{c=e.options.validator(d,h&&h[u],c)}catch(f){o=f,e.emit("error",o)}}return e.options.explicitChildren&&!e.options.mergeAttrs&&"object"==typeof c&&(a={},e.options.attrkey in c&&(a[e.options.attrkey]=c[e.options.attrkey],delete c[e.options.attrkey]),!e.options.charsAsChildren&&e.options.charkey in c&&(a[e.options.charkey]=c[e.options.charkey],delete c[e.options.charkey]),Object.getOwnPropertyNames(c).length>0&&(a[e.options.childkey]=c),c=a),r.length>0?e.assignOrPush(h,u,c):(e.options.explicitRoot&&(l=c,c={},c[u]=l),e.resultObject=c,e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),n=function(){return function(e){var n;return n=r[r.length-1],n?(n[t]+=e,n):void 0}}(this),this.saxParser.ontext=n,this.saxParser.oncdata=function(){return function(e){var t;return t=n(e),t?t.cdata=!0:void 0}}(this)},i.prototype.parseString=function(e,n){var i;if(null!=n&&"function"==typeof n&&(this.on("end",function(e){return this.reset(),this.options.async?t.nextTick(function(){return n(null,e)}):n(null,e)}),this.on("error",function(e){return this.reset(),this.options.async?t.nextTick(function(){return n(e)}):n(e)})),""===e.toString().trim())return this.emit("end",null),!0;try{return this.saxParser.write(r.stripBOM(e.toString())).close()}catch(o){if(i=o,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",i),this.saxParser.errThrown=!0}},i}(o.EventEmitter),n.parseString=function(e,t,r){var i,o,s;return null!=r?("function"==typeof r&&(i=r),"object"==typeof t&&(o=t)):("function"==typeof t&&(i=t),o={}),s=new n.Parser(o),s.parseString(e,i)}}).call(this)}).call(this,e("_process"))},{"./bom":115,"./processors":116,_process:88,events:85,sax:118,xmlbuilder:135}],118:[function(e,t,n){(function(t){!function(n){function r(e,t){if(!(this instanceof r))return new r(e,t);var i=this;o(i),i.q=i.c="",i.bufferCheckPosition=n.MAX_BUFFER_LENGTH,i.opt=t||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!e,i.noscript=!(!e&&!i.opt.noscript),i.state=q.BEGIN,i.ENTITIES=Object.create(n.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(B)),i.trackPosition=i.opt.position!==!1,i.trackPosition&&(i.position=i.line=i.column=0),f(i,"onready")}function i(e){for(var t=Math.max(n.MAX_BUFFER_LENGTH,10),r=0,i=0,o=C.length;o>i;i++){var s=e[C[i]].length;if(s>t)switch(C[i]){case"textNode":g(e);break;case"cdata":p(e,"oncdata",e.cdata),e.cdata="";break;case"script":p(e,"onscript",e.script),e.script="";break;default:y(e,"Max buffer length exceeded: "+C[i])}r=Math.max(r,s)}e.bufferCheckPosition=n.MAX_BUFFER_LENGTH-r+e.position}function o(e){for(var t=0,n=C.length;n>t;t++)e[C[t]]=""}function s(e){g(e),""!==e.cdata&&(p(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(p(e,"onscript",e.script),e.script="")}function a(e,t){return new u(e,t)}function u(e,t){if(!(this instanceof u))return new u(e,t);k.apply(this),this._parser=new r(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,P.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){return t?void n.on(e,t):(n.removeAllListeners(e),n._parser["on"+e]=t)},enumerable:!0,configurable:!1})})}function c(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function l(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function h(e,t){return l(e)?!!t.match(e):e[t]}function d(e,t){return!h(e,t)}function f(e,t,n){e[t]&&e[t](n)}function p(e,t,n){e.textNode&&g(e),f(e,t,n)}function g(e){e.textNode=m(e.opt,e.textNode),e.textNode&&f(e,"ontext",e.textNode),e.textNode=""}function m(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function y(e,t){return g(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,f(e,"onerror",t),e}function v(e){return e.closedRoot||b(e,"Unclosed root tag"),e.state!==q.BEGIN&&e.state!==q.TEXT&&y(e,"Unexpected end"),g(e),e.c="",e.closed=!0,f(e,"onend"),r.call(e,e.strict,e.opt),e}function b(e,t){if("object"!=typeof e||!(e instanceof r))throw new Error("bad call to strictFail");e.strict&&y(e,t)}function w(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0}function x(e,t){var n=e.indexOf(":"),r=0>n?["",e]:e.split(":"),i=r[0],o=r[1];return t&&"xmlns"===e&&(i="xmlns",o=""),{prefix:i,local:o}}function E(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))return e.attribName=e.attribValue="";if(e.opt.xmlns){var t=x(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==U)b(e,"xml: prefix must be bound to "+U+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==z)b(e,"xmlns: prefix must be bound to "+z+"\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,p(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}function S(e,t){if(e.opt.xmlns){var n=e.tag,r=x(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(b(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){p(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var o=0,s=e.attribList.length;s>o;o++){var a=e.attribList[o],u=a[0],c=a[1],l=x(u,!0),h=l.prefix,d=l.local,f=""==h?"":n.ns[h]||"",g={name:u,value:c,prefix:h,local:d,uri:f};h&&"xmlns"!=h&&!f&&(b(e,"Unbound namespace prefix: "+JSON.stringify(h)),g.uri=h),e.tag.attributes[u]=g,p(e,"onattribute",g)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),p(e,"onopentag",e.tag),t||(e.state=e.noscript||"script"!==e.tagName.toLowerCase()?q.TEXT:q.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function _(e){if(!e.tagName)return b(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=q.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=q.SCRIPT);p(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--;){var i=e.tags[t];if(i.name===r)break;b(e,"Unexpected close tag")}if(0>t)return b(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=q.TEXT);e.tagName=n;for(var o=e.tags.length;o-->t;){var s=e.tag=e.tags.pop();e.tagName=e.tag.name,p(e,"onclosetag",e.tagName);var a={};for(var u in s.ns)a[u]=s.ns[u];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&s.ns!==c.ns&&Object.keys(s.ns).forEach(function(t){var n=s.ns[t];p(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=q.TEXT}function T(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:(n=r,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),t=parseInt(n,16),i=t.toString(16)):(n=n.slice(1),t=parseInt(n,10),i=t.toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(b(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function A(e){var t=this;if(this.error)throw this.error;if(t.closed)return y(t,"Cannot write after close. Assign an onready handler.");if(null===e)return v(t);for(var n=0,r="";t.c=r=e.charAt(n++);)switch(t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++),t.state){case q.BEGIN:"<"===r?(t.state=q.OPEN_WAKA,t.startTagPosition=t.position):d(N,r)&&(b(t,"Non-whitespace before first tag."),t.textNode=r,t.state=q.TEXT);continue;case q.TEXT:if(t.sawRoot&&!t.closedRoot){for(var o=n-1;r&&"<"!==r&&"&"!==r;)r=e.charAt(n++),r&&t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(o,n-1)}"<"===r?(t.state=q.OPEN_WAKA,t.startTagPosition=t.position):(!d(N,r)||t.sawRoot&&!t.closedRoot||b(t,"Text data outside of root node."),"&"===r?t.state=q.TEXT_ENTITY:t.textNode+=r);continue;case q.SCRIPT:"<"===r?t.state=q.SCRIPT_ENDING:t.script+=r;continue;case q.SCRIPT_ENDING:"/"===r?t.state=q.CLOSE_TAG:(t.script+="<"+r,t.state=q.SCRIPT);continue;case q.OPEN_WAKA:if("!"===r)t.state=q.SGML_DECL,t.sgmlDecl="";else if(h(N,r));else if(h(W,r))t.state=q.OPEN_TAG,t.tagName=r;else if("/"===r)t.state=q.CLOSE_TAG,t.tagName="";else if("?"===r)t.state=q.PROC_INST,t.procInstName=t.procInstBody="";else{if(b(t,"Unencoded <"),t.startTagPosition+1<t.position){var s=t.position-t.startTagPosition;r=new Array(s).join(" ")+r}t.textNode+="<"+r,t.state=q.TEXT}continue;case q.SGML_DECL:(t.sgmlDecl+r).toUpperCase()===R?(p(t,"onopencdata"),t.state=q.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+r==="--"?(t.state=q.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+r).toUpperCase()===F?(t.state=q.DOCTYPE,(t.doctype||t.sawRoot)&&b(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===r?(p(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=q.TEXT):h(D,r)?(t.state=q.SGML_DECL_QUOTED,t.sgmlDecl+=r):t.sgmlDecl+=r;continue;case q.SGML_DECL_QUOTED:r===t.q&&(t.state=q.SGML_DECL,t.q=""),t.sgmlDecl+=r;continue;case q.DOCTYPE:">"===r?(t.state=q.TEXT,p(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=r,"["===r?t.state=q.DOCTYPE_DTD:h(D,r)&&(t.state=q.DOCTYPE_QUOTED,t.q=r));continue;case q.DOCTYPE_QUOTED:t.doctype+=r,r===t.q&&(t.q="",t.state=q.DOCTYPE);continue;case q.DOCTYPE_DTD:t.doctype+=r,"]"===r?t.state=q.DOCTYPE:h(D,r)&&(t.state=q.DOCTYPE_DTD_QUOTED,t.q=r);continue;case q.DOCTYPE_DTD_QUOTED:t.doctype+=r,r===t.q&&(t.state=q.DOCTYPE_DTD,t.q="");continue;case q.COMMENT:"-"===r?t.state=q.COMMENT_ENDING:t.comment+=r;continue;case q.COMMENT_ENDING:"-"===r?(t.state=q.COMMENT_ENDED,t.comment=m(t.opt,t.comment),t.comment&&p(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+r,t.state=q.COMMENT);continue;case q.COMMENT_ENDED:">"!==r?(b(t,"Malformed comment"),t.comment+="--"+r,t.state=q.COMMENT):t.state=q.TEXT;continue;case q.CDATA:"]"===r?t.state=q.CDATA_ENDING:t.cdata+=r;continue;case q.CDATA_ENDING:"]"===r?t.state=q.CDATA_ENDING_2:(t.cdata+="]"+r,t.state=q.CDATA);continue;case q.CDATA_ENDING_2:">"===r?(t.cdata&&p(t,"oncdata",t.cdata),p(t,"onclosecdata"),t.cdata="",t.state=q.TEXT):"]"===r?t.cdata+="]":(t.cdata+="]]"+r,t.state=q.CDATA);continue;case q.PROC_INST:"?"===r?t.state=q.PROC_INST_ENDING:h(N,r)?t.state=q.PROC_INST_BODY:t.procInstName+=r;continue;case q.PROC_INST_BODY:if(!t.procInstBody&&h(N,r))continue;"?"===r?t.state=q.PROC_INST_ENDING:t.procInstBody+=r;continue;case q.PROC_INST_ENDING:">"===r?(p(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=q.TEXT):(t.procInstBody+="?"+r,t.state=q.PROC_INST_BODY);continue;case q.OPEN_TAG:h(Y,r)?t.tagName+=r:(w(t),">"===r?S(t):"/"===r?t.state=q.OPEN_TAG_SLASH:(d(N,r)&&b(t,"Invalid character in tag name"),t.state=q.ATTRIB));continue;case q.OPEN_TAG_SLASH:">"===r?(S(t,!0),_(t)):(b(t,"Forward-slash in opening tag not followed by >"),t.state=q.ATTRIB);continue;case q.ATTRIB:if(h(N,r))continue;">"===r?S(t):"/"===r?t.state=q.OPEN_TAG_SLASH:h(W,r)?(t.attribName=r,t.attribValue="",t.state=q.ATTRIB_NAME):b(t,"Invalid attribute name");continue;case q.ATTRIB_NAME:"="===r?t.state=q.ATTRIB_VALUE:">"===r?(b(t,"Attribute without value"),t.attribValue=t.attribName,E(t),S(t)):h(N,r)?t.state=q.ATTRIB_NAME_SAW_WHITE:h(Y,r)?t.attribName+=r:b(t,"Invalid attribute name");continue;case q.ATTRIB_NAME_SAW_WHITE:if("="===r)t.state=q.ATTRIB_VALUE;else{if(h(N,r))continue;b(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",p(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===r?S(t):h(W,r)?(t.attribName=r,t.state=q.ATTRIB_NAME):(b(t,"Invalid attribute name"),t.state=q.ATTRIB)}continue;case q.ATTRIB_VALUE:if(h(N,r))continue;h(D,r)?(t.q=r,t.state=q.ATTRIB_VALUE_QUOTED):(b(t,"Unquoted attribute value"),t.state=q.ATTRIB_VALUE_UNQUOTED,t.attribValue=r);continue;case q.ATTRIB_VALUE_QUOTED:if(r!==t.q){"&"===r?t.state=q.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=r;continue}E(t),t.q="",t.state=q.ATTRIB_VALUE_CLOSED;continue;case q.ATTRIB_VALUE_CLOSED:h(N,r)?t.state=q.ATTRIB:">"===r?S(t):"/"===r?t.state=q.OPEN_TAG_SLASH:h(W,r)?(b(t,"No whitespace between attributes"),t.attribName=r,t.attribValue="",t.state=q.ATTRIB_NAME):b(t,"Invalid attribute name");continue;case q.ATTRIB_VALUE_UNQUOTED:if(d(j,r)){"&"===r?t.state=q.ATTRIB_VALUE_ENTITY_U:t.attribValue+=r;continue}E(t),">"===r?S(t):t.state=q.ATTRIB;continue;case q.CLOSE_TAG:if(t.tagName)">"===r?_(t):h(Y,r)?t.tagName+=r:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=q.SCRIPT):(d(N,r)&&b(t,"Invalid tagname in closing tag"),t.state=q.CLOSE_TAG_SAW_WHITE);else{if(h(N,r))continue;d(W,r)?t.script?(t.script+="</"+r,t.state=q.SCRIPT):b(t,"Invalid tagname in closing tag."):t.tagName=r}continue;case q.CLOSE_TAG_SAW_WHITE:if(h(N,r))continue;">"===r?_(t):b(t,"Invalid characters in closing tag");continue;case q.TEXT_ENTITY:case q.ATTRIB_VALUE_ENTITY_Q:case q.ATTRIB_VALUE_ENTITY_U:switch(t.state){case q.TEXT_ENTITY:var a=q.TEXT,u="textNode";break;case q.ATTRIB_VALUE_ENTITY_Q:var a=q.ATTRIB_VALUE_QUOTED,u="attribValue";break;case q.ATTRIB_VALUE_ENTITY_U:var a=q.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===r?(t[u]+=T(t),t.entity="",t.state=a):h(O,r)?t.entity+=r:(b(t,"Invalid character entity"),t[u]+="&"+t.entity+r,t.entity="",t.state=a);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&i(t),t}n.parser=function(e,t){return new r(e,t)},n.SAXParser=r,n.SAXStream=u,n.createStream=a,n.MAX_BUFFER_LENGTH=65536;var C=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){this.__proto__=e}return t.prototype=e,new t}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),r.prototype={end:function(){v(this)},write:A,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};try{var k=e("stream").Stream}catch(M){var k=function(){}}var P=n.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});u.prototype=Object.create(k.prototype,{constructor:{value:u}}),u.prototype.write=function(n){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(n)){if(!this._decoder){var r=e("string_decoder").StringDecoder;this._decoder=new r("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},u.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},u.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===P.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),k.prototype.on.call(n,e,t)};var N="\r\n	 ",L="0124356789",I="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",D="'\"",O=L+I+"#",j=N+">",R="[CDATA[",F="DOCTYPE",U="http://www.w3.org/XML/1998/namespace",z="http://www.w3.org/2000/xmlns/",B={xml:U,xmlns:z};N=c(N),L=c(L),I=c(I);var W=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;D=c(D),O=c(O),j=c(j);var q=0;n.STATE={BEGIN:q++,TEXT:q++,TEXT_ENTITY:q++,OPEN_WAKA:q++,SGML_DECL:q++,SGML_DECL_QUOTED:q++,DOCTYPE:q++,DOCTYPE_QUOTED:q++,DOCTYPE_DTD:q++,DOCTYPE_DTD_QUOTED:q++,COMMENT_STARTING:q++,COMMENT:q++,COMMENT_ENDING:q++,COMMENT_ENDED:q++,CDATA:q++,CDATA_ENDING:q++,CDATA_ENDING_2:q++,PROC_INST:q++,PROC_INST_BODY:q++,PROC_INST_ENDING:q++,OPEN_TAG:q++,OPEN_TAG_SLASH:q++,ATTRIB:q++,ATTRIB_NAME:q++,ATTRIB_NAME_SAW_WHITE:q++,ATTRIB_VALUE:q++,ATTRIB_VALUE_QUOTED:q++,ATTRIB_VALUE_CLOSED:q++,ATTRIB_VALUE_UNQUOTED:q++,ATTRIB_VALUE_ENTITY_Q:q++,ATTRIB_VALUE_ENTITY_U:q++,CLOSE_TAG:q++,CLOSE_TAG_SAW_WHITE:q++,SCRIPT:q++,SCRIPT_ENDING:q++},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(e){var t=n.ENTITIES[e],r="number"==typeof t?String.fromCharCode(t):t;n.ENTITIES[e]=r});for(var q in n.STATE)n.STATE[n.STATE[q]]=q;q=n.STATE,String.fromCodePoint||!function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,r,i=16384,o=[],s=-1,a=arguments.length;if(!a)return"";for(var u="";++s<a;){var c=Number(arguments[s]);if(!isFinite(c)||0>c||c>1114111||t(c)!=c)throw RangeError("Invalid code point: "+c);65535>=c?o.push(c):(c-=65536,n=(c>>10)+55296,r=c%1024+56320,o.push(n,r)),(s+1==a||o.length>i)&&(u+=e.apply(null,o),o.length=0)}return u};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()}("undefined"==typeof n?sax={}:n)}).call(this,e("buffer").Buffer)},{buffer:81,stream:100,string_decoder:101}],119:[function(e,t){(function(){var n,r;r=e("lodash-node/modern/objects/create"),t.exports=n=function(){function e(e,t,n){if(this.stringify=e.stringify,null==t)throw new Error("Missing attribute name");if(null==n)throw new Error("Missing attribute value");this.name=this.stringify.attName(t),this.value=this.stringify.attValue(n)}return e.prototype.clone=function(){return r(e.prototype,this)},e.prototype.toString=function(){return" "+this.name+'="'+this.value+'"'},e}()}).call(this)},{"lodash-node/modern/objects/create":148}],120:[function(e,t){(function(){var n,r,i,o,s;s=e("./XMLStringifier"),r=e("./XMLDeclaration"),i=e("./XMLDocType"),o=e("./XMLElement"),t.exports=n=function(){function e(e,t){var n,r;if(null==e)throw new Error("Root element needs a name");null==t&&(t={}),this.options=t,this.stringify=new s(t),r=new o(this,"doc"),n=r.element(e),n.isRoot=!0,n.documentObject=this,this.rootObject=n,t.headless||(n.declaration(t),(null!=t.pubID||null!=t.sysID)&&n.doctype(t))}return e.prototype.root=function(){return this.rootObject},e.prototype.end=function(e){return this.toString(e)},e.prototype.toString=function(e){var t,n,r,i,o,s,a,u;return i=(null!=e?e.pretty:void 0)||!1,t=null!=(s=null!=e?e.indent:void 0)?s:"  ",r=null!=(a=null!=e?e.offset:void 0)?a:0,n=null!=(u=null!=e?e.newline:void 0)?u:"\n",o="",null!=this.xmldec&&(o+=this.xmldec.toString(e)),null!=this.doctype&&(o+=this.doctype.toString(e)),o+=this.rootObject.toString(e),i&&o.slice(-n.length)===n&&(o=o.slice(0,-n.length)),o},e}()}).call(this)},{"./XMLDeclaration":127,"./XMLDocType":128,"./XMLElement":129,"./XMLStringifier":133}],121:[function(e,t){(function(){var n,r,i,o={}.hasOwnProperty,s=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};i=e("lodash-node/modern/objects/create"),r=e("./XMLNode"),t.exports=n=function(e){function t(e,n){if(t.__super__.constructor.call(this,e),null==n)throw new Error("Missing CDATA text");this.text=this.stringify.cdata(n)}return s(t,e),t.prototype.clone=function(){return i(t.prototype,this)},t.prototype.toString=function(e,t){var n,r,i,o,s,a,u,c,l;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(u=null!=e?e.indent:void 0)?u:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(l=null!=e?e.newline:void 0)?l:"\n",t||(t=0),a=new Array(t+i+1).join(n),s="",o&&(s+=a),s+="<![CDATA["+this.text+"]]>",o&&(s+=r),s},t}(r)}).call(this)},{"./XMLNode":130,"lodash-node/modern/objects/create":148}],122:[function(e,t){(function(){var n,r,i,o={}.hasOwnProperty,s=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};i=e("lodash-node/modern/objects/create"),r=e("./XMLNode"),t.exports=n=function(e){function t(e,n){if(t.__super__.constructor.call(this,e),null==n)throw new Error("Missing comment text");this.text=this.stringify.comment(n)}return s(t,e),t.prototype.clone=function(){return i(t.prototype,this)},t.prototype.toString=function(e,t){var n,r,i,o,s,a,u,c,l;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(u=null!=e?e.indent:void 0)?u:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(l=null!=e?e.newline:void 0)?l:"\n",t||(t=0),a=new Array(t+i+1).join(n),s="",o&&(s+=a),s+="<!-- "+this.text+" -->",o&&(s+=r),s},t}(r)}).call(this)},{"./XMLNode":130,"lodash-node/modern/objects/create":148}],123:[function(e,t){(function(){var n,r;r=e("lodash-node/modern/objects/create"),t.exports=n=function(){function e(e,t,n,r,i,o){if(this.stringify=e.stringify,null==t)throw new Error("Missing DTD element name");if(null==n)throw new Error("Missing DTD attribute name");if(!r)throw new Error("Missing DTD attribute type");if(!i)throw new Error("Missing DTD attribute default");if(0!==i.indexOf("#")&&(i="#"+i),!i.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(o&&!i.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(t),this.attributeName=this.stringify.attName(n),this.attributeType=this.stringify.dtdAttType(r),this.defaultValue=this.stringify.dtdAttDefault(o),this.defaultValueType=i}return e.prototype.clone=function(){return r(e.prototype,this)},e.prototype.toString=function(e,t){var n,r,i,o,s,a,u,c,l;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(u=null!=e?e.indent:void 0)?u:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(l=null!=e?e.newline:void 0)?l:"\n",t||(t=0),a=new Array(t+i+1).join(n),s="",o&&(s+=a),s+="<!ATTLIST "+this.elementName+" "+this.attributeName+" "+this.attributeType,"#DEFAULT"!==this.defaultValueType&&(s+=" "+this.defaultValueType),this.defaultValue&&(s+=' "'+this.defaultValue+'"'),s+=">",o&&(s+=r),s},e}()}).call(this)},{"lodash-node/modern/objects/create":148}],124:[function(e,t){(function(){var n,r,i;r=e("lodash-node/modern/objects/create"),i=e("lodash-node/modern/objects/isArray"),t.exports=n=function(){function e(e,t,n){if(this.stringify=e.stringify,null==t)throw new Error("Missing DTD element name");
n||(n="(#PCDATA)"),i(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.eleName(t),this.value=this.stringify.dtdElementValue(n)}return e.prototype.clone=function(){return r(e.prototype,this)},e.prototype.toString=function(e,t){var n,r,i,o,s,a,u,c,l;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(u=null!=e?e.indent:void 0)?u:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(l=null!=e?e.newline:void 0)?l:"\n",t||(t=0),a=new Array(t+i+1).join(n),s="",o&&(s+=a),s+="<!ELEMENT "+this.name+" "+this.value+">",o&&(s+=r),s},e}()}).call(this)},{"lodash-node/modern/objects/create":148,"lodash-node/modern/objects/isArray":150}],125:[function(e,t){(function(){var n,r,i;r=e("lodash-node/modern/objects/create"),i=e("lodash-node/modern/objects/isObject"),t.exports=n=function(){function e(e,t,n,r){if(this.stringify=e.stringify,null==n)throw new Error("Missing entity name");if(null==r)throw new Error("Missing entity value");if(this.pe=!!t,this.name=this.stringify.eleName(n),i(r)){if(!r.pubID&&!r.sysID)throw new Error("Public and/or system identifiers are required for an external entity");if(r.pubID&&!r.sysID)throw new Error("System identifier is required for a public external entity");if(null!=r.pubID&&(this.pubID=this.stringify.dtdPubID(r.pubID)),null!=r.sysID&&(this.sysID=this.stringify.dtdSysID(r.sysID)),null!=r.nData&&(this.nData=this.stringify.dtdNData(r.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(r)}return e.prototype.clone=function(){return r(e.prototype,this)},e.prototype.toString=function(e,t){var n,r,i,o,s,a,u,c,l;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(u=null!=e?e.indent:void 0)?u:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(l=null!=e?e.newline:void 0)?l:"\n",t||(t=0),a=new Array(t+i+1).join(n),s="",o&&(s+=a),s+="<!ENTITY",this.pe&&(s+=" %"),s+=" "+this.name,this.value?s+=' "'+this.value+'"':(this.pubID&&this.sysID?s+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.sysID&&(s+=' SYSTEM "'+this.sysID+'"'),this.nData&&(s+=" NDATA "+this.nData)),s+=">",o&&(s+=r),s},e}()}).call(this)},{"lodash-node/modern/objects/create":148,"lodash-node/modern/objects/isObject":153}],126:[function(e,t){(function(){var n,r;r=e("lodash-node/modern/objects/create"),t.exports=n=function(){function e(e,t,n){if(this.stringify=e.stringify,null==t)throw new Error("Missing notation name");if(!n.pubID&&!n.sysID)throw new Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(t),null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}return e.prototype.clone=function(){return r(e.prototype,this)},e.prototype.toString=function(e,t){var n,r,i,o,s,a,u,c,l;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(u=null!=e?e.indent:void 0)?u:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(l=null!=e?e.newline:void 0)?l:"\n",t||(t=0),a=new Array(t+i+1).join(n),s="",o&&(s+=a),s+="<!NOTATION "+this.name,this.pubID&&this.sysID?s+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.pubID?s+=' PUBLIC "'+this.pubID+'"':this.sysID&&(s+=' SYSTEM "'+this.sysID+'"'),s+=">",o&&(s+=r),s},e}()}).call(this)},{"lodash-node/modern/objects/create":148}],127:[function(e,t){(function(){var n,r,i,o,s={}.hasOwnProperty,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};i=e("lodash-node/modern/objects/create"),o=e("lodash-node/modern/objects/isObject"),r=e("./XMLNode"),t.exports=n=function(e){function t(e,n,r,i){var s;t.__super__.constructor.call(this,e),o(n)&&(s=n,n=s.version,r=s.encoding,i=s.standalone),n||(n="1.0"),null!=n&&(this.version=this.stringify.xmlVersion(n)),null!=r&&(this.encoding=this.stringify.xmlEncoding(r)),null!=i&&(this.standalone=this.stringify.xmlStandalone(i))}return a(t,e),t.prototype.clone=function(){return i(t.prototype,this)},t.prototype.toString=function(e,t){var n,r,i,o,s,a,u,c,l;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(u=null!=e?e.indent:void 0)?u:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(l=null!=e?e.newline:void 0)?l:"\n",t||(t=0),a=new Array(t+i+1).join(n),s="",o&&(s+=a),s+="<?xml",null!=this.version&&(s+=' version="'+this.version+'"'),null!=this.encoding&&(s+=' encoding="'+this.encoding+'"'),null!=this.standalone&&(s+=' standalone="'+this.standalone+'"'),s+="?>",o&&(s+=r),s},t}(r)}).call(this)},{"./XMLNode":130,"lodash-node/modern/objects/create":148,"lodash-node/modern/objects/isObject":153}],128:[function(e,t){(function(){var n,r,i,o,s,a,u,c,l,h;l=e("lodash-node/modern/objects/create"),h=e("lodash-node/modern/objects/isObject"),n=e("./XMLCData"),r=e("./XMLComment"),i=e("./XMLDTDAttList"),s=e("./XMLDTDEntity"),o=e("./XMLDTDElement"),a=e("./XMLDTDNotation"),c=e("./XMLProcessingInstruction"),t.exports=u=function(){function e(e,t,n){var r,i;this.documentObject=e,this.stringify=this.documentObject.stringify,this.children=[],h(t)&&(r=t,t=r.pubID,n=r.sysID),null==n&&(i=[t,n],n=i[0],t=i[1]),null!=t&&(this.pubID=this.stringify.dtdPubID(t)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}return e.prototype.clone=function(){return l(e.prototype,this)},e.prototype.element=function(e,t){var n;return n=new o(this,e,t),this.children.push(n),this},e.prototype.attList=function(e,t,n,r,o){var s;return s=new i(this,e,t,n,r,o),this.children.push(s),this},e.prototype.entity=function(e,t){var n;return n=new s(this,!1,e,t),this.children.push(n),this},e.prototype.pEntity=function(e,t){var n;return n=new s(this,!0,e,t),this.children.push(n),this},e.prototype.notation=function(e,t){var n;return n=new a(this,e,t),this.children.push(n),this},e.prototype.cdata=function(e){var t;return t=new n(this,e),this.children.push(t),this},e.prototype.comment=function(e){var t;return t=new r(this,e),this.children.push(t),this},e.prototype.instruction=function(e,t){var n;return n=new c(this,e,t),this.children.push(n),this},e.prototype.root=function(){return this.documentObject.root()},e.prototype.document=function(){return this.documentObject},e.prototype.toString=function(e,t){var n,r,i,o,s,a,u,c,l,h,d,f,p;if(s=(null!=e?e.pretty:void 0)||!1,r=null!=(h=null!=e?e.indent:void 0)?h:"  ",o=null!=(d=null!=e?e.offset:void 0)?d:0,i=null!=(f=null!=e?e.newline:void 0)?f:"\n",t||(t=0),u=new Array(t+o+1).join(r),a="",s&&(a+=u),a+="<!DOCTYPE "+this.root().name,this.pubID&&this.sysID?a+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.sysID&&(a+=' SYSTEM "'+this.sysID+'"'),this.children.length>0){for(a+=" [",s&&(a+=i),p=this.children,c=0,l=p.length;l>c;c++)n=p[c],a+=n.toString(e,t+1);a+="]"}return a+=">",s&&(a+=i),a},e.prototype.ele=function(e,t){return this.element(e,t)},e.prototype.att=function(e,t,n,r,i){return this.attList(e,t,n,r,i)},e.prototype.ent=function(e,t){return this.entity(e,t)},e.prototype.pent=function(e,t){return this.pEntity(e,t)},e.prototype.not=function(e,t){return this.notation(e,t)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.up=function(){return this.root()},e.prototype.doc=function(){return this.document()},e}()}).call(this)},{"./XMLCData":121,"./XMLComment":122,"./XMLDTDAttList":123,"./XMLDTDElement":124,"./XMLDTDEntity":125,"./XMLDTDNotation":126,"./XMLProcessingInstruction":131,"lodash-node/modern/objects/create":148,"lodash-node/modern/objects/isObject":153}],129:[function(e,t){(function(){var n,r,i,o,s,a,u,c,l={}.hasOwnProperty,h=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};s=e("lodash-node/modern/objects/create"),c=e("lodash-node/modern/objects/isObject"),a=e("lodash-node/modern/objects/isArray"),u=e("lodash-node/modern/objects/isFunction"),i=e("./XMLNode"),n=e("./XMLAttribute"),o=e("./XMLProcessingInstruction"),t.exports=r=function(e){function t(e,n,r){if(t.__super__.constructor.call(this,e),null==n)throw new Error("Missing element name");this.name=this.stringify.eleName(n),this.children=[],this.instructions=[],this.attributes={},null!=r&&this.attribute(r)}return h(t,e),t.prototype.clone=function(){var e,n,r,i,o,a,u,c;r=s(t.prototype,this),r.attributes={},u=this.attributes;for(n in u)l.call(u,n)&&(e=u[n],r.attributes[n]=e.clone());for(r.instructions=[],c=this.instructions,o=0,a=c.length;a>o;o++)i=c[o],r.instructions.push(i.clone());return r.children=[],this.children.forEach(function(e){var t;return t=e.clone(),t.parent=r,r.children.push(t)}),r},t.prototype.attribute=function(e,t){var r,i;if(null!=e&&(e=e.valueOf()),c(e))for(r in e)l.call(e,r)&&(i=e[r],this.attribute(r,i));else u(t)&&(t=t.apply()),this.options.skipNullAttributes&&null==t||(this.attributes[e]=new n(this,e,t));return this},t.prototype.removeAttribute=function(e){var t,n,r;if(null==e)throw new Error("Missing attribute name");if(e=e.valueOf(),a(e))for(n=0,r=e.length;r>n;n++)t=e[n],delete this.attributes[t];else delete this.attributes[e];return this},t.prototype.instruction=function(e,t){var n,r,i,s,h;if(null!=e&&(e=e.valueOf()),null!=t&&(t=t.valueOf()),a(e))for(s=0,h=e.length;h>s;s++)n=e[s],this.instruction(n);else if(c(e))for(n in e)l.call(e,n)&&(r=e[n],this.instruction(n,r));else u(t)&&(t=t.apply()),i=new o(this,e,t),this.instructions.push(i);return this},t.prototype.toString=function(e,t){var n,r,i,o,s,a,u,c,h,d,f,p,g,m,y,v,b,w,x,E;for(c=(null!=e?e.pretty:void 0)||!1,i=null!=(y=null!=e?e.indent:void 0)?y:"  ",u=null!=(v=null!=e?e.offset:void 0)?v:0,a=null!=(b=null!=e?e.newline:void 0)?b:"\n",t||(t=0),d=new Array(t+u+1).join(i),h="",w=this.instructions,f=0,g=w.length;g>f;f++)o=w[f],h+=o.toString(e,t+1);c&&(h+=d),h+="<"+this.name,x=this.attributes;for(s in x)l.call(x,s)&&(n=x[s],h+=n.toString(e));if(0===this.children.length)h+="/>",c&&(h+=a);else if(c&&1===this.children.length&&null!=this.children[0].value)h+=">",h+=this.children[0].value,h+="</"+this.name+">",h+=a;else{for(h+=">",c&&(h+=a),E=this.children,p=0,m=E.length;m>p;p++)r=E[p],h+=r.toString(e,t+1);c&&(h+=d),h+="</"+this.name+">",c&&(h+=a)}return h},t.prototype.att=function(e,t){return this.attribute(e,t)},t.prototype.ins=function(e,t){return this.instruction(e,t)},t.prototype.a=function(e,t){return this.attribute(e,t)},t.prototype.i=function(e,t){return this.instruction(e,t)},t}(i)}).call(this)},{"./XMLAttribute":119,"./XMLNode":130,"./XMLProcessingInstruction":131,"lodash-node/modern/objects/create":148,"lodash-node/modern/objects/isArray":150,"lodash-node/modern/objects/isFunction":152,"lodash-node/modern/objects/isObject":153}],130:[function(e,t){(function(){var n,r,i,o,s,a,u,c,l,h,d,f,p={}.hasOwnProperty;f=e("lodash-node/modern/objects/isObject"),l=e("lodash-node/modern/objects/isArray"),d=e("lodash-node/modern/objects/isFunction"),h=e("lodash-node/modern/objects/isEmpty"),s=null,n=null,r=null,i=null,o=null,u=null,c=null,t.exports=a=function(){function t(t){this.parent=t,this.options=this.parent.options,this.stringify=this.parent.stringify,null===s&&(s=e("./XMLElement"),n=e("./XMLCData"),r=e("./XMLComment"),i=e("./XMLDeclaration"),o=e("./XMLDocType"),u=e("./XMLRaw"),c=e("./XMLText"))}return t.prototype.clone=function(){throw new Error("Cannot clone generic XMLNode")},t.prototype.element=function(e,t,n){var r,i,o,s,a,u,c;if(o=null,null==t&&(t={}),t=t.valueOf(),f(t)||(c=[t,n],n=c[0],t=c[1]),null!=e&&(e=e.valueOf()),l(e))for(a=0,u=e.length;u>a;a++)r=e[a],o=this.element(r);else if(d(e))o=this.element(e.apply());else if(f(e))for(i in e)p.call(e,i)&&(s=e[i],d(s)&&(s=s.apply()),f(s)&&h(s)&&(s=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===i.indexOf(this.stringify.convertAttKey)?o=this.attribute(i.substr(this.stringify.convertAttKey.length),s):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===i.indexOf(this.stringify.convertPIKey)?o=this.instruction(i.substr(this.stringify.convertPIKey.length),s):f(s)?!this.options.ignoreDecorators&&this.stringify.convertListKey&&0===i.indexOf(this.stringify.convertListKey)&&l(s)?o=this.element(s):(o=this.element(i),o.element(s)):o=this.element(i,s));else o=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(n):this.node(e,t,n);if(null==o)throw new Error("Could not create any elements with: "+e);return o},t.prototype.insertBefore=function(e,t,n){var r,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i),r=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,o),r},t.prototype.insertAfter=function(e,t,n){var r,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i+1),r=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,o),r},t.prototype.remove=function(){var e,t;if(this.isRoot)throw new Error("Cannot remove the root element");return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat(t=[])),t,this.parent},t.prototype.node=function(e,t,n){var r,i;return null!=e&&(e=e.valueOf()),null==t&&(t={}),t=t.valueOf(),f(t)||(i=[t,n],n=i[0],t=i[1]),r=new s(this,e,t),null!=n&&r.text(n),this.children.push(r),r},t.prototype.text=function(e){var t;return t=new c(this,e),this.children.push(t),this},t.prototype.cdata=function(e){var t;return t=new n(this,e),this.children.push(t),this},t.prototype.comment=function(e){var t;return t=new r(this,e),this.children.push(t),this},t.prototype.raw=function(e){var t;return t=new u(this,e),this.children.push(t),this},t.prototype.declaration=function(e,t,n){var r,o;return r=this.document(),o=new i(r,e,t,n),r.xmldec=o,r.root()},t.prototype.doctype=function(e,t){var n,r;return n=this.document(),r=new o(n,e,t),n.doctype=r,r},t.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},t.prototype.root=function(){var e;if(this.isRoot)return this;for(e=this.parent;!e.isRoot;)e=e.parent;return e},t.prototype.document=function(){return this.root().documentObject},t.prototype.end=function(e){return this.document().toString(e)},t.prototype.prev=function(){var e;if(this.isRoot)throw new Error("Root node has no siblings");if(e=this.parent.children.indexOf(this),1>e)throw new Error("Already at the first node");return this.parent.children[e-1]},t.prototype.next=function(){var e;if(this.isRoot)throw new Error("Root node has no siblings");if(e=this.parent.children.indexOf(this),-1===e||e===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[e+1]},t.prototype.importXMLBuilder=function(e){var t;return t=e.root().clone(),t.parent=this,t.isRoot=!1,this.children.push(t),this},t.prototype.ele=function(e,t,n){return this.element(e,t,n)},t.prototype.nod=function(e,t,n){return this.node(e,t,n)},t.prototype.txt=function(e){return this.text(e)},t.prototype.dat=function(e){return this.cdata(e)},t.prototype.com=function(e){return this.comment(e)},t.prototype.doc=function(){return this.document()},t.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},t.prototype.dtd=function(e,t){return this.doctype(e,t)},t.prototype.e=function(e,t,n){return this.element(e,t,n)},t.prototype.n=function(e,t,n){return this.node(e,t,n)},t.prototype.t=function(e){return this.text(e)},t.prototype.d=function(e){return this.cdata(e)},t.prototype.c=function(e){return this.comment(e)},t.prototype.r=function(e){return this.raw(e)},t.prototype.u=function(){return this.up()},t}()}).call(this)},{"./XMLCData":121,"./XMLComment":122,"./XMLDeclaration":127,"./XMLDocType":128,"./XMLElement":129,"./XMLRaw":132,"./XMLText":134,"lodash-node/modern/objects/isArray":150,"lodash-node/modern/objects/isEmpty":151,"lodash-node/modern/objects/isFunction":152,"lodash-node/modern/objects/isObject":153}],131:[function(e,t){(function(){var n,r;r=e("lodash-node/modern/objects/create"),t.exports=n=function(){function e(e,t,n){if(this.stringify=e.stringify,null==t)throw new Error("Missing instruction target");this.target=this.stringify.insTarget(t),n&&(this.value=this.stringify.insValue(n))}return e.prototype.clone=function(){return r(e.prototype,this)},e.prototype.toString=function(e,t){var n,r,i,o,s,a,u,c,l;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(u=null!=e?e.indent:void 0)?u:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(l=null!=e?e.newline:void 0)?l:"\n",t||(t=0),a=new Array(t+i+1).join(n),s="",o&&(s+=a),s+="<?",s+=this.target,this.value&&(s+=" "+this.value),s+="?>",o&&(s+=r),s},e}()}).call(this)},{"lodash-node/modern/objects/create":148}],132:[function(e,t){(function(){var n,r,i,o={}.hasOwnProperty,s=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};i=e("lodash-node/modern/objects/create"),n=e("./XMLNode"),t.exports=r=function(e){function t(e,n){if(t.__super__.constructor.call(this,e),null==n)throw new Error("Missing raw text");this.value=this.stringify.raw(n)}return s(t,e),t.prototype.clone=function(){return i(t.prototype,this)},t.prototype.toString=function(e,t){var n,r,i,o,s,a,u,c,l;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(u=null!=e?e.indent:void 0)?u:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(l=null!=e?e.newline:void 0)?l:"\n",t||(t=0),a=new Array(t+i+1).join(n),s="",o&&(s+=a),s+=this.value,o&&(s+=r),s},t}(n)}).call(this)},{"./XMLNode":130,"lodash-node/modern/objects/create":148}],133:[function(e,t){(function(){var e,n=function(e,t){return function(){return e.apply(t,arguments)}},r={}.hasOwnProperty;t.exports=e=function(){function e(e){this.assertLegalChar=n(this.assertLegalChar,this);var t,i,o;this.allowSurrogateChars=null!=e?e.allowSurrogateChars:void 0,o=(null!=e?e.stringify:void 0)||{};for(t in o)r.call(o,t)&&(i=o[t],this[t]=i)}return e.prototype.eleName=function(e){return e=""+e||"",this.assertLegalChar(e)},e.prototype.eleText=function(e){return e=""+e||"",this.assertLegalChar(this.elEscape(e))},e.prototype.cdata=function(e){if(e=""+e||"",e.match(/]]>/))throw new Error("Invalid CDATA text: "+e);return this.assertLegalChar(e)},e.prototype.comment=function(e){if(e=""+e||"",e.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},e.prototype.raw=function(e){return""+e||""},e.prototype.attName=function(e){return""+e||""},e.prototype.attValue=function(e){return e=""+e||"",this.attEscape(e)},e.prototype.insTarget=function(e){return""+e||""},e.prototype.insValue=function(e){if(e=""+e||"",e.match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return e},e.prototype.xmlVersion=function(e){if(e=""+e||"",!e.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e},e.prototype.xmlEncoding=function(e){if(e=""+e||"",!e.match(/[A-Za-z](?:[A-Za-z0-9._-]|-)*/))throw new Error("Invalid encoding: "+e);return e},e.prototype.xmlStandalone=function(e){return e?"yes":"no"},e.prototype.dtdPubID=function(e){return""+e||""},e.prototype.dtdSysID=function(e){return""+e||""},e.prototype.dtdElementValue=function(e){return""+e||""},e.prototype.dtdAttType=function(e){return""+e||""},e.prototype.dtdAttDefault=function(e){return null!=e?""+e||"":e},e.prototype.dtdEntityValue=function(e){return""+e||""},e.prototype.dtdNData=function(e){return""+e||""},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.convertListKey="#list",e.prototype.assertLegalChar=function(e){var t,n;if(t=this.allowSurrogateChars?/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uFFFE-\uFFFF]/:/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uD800-\uDFFF\uFFFE-\uFFFF]/,n=e.match(t))throw new Error("Invalid character ("+n+") in string: "+e+" at index "+n.index);return e},e.prototype.elEscape=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},e.prototype.attEscape=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},e}()}).call(this)},{}],134:[function(e,t){(function(){var n,r,i,o={}.hasOwnProperty,s=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};i=e("lodash-node/modern/objects/create"),n=e("./XMLNode"),t.exports=r=function(e){function t(e,n){if(this.parent=e,t.__super__.constructor.call(this,e),null==n)throw new Error("Missing element text");this.value=this.stringify.eleText(n)}return s(t,e),t.prototype.clone=function(){return i(t.prototype,this)},t.prototype.toString=function(e,t){var n,r,i,o,s,a,u,c,l;return o=(null!=e?e.pretty:void 0)||!1,n=null!=(u=null!=e?e.indent:void 0)?u:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(l=null!=e?e.newline:void 0)?l:"\n",t||(t=0),a=new Array(t+i+1).join(n),s="",o&&(s+=a),s+=this.value,o&&(s+=r),s},t}(n)}).call(this)},{"./XMLNode":130,"lodash-node/modern/objects/create":148}],135:[function(e,t){(function(){var n,r;r=e("lodash-node/modern/objects/assign"),n=e("./XMLBuilder"),t.exports.create=function(e,t,i,o){return o=r({},t,i,o),new n(e,o).root()}}).call(this)},{"./XMLBuilder":120,"lodash-node/modern/objects/assign":147}],136:[function(e,t){function n(e,t){return arguments.length>2?r(e,17,i(arguments,2),null,t):r(e,1,null,null,t)}var r=e("../internals/createWrapper"),i=e("../internals/slice");t.exports=n},{"../internals/createWrapper":141,"../internals/slice":146}],137:[function(e,t){function n(e){function t(){if(a){var e=s(a);u.apply(e,arguments)}if(this instanceof t){var o=r(n.prototype),l=n.apply(o,e||arguments);return i(l)?l:o}return n.apply(c,e||arguments)}var n=e[0],a=e[2],c=e[4];return o(t,e),t}var r=e("./baseCreate"),i=e("../objects/isObject"),o=e("./setBindData"),s=e("./slice"),a=[],u=a.push;t.exports=n},{"../objects/isObject":153,"./baseCreate":138,"./setBindData":144,"./slice":146}],138:[function(e,t){(function(n){function r(e){return o(e)?s(e):{}}var i=e("./isNative"),o=e("../objects/isObject"),s=(e("../utilities/noop"),i(s=Object.create)&&s);s||(r=function(){function e(){}return function(t){if(o(t)){e.prototype=t;var r=new e;e.prototype=null}return r||n.Object()}}()),t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../objects/isObject":153,"../utilities/noop":157,"./isNative":142}],139:[function(e,t){function n(e,t,n){if("function"!=typeof e)return i;if("undefined"==typeof t||!("prototype"in e))return e;var l=e.__bindData__;if("undefined"==typeof l&&(s.funcNames&&(l=!e.name),l=l||!s.funcDecomp,!l)){var h=c.call(e);s.funcNames||(l=!a.test(h)),l||(l=u.test(h),o(e,l))}if(l===!1||l!==!0&&1&l[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return r(e,t)}var r=e("../functions/bind"),i=e("../utilities/identity"),o=e("./setBindData"),s=e("../support"),a=/^\s*function[ \n\r\t]+\w/,u=/\bthis\b/,c=Function.prototype.toString;t.exports=n},{"../functions/bind":136,"../support":155,"../utilities/identity":156,"./setBindData":144}],140:[function(e,t){function n(e){function t(){var e=p?d:this;if(l){var o=s(l);u.apply(o,arguments)}if((h||m)&&(o||(o=s(arguments)),h&&u.apply(o,h),m&&o.length<f))return c|=16,n([a,y?c:-4&c,o,null,d,f]);if(o||(o=arguments),g&&(a=e[v]),this instanceof t){e=r(a.prototype);var b=a.apply(e,o);return i(b)?b:e}return a.apply(e,o)}var a=e[0],c=e[1],l=e[2],h=e[3],d=e[4],f=e[5],p=1&c,g=2&c,m=4&c,y=8&c,v=a;return o(t,e),t}var r=e("./baseCreate"),i=e("../objects/isObject"),o=e("./setBindData"),s=e("./slice"),a=[],u=a.push;t.exports=n},{"../objects/isObject":153,"./baseCreate":138,"./setBindData":144,"./slice":146}],141:[function(e,t){function n(e,t,a,l,h,d){var f=1&t,p=2&t,g=4&t,m=16&t,y=32&t;if(!p&&!o(e))throw new TypeError;m&&!a.length&&(t&=-17,m=a=!1),y&&!l.length&&(t&=-33,y=l=!1);var v=e&&e.__bindData__;if(v&&v!==!0)return v=s(v),v[2]&&(v[2]=s(v[2])),v[3]&&(v[3]=s(v[3])),!f||1&v[1]||(v[4]=h),!f&&1&v[1]&&(t|=8),!g||4&v[1]||(v[5]=d),m&&u.apply(v[2]||(v[2]=[]),a),y&&c.apply(v[3]||(v[3]=[]),l),v[1]|=t,n.apply(null,v);var b=1==t||17===t?r:i;return b([e,t,a,l,h,d])}var r=e("./baseBind"),i=e("./baseCreateWrapper"),o=e("../objects/isFunction"),s=e("./slice"),a=[],u=a.push,c=a.unshift;t.exports=n},{"../objects/isFunction":152,"./baseBind":137,"./baseCreateWrapper":140,"./slice":146}],142:[function(e,t){function n(e){return"function"==typeof e&&o.test(e)}var r=Object.prototype,i=r.toString,o=RegExp("^"+String(i).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");t.exports=n},{}],143:[function(e,t){var n={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};t.exports=n},{}],144:[function(e,t){var n=e("./isNative"),r=e("../utilities/noop"),i={configurable:!1,enumerable:!1,value:null,writable:!1},o=function(){try{var e={},t=n(t=Object.defineProperty)&&t,r=t(e,e,e)&&t}catch(i){}return r}(),s=o?function(e,t){i.value=t,o(e,"__bindData__",i)}:r;t.exports=s},{"../utilities/noop":157,"./isNative":142}],145:[function(e,t){var n=e("./objectTypes"),r=Object.prototype,i=r.hasOwnProperty,o=function(e){var t,r=e,o=[];if(!r)return o;if(!n[typeof e])return o;for(t in r)i.call(r,t)&&o.push(t);return o};t.exports=o},{"./objectTypes":143}],146:[function(e,t){function n(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,o=Array(0>i?0:i);++r<i;)o[r]=e[t+r];return o}t.exports=n},{}],147:[function(e,t){var n=e("../internals/baseCreateCallback"),r=e("./keys"),i=e("../internals/objectTypes"),o=function(e,t,o){var s,a=e,u=a;if(!a)return u;var c=arguments,l=0,h="number"==typeof o?2:c.length;if(h>3&&"function"==typeof c[h-2])var d=n(c[--h-1],c[h--],2);else h>2&&"function"==typeof c[h-1]&&(d=c[--h]);for(;++l<h;)if(a=c[l],a&&i[typeof a])for(var f=-1,p=i[typeof a]&&r(a),g=p?p.length:0;++f<g;)s=p[f],u[s]=d?d(u[s],a[s]):a[s];return u};t.exports=o},{"../internals/baseCreateCallback":139,"../internals/objectTypes":143,"./keys":154}],148:[function(e,t){function n(e,t){var n=i(e);return t?r(n,t):n}var r=e("./assign"),i=e("../internals/baseCreate");t.exports=n},{"../internals/baseCreate":138,"./assign":147}],149:[function(e,t){var n=e("../internals/baseCreateCallback"),r=e("./keys"),i=e("../internals/objectTypes"),o=function(e,t,o){var s,a=e,u=a;if(!a)return u;if(!i[typeof a])return u;t=t&&"undefined"==typeof o?t:n(t,o,3);for(var c=-1,l=i[typeof a]&&r(a),h=l?l.length:0;++c<h;)if(s=l[c],t(a[s],s,e)===!1)return u;return u};t.exports=o},{"../internals/baseCreateCallback":139,"../internals/objectTypes":143,"./keys":154}],150:[function(e,t){var n=e("../internals/isNative"),r="[object Array]",i=Object.prototype,o=i.toString,s=n(s=Array.isArray)&&s,a=s||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&o.call(e)==r||!1};t.exports=a},{"../internals/isNative":142}],151:[function(e,t){function n(e){var t=!0;if(!e)return t;var n=l.call(e),c=e.length;return n==s||n==u||n==o||n==a&&"number"==typeof c&&i(e.splice)?!c:(r(e,function(){return t=!1}),t)}var r=e("./forOwn"),i=e("./isFunction"),o="[object Arguments]",s="[object Array]",a="[object Object]",u="[object String]",c=Object.prototype,l=c.toString;t.exports=n},{"./forOwn":149,"./isFunction":152}],152:[function(e,t){function n(e){return"function"==typeof e}t.exports=n},{}],153:[function(e,t){function n(e){return!(!e||!r[typeof e])}var r=e("../internals/objectTypes");t.exports=n},{"../internals/objectTypes":143}],154:[function(e,t){var n=e("../internals/isNative"),r=e("./isObject"),i=e("../internals/shimKeys"),o=n(o=Object.keys)&&o,s=o?function(e){return r(e)?o(e):[]}:i;t.exports=s},{"../internals/isNative":142,"../internals/shimKeys":145,"./isObject":153}],155:[function(e,t){(function(n){var r=e("./internals/isNative"),i=/\bthis\b/,o={};o.funcDecomp=!r(n.WinRTError)&&i.test(function(){return this}),o.funcNames="string"==typeof Function.name,t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./internals/isNative":142}],156:[function(e,t){function n(e){return e}t.exports=n},{}],157:[function(e,t){function n(){}t.exports=n},{}],158:[function(e,t){"use strict";function n(e,t,n,r){this.wormholes=e?e:[],this.bridges=t?t:[],this.excludes=n?n:{},this.minBridgeRange=void 0!==r?r:3,this.forbiddenBridges={},this.forbiddenWormholes={},this.connectedNodesCache={}}function r(e){for(var t=[],n=i.getSystem(e),r=n.getGates(),s=0;s<r.length;s++){var a=r[s];if(!this.isExcluded(a)){var u=new o(a,"gate");t.push(u)}}for(var s=0;s<this.wormholes.length;s++){var c=this.wormholes[s],l=c.getStartSystem(),h=c.getEndSystem(),a=l===n?h:h===n?l:null;if(a&&!this.isExcluded(a)){var d=new o(a,"wormhole",c);t.push(d)}}for(var s=0;s<this.bridges.length;s++){var f=this.bridges[s];if(f.getHomeSystem()===n)for(var p=this.getConnectionsForBridge(f),g=0;g<p.length;g++){var a=p[g];if(!this.isExcluded(a)){var d=new o(a,"bridge",f);t.push(d)}}}return t}t.exports=n;var i=e("local/repositories/system"),o=e("./node.js"),s=e("./priority-shortest-path.js");n.prototype.copy=function(){var e=new n(this.wormholes,this.bridges,this.excludes,this.minBridgeRange);return e},n.prototype.getNode=function(e){var t=i.getSystem(e);return new o(t,"start")},n.prototype.getConnectedNodes=function(e){var t=this.connectedNodesCache[e];t||(t=r.call(this,e),this.connectedNodesCache[e]=t);for(var n=[],i=0,o=t.length;o>i;i++){var s=t[i],a=s.methodData;"wormhole"===s.methodType&&this.forbiddenWormholes[a.id]||"bridge"===s.methodType&&this.forbiddenBridges[a.id]||n.push(s)}return n},n.prototype.getConnectionsForBridge=function(e){if(this.staticGraph||(this.staticGraph=new n(null,null,this.excludes)),this.bridgeConnectionsCache||(this.bridgeConnectionsCache={}),!this.bridgeConnectionsCache[e.id]){var t=e.getHomeSystem().id,r=e.getSystemsInRange();r=r.filter(function(e){var n=s(this.staticGraph,t,e.id,null,this.minBridgeRange);return null===n},this),this.bridgeConnectionsCache[e.id]=r}return this.bridgeConnectionsCache[e.id]},n.prototype.forbidBridge=function(e){this.forbiddenBridges[e]=!0},n.prototype.forbidWormhole=function(e){this.forbiddenWormholes[e]=!0},n.prototype.bridgeIsForbidden=function(e){return this.forbiddenBridges[e]},n.prototype.wormholeIsForbidden=function(e){return this.forbiddenWormholes[e]},n.prototype.clearForbidden=function(){this.forbiddenBridges={},this.forbiddenWormholes={}},n.prototype.isExcluded=function(e){return this.excludes.hi&&e.isHighsec()?!0:this.excludes.lo&&e.isLowsec()?!0:this.excludes.nl&&e.isNullsec()?!0:this.excludes.ws&&e.isWormholeSpace()?!0:!1}},{"./node.js":161,"./priority-shortest-path.js":165,"local/repositories/system":196}],159:[function(e,t){t.exports=e("./pathfinder-interface.js")},{"./pathfinder-interface.js":163}],160:[function(e,t){"use strict";function n(e,t,n,a,u,c,l){void 0===c&&(c=2),l||(l=o),a||(a=20);for(var h=[],d=[],f=Date.now(),p=!1;h.length<a&&f+l>Date.now();){for(var g=0;g<d.length;g++){var m=d[g],y=m.bridges.every(function(t){return!e.bridgeIsForbidden(t)}),v=m.wormholes.every(function(t){return!e.wormholeIsForbidden(t)
});y&&v&&(m.bridges.length>0?e.forbidBridge(m.bridges[m.bridges.length-1]):e.forbidWormhole(m.wormholes[m.wormholes.length-1]))}if(!y||!v){var b=s(e,t,n,u);if(e.clearForbidden(),!b)break;var m=i(b);if(d.push(m),r(b)<=c&&h.push(b),0===m.wormholes.length&&0===m.bridges.length){p=!0;break}}}if(!p){e=e.copy(),e.bridges=[],e.wormholes=[];var w=s(e,t,n,u);w&&h.push(w)}return h=h.sort(function(e,t){return e.length===t.length?0:e.length<t.length?-1:1})}function r(e){for(var t=0,n=0;n<e.length;n++)"bridge"===e[n].methodType&&t++;return t}function i(e){var t=e.filter(function(e){return"wormhole"==e.methodType}).map(function(e){return e.methodData.id}),n=e.filter(function(e){return"bridge"==e.methodType}).map(function(e){return e.methodData.id});return{wormholes:t,bridges:n}}var o=2e3;t.exports=n;var s=e("./priority-shortest-path.js")},{"./priority-shortest-path.js":165}],161:[function(e,t){function n(e,t,n){this.id=e.id,this.system=e,this.methodType=t,this.methodData=n}t.exports=n,n.prototype.copy=function(){var e=new n;return e.id=this.id,e.system=this.system,e.methodType=this.methodType,e.methodData=this.methodData,e}},{}],162:[function(e,t){"use strict";function n(e){var t="static_"+e.startSys.id+"_"+e.endSys.id,n=new s(h.get(t));return n}function r(e,t){var n="static_"+t.startSys.id+"_"+t.endSys.id;h.set(n,e.data)}function i(e){return e.map(function(e){var t=l.getSystem(e);return new c(t,"gate")})}function o(e){return e.map(function(e){return e.id})}function s(e){this.data=e?e:{}}function a(e,t,n){return e=e?1:0,t=t?1:0,n=n?1:0,e+"_"+t+"_"+n}var u={};t.exports=u;var c=e("./node.js"),l=e("local/repositories/system"),h=e("./store");u.hasPath=function(e){var t=n(e).getPath(!e.noHighsec,!e.noLowsec,!e.noNullsec);return void 0!==t},u.hasJumpCount=function(e){var t=n(e).getJumps(!e.noHighsec,!e.noLowsec,!e.noNullsec);return void 0!==t},u.getPath=function(e){var t=n(e).getPath(!e.noHighsec,!e.noLowsec,!e.noNullsec);return t?i(t):t},u.getJumpCount=function(e){return n(e).getJumps(!e.noHighsec,!e.noLowsec,!e.noNullsec)},u.setPath=function(e,t){var i=n(t);e&&(e=o(e)),i.setPath(e,!t.noHighsec,!t.noLowsec,!t.noNullsec),r(i,t)},u.setJumpCount=function(e,t){var i=n(t);i.setJumps(e,!t.noHighsec,!t.noLowsec,!t.noNullsec),r(i,t)},u.clearCache=function(){h.clear()},u.countCachedPaths=function(){var e=h.getAll(),t=Object.keys(e).reduce(function(t,n){var r=e[n],i=new s(r);return t+i.countCachedPaths()},0);return t},u.countCachedJumps=function(){var e=h.getAll(),t=Object.keys(e).reduce(function(t,n){var r=e[n],i=new s(r);return t+i.countCachedJumps()},0);return t},s.prototype.getPath=function(e,t,n){var r=a(e,t,n)+"_route";return this.data[r]},s.prototype.setPath=function(e,t,n,r){var i=a(t,n,r)+"_route";this.data[i]=e},s.prototype.getJumps=function(e,t,n){var r=a(e,t,n)+"_jumps";return this.data[r]},s.prototype.setJumps=function(e,t,n,r){var i=a(t,n,r)+"_jumps";this.data[i]=e},s.prototype.countCachedPaths=function(){return this.countCached("route")},s.prototype.countCachedJumps=function(){return this.countCached("jumps")},s.prototype.countCached=function(e){var t=Object.keys(this.data),n=t.reduce(function(t,n){var r=n.indexOf(e)>-1;return r?t+1:t},0);return n}},{"./node.js":161,"./store":168,"local/repositories/system":196}],163:[function(e,t){"use strict";function n(e){var t=new s(null,null,{hi:e.noHighsec,lo:e.noLowsec,nl:e.noNullsec});return o(t,e.startSys.id,e.endSys.id)}var r=e("local/repositories/system"),i=e("./path-cache.js"),o=e("./priority-shortest-path.js"),s=e("./graph.js"),a=e("./route-details.js"),u=e("./k-shortest-paths.js"),c=e("./priority-shortest-distances.js"),l=(e("q"),{});t.exports=l,l.findPaths=function(e){return e.maxPaths||(e.maxPaths=20),r.initialize().then(function(){var t={hi:2===e.highsec,lo:2===e.lowsec,nl:2===e.nullsec,ws:2===e.wspace},n=new s(e.wormholes,e.bridges,t,e.minBridgeDistance),r=function(t){return 1===e.highsec&&t.system.isHighsec()?!0:1===e.lowsec&&t.system.isHighsec()?!0:1===e.nullsec&&t.system.isHighsec()?!0:1===e.wspace&&t.system.isHighsec()?!0:!1},i=e.startSys.id,o=e.endSys.id,c=u(n,i,o,e.maxPaths,r,e.maxBridges,e.maxTime);return c=c.map(function(e){return new a(e)})})},l.findDistances=function(e){return r.initialize().then(function(){var t={hi:2===e.highsec,lo:2===e.lowsec,nl:2===e.nullsec,ws:2===e.wspace},n=new s(e.wormholes,e.bridges,t,e.minBridgeDistance),r=function(t){return 1===e.highsec&&t.system.isHighsec()?!0:1===e.lowsec&&t.system.isHighsec()?!0:1===e.nullsec&&t.system.isHighsec()?!0:1===e.wspace&&t.system.isHighsec()?!0:!1},i=e.startSys.id,o=c(n,i,r,e.maxLength);return o})},l.findStaticPath=function(e){if(!i.hasPath(e)){var t=n(e);i.setPath(t,e)}var r=i.getPath(e);return r?new a(r):r},l.findStaticJumpCount=function(e){if(!i.hasJumpCount(e)){var t=n(e),r=t?t.length-1:null;i.setJumpCount(r,e)}return i.getJumpCount(e)}},{"./graph.js":158,"./k-shortest-paths.js":160,"./path-cache.js":162,"./priority-shortest-distances.js":164,"./priority-shortest-path.js":165,"./route-details.js":167,"local/repositories/system":196,q:114}],164:[function(e,t){"use strict";function n(e,t,n,o){if(0===o)return{};n||(n=function(){return!1}),o||(o=i);var s=new r(n),a={},u=e.getNode(t);for(s.enq(u),a[u.id]=0,u.distance=0;!s.isEmpty();){var c=s.deq();if(!(c.distance>o))for(var l=e.getConnectedNodes(c.id),h=0;h<l.length;h++){var d=l[h];void 0===a[d.id]&&(d.distance=c.distance+1,d.parent=c,s.enq(d),a[d.id]=d.distance)}}return a}t.exports=n;var r=e("./two-priority-queue.js"),i=100},{"./two-priority-queue.js":169}],165:[function(e,t){"use strict";function n(e,t,n,s,a){if(t===n)return null;if(0===a)return null;s||(s=function(){return!1}),a||(a=o);var u=new i(s),c={},l=e.getNode(t);for(u.enq(l),c[l.id]=!0,l.distance=0;!u.isEmpty();){var h=u.deq();if(!(h.distance>a)){if(h.id===n)return r(h);for(var d=e.getConnectedNodes(h.id),f=0;f<d.length;f++){var p=d[f];c[p.id]||(p.distance=h.distance+1,p.parent=h,u.enq(p),c[p.id]=!0)}}}return null}function r(e){for(var t=[e],n=e.parent;n;)t.push(n),n=n.parent;return t.reverse()}t.exports=n;var i=e("./two-priority-queue.js"),o=100},{"./two-priority-queue.js":169}],166:[function(e,t){"use strict";function n(){this.queue=[],this.offset=0}t.exports=n,n.prototype.getLength=function(){return this.queue.length-this.offset},n.prototype.isEmpty=function(){return 0==this.queue.length},n.prototype.enq=function(e){this.queue.push(e)},n.prototype.deq=function(){if(0==this.queue.length)return void 0;var e=this.queue[this.offset];return 2*++this.offset>=this.queue.length&&(this.queue=this.queue.slice(this.offset),this.offset=0),e},n.prototype.peek=function(){return this.queue.length>0?this.queue[this.offset]:void 0}},{}],167:[function(e,t){"use strict";function n(e){this.route=e,this.routePartition=this.getPartition(e),this.startSystem=e[0].system,this.endSystem=e[e.length-1].system,this.jumps=e.length-1,this.goesHighsec=e.some(function(e){return e.system.isHighsec()}),this.goesLowsec=e.some(function(e){return e.system.isLowsec()}),this.goesNullsec=e.some(function(e){return e.system.isNullsec()}),this.goesWspace=e.some(function(e){return e.system.isWormholeSpace()}),this.hasBridges=this.route.some(function(e){return"bridge"===e.methodType}),this.hasStargates=this.route.some(function(e){return"gate"===e.methodType}),this.hasWormholes=this.route.some(function(e){return"wormhole"===e.methodType}),this.hasTitans=this.route.some(function(e){return"bridge"===e.methodType&&"titan"===e.methodData.bridgeType}),this.hasBlackops=this.route.some(function(e){return"bridge"===e.methodType&&"blackops"===e.methodData.bridgeType})}function r(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r];if("bridge"===i.type)n="blackops"===i.bridgeType?s(n,i.distance,.5):s(n,i.distance,1);else{var a=o(i.jumps,t),u=a/10;n=Math.max(0,n-u)}}return n}function i(e,t){for(var n=0,r=0,i=0;i<e.length;i++){var a=e[i];if("bridge"===a.type)r+=n+o(1,t),n="blackops"===a.bridgeType?s(n,a.distance,.5):s(n,a.distance,1);else{var u=o(a.jumps,t);r+=u;var c=u/10;n=Math.max(0,n-c)}}return r}function o(e,t){var n=t.alignTime+t.warpTime20;return n+=10,n*e/60}function s(e,t,n){var r,i=1+t*n;return r=1>e?i:i*e}var a=e("moment");n.prototype.getPartition=function(e){function t(e){return"bridge"===e?new u(i):"k-k wormhole"===e||"wormhole chain"===e?new c(e,i):new l(n,i)}var n,r=[],i=[];i.push(e[0]);for(var o=1;o<e.length;o++){var s=e[o],a=s.methodType;"wormhole"===a&&(a=s.methodData.isKtoK()?"k-k wormhole":"wormhole chain");var h=2===i.length&&("k-k wormhole"===n||"bridge"===n);if(h||n&&n!==a){var d=i[i.length-1],f=t(n,i);r.push(f),i=[],i.push(d),i.push(s),n=a}else n=a,i.push(s)}return r.push(t(n,i)),r},n.prototype.getWormholes=function(){var e=this.route.filter(function(e){return"wormhole"===e.methodType}).map(function(e){return e.methodData});return e},n.prototype.getBridges=function(){var e=this.route.filter(function(e){return"bridge"===e.methodType}).map(function(e){return e.methodData});return e},n.prototype.getAge=function(){if(void 0===this.age){var e=this.getWormholes();if(0===e.length)this.age=null;else{var t;e.forEach(function(e){(!t||e.getLastObserved()<t)&&(t=e.getLastObserved())}),this.age=t}}return this.age},n.prototype.getAgeFuzzy=function(){var e=this.getWormholes().some(function(e){return e.isExpired()});if(e)return"Expired";var t=this.getAge();return t?a(t).fromNow().replace("ago",""):"Static"},n.prototype.getAgePretty=function(){return this.getAge()?a(this.getAge()).format("llll"):"-"},n.prototype.getDateExpires=function(){var e=this.getWormholes();return 0===e.length?null:e.reduce(function(e,t){var n=t.getDateExpires();return Math.min(e,n)},Number.POSITIVE_INFINITY)},n.prototype.getDateExpiresFuzzy=function(){var e=this.getDateExpires();return e?e<(new Date).getTime()?"Expired":a(e).fromNow().replace("in",""):"Static"},n.prototype.getDateExpiresPretty=function(){return this.getDateExpires()?a(this.getDateExpires()).format("llll"):"-"},n.prototype.getFatigue=function(e){return r(this.routePartition,e)},n.prototype.getMinutes=function(e){return i(this.routePartition,e)},n.prototype.getFatiguePretty=function(e){return this.getFatigue(e).toFixed(1)},n.prototype.getMinutesPretty=function(e){return Math.ceil(this.getMinutes(e))};var u=function(e){this.type="bridge",this.startSystem=e[0].system,this.endSystem=e[1].system,this.jumps=1,this.bridger=e[1].methodData,this.bridgeType=this.bridger.bridgeType,this.distance=this.startSystem.getDistanceFromSystem(this.endSystem)};u.prototype.getDistancePretty=function(){var e=this.distance.toFixed(2);return e};var c=function(e,t){this.type="wormhole",this.subtype=e,this.systems=t,this.jumps=t.length-1,this.startSystem=this.systems[0].system,this.endSystem=this.systems[this.systems.length-1].system,this.wormholes=t.slice(1).map(function(e){return e.methodData}),this.missingClass=this.wormholes.some(function(e){return!e.hasClass()})},l=function(e,t){this.type=e,this.systems=t,this.jumps=t.length-1,this.startSystem=this.systems[0].system,this.endSystem=this.systems[this.systems.length-1].system};t.exports=n},{moment:113}],168:[function(require,module,exports){this.JSON||(this.JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,s,a=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;o>n;n+=1)s[n]=str(n,u)||"null";return i=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)r=rep[n],"string"==typeof r&&(i=str(r,u),i&&s.push(quote(r)+(gap?": ":":")+i));else for(r in u)Object.hasOwnProperty.call(u,r)&&(i=str(r,u),i&&s.push(quote(r)+(gap?": ":":")+i));return i=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){function t(){try{return a in e&&e[a]}catch(t){return!1}}function n(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(i),c.appendChild(i),i.addBehavior("#default#userData"),i.load(a);var n=e.apply(o,t);return c.removeChild(i),n}}function r(e){return e.replace(/^d/,"___$&").replace(d,"___")}var i,o={},s=e.document,a="localStorage",u="script";if(o.disabled=!1,o.set=function(){},o.get=function(){},o.remove=function(){},o.clear=function(){},o.transact=function(e,t,n){var r=o.get(e);null==n&&(n=t,t=null),"undefined"==typeof r&&(r=t||{}),n(r),o.set(e,r)},o.getAll=function(){},o.forEach=function(){},o.serialize=function(e){return JSON.stringify(e)},o.deserialize=function(e){if("string"!=typeof e)return void 0;try{return JSON.parse(e)}catch(t){return e||void 0}},t())i=e[a],o.set=function(e,t){return void 0===t?o.remove(e):(i.setItem(e,o.serialize(t)),t)},o.get=function(e){return o.deserialize(i.getItem(e))},o.remove=function(e){i.removeItem(e)},o.clear=function(){i.clear()},o.getAll=function(){var e={};return o.forEach(function(t,n){e[t]=n}),e},o.forEach=function(e){for(var t=0;t<i.length;t++){var n=i.key(t);e(n,o.get(n))}};else if(s.documentElement.addBehavior){var c,l;try{l=new ActiveXObject("htmlfile"),l.open(),l.write("<"+u+">document.w=window</"+u+'><iframe src="/favicon.ico"></iframe>'),l.close(),c=l.w.frames[0].document,i=c.createElement("div")}catch(h){i=s.createElement("div"),c=s.body}var d=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");o.set=n(function(e,t,n){return t=r(t),void 0===n?o.remove(t):(e.setAttribute(t,o.serialize(n)),e.save(a),n)}),o.get=n(function(e,t){return t=r(t),o.deserialize(e.getAttribute(t))}),o.remove=n(function(e,t){t=r(t),e.removeAttribute(t),e.save(a)}),o.clear=n(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(a);for(var n,r=0;n=t[r];r++)e.removeAttribute(n.name);e.save(a)}),o.getAll=function(){var e={};return o.forEach(function(t,n){e[t]=n}),e},o.forEach=n(function(e,t){for(var n,r=e.XMLDocument.documentElement.attributes,i=0;n=r[i];++i)t(n.name,o.deserialize(e.getAttribute(n.name)))})}try{var f="__storejs__";o.set(f,f),o.get(f)!=f&&(o.disabled=!0),o.remove(f)}catch(h){o.disabled=!0}o.enabled=!o.disabled,"undefined"!=typeof module&&module.exports&&this.module!==module?module.exports=o:"function"==typeof define&&define.amd?define(o):e.store=o}(Function("return this")())},{}],169:[function(e,t){"use strict";function n(e){this.lowPriorityFunc=e,this.hiQueue=new r,this.loQueue=new r}t.exports=n;var r=e("./queue.js");n.prototype.enq=function(e){this.lowPriorityFunc(e)?this.loQueue.enq(e):this.hiQueue.enq(e)},n.prototype.deq=function(){return this.hiQueue.isEmpty()?this.loQueue.deq():this.hiQueue.deq()},n.prototype.isEmpty=function(){return this.hiQueue.isEmpty()&&this.loQueue.isEmpty()}},{"./queue.js":166}],170:[function(e,t){"use strict";var n=e("../base"),r=e("./authorization.js"),i=n({path:"authorizations",makeLocal:function(e,t){return new r(e,t)},makeRemote:function(e){var t={name:e.name,type:e.type,mod:Date.now(),note:e.note};return t},pruneRemote:!0}),o={get:i.get,getAll:i.getAll,getArray:i.getArray,"delete":i.delete,changed:i.changed,changedRemoveHandler:i.changedRemoveHandler,initialize:i.initialize,supressChanged:i.supressChanged};o.set=function(e,t,n,o){var s=new r(e,{name:t,type:n,note:o});i.update(s)},t.exports=o},{"../base":173,"./authorization.js":171}],171:[function(e,t){var n=e("local/eve-api/image-server"),r=e("moment"),i=function(e,t){e&&(this.id=Number(e),this.name=t.name,this.type=t.type,this.lastModified=t.mod,this.note=t.note)};i.prototype.clone=function(){var e=new i;return e.id=this.id,e.name=this.name,e.type=this.type,e.lastModified=this.lastModified,e.note=this.note,e},i.prototype.getPortraitUrl=function(e){return n(this.id,this.type,e)},i.prototype.getLastModifiedPretty=function(){return this.lastModified?r(this.lastModified).format("llll"):"-"},i.prototype.getLastModifiedFuzzy=function(){return this.lastModified?r(this.lastModified).fromNow():"-"},i.SHORT_NOTE_LENGTH=16,i.prototype.noteIsShort=function(){return this.note?this.note.length<=i.SHORT_NOTE_LENGTH:!0},i.prototype.noteIsMedium=function(){return!this.noteIsShort()&&this.note.length<=140},i.prototype.noteIsTooLong=function(){return this.note?this.note.length>140:!1},i.prototype.getShortNote=function(){return this.note?this.noteIsShort()?this.note:this.note.substring(0,i.SHORT_NOTE_LENGTH)+"…":null},t.exports=i},{"local/eve-api/image-server":110,moment:113}],172:[function(e,t){t.exports=e("./authorization-repository")},{"./authorization-repository":170}],173:[function(e,t){"use strict";var n,r=e("q"),i=e("firebase"),o=function(e){function t(){if(!n)throw new Error("You must first set the firebase URL");return o||(o=n.child(e.path)),o}function i(e){for(var t in e)e[t]||delete e[t],"object"==typeof e[t]&&i(e[t]);return e}var o,s=e.makeLocal?e.makeLocal:function(e,t){return t},a=e.makeRemote?e.makeRemote:function(e){return e},u=e.idFromLocal?e.idFromLocal:function(e){return e.id},c=e.isValid?e.isValid:function(){return!0};if(e.pruneRemote){var l=a;a=function(e){var t=l(e);return i(t)}}var h,d=[],f=!1,p=!1,g={hash:{},array:[]},m=null,y={};y.get=function(e){return y.getAll()[e]},y.getAll=function(){return m&&(g=v(m),m=null),g.hash},y.getArray=function(){return m&&(g=v(m),m=null),g.array},y.create=function(e){if(!c(e))throw"Invalid data";var n=t().push(a(e));return n.key()},y.update=function(e){if(!c(e))throw"Invalid data";var n=u(e);n?t().child(n).set(a(e)):y.create(e)},y.delete=function(e){var n=u(e);t().child(n).remove()},y.changed=function(e){if(void 0!==e)d.push(e);else{if(f)return;d.forEach(function(e){e()})}},y.changedRemoveHandler=function(e){d.remove(e)},y.supressChanged=function(e){e!==f&&(f=e,!e&&p&&(p=!1,y.changed()))},y.getSupressChanged=function(){return f};var v=function(e){var t={},n=Object.keys(e).map(function(n){var r=s(n,e[n]);return t[n]=r,r});return{hash:t,array:n}};return y.initialize=function(){if(!h){h=r.defer();var e=!0;t().on("value",function(t){var n=t.val();m=n?n:{},f||e?f?p=!0:e&&(e=!1,h.resolve()):y.changed()},function(e){console.log("firebase init error:",e),h.reject(),h=null})}return h.promise},y};o.setFirebaseUrl=function(e){n=new i(e)},o.getRef=function(){if(!n)throw new Error("Must set firebase url");return n};var s="./";o.setStaticDataRoot=function(e){s=e},o.getStaticDataRoot=function(){return s},t.exports=o},{firebase:112,q:114}],174:[function(e,t){"use strict";var n=e("./bridge"),r=e("../base"),i=r({path:"bridges",makeLocal:function(e,t){return new n(e,t)},makeRemote:function(e){var t={homeSystem:e.homeSystemId,bridgeType:e.bridgeType,name:e.name,lastModified:(new Date).getTime()};return t}}),o={getBridge:i.get,getBridges:i.getAll,getBridgesArray:i.getArray,createBridge:i.create,updateBridge:i.update,deleteBridge:i.delete,bridgesChanged:i.changed,bridgesChangedRemoveHandler:i.changedRemoveHandler,initialize:i.initialize};t.exports=o},{"../base":173,"./bridge":175}],175:[function(e,t){"use strict";var n,r=function(e,t){e&&(this.id=e,this.homeSystemId=t.homeSystem,this.bridgeType=t.bridgeType,this.name=t.name,this.lastModified=t.lastModified)};r.prototype.getBridgeRange=function(){return"titan"===this.bridgeType?5:"blackops"===this.bridgeType?8:0},r.prototype.getBridgeTypePretty=function(){var e=r.possibleBridgeTypes.find(function(e){return this.bridgeType===e.key},this);return e?e.value:void 0},r.prototype.clone=function(){var e=new r;return e.id=this.id,e.homeSystemId=this.homeSystemId,e.bridgeType=this.bridgeType,e.name=this.name,e};var i={};r.prototype.getHomeSystem=function(){return n.getSystem(this.homeSystemId)},r.prototype.getSystemsInRange=function(){return void 0===i[this.id]&&(i[this.id]=n.getSystemsWithinLightyears(this.getHomeSystem(),this.getBridgeRange())),i[this.id]},r.attachRepositories=function(e){n=e},r.possibleBridgeTypes=[{key:"titan",value:"Titan"},{key:"blackops",value:"Black Ops"}],t.exports=r},{}],176:[function(e,t){t.exports=e("./bridge-repository")},{"./bridge-repository":174}],177:[function(e,t){t.exports=e("./principal-service")},{"./principal-service":178}],178:[function(e,t){"use strict";function n(e){return e&&!e.roles&&(e.roles=["user"],e.auth.isAdmin&&e.roles.push("admin")),e}function r(){i.onAuth(function(e){e?(u=e,n(e),c=!0):(u=null,c=!1),a.resolve(u),d.principalChanged()})}var i,o=e("q"),s=e("../base"),a=o.defer(),u=void 0,c=!1,l=[],h=!1,d={isIdentityResolved:function(){return d.initialize(),void 0!==u},isAuthenticated:function(){return d.initialize(),c},isInRole:function(e){return d.initialize(),c&&u.roles?-1!=u.roles.indexOf(e):!1},isInAnyRole:function(e){if(d.initialize(),!c||!u.roles)return!1;for(var t=0;t<e.length;t++)if(this.isInRole(e[t]))return!0;return!1},identity:function(){return d.initialize(),void 0===u?a.promise:o(u)},loginWithFirebase:function(e){d.initialize();var t=o.defer();return i.authWithCustomToken(e,function(e,r){e&&t.reject(e),n(r),t.resolve(r)}),t.promise},logout:function(){d.initialize(),i.unauth()},principalChanged:function(e){d.initialize(),void 0!==e?l.push(e):l.forEach(function(e){e(u)})},initialize:function(){h||(h=!0,i=s.getRef(),r())}};t.exports=d},{"../base":173,q:114}],179:[function(e,t){var n=e("./system/system.js"),r=e("./wormhole/wormhole.js"),i=e("./bridge/bridge.js"),o=e("./signature/signature.js"),s=e("./base.js"),a=e("local/pathfinder"),u=e("./system"),c=e("./wormhole"),l=e("./wormhole-class"),h=e("./signature"),d=e("./user");i.attachRepositories(u),n.attachRepositories(u,c,h),r.attachRepositories(u,c,l,d),o.attachRepositories(d),n.attachPathfinder(a),r.attachPathfinder(a),t.exports=s},{"./base.js":173,"./bridge/bridge.js":175,"./signature":193,"./signature/signature.js":195,"./system":196,"./system/system.js":198,"./user":199,"./wormhole":204,"./wormhole-class":201,"./wormhole/wormhole.js":206,"local/pathfinder":159}],180:[function(e,t){t.exports=e("./leaderboard-repository")},{"./leaderboard-repository":181}],181:[function(e,t){"use strict";var n=e("../base"),r=e("./leaderboard"),i=n({path:"leaderboard-new",makeLocal:function(e,t){return new r(e,t)},makeRemote:function(e){var t={};for(var n in e.days)t[n]=e.days[n].toRemoteForm();var r={allTime:e.allTime?e.allTime.toRemoteForm():null,findsPaidFor:e.findsPaidFor?e.findsPaidFor.toRemoteForm():null,totalPaidAmount:e.totalPaidAmount,days:t,lastModified:Date.now()};return r},pruneRemote:!0}),o={getAll:i.getAll,getArray:i.getArray,update:i.update,"delete":i.delete,changed:i.changed,changedRemoveHandler:i.changedRemoveHandler,initialize:i.initialize,supressChanged:i.supressChanged};o.get=function(e){var t=i.get(e);return t||(t=new r(e)),t},t.exports=o},{"../base":173,"./leaderboard":183}],182:[function(e,t){"use strict";var n=e("moment"),r=function(e,t){t||(t={}),this.id=e,this.periodStart=t.ps?t.ps:0,this.periodEnd=t.pe?t.pe:0,this.wormholesAdded=t.wa?t.wa:0,this.wormholesPartCompleted=t.wpc?t.wpc:0,this.wormholesCompleted=t.wc?t.wc:0,this.foreignWormholesPartCompleted=t.fwpc?t.fwpc:0,this.foreignWormholesCompleted=t.fwc?t.fwc:0,this.systemsUpdated=t.su?t.su:0,this.systemsPartScanned=t.sps?t.sps:0,this.systemsFullScanned=t.sfs?t.sfs:0,this.likes=t.l?t.l:0,Object.defineProperties(this,{totalWormholesPartCompleted:{get:function(){return this.wormholesPartCompleted+this.foreignWormholesPartCompleted}},totalWormholesCompleted:{get:function(){return this.wormholesCompleted+this.foreignWormholesCompleted}}})};r.prototype.toRemoteForm=function(){return{ps:this.periodStart,pe:this.periodEnd,wa:this.wormholesAdded,wpc:this.wormholesPartCompleted,wc:this.wormholesCompleted,fwpc:this.foreignWormholesPartCompleted,fwc:this.foreignWormholesCompleted,su:this.systemsUpdated,sps:this.systemsPartScanned,sfs:this.systemsFullScanned,l:this.likes}},r.prototype.timeInPeriod=function(e){return e>=this.periodStart&&e<this.periodEnd},r.prototype.add=function(e){return e.wormholesAdded&&(this.wormholesAdded+=e.wormholesAdded),e.wormholesPartCompleted&&(this.wormholesPartCompleted+=e.wormholesPartCompleted),e.wormholesCompleted&&(this.wormholesCompleted+=e.wormholesCompleted),e.foreignWormholesPartCompleted&&(this.foreignWormholesPartCompleted+=e.foreignWormholesPartCompleted),e.foreignWormholesCompleted&&(this.foreignWormholesCompleted+=e.foreignWormholesCompleted),e.systemsUpdated&&(this.systemsUpdated+=e.systemsUpdated),e.systemsPartScanned&&(this.systemsPartScanned+=e.systemsPartScanned),e.systemsFullScanned&&(this.systemsFullScanned+=e.systemsFullScanned),e.likes&&(this.likes+=e.likes),this},r.prototype.getPeriodStartPretty=function(){return n(this.periodStart).zone("+0000").format("Do MMM, dddd")},t.exports=r},{moment:113}],183:[function(e,t){"use strict";var n=e("moment"),r=e("./leaderboard-segment"),i=function(e,t){t||(t={}),t.days||(t.days={}),this.id=e,this.allTime=new r("allTime",t.allTime),this.findsPaidFor=new r("findsPaidFor",t.findsPaidFor),this.totalPaidAmount=t.totalPaidAmount?t.totalPaidAmount:0,this.days={};for(var n in t.days)this.days[n]=new r(n,t.days[n]);this.lastModified=t.lastModified?t.lastModified:0};i.prototype.addStats=function(e,t){var n=this.getDayForTime(e);n||(n=this.createNewDay(e),this.days[n.id]=n),n.add(t)},i.prototype.getDayForTime=function(e){for(var t in this.days){var n=this.days[t];if(n.timeInPeriod(e))return n}return null},i.prototype.createNewDay=function(e){var t=n(e).zone("+0000"),i=t.startOf("day").valueOf(),o=t.endOf("day").valueOf(),s=t.startOf("day").format("YYYY-MM-DD"),a=new r(s,{ps:i,pe:o});return a},i.prototype.getLastModifiedPretty=function(){return this.lastModified?n(this.lastModified).format("llll"):"-"},i.prototype.getLastModifiedFuzzy=function(){return this.lastModified?n(this.lastModified).fromNow():"-"},i.prototype.getTotal=function(){var e=new r;for(var t in this.days){var n=this.days[t];e.add(n)}return e.add(this.allTime),e},i.prototype.getFindsPaidFor=function(){return this.findsPaidFor},i.prototype.setFindsPaidFor=function(e){this.findsPaidFor=new r("findsPaidFor",e.toRemoteForm())},i.prototype.getDays=function(e){for(var t=Date.now(),n=[],r=0;e>r;r++){var i=t-1e3*r*60*60*24,o=this.getDayForTime(i);o||(o=this.createNewDay(i)),n.push(o)}return n},i.prototype.getDaysTotal=function(e){var t=this.getDays(e);return t.reduce(function(e,t){return e.add(t)},new r)},t.exports=i},{"./leaderboard-segment":182,moment:113}],184:[function(e,t){"use strict";var n=e("local/repositories/user"),r={getCreatorId:function(){var e=this.log;for(var t in e){var n=e[t];if("c"===n.type)return n.user}return null},getLastEditorId:function(){var e=this.log,t=Object.keys(e);if(0==e.length)return null;t=t.sort();var n=e[t[t.length-1]];return n?n.user:null},getCreator:function(){return n.get(this.getCreatorId())},getLastEditor:function(){return n.get(this.getLastEditorId())}};t.exports=r},{"local/repositories/user":199}],185:[function(e,t){t.exports=e("./metadata-repository.js")},{"./metadata-repository.js":186}],186:[function(e,t){"use strict";var n=e("../base"),r=n({path:"metadata",makeRemote:function(e){return void 0===e.value?null:e.value},idFromLocal:function(e){return e.key}}),i={get:r.get,initialize:r.initialize,changed:r.changed,changedRemoveHandler:r.changedRemoveHandler};i.set=function(e,t){r.update({key:e,value:t})},t.exports=i},{"../base":173}],187:[function(e,t){t.exports=e("./route-log-repository.js")},{"./route-log-repository.js":189}],188:[function(e,t){"use strict";function n(){return o||(o=i.getRef().child(s)),o}function r(e,t,r){e||(e="noid"),t||(t=null),r||(r=null);var i=Date.now();n().push({uid:e,time:i,ssid:t,esid:r})}{var i=e("../base");e("q")}t.exports=r;var o,s="r-l"},{"../base":173,q:114}],189:[function(e,t){"use strict";var n=e("../base"),r=n({path:"r-l",makeLocal:function(e,t){return t}}),i={get:r.get,getAll:r.getAll,getArray:r.getArray,"delete":r.delete,changed:r.changed,changedRemoveHandler:r.changedRemoveHandler,initialize:r.initialize,supressChanged:r.supressChanged};t.exports=i},{"../base":173}],190:[function(e,t){t.exports=e("./scanned-system-repository")},{"./scanned-system-repository":191}],191:[function(e,t){"use strict";function n(e){f[e.id]={lastModified:e.lastModified,wormholes:e.getWormholes(),sigs:e.getSignatures()}}function r(e){n(e),h.systemChanged(e.id)}var i=e("./scanned-system"),o=e("../base"),s=e("../wormhole"),a=e("../signature"),u=e("../system"),c=e("q"),l=o({path:"systems",isValid:function(e){return e.id},makeLocal:function(e,t){return new i(u.getSystem(e),t)},makeRemote:function(e){var t={isPinned:e.isPinned?!0:!1,isStarred:e.isStarred?!0:!1,lastScanned:e.lastScanned?e.lastScanned:null,lastPartialScan:e.lastPartialScan?e.lastPartialScan:null,lastModified:(new Date).getTime(),note:e.note?e.note:null};return t},pruneRemote:!0}),h={getSystems:l.getAll,getSystemsArray:l.getArray,updateSystem:l.update,deleteSystem:l.delete,systemsChanged:l.changed,systemsChangedRemoveHandler:l.changedRemoveHandler,initialize:l.initialize,supressChanged:l.supressChanged};h.getSystem=function(e){var t=l.get(e);return t||(t=new i(u.getSystem(e))),t},h.initialize=function(){var e=l.initialize(),t=u.initialize(),n=a.initialize(),r=s.initialize();return c.all([e,t,n,r])};var d={},f={};h.systemChanged=function(e,t){var r=e;void 0!==t?(d[r]||(d[r]=[]),n(h.getSystem(r)),d[r].push(t)):d[r].forEach(function(e){e(h.getSystem(r))})},h.systemChangedRemoveHandler=function(e,t){d[e].remove(t)},h.systemsChanged(function(){var e=h.getSystemsArray();e.forEach(function(e){var t=f[e.id];t&&t.lastModified!==e.lastModified&&r(e)})}),s.changed(function(){Object.keys(f).forEach(function(e){var t=f[e],n=h.getSystem(e),i=t.wormholes,o=n.getWormholes(),s=i.detectChanges(o);s&&r(n)})}),a.signaturesChanged(function(){Object.keys(f).forEach(function(e){var t=f[e],n=h.getSystem(e),i=t.sigs,o=n.getSignatures(),s=i.detectChanges(o);s&&r(n)})}),t.exports=h},{"../base":173,"../signature":193,"../system":196,"../wormhole":204,"./scanned-system":192,q:114}],192:[function(e,t){"use strict";var n=e("moment"),r=function(e,t){t=t?t:{};var n=t.lastPartialScan?t.lastPartialScan:0,r=Object.create(e,{lastPartialScan:{get:function(){return Math.max(this.lastScanned,n)
},set:function(e){n=e}}});return r.isPinned=t.isPinned,r.isStarred=t.isStarred,r.lastScanned=t.lastScanned?t.lastScanned:0,r.lastModified=t.lastModified,r.note=t.note,r.getLastScannedPretty=i.getLastScannedPretty,r.getLastScannedFuzzy=i.getLastScannedFuzzy,r.getLastPartialScanPretty=i.getLastPartialScanPretty,r.getLastPartialScanFuzzy=i.getLastPartialScanFuzzy,r},i={getLastScannedPretty:function(){return this.lastScanned?n(this.lastScanned).format("llll"):"unrecorded"},getLastScannedFuzzy:function(){return this.lastScanned?n(this.lastScanned).fromNow():"-"},getLastPartialScanPretty:function(){return this.lastPartialScan?n(this.lastPartialScan).format("llll"):"unrecorded"},getLastPartialScanFuzzy:function(){return this.lastPartialScan?n(this.lastPartialScan).fromNow():"-"}};r.MAX_NOTE_LENGTH=280,t.exports=r},{moment:113}],193:[function(e,t){t.exports=e("./signature-repository")},{"./signature-repository":194}],194:[function(e,t){"use strict";var n=e("q"),r=e("./signature"),i=e("../base"),o=e("../user"),s={},a=i({path:"signatures",makeLocal:function(e,t){return new r(t)},makeRemote:function(e){var t={id:e.id.toUpperCase(),systemId:parseInt(e.systemId),type:e.type?e.type:null,wormholeId:e.wormholeId?e.wormholeId:null,dateFound:e.dateFound?e.dateFound:(new Date).getTime(),lastScanned:e.lastScanned?e.lastScanned:(new Date).getTime(),lastModified:(new Date).getTime(),note:e.note&&e.note.length<=140?e.note:null,log:e.log?e.log:{}};return t},idFromLocal:function(e){return e.systemId+"_"+e.id.toUpperCase()},isValid:function(e){return e.systemId&&e.id}}),u={getSignature:a.get,getSignatures:a.getAll,getSignaturesArray:a.getArray,createSignature:a.update,updateSignature:a.update,deleteSignature:a.delete,signaturesChanged:a.changed,signaturesChangedRemoveHandler:a.changedRemoveHandler,supressChanged:a.supressChanged};u.initialize=function(){var e=a.initialize(),t=o.initialize();return n.all([e,t])},u.signaturesChanged(function(){s={}}),u.getSignaturesForSystem=function(e){var t=e.id;return void 0===s[t]&&(s[t]=u.getSignaturesArray().filter(function(e){return e.systemId==t})),s[t]},u.invalidateCache=function(){s={}},t.exports=u},{"../base":173,"../user":199,"./signature":195,q:114}],195:[function(e,t){"use strict";var n,r=e("moment"),i=e("../log-access-helpers"),o=function(e){e&&(this.id=e.id,this.systemId=e.systemId,this.wormholeId=e.wormholeId,this.type=e.type,this.dateFound=e.dateFound,this.lastScanned=e.lastScanned,this.lastModified=e.lastModified,this.note=e.note,this.log=e.log?e.log:{})};o.prototype.clone=function(){var e=new o;return e.id=this.id,e.systemId=this.systemId,e.wormholeId=this.wormholeId,e.type=this.type,e.dateFound=this.dateFound,e.lastScanned=this.lastScanned,e.lastModified=this.lastModified,e.note=this.note,e.log=this.log,e},o.prototype.equals=function(e){if(this.systemId!==e.systemId)return!1;if(this.id===e.id)return!0;try{var t=this.id.split("-")[0],n=e.id.split("-")[0];return t===n}catch(r){return!1}},o.prototype.getDateFoundPretty=function(){return r(this.dateFound).format("llll")},o.prototype.getDateFoundFuzzy=function(){return r(this.dateFound).fromNow()},o.prototype.getLastScannedPretty=function(){return r(this.lastScanned).format("llll")},o.prototype.getLastScannedFuzzy=function(){return r(this.lastScanned).fromNow()},o.SHORT_NOTE_LENGTH=16,o.prototype.noteIsShort=function(){return this.note?this.note.length<=o.SHORT_NOTE_LENGTH:!0},o.prototype.noteIsMedium=function(){return!this.noteIsShort()&&this.note.length<=140},o.prototype.noteIsTooLong=function(){return this.note?this.note.length>140:!1},o.prototype.getShortNote=function(){return this.note?this.noteIsShort()?this.note:this.note.substring(0,o.SHORT_NOTE_LENGTH)+"…":null},o.prototype.getCreatorId=i.getCreatorId,o.prototype.getLastEditorId=i.getLastEditorId,o.prototype.getCreator=i.getCreator,o.prototype.getLastEditor=i.getLastEditor,o.attachRepositories=function(e){n=e},o.allowedTypes=["wormhole","combat","data","ore","relic","gas"],t.exports=o},{"../log-access-helpers":184,moment:113}],196:[function(e,t){t.exports=e("./system-repository")},{"./system-repository":197}],197:[function(e,t){"use strict";function n(){return l.getStaticDataRoot()+h}var r,i,o,s,a=e("local/fetch-file"),u=e("q"),c=e("./system"),l=e("../base"),h="data/systems.json",d={};d.initialize=function(){return f()};var f=function(){return s||(s=u.defer(),a(n(),function(e,t,n){if(e)console.error(e),s.reject(e);else{var r=JSON.parse(n);p(r),s.resolve()}})),s.promise},p=function(e){r=Object.create(null),i={},o=[];for(var t=0;t<e.length;t++){var n=e[t],s=new c(n);r[n.systemId]=s,i[n.systemName.toLowerCase()]=s,o.push(s)}o.sort(function(e,t){return e.systemName>t.systemName?1:e.systemName<t.systemName?-1:0})};d.getSystems=function(){return r},d.getSystemsArray=function(){return o},d.getSystem=function(e){return r[e]},d.getSystemByName=function(e){return e?i[e.toLowerCase()]:void 0},d.getSystemsByName=function(e){return e.map(function(e){return d.getSystemByName(e)})},d.searchSystems=function(e,t,n){if(n){var r=d.getSystemByName(e);return r?r:g(e,t)}return g(e,t)};var g=function(e,t){e=e.trim().toLowerCase();for(var n=[],r=0;r<o.length;r++){var i=o[r].systemName.toLowerCase();if(i.startsWith(e)&&n.push(o[r]),n.length>=t)break}return n};d.getSystemsWithinLightyears=function(e,t){for(var n=[],r=0;r<o.length;r++){var i=o[r];if(e!==i&&!i.isHighsec()){var s=Math.abs(i.xpos-e.xpos),a=Math.abs(i.ypos-e.ypos),u=Math.abs(i.zpos-e.zpos);if(t>s&&t>a&&t>u){var c=Math.sqrt(s*s+a*a+u*u);t>c&&n.push(i)}}}return n},d.getSystemsDistance=function(e,t){var n=Math.abs(e.xpos-t.xpos),r=Math.abs(e.ypos-t.ypos),i=Math.abs(e.zpos-t.zpos),o=Math.sqrt(n*n+r*r+i*i);return o},t.exports=d},{"../base":173,"./system":198,"local/fetch-file":111,q:114}],198:[function(e,t){"use strict";var n,r,i,o,s=function(e){this.id=e.systemId,this.systemName=e.systemName,this.regionName=e.regionName,this.security=e.security,this.connectedSystemsIds=e.connectedSystems,this.xpos=e.xpos,this.ypos=e.ypos,this.zpos=e.zpos};s.prototype.isHighsec=function(){return this.security>=.45},s.prototype.isLowsec=function(){return this.security<.45&&this.security>0},s.prototype.isNullsec=function(){return this.security<=0&&!this.isWormholeSpace()},s.prototype.isWormholeSpace=function(){var e=this.systemName.match(/^J[0-9-]+$/);return null!==e||"Thera"===this.systemName},s.prototype.isKnownSpace=function(){return!this.isWormholeSpace()},s.prototype.getSecurityPretty=function(){return this.security<0?"0.0":(Math.round(10*this.security)/10).toFixed(1)},s.prototype.getTooltip=function(){return"{0} / {1}".format(this.getSecurityPretty(),this.regionName)};var a={};s.prototype.getGates=function(){return void 0===a[this.id]&&(a[this.id]=this.connectedSystemsIds.map(function(e){return n.getSystem(e)})),a[this.id]},s.prototype.getDistanceFromSystem=function(e){return n.getSystemsDistance(this,e)},s.prototype.getStaticJumpsToSystem=function(e){var t=o.findStaticJumpCount({startSys:this,endSys:e});return t},s.prototype.getSignatures=function(){return i.getSignaturesForSystem(this)},s.prototype.getWormholes=function(){var e=r.getArray().filter(function(e){return e.startSystemId==this.id||e.endSystemId==this.id},this);return e},s.attachRepositories=function(e,t,o){n=e,r=t,i=o},s.attachPathfinder=function(e){o=e},t.exports=s},{}],199:[function(e,t){t.exports=e("./user-repository")},{"./user-repository":200}],200:[function(e,t){"use strict";var n=e("../base"),r=e("moment"),i=function(e,t){this.id=Number(e),this.name=t.name,this.alliance=t.alliance,this.corporation=t.corp?t.corp:"",this.lastLogin=t.lastLogin?t.lastLogin:0,this.routesSearched=t.rs?t.rs:0,this.lastActivity=t.la?t.la:0};i.prototype.getPortraitUrl=function(e){return"https://image.eveonline.com/Character/"+this.id+"_"+e+".jpg"},i.prototype.getLastLoginPretty=function(){return this.lastLogin?r(this.lastLogin).format("llll"):"-"},i.prototype.getLastLoginFuzzy=function(){return this.lastLogin?r(this.lastLogin).fromNow():"-"},i.prototype.getLastActivityPretty=function(){return this.lastActivity?r(this.lastActivity).format("llll"):"-"},i.prototype.getLastActivityFuzzy=function(){return this.lastActivity?r(this.lastActivity).fromNow():"-"};var o=n({path:"users",makeLocal:function(e,t){return new i(e,t)},makeRemote:function(e){return{name:e.name,corp:e.corporation,alliance:e.alliance,lastLogin:e.lastLogin,rs:e.routesSearched,la:e.lastActivity}},pruneRemote:!0}),s={get:o.get,getAll:o.getAll,getArray:o.getArray,create:o.create,update:o.update,"delete":o.delete,changed:o.changed,changedRemoveHandler:o.changedRemoveHandler,initialize:o.initialize};s.getByName=function(e){var t=s.getArray().find(function(t){return t.name===e});return t},t.exports=s},{"../base":173,moment:113}],201:[function(e,t){t.exports=e("./wormhole-class-repository")},{"./wormhole-class-repository":202}],202:[function(e,t){"use strict";function n(){return u.getStaticDataRoot()+l}var r,i,o,s=e("local/fetch-file"),a=e("q"),u=e("../base"),c=e("./wormhole-class"),l="data/wormhole-classes.json",h={};h.initialize=function(){return d()};var d=function(){return o||(o=a.defer(),s(n(),function(e,t,n){if(e)console.error(e),o.reject(e);else{var r=JSON.parse(n);f(r),o.resolve()}})),o.promise},f=function(e){r={},i=[],e.forEach(function(e){var t=new c(e);r[e.className]=t,i.push(t)})};h.getWormholeClasses=function(){return r},h.getWormholeClass=function(e){return e?r[e.toUpperCase()]:void 0},h.searchWormholeClasses=function(e,t,n){if(n){var r=h.getWormholeClass(e);return r?r:p(e,t)}return p(e,t)};var p=function(e,t){e=e.trim().toUpperCase();for(var n=[],r=0;r<i.length;r++){var o=i[r].className.toUpperCase();if(o.startsWith(e)&&n.push(i[r]),n.length>=t)break}return n};t.exports=h},{"../base":173,"./wormhole-class":203,"local/fetch-file":111,q:114}],203:[function(e,t){"use strict";var n=function(e){this.totalMass=e.totalMass,this.maxIndividualMass=e.maxIndividualMass,this.className=e.className,this.massRegeneration=e.massRegeneration,this.maxStableTime=e.maxStableTime};n.FRIGATE_MASS=16e5,n.CRUISER_MASS=15e6,n.BATTLECRUISER_MASS=17e6,n.BATTLESHIP_MASS=1e8,n.CAPITAL_MASS=12e8,n.prototype.getMaxEolTime=function(){return this.maxStableTime/4},n.prototype.getMaxShipSize=function(){var e=this.maxIndividualMass;return e>n.CAPITAL_MASS?"Capital Ship":e>n.BATTLESHIP_MASS?"Battleship":e>n.BATTLECRUISER_MASS?"Battlecruiser":e>n.CRUISER_MASS?"Cruiser":e>n.FRIGATE_MASS?"Frigate":"-"},n.prototype.getMaxNumForMass=function(e){var t=this.maxIndividualMass,n=this.totalMass;return e>t?0:Math.floor(n/e)},n.prototype.getTooltip=function(){var e=this.maxStableTime+"h",t=(this.regen,this.maxIndividualMass,[]);t.push({num:this.getMaxNumForMass(n.CAPITAL_MASS),type:"carriers"}),t.push({num:this.getMaxNumForMass(n.BATTLESHIP_MASS),type:"battleships"}),t.push({num:this.getMaxNumForMass(n.CRUISER_MASS),type:"cruisers"});var r="";return t.forEach(function(e){if(0!==e.num){var t=" / "+e.num+" "+e.type;r+=t}}),"{0}".format(e)+r},n.prototype.getPopoverData=function(){var e={"Max Lifetime":this.maxStableTime+"h","Max Ship Size":this.getMaxShipSize(),"Mass Regen":this.massRegeneration,"Mass Limit":this.totalMass.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),Carriers:this.getMaxNumForMass(n.CAPITAL_MASS),Battleships:this.getMaxNumForMass(n.BATTLESHIP_MASS),Battlecruisers:this.getMaxNumForMass(n.BATTLECRUISER_MASS),Cruisers:this.getMaxNumForMass(n.CRUISER_MASS),Frigates:this.getMaxNumForMass(n.FRIGATE_MASS)};for(var t in e)0==e[t]&&delete e[t];return e},t.exports=n},{}],204:[function(e,t){t.exports=e("./wormhole-repository")},{"./wormhole-repository":205}],205:[function(e,t){"use strict";var n=e("./wormhole"),r=e("../base"),i=e("../signature"),o=e("../wormhole-class"),s=e("../user"),a=e("../system"),u=e("q"),c=r({path:"wormholes",makeLocal:function(e,t){return new n(e,t)},makeRemote:function(e){var t={startSystem:e.startSystemId,endSystem:e.endSystemId,dateFound:e._dateFound?e._dateFound:(new Date).getTime(),lastModified:(new Date).getTime(),lastObserved:e._lastObserved?e._lastObserved:(new Date).getTime(),wormholeClass:e.wormholeClassName?e.wormholeClassName:null,knownDirection:void 0!==e.wormholeClassName,note:e.note&&e.note.length<=140?e.note:null,log:e.log?e.log:{},eol:e.eolTime};return t},pruneRemote:!0}),l={get:c.get,getAll:c.getAll,getArray:c.getArray,create:c.create,update:c.update,changed:c.changed,changedRemoveHandler:c.changedRemoveHandler,supressChanged:c.supressChanged};l.delete=function(e){if(e){var t=e.getStartSignature(),n=e.getEndSignature();t&&i.deleteSignature(t),n&&i.deleteSignature(n),c.delete(e)}},l.initialize=function(){var e=c.initialize(),t=i.initialize(),n=o.initialize(),r=s.initialize(),l=a.initialize();return u.all([e,t,n,r,l])},t.exports=l},{"../base":173,"../signature":193,"../system":196,"../user":199,"../wormhole-class":201,"./wormhole":206,q:114}],206:[function(e,t){"use strict";var n,r,i,o,s,a=e("moment"),u=e("../log-access-helpers"),c=function(e,t){e&&(this.id=e,this.startSystemId=t.startSystem,this.endSystemId=t.endSystem,this.wormholeClassName=t.wormholeClass,this.lastModified=t.lastModified,this.knownDirection=t.knownDirection,this._dateFound=t.dateFound,this._lastObserved=t.lastObserved,this.eolTime=t.eol,this.note=t.note,this.log=t.log?t.log:{})};c.prototype.clone=function(){var e=new c;return e.id=this.id,e.startSystemId=this.startSystemId,e.endSystemId=this.endSystemId,e.wormholeClassName=this.wormholeClassName,e.lastModified=this.lastModified,e.knownDirection=this.knownDirection,e._dateFound=this._dateFound,e._lastObserved=this._lastObserved,e.note=this.note,e.eolTime=this.eolTime,e.log=this.log,e},c.SHORT_NOTE_LENGTH=16,c.prototype.getDateFound=function(){var e=this.getStartSignature(),t=this.getEndSignature(),n=this._dateFound;return e&&(n=Math.min(n,e.dateFound)),t&&(n=Math.min(n,t.dateFound)),n},c.prototype.getLastObserved=function(){var e=this.getStartSignature(),t=this.getEndSignature(),n=this._lastObserved;return e&&(n=Math.max(n,e.lastScanned)),t&&(n=Math.max(n,t.lastScanned)),0!==n?n:void 0},c.prototype.getDateExpires=function(){var e=this.getDateFound()+60*this.getMaxHours()*60*1e3;if(!this.eolTime)return e;var t=this.getWormholeClass(),n=t?t.getMaxEolTime():6;return Math.min(this.eolTime+60*n*60*1e3,e)},c.prototype.isExpired=function(){return this.getDateExpires()<(new Date).getTime()},c.prototype.isEol=function(){return this.eolTime},c.prototype.getEolTimePretty=function(){return this.eolTime?a(this.eolTime).format("HH:mm:ss"):"(not EOL)"},c.prototype.getDateFoundPretty=function(){return a(this.getDateFound()).format("llll")},c.prototype.getDateFoundFuzzy=function(){return a(this.getDateFound()).fromNow()},c.prototype.getDateExpiresPretty=function(){return a(this.getDateExpires()).format("llll")},c.prototype.getDateExpiresFuzzy=function(){return this.getDateExpires()<(new Date).getTime()?"(expired)":a(this.getDateExpires()).fromNow().replace(/^in /,"")},c.prototype.getLastObservedPretty=function(){return a(this.getLastObserved()).format("llll")},c.prototype.getLastObservedFuzzy=function(){return a(this.getLastObserved()).fromNow()},c.prototype.getWormholeClass=function(){return i.getWormholeClass(this.wormholeClassName)},c.prototype.getClassName=function(){return this.wormholeClassName},c.prototype.getClassNamePretty=function(){return this.wormholeClassName?this.wormholeClassName:"-"},c.prototype.getMaxShipSizePretty=function(){return this.getWormholeClass()?this.getWormholeClass().getMaxShipSize():"-"},c.prototype.getMaxHours=function(){var e=this.getWormholeClass();return e?e.maxStableTime:24},c.prototype.hasClass=function(){return!!this.wormholeClassName},c.prototype.getStartSystem=function(){return n.getSystem(this.startSystemId)},c.prototype.getEndSystem=function(){return n.getSystem(this.endSystemId)},c.prototype.getStartSignature=function(){var e=this.getStartSystem().getSignatures();return e.find(function(e){return e.wormholeId===this.id},this)},c.prototype.getEndSignature=function(){var e=this.getEndSystem().getSignatures();return e.find(function(e){return e.wormholeId===this.id},this)},c.prototype.getStaticJumps=function(){var e=s.findStaticJumpCount({startSys:this.getStartSystem(),endSys:this.getEndSystem()});return e},c.prototype.getStaticJumpsNoHighsec=function(){var e=s.findStaticJumpCount({startSys:this.getStartSystem(),endSys:this.getEndSystem(),noHighsec:!0});return e},c.prototype.getClosestEndToHome=function(){var e=siteConfig.homeSystem,t=e.getStaticJumpsToSystem(this.getStartSystem()),n=e.getStaticJumpsToSystem(this.getEndSystem());return null===t&&null===n?null:null===t?this.getEndSystem():null===n?this.getStartSystem():n>t?this.getStartSystem():this.getEndSystem()},c.prototype.getWormholeType=function(){var e=this.getStartSystem().isWormholeSpace(),t=this.getEndSystem().isWormholeSpace();return e&&t?"w-w":e||t?"w-k":"k-k"},c.prototype.isWtoW=function(){return"w-w"===this.getWormholeType()},c.prototype.isWtoK=function(){return"w-k"===this.getWormholeType()},c.prototype.isKtoK=function(){return"k-k"===this.getWormholeType()},c.prototype.isDuplicate=function(e){var t=this.startSystemId,n=this.endSystemId,r=e.startSystemId,i=e.endSystemId;return t===r&&n===i||t===i&&n===r},c.prototype.hasDuplicate=function(){return r.getArray().some(function(e){return e.id===this.id?!1:this.isDuplicate(e)},this)},c.prototype.noteIsShort=function(){return this.note?this.note.length<=c.SHORT_NOTE_LENGTH:!0},c.prototype.noteIsMedium=function(){return!this.noteIsShort()&&this.note.length<=140},c.prototype.noteIsTooLong=function(){return this.note?this.note.length>140:!1},c.prototype.getShortNote=function(){return this.note?this.noteIsShort()?this.note:this.note.substring(0,c.SHORT_NOTE_LENGTH)+"…":null},c.prototype.getCreator=u.getCreator,c.prototype.getLastEditor=u.getLastEditor,c.prototype.getCreatorId=u.getCreatorId,c.prototype.getLastEditorId=u.getLastEditorId,c.attachRepositories=function(e,t,s,a){n=e,r=t,i=s,o=a},c.attachPathfinder=function(e){s=e},t.exports=c},{"../log-access-helpers":184,moment:113}],207:[function(e,t){t.exports=e("./sigma.modified.js")},{"./sigma.modified.js":208}],208:[function(e,t,n){(function(e){"use strict";var t={},n=function(e){var r,i,o,s,a;n.classes.dispatcher.extend(this);var u=this,c=e||{};if("string"==typeof c||c instanceof HTMLElement?c={renderers:[c]}:"[object Array]"===Object.prototype.toString.call(c)&&(c={renderers:c}),s=c.renderers||c.renderer||c.container,c.renderers&&0!==c.renderers.length||("string"==typeof s||s instanceof HTMLElement||"object"==typeof s&&"container"in s)&&(c.renderers=[s]),c.id){if(t[c.id])throw'sigma: Instance "'+c.id+'" already exists.';Object.defineProperty(this,"id",{value:c.id})}else{for(a=0;t[a];)a++;Object.defineProperty(this,"id",{value:""+a})}for(t[this.id]=this,this.settings=new n.classes.configurable(n.settings,c.settings||{}),Object.defineProperty(this,"graph",{value:new n.classes.graph(this.settings),configurable:!0}),Object.defineProperty(this,"middlewares",{value:[],configurable:!0}),Object.defineProperty(this,"cameras",{value:{},configurable:!0}),Object.defineProperty(this,"renderers",{value:{},configurable:!0}),Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:!0}),Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0}),Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}}),Object.defineProperty(this,"events",{value:["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","rightClickNode","rightClickNodes","overNode","overNodes","outNode","outNodes","downNode","downNodes","upNode","upNodes"],configurable:!0}),this._handler=function(e){var t,n={};for(t in e.data)n[t]=e.data[t];n.renderer=e.target,this.dispatchEvent(e.type,n)}.bind(this),o=c.renderers||[],r=0,i=o.length;i>r;r++)this.addRenderer(o[r]);for(o=c.middlewares||[],r=0,i=o.length;i>r;r++)this.middlewares.push("string"==typeof o[r]?n.middlewares[o[r]]:o[r]);"object"==typeof c.graph&&c.graph&&(this.graph.read(c.graph),this.refresh()),window.addEventListener("resize",function(){u.settings&&u.refresh()})};if(n.prototype.addCamera=function(t){var r,i=this;if(!arguments.length){for(t=0;this.cameras[""+t];)t++;t=""+t}if(this.cameras[t])throw'sigma.addCamera: The camera "'+t+'" already exists.';return r=new n.classes.camera(t,this.graph,this.settings),this.cameras[t]=r,r.quadtree=new n.classes.quad,n.classes.edgequad!==e&&(r.edgequadtree=new n.classes.edgequad),r.bind("coordinatesUpdated",function(){i.renderCamera(r,r.isAnimated)}),this.renderersPerCamera[t]=[],r},n.prototype.killCamera=function(e){if(e="string"==typeof e?this.cameras[e]:e,!e)throw"sigma.killCamera: The camera is undefined.";var t,n,r=this.renderersPerCamera[e.id];for(n=r.length,t=n-1;t>=0;t--)this.killRenderer(r[t]);return delete this.renderersPerCamera[e.id],delete this.cameraFrames[e.id],delete this.cameras[e.id],e.kill&&e.kill(),this},n.prototype.addRenderer=function(e){var t,r,i,o,s=e||{};if("string"==typeof s?s={container:document.getElementById(s)}:s instanceof HTMLElement&&(s={container:s}),"string"==typeof s.container&&(s.container=document.getElementById(s.container)),"id"in s)t=s.id;else{for(t=0;this.renderers[""+t];)t++;t=""+t}if(this.renderers[t])throw'sigma.addRenderer: The renderer "'+t+'" already exists.';if(r="function"==typeof s.type?s.type:n.renderers[s.type],r=r||n.renderers.def,i="camera"in s?s.camera instanceof n.classes.camera?s.camera:this.cameras[s.camera]||this.addCamera(s.camera):this.addCamera(),this.cameras[i.id]!==i)throw"sigma.addRenderer: The camera is not properly referenced.";return o=new r(this.graph,i,this.settings,s),this.renderers[t]=o,Object.defineProperty(o,"id",{value:t}),o.bind&&o.bind(["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","clickEdge","clickEdges","doubleClickNode","doubleClickNodes","doubleClickEdge","doubleClickEdges","rightClickNode","rightClickNodes","rightClickEdge","rightClickEdges","overNode","overNodes","overEdge","overEdges","outNode","outNodes","outEdge","outEdges","downNode","downNodes","downEdge","downEdges","upNode","upNodes","upEdge","upEdges"],this._handler),this.renderersPerCamera[i.id].push(o),o},n.prototype.killRenderer=function(e){if(e="string"==typeof e?this.renderers[e]:e,!e)throw"sigma.killRenderer: The renderer is undefined.";var t=this.renderersPerCamera[e.camera.id],n=t.indexOf(e);return n>=0&&t.splice(n,1),e.kill&&e.kill(),delete this.renderers[e.id],this},n.prototype.refresh=function(t){var r,i,o,s,a,u,c=0;for(t=t||{},s=this.middlewares||[],r=0,i=s.length;i>r;r++)s[r].call(this,0===r?"":"tmp"+c+":",r===i-1?"ready:":"tmp"+ ++c+":");for(o in this.cameras)a=this.cameras[o],a.settings("autoRescale")&&this.renderersPerCamera[a.id]&&this.renderersPerCamera[a.id].length?n.middlewares.rescale.call(this,s.length?"ready:":"",a.readPrefix,{width:this.renderersPerCamera[a.id][0].width,height:this.renderersPerCamera[a.id][0].height}):n.middlewares.copy.call(this,s.length?"ready:":"",a.readPrefix),t.skipIndexation||(u=n.utils.getBoundaries(this.graph,a.readPrefix),a.quadtree.index(this.graph.nodes(),{prefix:a.readPrefix,bounds:{x:u.minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}}),a.edgequadtree!==e&&a.settings("drawEdges")&&a.settings("enableEdgeHovering")&&a.edgequadtree.index(this.graph,{prefix:a.readPrefix,bounds:{x:u.minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}}));for(s=Object.keys(this.renderers),r=0,i=s.length;i>r;r++)if(this.renderers[s[r]].process)if(this.settings("skipErrors"))try{this.renderers[s[r]].process()}catch(l){console.log('Warning: The renderer "'+s[r]+'" crashed on ".process()"')}else this.renderers[s[r]].process();return this.render(),this},n.prototype.render=function(){var e,t,n;for(n=Object.keys(this.renderers),e=0,t=n.length;t>e;e++)if(this.settings("skipErrors"))try{this.renderers[n[e]].render()}catch(r){this.settings("verbose")&&console.log('Warning: The renderer "'+n[e]+'" crashed on ".render()"')}else this.renderers[n[e]].render();return this},n.prototype.renderCamera=function(e,t){var n,r,i,o=this;if(t)for(i=this.renderersPerCamera[e.id],n=0,r=i.length;r>n;n++)if(this.settings("skipErrors"))try{i[n].render()}catch(s){this.settings("verbose")&&console.log('Warning: The renderer "'+i[n].id+'" crashed on ".render()"')}else i[n].render();else if(!this.cameraFrames[e.id]){for(i=this.renderersPerCamera[e.id],n=0,r=i.length;r>n;n++)if(this.settings("skipErrors"))try{i[n].render()}catch(s){this.settings("verbose")&&console.log('Warning: The renderer "'+i[n].id+'" crashed on ".render()"')}else i[n].render();this.cameraFrames[e.id]=requestAnimationFrame(function(){delete o.cameraFrames[e.id]})}return this},n.prototype.kill=function(){var e;this.dispatchEvent("kill"),this.graph.kill(),delete this.middlewares;for(e in this.renderers)this.killRenderer(this.renderers[e]);for(e in this.cameras)this.killCamera(this.cameras[e]);delete this.renderers,delete this.cameras;for(e in this)this.hasOwnProperty(e)&&delete this[e];delete t[this.id]},n.instances=function(e){return arguments.length?t[e]:n.utils.extend({},t)},n.version="1.0.3","undefined"!=typeof this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=n}).call(this),function(e){"use strict";function r(e,t){var n,i,o,s;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(e in arguments[0])r(e,arguments[0][e]);else if(arguments.length>1)for(s=Array.isArray(e)?e:e.split(/ /),n=0,i=s.length;n!==i;n+=1)o=s[n],P[o]||(P[o]=[]),P[o].push({handler:t})}function i(e,t){var n,r,i,o,s,a,u=Array.isArray(e)?e:e.split(/ /);if(arguments.length)if(t)for(n=0,r=u.length;n!==r;n+=1){if(a=u[n],P[a]){for(s=[],i=0,o=P[a].length;i!==o;i+=1)P[a][i].handler!==t&&s.push(P[a][i]);P[a]=s}P[a]&&0===P[a].length&&delete P[a]}else for(n=0,r=u.length;n!==r;n+=1)delete P[u[n]];else P=Object.create(null)}function o(e,t){var n,r,i,o,s,a,u=Array.isArray(e)?e:e.split(/ /);for(t=void 0===t?{}:t,n=0,i=u.length;n!==i;n+=1)if(a=u[n],P[a])for(s={type:a,data:t||{}},r=0,o=P[a].length;r!==o;r+=1)try{P[a][r].handler(s)}catch(c){}}function s(){var e,t,n,r,i=!1,o=w(),s=T.shift();if(n=s.job(),o=w()-o,s.done++,s.time+=o,s.currentTime+=o,s.weightTime=s.currentTime/(s.weight||1),s.averageTime=s.time/s.done,r=s.count?s.count<=s.done:!n,!r){for(e=0,t=T.length;t>e;e++)if(T[e].weightTime>s.weightTime){T.splice(e,0,s),i=!0;break}i||T.push(s)}return r?s:null}function a(e){var t=T.length;_[e.id]=e,e.status="running",t&&(e.weightTime=T[t-1].weightTime,e.currentTime=e.weightTime*(e.weight||1)),e.startTime=w(),o("jobStarted",v(e)),T.push(e)}function u(){var e,t,n;for(e in S)t=S[e],t.after?A[e]=t:a(t),delete S[e];for(E=!!T.length;T.length&&w()-x<M.frameDuration;)if(n=s()){l(n.id);for(e in A)A[e].after===n.id&&(a(A[e]),delete A[e])}E?(x=w(),o("enterFrame"),setTimeout(u,0)):o("stop")}function c(e,t){var n,r,i;if(Array.isArray(e)){for(k=!0,n=0,r=e.length;r>n;n++)c(e[n].id,y(e[n],t));k=!1,E||(x=w(),o("start"),u())}else if("object"==typeof e)if("string"==typeof e.id)c(e.id,e);else{k=!0;for(n in e)"function"==typeof e[n]?c(n,y({job:e[n]},t)):c(n,y(e[n],t));k=!1,E||(x=w(),o("start"),u())}else{if("string"!=typeof e)throw new Error("[conrad.addJob] Wrong arguments.");if(d(e))throw new Error('[conrad.addJob] Job with id "'+e+'" already exists.');if("function"==typeof t)i={id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:t};else{if("object"!=typeof t)throw new Error("[conrad.addJob] Wrong arguments.");i=y({id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},t)}S[e]=i,o("jobAdded",v(i)),E||k||(x=w(),o("start"),u())}return this}function l(e){var t,n,r,i,s=!1;if(Array.isArray(e))for(t=0,n=e.length;n>t;t++)l(e[t]);else{if("string"!=typeof e)throw new Error("[conrad.killJob] Wrong arguments.");for(r=[_,A,S],t=0,n=r.length;n>t;t++)e in r[t]&&(i=r[t][e],M.history&&(i.status="done",C.push(i)),o("jobEnded",v(i)),delete r[t][e],"function"==typeof i.end&&i.end(),s=!0);for(r=T,t=0,n=r.length;n>t;t++)if(r[t].id===e){r.splice(t,1);break}if(!s)throw new Error('[conrad.killJob] Job "'+e+'" not found.')}return this}function h(){var e,t=y(S,_,A);if(M.history)for(e in t)t[e].status="done",C.push(t[e]),"function"==typeof t[e].end&&t[e].end();return S={},A={},_={},T=[],E=!1,this}function d(e){var t=S[e]||_[e]||A[e];return t?y(t):null}function f(){var e;if("string"==typeof a1&&1===arguments.length)return M[a1];e="object"==typeof a1&&1===arguments.length?a1||{}:{},"string"==typeof a1&&(e[a1]=a2);for(var t in e)void 0!==e[t]?M[t]=e[t]:delete M[t];return this}function p(){return E}function g(){return C=[],this}function m(e,t){var n,r,i,o,s,a,u;if(!arguments.length){s=[];for(r in S)s.push(S[r]);for(r in A)s.push(A[r]);for(r in _)s.push(_[r]);s=s.concat(C)}if("string"==typeof e)switch(e){case"waiting":s=b(A);break;case"running":s=b(_);break;case"done":s=C;break;default:a=e}if(e instanceof RegExp&&(a=e),!a&&("string"==typeof t||t instanceof RegExp)&&(a=t),a){if(u="string"==typeof a,s instanceof Array)n=s;else if("object"==typeof s){n=[];for(r in s)n=n.concat(s[r])}else{n=[];for(r in S)n.push(S[r]);for(r in A)n.push(A[r]);for(r in _)n.push(_[r]);n=n.concat(C)}for(s=[],i=0,o=n.length;o>i;i++)(u?n[i].id===a:n[i].id.match(a))&&s.push(n[i])}return v(s)}function y(){var e,t,n={},r=arguments.length;for(e=r-1;e>=0;e--)for(t in arguments[e])n[t]=arguments[e][t];return n}function v(e){var t,n,r;if(!e)return e;if(Array.isArray(e))for(t=[],n=0,r=e.length;r>n;n++)t.push(v(e[n]));else if("object"==typeof e){t={};for(n in e)t[n]=v(e[n])}else t=e;return t}function b(e){var t,n=[];for(t in e)n.push(e[t]);return n}function w(){return Date.now?Date.now():(new Date).getTime()}if(e.conrad)throw new Error("conrad already exists");var x,E=!1,S={},_={},T=[],A={},C=[],k=!1,M={frameDuration:20,history:!0},P=Object.create(null);Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var N={hasJob:d,addJob:c,killJob:l,killAll:h,settings:f,getStats:m,isRunning:p,clearHistory:g,bind:r,unbind:i,version:"0.1.0"};"undefined"!=typeof n&&("undefined"!=typeof t&&t.exports&&(n=t.exports=N),n.conrad=N),e.conrad=N}(this);var r=this.sigma,i=this.conrad;r.conrad=i,"undefined"!=typeof n&&("undefined"!=typeof t&&t.exports&&(n=t.exports=r),n.sigma=r),function(e){"use strict";if("undefined"==typeof r)throw"sigma is not declared";var t=this;r.utils=r.utils||{},r.utils.extend=function(){var e,t,n={},r=arguments.length;for(e=r-1;e>=0;e--)for(t in arguments[e])n[t]=arguments[e][t];return n},r.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},r.utils.pkg=function(e){return(e||"").split(".").reduce(function(e,t){return t in e?e[t]:e[t]={}},t)},r.utils.id=function(){var e=0;return function(){return++e}}(),r.utils.floatColor=function(e){var t=[0,0,0];return e.match(/^#/)?(e=(e||"").replace(/^#/,""),t=3===e.length?[parseInt(e.charAt(0)+e.charAt(0),16),parseInt(e.charAt(1)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(2),16)]:[parseInt(e.charAt(0)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(3),16),parseInt(e.charAt(4)+e.charAt(5),16)]):e.match(/^ *rgba? *\(/)&&(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),t=[+e[1],+e[2],+e[3]]),256*t[0]*256+256*t[1]+t[2]},r.utils.zoomTo=function(e,t,n,i,o){var s,a,u,c=e.settings;a=Math.max(c("zoomMin"),Math.min(c("zoomMax"),e.ratio*i)),a!==e.ratio&&(i=a/e.ratio,u={x:t*(1-i)+e.x,y:n*(1-i)+e.y,ratio:a},o&&o.duration?(s=r.misc.animation.killAll(e),o=r.utils.extend(o,{easing:s?"quadraticOut":"quadraticInOut"}),r.misc.animation.camera(e,u,o)):(e.goTo(u),o&&o.onComplete&&o.onComplete()))},r.utils.getQuadraticControlPoint=function(e,t,n,r){return{x:(e+n)/2+(r-t)/4,y:(t+r)/2+(e-n)/4}},r.utils.getPointOnQuadraticCurve=function(e,t,n,r,i,o,s){return{x:Math.pow(1-e,2)*t+2*(1-e)*e*o+Math.pow(e,2)*r,y:Math.pow(1-e,2)*n+2*(1-e)*e*s+Math.pow(e,2)*i}},r.utils.getPointOnBezierCurve=function(e,t,n,r,i,o,s,a,u){var c=Math.pow(1-e,3),l=3*e*Math.pow(1-e,2),h=3*Math.pow(e,2)*(1-e),d=Math.pow(e,3);
return{x:c*t+l*o+h*a+d*r,y:c*n+l*s+h*u+d*i}},r.utils.getSelfLoopControlPoints=function(e,t,n){return{x1:e-7*n,y1:t,x2:e,y2:t+7*n}},r.utils.getDistance=function(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))},r.utils.getCircleIntersection=function(e,t,n,r,i,o){var s,a,u,c,l,h,d,f,p;if(a=r-e,u=i-t,c=Math.sqrt(u*u+a*a),c>n+o)return!1;if(c<Math.abs(n-o))return!1;s=(n*n-o*o+c*c)/(2*c),f=e+a*s/c,p=t+u*s/c,l=Math.sqrt(n*n-s*s),h=-u*(l/c),d=a*(l/c);var g=f+h,m=f-h,y=p+d,v=p-d;return{xi:g,xi_prime:m,yi:y,yi_prime:v}},r.utils.isPointOnSegment=function(e,t,n,i,o,s,a){var u=Math.abs((t-i)*(o-n)-(e-n)*(s-i)),c=r.utils.getDistance(n,i,o,s),l=u/c;return a>l&&Math.min(n,o)<=e&&e<=Math.max(n,o)&&Math.min(i,s)<=t&&t<=Math.max(i,s)},r.utils.isPointOnQuadraticCurve=function(e,t,n,i,o,s,a,u,c){var l=r.utils.getDistance(n,i,o,s);if(Math.abs(e-n)>l||Math.abs(t-i)>l)return!1;for(var h,d=r.utils.getDistance(e,t,n,i),f=r.utils.getDistance(e,t,o,s),p=.5,g=f>d?-.01:.01,m=.001,y=100,v=r.utils.getPointOnQuadraticCurve(p,n,i,o,s,a,u),b=r.utils.getDistance(e,t,v.x,v.y);y-->0&&p>=0&&1>=p&&b>c&&(g>m||-m>g);)h=b,v=r.utils.getPointOnQuadraticCurve(p,n,i,o,s,a,u),b=r.utils.getDistance(e,t,v.x,v.y),b>h?(g=-g/2,p+=g):0>p+g||p+g>1?(g/=2,b=h):p+=g;return c>b},r.utils.isPointOnBezierCurve=function(e,t,n,i,o,s,a,u,c,l,h){var d=r.utils.getDistance(n,i,a,u);if(Math.abs(e-n)>d||Math.abs(t-i)>d)return!1;for(var f,p=r.utils.getDistance(e,t,n,i),g=r.utils.getDistance(e,t,o,s),m=.5,y=g>p?-.01:.01,v=.001,b=100,w=r.utils.getPointOnBezierCurve(m,n,i,o,s,a,u,c,l),x=r.utils.getDistance(e,t,w.x,w.y);b-->0&&m>=0&&1>=m&&x>h&&(y>v||-v>y);)f=x,w=r.utils.getPointOnBezierCurve(m,n,i,o,s,a,u,c,l),x=r.utils.getDistance(e,t,w.x,w.y),x>f?(y=-y/2,m+=y):0>m+y||m+y>1?(y/=2,x=f):m+=y;return h>x},r.utils.getX=function(t){return t.offsetX!==e&&t.offsetX||t.layerX!==e&&t.layerX||t.clientX!==e&&t.clientX},r.utils.getY=function(t){return t.offsetY!==e&&t.offsetY||t.layerY!==e&&t.layerY||t.clientY!==e&&t.clientY},r.utils.getWidth=function(t){var n=t.target.ownerSVGElement?t.target.ownerSVGElement.width:t.target.width;return"number"==typeof n&&n||n!==e&&n.baseVal!==e&&n.baseVal.value},r.utils.getHeight=function(t){var n=t.target.ownerSVGElement?t.target.ownerSVGElement.height:t.target.height;return"number"==typeof n&&n||n!==e&&n.baseVal!==e&&n.baseVal.value},r.utils.getDelta=function(t){return t.wheelDelta!==e&&t.wheelDelta||t.detail!==e&&-t.detail},r.utils.getOffset=function(e){for(var t=0,n=0;e;)n+=parseInt(e.offsetTop),t+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:n,left:t}},r.utils.doubleClick=function(e,t,n){var i,o=0;e._doubleClickHandler=e._doubleClickHandler||{},e._doubleClickHandler[t]=e._doubleClickHandler[t]||[],i=e._doubleClickHandler[t],i.push(function(e){return o++,2===o?(o=0,n(e)):void(1===o&&setTimeout(function(){o=0},r.settings.doubleClickTimeout))}),e.addEventListener(t,i[i.length-1],!1)},r.utils.unbindDoubleClick=function(e,t){for(var n,r=(e._doubleClickHandler||{})[t]||[];n=r.pop();)e.removeEventListener(t,n);delete(e._doubleClickHandler||{})[t]},r.utils.easings=r.utils.easings||{},r.utils.easings.linearNone=function(e){return e},r.utils.easings.quadraticIn=function(e){return e*e},r.utils.easings.quadraticOut=function(e){return e*(2-e)},r.utils.easings.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},r.utils.easings.cubicIn=function(e){return e*e*e},r.utils.easings.cubicOut=function(e){return--e*e*e+1},r.utils.easings.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},r.utils.loadShader=function(e,t,n,r){var i,o=e.createShader(n);return e.shaderSource(o,t),e.compileShader(o),i=e.getShaderParameter(o,e.COMPILE_STATUS),i?o:(r&&r('Error compiling shader "'+o+'":'+e.getShaderInfoLog(o)),e.deleteShader(o),null)},r.utils.loadProgram=function(e,t,n,r,i){var o,s,a=e.createProgram();for(o=0;o<t.length;++o)e.attachShader(a,t[o]);if(n)for(o=0;o<n.length;++o)e.bindAttribLocation(a,locations?locations[o]:o,opt_attribs[o]);return e.linkProgram(a),s=e.getProgramParameter(a,e.LINK_STATUS),s?a:(i&&i("Error in program linking: "+e.getProgramInfoLog(a)),e.deleteProgram(a),null)},r.utils.pkg("sigma.utils.matrices"),r.utils.matrices.translation=function(e,t){return[1,0,0,0,1,0,e,t,1]},r.utils.matrices.rotation=function(e,t){var n=Math.cos(e),r=Math.sin(e);return t?[n,-r,r,n]:[n,-r,0,r,n,0,0,0,1]},r.utils.matrices.scale=function(e,t){return t?[e,0,0,e]:[e,0,0,0,e,0,0,0,1]},r.utils.matrices.multiply=function(e,t,n){var r=n?2:3,i=e[0*r+0],o=e[0*r+1],s=e[0*r+2],a=e[1*r+0],u=e[1*r+1],c=e[1*r+2],l=e[2*r+0],h=e[2*r+1],d=e[2*r+2],f=t[0*r+0],p=t[0*r+1],g=t[0*r+2],m=t[1*r+0],y=t[1*r+1],v=t[1*r+2],b=t[2*r+0],w=t[2*r+1],x=t[2*r+2];return n?[i*f+o*m,i*p+o*y,a*f+u*m,a*p+u*y]:[i*f+o*m+s*b,i*p+o*y+s*w,i*g+o*v+s*x,a*f+u*m+c*b,a*p+u*y+c*w,a*g+u*v+c*x,l*f+h*m+d*b,l*p+h*y+d*w,l*g+h*v+d*x]}}.call(this),function(e){"use strict";var t,n=0,r=["ms","moz","webkit","o"];for(t=0;t<r.length&&!e.requestAnimationFrame;t++)e.requestAnimationFrame=e[r[t]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[r[t]+"CancelAnimationFrame"]||e[r[t]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(t){var r=(new Date).getTime(),i=Math.max(0,16-(r-n)),o=e.setTimeout(function(){t(r+i)},i);return n=r+i,o}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t,n,r=Array.prototype.slice.call(arguments,1),i=this;return t=function(){},n=function(){return i.apply(this instanceof t&&e?this:e,r.concat(Array.prototype.slice.call(arguments)))},t.prototype=this.prototype,n.prototype=new t,n})}(this),function(){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.settings");var e={clone:!0,immutable:!0,verbose:!1,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:!0,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200};r.settings=r.utils.extend(r.settings||{},e)}.call(this),function(){"use strict";var e=function(){Object.defineProperty(this,"_handlers",{value:{}})};e.prototype.bind=function(e,t){var n,r,i,o;if(1===arguments.length&&"object"==typeof arguments[0])for(e in arguments[0])this.bind(e,arguments[0][e]);else{if(2!==arguments.length||"function"!=typeof arguments[1])throw"bind: Wrong arguments.";for(o="string"==typeof e?e.split(" "):e,n=0,r=o.length;n!==r;n+=1)i=o[n],i&&(this._handlers[i]||(this._handlers[i]=[]),this._handlers[i].push({handler:t}))}return this},e.prototype.unbind=function(e,t){var n,r,i,o,s,a,u,c="string"==typeof e?e.split(" "):e;if(!arguments.length){for(s in this._handlers)delete this._handlers[s];return this}if(t)for(n=0,r=c.length;n!==r;n+=1){if(u=c[n],this._handlers[u]){for(a=[],i=0,o=this._handlers[u].length;i!==o;i+=1)this._handlers[u][i].handler!==t&&a.push(this._handlers[u][i]);this._handlers[u]=a}this._handlers[u]&&0===this._handlers[u].length&&delete this._handlers[u]}else for(n=0,r=c.length;n!==r;n+=1)delete this._handlers[c[n]];return this},e.prototype.dispatchEvent=function(e,t){var n,r,i,o,s,a,u,c=this,l="string"==typeof e?e.split(" "):e;for(t=void 0===t?{}:t,n=0,r=l.length;n!==r;n+=1)if(u=l[n],this._handlers[u]){for(a=c.getEvent(u,t),s=[],i=0,o=this._handlers[u].length;i!==o;i+=1)this._handlers[u][i].handler(a),this._handlers[u][i].one||s.push(this._handlers[u][i]);this._handlers[u]=s}return this},e.prototype.getEvent=function(e,t){return{type:e,data:t||{},target:this}},e.extend=function(t,n){var r;for(r in e.prototype)e.prototype.hasOwnProperty(r)&&(t[r]=e.prototype[r]);e.apply(t,n)},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=e):"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=e),n.dispatcher=e):this.dispatcher=e}.call(this),function(){"use strict";var e=function(){var t,n,r={},i=Array.prototype.slice.call(arguments,0),o=function(e,t){var n,s,a,u;if(1===arguments.length&&"string"==typeof e){if(void 0!==r[e])return r[e];for(s=0,a=i.length;a>s;s++)if(void 0!==i[s][e])return i[s][e];return void 0}if("object"==typeof e&&"string"==typeof t)return void 0!==(e||{})[t]?e[t]:o(t);for(n="object"==typeof e&&void 0===t?e:{},"string"==typeof e&&(n[e]=t),s=0,u=Object.keys(n),a=u.length;a>s;s++)r[u[s]]=n[u[s]];return this};for(o.embedObjects=function(){var t=i.concat(r).concat(Array.prototype.splice.call(arguments,0));return e.apply({},t)},t=0,n=arguments.length;n>t;t++)o(arguments[t]);return o};"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=e):"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=e),n.configurable=e):this.configurable=e}.call(this),function(){"use strict";function e(e,t,n){var r=function(){var r,i;for(r in l[e])l[e][r].apply(t,arguments);i=n.apply(t,arguments);for(r in c[e])c[e][r].apply(t,arguments);return i};return r}function i(e){var t;for(t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t];return e}function o(e){return e.filter(function(e){return!e.hide})}var s=Object.create(null),a=Object.create(null),u=Object.create(null),c=Object.create(null),l=Object.create(null),h={immutable:!0,clone:!0},d=function(e){return h[e]},f=function(t){var n,r,i;i={settings:t||d,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)};for(n in u)u[n].call(i);for(n in s)r=e(n,i,s[n]),this[n]=r,i[n]=r};f.addMethod=function(e,t){if("string"!=typeof e||"function"!=typeof t||2!==arguments.length)throw"addMethod: Wrong arguments.";if(s[e]||f[e])throw'The method "'+e+'" already exists.';return s[e]=t,c[e]=Object.create(null),l[e]=Object.create(null),this},f.hasMethod=function(e){return!(!s[e]&&!f[e])},f.attach=function(e,t,n,r){if("string"!=typeof e||"string"!=typeof t||"function"!=typeof n||arguments.length<3||arguments.length>4)throw"attach: Wrong arguments.";var i;if("constructor"===e)i=u;else if(r){if(!l[e])throw'The method "'+e+'" does not exist.';i=l[e]}else{if(!c[e])throw'The method "'+e+'" does not exist.';i=c[e]}if(i[t])throw'A function "'+t+'" is already attached to the method "'+e+'".';return i[t]=n,this},f.attachBefore=function(e,t,n){return this.attach(e,t,n,!0)},f.addIndex=function(e,t){if("string"!=typeof e||Object(t)!==t||2!==arguments.length)throw"addIndex: Wrong arguments.";if(a[e])throw'The index "'+e+'" already exists.';var n;a[e]=t;for(n in t){if("function"!=typeof t[n])throw"The bindings must be functions.";f.attach(n,e,t[n])}return this},f.addMethod("addNode",function(e){if(Object(e)!==e||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The node must have a string or number id.";if(this.nodesIndex[e.id])throw'The node "'+e.id+'" already exists.';var t,n=e.id,r=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&(r[t]=e[t]);else r=e;return this.settings("immutable")?Object.defineProperty(r,"id",{value:n,enumerable:!0}):r.id=n,this.inNeighborsIndex[n]=Object.create(null),this.outNeighborsIndex[n]=Object.create(null),this.allNeighborsIndex[n]=Object.create(null),this.inNeighborsCount[n]=0,this.outNeighborsCount[n]=0,this.allNeighborsCount[n]=0,this.nodesArray.push(r),this.nodesIndex[r.id]=r,this}),f.addMethod("addEdge",function(e){if(Object(e)!==e||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The edge must have a string or number id.";if("string"!=typeof e.source&&"number"!=typeof e.source||!this.nodesIndex[e.source])throw"The edge source must have an existing node id.";if("string"!=typeof e.target&&"number"!=typeof e.target||!this.nodesIndex[e.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[e.id])throw'The edge "'+e.id+'" already exists.';var t,n=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&"source"!==t&&"target"!==t&&(n[t]=e[t]);else n=e;return this.settings("immutable")?(Object.defineProperty(n,"id",{value:e.id,enumerable:!0}),Object.defineProperty(n,"source",{value:e.source,enumerable:!0}),Object.defineProperty(n,"target",{value:e.target,enumerable:!0})):(n.id=e.id,n.source=e.source,n.target=e.target),this.edgesArray.push(n),this.edgesIndex[n.id]=n,this.inNeighborsIndex[n.target][n.source]||(this.inNeighborsIndex[n.target][n.source]=Object.create(null)),this.inNeighborsIndex[n.target][n.source][n.id]=n,this.outNeighborsIndex[n.source][n.target]||(this.outNeighborsIndex[n.source][n.target]=Object.create(null)),this.outNeighborsIndex[n.source][n.target][n.id]=n,this.allNeighborsIndex[n.source][n.target]||(this.allNeighborsIndex[n.source][n.target]=Object.create(null)),this.allNeighborsIndex[n.source][n.target][n.id]=n,n.target!==n.source&&(this.allNeighborsIndex[n.target][n.source]||(this.allNeighborsIndex[n.target][n.source]=Object.create(null)),this.allNeighborsIndex[n.target][n.source][n.id]=n),this.inNeighborsCount[n.target]++,this.outNeighborsCount[n.source]++,this.allNeighborsCount[n.target]++,this.allNeighborsCount[n.source]++,this}),f.addMethod("dropNode",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[e])throw'The node "'+e+'" does not exist.';var t,n,r;for(delete this.nodesIndex[e],t=0,r=this.nodesArray.length;r>t;t++)if(this.nodesArray[t].id===e){this.nodesArray.splice(t,1);break}for(t=this.edgesArray.length-1;t>=0;t--)(this.edgesArray[t].source===e||this.edgesArray[t].target===e)&&this.dropEdge(this.edgesArray[t].id);delete this.inNeighborsIndex[e],delete this.outNeighborsIndex[e],delete this.allNeighborsIndex[e],delete this.inNeighborsCount[e],delete this.outNeighborsCount[e],delete this.allNeighborsCount[e];for(n in this.nodesIndex)delete this.inNeighborsIndex[n][e],delete this.outNeighborsIndex[n][e],delete this.allNeighborsIndex[n][e];return this}),f.addMethod("dropEdge",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[e])throw'The edge "'+e+'" does not exist.';var t,n,r;for(r=this.edgesIndex[e],delete this.edgesIndex[e],t=0,n=this.edgesArray.length;n>t;t++)if(this.edgesArray[t].id===e){this.edgesArray.splice(t,1);break}return delete this.inNeighborsIndex[r.target][r.source][r.id],Object.keys(this.inNeighborsIndex[r.target][r.source]).length||delete this.inNeighborsIndex[r.target][r.source],delete this.outNeighborsIndex[r.source][r.target][r.id],Object.keys(this.outNeighborsIndex[r.source][r.target]).length||delete this.outNeighborsIndex[r.source][r.target],delete this.allNeighborsIndex[r.source][r.target][r.id],Object.keys(this.allNeighborsIndex[r.source][r.target]).length||delete this.allNeighborsIndex[r.source][r.target],r.target!==r.source&&(delete this.allNeighborsIndex[r.target][r.source][r.id],Object.keys(this.allNeighborsIndex[r.target][r.source]).length||delete this.allNeighborsIndex[r.target][r.source]),this.inNeighborsCount[r.target]--,this.outNeighborsCount[r.source]--,this.allNeighborsCount[r.source]--,this.allNeighborsCount[r.target]--,this}),f.addMethod("kill",function(){this.nodesArray.length=0,this.edgesArray.length=0,delete this.nodesArray,delete this.edgesArray,delete this.nodesIndex,delete this.edgesIndex,delete this.inNeighborsIndex,delete this.outNeighborsIndex,delete this.allNeighborsIndex,delete this.inNeighborsCount,delete this.outNeighborsCount,delete this.allNeighborsCount}),f.addMethod("clear",function(){return this.nodesArray.length=0,this.edgesArray.length=0,i(this.nodesIndex),i(this.edgesIndex),i(this.nodesIndex),i(this.inNeighborsIndex),i(this.outNeighborsIndex),i(this.allNeighborsIndex),i(this.inNeighborsCount),i(this.outNeighborsCount),i(this.allNeighborsCount),this}),f.addMethod("read",function(e){var t,n,r;for(n=e.nodes||[],t=0,r=n.length;r>t;t++)this.addNode(n[t]);for(n=e.edges||[],t=0,r=n.length;r>t;t++)this.addEdge(n[t]);return this}),f.addMethod("nodes",function(e){if(!arguments.length)return o(this.nodesArray);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.nodesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,n,r=[];for(t=0,n=e.length;n>t;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"nodes: Wrong arguments.";r.push(this.nodesIndex[e[t]])}return r}throw"nodes: Wrong arguments."}),f.addMethod("degree",function(e,t){if(t={"in":this.inNeighborsCount,out:this.outNeighborsCount}[t||""]||this.allNeighborsCount,"string"==typeof e||"number"==typeof e)return t[e];if("[object Array]"===Object.prototype.toString.call(e)){var n,r,i=[];for(n=0,r=e.length;r>n;n++){if("string"!=typeof e[n]&&"number"!=typeof e[n])throw"degree: Wrong arguments.";i.push(t[e[n]])}return i}throw"degree: Wrong arguments."}),f.addMethod("edges",function(e){if(!arguments.length)return o(this.edgesArray);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.edgesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,n,r=[];for(t=0,n=e.length;n>t;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"edges: Wrong arguments.";r.push(this.edgesIndex[e[t]])}return r}throw"edges: Wrong arguments."}),"undefined"!=typeof r?(r.classes=r.classes||Object.create(null),r.classes.graph=f):"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=f),n.graph=f):this.graph=f}.call(this),function(e){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.classes"),r.classes.camera=function(e,t,n,i){r.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:t}),Object.defineProperty(this,"id",{value:e}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+e+":"}),Object.defineProperty(this,"prefix",{value:"cam"+e+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof i&&i?n.embedObject(i):n},r.classes.camera.prototype.goTo=function(t){if(!this.settings("enableCamera"))return this;this.bounds||(this.bounds=r.utils.getBoundaries(this.graph,"read_cam0:",!0)),t.x<this.bounds.minX&&(t.x=this.bounds.minX),t.y<this.bounds.minY&&(t.y=this.bounds.minY),t.x>this.bounds.maxX&&(t.x=this.bounds.maxX),t.y>this.bounds.maxY&&(t.y=this.bounds.maxY);var n,i,o=t||{},s=["x","y","ratio","angle"];for(n=0,i=s.length;i>n;n++)if(o[s[n]]!==e){if("number"!=typeof o[s[n]]||isNaN(o[s[n]]))throw'Value for "'+s[n]+'" is not a number.';this[s[n]]=o[s[n]]}return this.dispatchEvent("coordinatesUpdated"),this},r.classes.camera.prototype.applyView=function(t,n,r){r=r||{},n=n!==e?n:this.prefix,t=t!==e?t:this.readPrefix;var i,o,s,a=r.nodes||this.graph.nodes(),u=r.edges||this.graph.edges(),c=Math.cos(this.angle),l=Math.sin(this.angle);for(i=0,o=a.length;o>i;i++)s=a[i],s[n+"x"]=(((s[t+"x"]||0)-this.x)*c+((s[t+"y"]||0)-this.y)*l)/this.ratio+(r.width||0)/2,s[n+"y"]=(((s[t+"y"]||0)-this.y)*c-((s[t+"x"]||0)-this.x)*l)/this.ratio+(r.height||0)/2,s[n+"size"]=(s[t+"size"]||0)/Math.pow(this.ratio,this.settings("nodesPowRatio"));for(i=0,o=u.length;o>i;i++)u[i][n+"size"]=(u[i][t+"size"]||0)/Math.pow(this.ratio,this.settings("edgesPowRatio"));return this},r.classes.camera.prototype.graphPosition=function(e,t,n){var r=0,i=0,o=Math.cos(this.angle),s=Math.sin(this.angle);return n||(r=-(this.x*o+this.y*s)/this.ratio,i=-(this.y*o-this.x*s)/this.ratio),{x:(e*o+t*s)/this.ratio+r,y:(t*o-e*s)/this.ratio+i}},r.classes.camera.prototype.cameraPosition=function(e,t,n){var r=0,i=0,o=Math.cos(this.angle),s=Math.sin(this.angle);return n||(r=-(this.x*o+this.y*s)/this.ratio,i=-(this.y*o-this.x*s)/this.ratio),{x:((e-r)*o-(t-i)*s)*this.ratio,y:((t-i)*o+(e-r)*s)*this.ratio}},r.classes.camera.prototype.getMatrix=function(){var e=r.utils.matrices.scale(1/this.ratio),t=r.utils.matrices.rotation(this.angle),n=r.utils.matrices.translation(-this.x,-this.y),i=r.utils.matrices.multiply(n,r.utils.matrices.multiply(t,e));return i},r.classes.camera.prototype.getRectangle=function(e,t){var n=this.cameraPosition(e,0,!0),r=this.cameraPosition(0,t,!0),i=this.cameraPosition(e/2,t/2,!0),o=this.cameraPosition(e/4,0,!0).x,s=this.cameraPosition(0,t/4,!0).y;return{x1:this.x-i.x-o,y1:this.y-i.y-s,x2:this.x-i.x+o+n.x,y2:this.y-i.y-s+n.y,height:Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y+2*s,2))}}}.call(this),function(e){"use strict";function r(e,t){var n=t.x+t.width/2,r=t.y+t.height/2,i=e.y<r,o=e.x<n;return i?o?0:1:o?2:3}function i(e,t){for(var n=[],r=0;4>r;r++)e.x2>=t[r][0].x&&e.x1<=t[r][1].x&&e.y1+e.height>=t[r][0].y&&e.y1<=t[r][2].y&&n.push(r);return n}function o(e,t){for(var n=[],r=0;4>r;r++)h.collision(e,t[r])&&n.push(r);return n}function s(e,t){var n,r,i=t.level+1,o=Math.round(t.bounds.width/2),s=Math.round(t.bounds.height/2),a=Math.round(t.bounds.x),u=Math.round(t.bounds.y);switch(e){case 0:n=a,r=u;break;case 1:n=a+o,r=u;break;case 2:n=a,r=u+s;break;case 3:n=a+o,r=u+s}return l({x:n,y:r,width:o,height:s},i,t.maxElements,t.maxLevel)}function a(t,n,r){if(r.level<r.maxLevel)for(var o=i(n,r.corners),u=0,c=o.length;c>u;u++)r.nodes[o[u]]===e&&(r.nodes[o[u]]=s(o[u],r)),a(t,n,r.nodes[o[u]]);else r.elements.push(t)}function u(t,n){if(n.level<n.maxLevel){var i=r(t,n.bounds);return n.nodes[i]!==e?u(t,n.nodes[i]):[]}return n.elements}function c(t,n,r,i){if(i=i||{},n.level<n.maxLevel)for(var o=r(t,n.corners),s=0,a=o.length;a>s;s++)n.nodes[o[s]]!==e&&c(t,n.nodes[o[s]],r,i);else for(var u=0,l=n.elements.length;l>u;u++)i[n.elements[u].id]===e&&(i[n.elements[u].id]=n.elements[u]);return i}function l(e,t,n,r){return{level:t||0,bounds:e,corners:h.splitSquare(e),maxElements:n||20,maxLevel:r||4,elements:[],nodes:[]}}var h={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),n=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:n.x,y:n.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var n=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:n*t.x,y:n*t.y}},axisCollision:function(e,t,n){for(var r=[],i=[],o=0;4>o;o++){var s=this.projection(t[o],e),a=this.projection(n[o],e);r.push(s.x*e.x+s.y*e.y),i.push(a.x*e.x+a.y*e.y)}var u=Math.max.apply(Math,r),c=Math.max.apply(Math,i),l=Math.min.apply(Math,r),h=Math.min.apply(Math,i);return u>=h&&c>=l},collision:function(e,t){for(var n=this.axis(e,t),r=!0,i=0;4>i;i++)r=r&&this.axisCollision(n[i],e,t);return r}},d=function(){this._geom=h,this._tree=null,this._cache={query:!1,result:!1}};d.prototype.index=function(e,t){if(!t.bounds)throw"sigma.classes.quad.index: bounds information not given.";var n=t.prefix||"";this._tree=l(t.bounds,0,t.maxElements,t.maxLevel);for(var r=0,i=e.length;i>r;r++)a(e[r],h.pointToSquare({x:e[r][n+"x"],y:e[r][n+"y"],size:e[r][n+"size"]}),this._tree);return this._cache={query:!1,result:!1},this._tree},d.prototype.point=function(e,t){return this._tree?u({x:e,y:t},this._tree)||[]:[]},d.prototype.area=function(e){var t,n,r=JSON.stringify(e);if(this._cache.query===r)return this._cache.result;h.isAxisAligned(e)?(t=i,n=h.axisAlignedTopPoints(e)):(t=o,n=h.rectangleCorners(e));var s=this._tree?c(n,this._tree,t):[],a=[];for(var u in s)a.push(s[u]);return this._cache.query=r,this._cache.result=a,a},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=d):"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=d),n.quad=d):this.quad=d}.call(this),function(e){"use strict";function i(e,t){var n=t.x+t.width/2,r=t.y+t.height/2,i=e.y<r,o=e.x<n;return i?o?0:1:o?2:3}function o(e,t){for(var n=[],r=0;4>r;r++)e.x2>=t[r][0].x&&e.x1<=t[r][1].x&&e.y1+e.height>=t[r][0].y&&e.y1<=t[r][2].y&&n.push(r);return n}function s(e,t){for(var n=[],r=0;4>r;r++)d.collision(e,t[r])&&n.push(r);return n}function a(e,t){var n,r,i=t.level+1,o=Math.round(t.bounds.width/2),s=Math.round(t.bounds.height/2),a=Math.round(t.bounds.x),u=Math.round(t.bounds.y);switch(e){case 0:n=a,r=u;break;case 1:n=a+o,r=u;break;case 2:n=a,r=u+s;break;case 3:n=a+o,r=u+s}return h({x:n,y:r,width:o,height:s},i,t.maxElements,t.maxLevel)}function u(t,n,r){if(r.level<r.maxLevel)for(var i=o(n,r.corners),s=0,c=i.length;c>s;s++)r.nodes[i[s]]===e&&(r.nodes[i[s]]=a(i[s],r)),u(t,n,r.nodes[i[s]]);else r.elements.push(t)}function c(t,n){if(n.level<n.maxLevel){var r=i(t,n.bounds);return n.nodes[r]!==e?c(t,n.nodes[r]):[]}return n.elements}function l(t,n,r,i){if(i=i||{},n.level<n.maxLevel)for(var o=r(t,n.corners),s=0,a=o.length;a>s;s++)n.nodes[o[s]]!==e&&l(t,n.nodes[o[s]],r,i);else for(var u=0,c=n.elements.length;c>u;u++)i[n.elements[u].id]===e&&(i[n.elements[u].id]=n.elements[u]);return i}function h(e,t,n,r){return{level:t||0,bounds:e,corners:d.splitSquare(e),maxElements:n||40,maxLevel:r||8,elements:[],nodes:[]}}var d={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},lineToSquare:function(e){return e.y1<e.y2?e.x1<e.x2?{x1:e.x1-e.size,y1:e.y1-e.size,x2:e.x2+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:{x1:e.x2-e.size,y1:e.y1-e.size,x2:e.x1+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:e.x1<e.x2?{x1:e.x1-e.size,y1:e.y2-e.size,x2:e.x2+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}:{x1:e.x2-e.size,y1:e.y2-e.size,x2:e.x1+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}},quadraticCurveToSquare:function(e,t){var n=r.utils.getPointOnQuadraticCurve(.5,e.x1,e.y1,e.x2,e.y2,t.x,t.y),i=Math.min(e.x1,e.x2,n.x),o=Math.max(e.x1,e.x2,n.x),s=Math.min(e.y1,e.y2,n.y),a=Math.max(e.y1,e.y2,n.y);return{x1:i-e.size,y1:s-e.size,x2:o+e.size,y2:s-e.size,height:a-s+2*e.size}},selfLoopToSquare:function(e){var t=r.utils.getSelfLoopControlPoints(e.x,e.y,e.size),n=Math.min(e.x,t.x1,t.x2),i=Math.max(e.x,t.x1,t.x2),o=Math.min(e.y,t.y1,t.y2),s=Math.max(e.y,t.y1,t.y2);return{x1:n-e.size,y1:o-e.size,x2:i+e.size,y2:o-e.size,height:s-o+2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),n=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:n.x,y:n.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var n=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:n*t.x,y:n*t.y}},axisCollision:function(e,t,n){for(var r=[],i=[],o=0;4>o;o++){var s=this.projection(t[o],e),a=this.projection(n[o],e);r.push(s.x*e.x+s.y*e.y),i.push(a.x*e.x+a.y*e.y)}var u=Math.max.apply(Math,r),c=Math.max.apply(Math,i),l=Math.min.apply(Math,r),h=Math.min.apply(Math,i);return u>=h&&c>=l},collision:function(e,t){for(var n=this.axis(e,t),r=!0,i=0;4>i;i++)r=r&&this.axisCollision(n[i],e,t);return r}},f=function(){this._geom=d,this._tree=null,this._cache={query:!1,result:!1},this._enabled=!0};f.prototype.index=function(e,t){if(!this._enabled)return this._tree;if(!t.bounds)throw"sigma.classes.edgequad.index: bounds information not given.";var n,i,o,s,a,c=t.prefix||"";this._tree=h(t.bounds,0,t.maxElements,t.maxLevel);for(var l=e.edges(),f=0,p=l.length;p>f;f++)i=e.nodes(l[f].source),o=e.nodes(l[f].target),a={x1:i[c+"x"],y1:i[c+"y"],x2:o[c+"x"],y2:o[c+"y"],size:l[f][c+"size"]||0},"curve"===l[f].type||"curvedArrow"===l[f].type?i.id===o.id?(s={x:i[c+"x"],y:i[c+"y"],size:i[c+"size"]||0},u(l[f],d.selfLoopToSquare(s),this._tree)):(n=r.utils.getQuadraticControlPoint(a.x1,a.y1,a.x2,a.y2),u(l[f],d.quadraticCurveToSquare(a,n),this._tree)):u(l[f],d.lineToSquare(a),this._tree);return this._cache={query:!1,result:!1},this._tree},f.prototype.point=function(e,t){return this._enabled&&this._tree?c({x:e,y:t},this._tree)||[]:[]},f.prototype.area=function(e){if(!this._enabled)return[];var t,n,r=JSON.stringify(e);if(this._cache.query===r)return this._cache.result;d.isAxisAligned(e)?(t=o,n=d.axisAlignedTopPoints(e)):(t=s,n=d.rectangleCorners(e));var i=this._tree?l(n,this._tree,t):[],a=[];for(var u in i)a.push(i[u]);return this._cache.query=r,this._cache.result=a,a},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.edgequad=f):"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=f),n.edgequad=f):this.edgequad=f
}.call(this),function(){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.captors"),r.captors.mouse=function(e,t,n){function i(e){var t,n,i;return T("mouseEnabled")&&E.dispatchEvent("mousemove",{x:r.utils.getX(e)-r.utils.getWidth(e)/2,y:r.utils.getY(e)-r.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),T("mouseEnabled")&&y?(v=!0,b=!0,x&&clearTimeout(x),x=setTimeout(function(){v=!1},T("dragTimeout")),r.misc.animation.killAll(_),_.isMoving=!0,i=_.cameraPosition(r.utils.getX(e)-g,r.utils.getY(e)-m,!0),t=h-i.x,n=d-i.y,(t!==_.x||n!==_.y)&&(f=_.x,p=_.y,_.goTo({x:t,y:n})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}function o(e){if(T("mouseEnabled")&&y){y=!1,x&&clearTimeout(x),_.isMoving=!1;var t=r.utils.getX(e),n=r.utils.getY(e);v?(r.misc.animation.killAll(_),r.misc.animation.camera(_,{x:_.x+T("mouseInertiaRatio")*(_.x-f),y:_.y+T("mouseInertiaRatio")*(_.y-p)},{easing:"quadraticOut",duration:T("mouseInertiaDuration")})):(g!==t||m!==n)&&_.goTo({x:_.x,y:_.y}),E.dispatchEvent("mouseup",{x:t-r.utils.getWidth(e)/2,y:n-r.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),v=!1}}function s(e){if(T("mouseEnabled"))switch(h=_.x,d=_.y,f=_.x,p=_.y,g=r.utils.getX(e),m=r.utils.getY(e),b=!1,w=(new Date).getTime(),e.which){case 2:break;case 3:E.dispatchEvent("rightclick",{x:g-r.utils.getWidth(e)/2,y:m-r.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey});break;default:y=!0,E.dispatchEvent("mousedown",{x:g-r.utils.getWidth(e)/2,y:m-r.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey})}}function a(){T("mouseEnabled")&&E.dispatchEvent("mouseout")}function u(e){return T("mouseEnabled")&&E.dispatchEvent("click",{x:r.utils.getX(e)-r.utils.getWidth(e)/2,y:r.utils.getY(e)-r.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey,isDragging:(new Date).getTime()-w>100&&b}),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function c(e){var t,n,i;return T("mouseEnabled")?(n=1/T("doubleClickZoomingRatio"),E.dispatchEvent("doubleclick",{x:g-r.utils.getWidth(e)/2,y:m-r.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),T("doubleClickEnabled")&&(t=_.cameraPosition(r.utils.getX(e)-r.utils.getWidth(e)/2,r.utils.getY(e)-r.utils.getHeight(e)/2,!0),i={duration:T("doubleClickZoomDuration")},r.utils.zoomTo(_,t.x,t.y,n,i)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}function l(e){var t,n,i;return T("mouseEnabled")&&T("mouseWheelEnabled")?(n=r.utils.getDelta(e)>0?1/T("zoomingRatio"):T("zoomingRatio"),t=_.cameraPosition(r.utils.getX(e)-r.utils.getWidth(e)/2,r.utils.getY(e)-r.utils.getHeight(e)/2,!0),i={duration:T("mouseZoomDuration")},r.utils.zoomTo(_,t.x,t.y,n,i),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}var h,d,f,p,g,m,y,v,b,w,x,E=this,S=e,_=t,T=n;r.classes.dispatcher.extend(this),r.utils.doubleClick(S,"click",c),S.addEventListener("DOMMouseScroll",l,!1),S.addEventListener("mousewheel",l,!1),S.addEventListener("mousemove",i,!1),S.addEventListener("mousedown",s,!1),S.addEventListener("click",u,!1),S.addEventListener("mouseout",a,!1),document.addEventListener("mouseup",o,!1),this.kill=function(){r.utils.unbindDoubleClick(S,"click"),S.removeEventListener("DOMMouseScroll",l),S.removeEventListener("mousewheel",l),S.removeEventListener("mousemove",i),S.removeEventListener("mousedown",s),S.removeEventListener("click",u),S.removeEventListener("mouseout",a),document.removeEventListener("mouseup",o)}}}.call(this),function(){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.captors"),r.captors.touch=function(e,t,n){function i(e){var t=r.utils.getOffset(k);return{x:e.pageX-t.left,y:e.pageY-t.top}}function o(e){if(P("touchEnabled")){var t,n,r,o,s,a;switch(N=e.touches,N.length){case 1:M.isMoving=!0,S=1,c=M.x,l=M.y,f=M.x,p=M.y,s=i(N[0]),y=s.x,v=s.y;break;case 2:return M.isMoving=!0,S=2,s=i(N[0]),a=i(N[1]),t=s.x,r=s.y,n=a.x,o=a.y,f=M.x,p=M.y,h=M.angle,d=M.ratio,c=M.x,l=M.y,y=t,v=r,b=n,w=o,x=Math.atan2(w-v,b-y),E=Math.sqrt(Math.pow(w-v,2)+Math.pow(b-y,2)),e.preventDefault(),!1}}}function s(e){if(P("touchEnabled")){N=e.touches;var t=P("touchInertiaRatio");switch(A&&(_=!1,clearTimeout(A)),S){case 2:if(1===e.touches.length){o(e),e.preventDefault();break}case 1:M.isMoving=!1,C.dispatchEvent("stopDrag"),_&&(T=!1,r.misc.animation.camera(M,{x:M.x+t*(M.x-f),y:M.y+t*(M.y-p)},{easing:"quadraticOut",duration:P("touchInertiaDuration")})),_=!1,S=0}}}function a(e){if(!T&&P("touchEnabled")){var t,n,o,s,a,u,k,L,I,D,O,j,R,F,U,z,B;switch(N=e.touches,_=!0,A&&clearTimeout(A),A=setTimeout(function(){_=!1},P("dragTimeout")),S){case 1:L=i(N[0]),t=L.x,o=L.y,D=M.cameraPosition(t-y,o-v,!0),F=c-D.x,U=l-D.y,(F!==M.x||U!==M.y)&&(f=M.x,p=M.y,M.goTo({x:F,y:U}),C.dispatchEvent("mousemove",{x:L.x-r.utils.getWidth(e)/2,y:L.y-r.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),C.dispatchEvent("drag"));break;case 2:L=i(N[0]),I=i(N[1]),t=L.x,o=L.y,n=I.x,s=I.y,O=M.cameraPosition((y+b)/2-r.utils.getWidth(e)/2,(v+w)/2-r.utils.getHeight(e)/2,!0),k=M.cameraPosition((t+n)/2-r.utils.getWidth(e)/2,(o+s)/2-r.utils.getHeight(e)/2,!0),j=Math.atan2(s-o,n-t)-x,R=Math.sqrt(Math.pow(s-o,2)+Math.pow(n-t,2))/E,t=O.x,o=O.y,z=d/R,t*=R,o*=R,B=h-j,a=Math.cos(-j),u=Math.sin(-j),n=t*a+o*u,s=o*a-t*u,t=n,o=s,F=t-k.x+c,U=o-k.y+l,(z!==M.ratio||B!==M.angle||F!==M.x||U!==M.y)&&(f=M.x,p=M.y,g=M.angle,m=M.ratio,M.goTo({x:F,y:U,angle:B,ratio:z}),C.dispatchEvent("drag"))}return e.preventDefault(),!1}}function u(e){var t,n,o;return e.touches&&1===e.touches.length&&P("touchEnabled")?(T=!0,n=1/P("doubleClickZoomingRatio"),t=i(e.touches[0]),C.dispatchEvent("doubleclick",{x:t.x-r.utils.getWidth(e)/2,y:t.y-r.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),P("doubleClickEnabled")&&(t=M.cameraPosition(t.x-r.utils.getWidth(e)/2,t.y-r.utils.getHeight(e)/2,!0),o={duration:P("doubleClickZoomDuration"),onComplete:function(){T=!1}},r.utils.zoomTo(M,t.x,t.y,n,o)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}var c,l,h,d,f,p,g,m,y,v,b,w,x,E,S,_,T,A,C=this,k=e,M=t,P=n,N=[];r.classes.dispatcher.extend(this),r.utils.doubleClick(k,"touchstart",u),k.addEventListener("touchstart",o,!1),k.addEventListener("touchend",s,!1),k.addEventListener("touchcancel",s,!1),k.addEventListener("touchleave",s,!1),k.addEventListener("touchmove",a,!1),this.kill=function(){r.utils.unbindDoubleClick(k,"touchstart"),k.addEventListener("touchstart",o),k.addEventListener("touchend",s),k.addEventListener("touchcancel",s),k.addEventListener("touchleave",s),k.addEventListener("touchmove",a)}}}.call(this),function(e){"use strict";if("undefined"==typeof r)throw"sigma is not declared";if("undefined"==typeof i)throw"conrad is not declared";r.utils.pkg("sigma.renderers"),r.renderers.canvas=function(e,t,n,i){if("object"!=typeof i)throw"sigma.renderers.canvas: Wrong arguments.";if(!(i.container instanceof HTMLElement))throw"Container not found.";var o,s,a,u;for(r.classes.dispatcher.extend(this),Object.defineProperty(this,"conradId",{value:r.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=i,this.container=this.options.container,this.settings="object"==typeof i.settings&&i.settings?n.embedObjects(i.settings):n,this.nodesOnScreen=[],this.edgesOnScreen=[],this.jobs={},this.options.prefix="renderer"+this.conradId+":",this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene"),this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene,this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],a=this.options.captors||[r.captors.mouse,r.captors.touch],o=0,s=a.length;s>o;o++)u="function"==typeof a[o]?a[o]:r.captors[a[o]],this.captors.push(new u(this.domElements.mouse,this.camera,this.settings));r.misc.bindEvents.call(this,this.options.prefix),r.misc.drawHovers.call(this,this.options.prefix),this.resize(!1)},r.renderers.canvas.prototype.render=function(t){t=t||{};var n,o,s,a,u,c,l,h,d,f,p,g,m,y={},v=this.graph,b=this.graph.nodes,w=(this.options.prefix||"",this.settings(t,"drawEdges")),x=this.settings(t,"drawNodes"),E=this.settings(t,"drawLabels"),S=this.settings(t,"drawEdgeLabels"),_=this.settings.embedObjects(t,{prefix:this.options.prefix});this.resize(!1),this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(w=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.clear();for(s in this.jobs)i.hasJob(s)&&i.killJob(s);for(this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),n=this.nodesOnScreen,o=0,a=n.length;a>o;o++)y[n[o].id]=n[o];if(w){for(n=v.edges(),o=0,a=n.length;a>o;o++)u=n[o],!y[u.source]&&!y[u.target]||u.hidden||b(u.source).hidden||b(u.target).hidden||this.edgesOnScreen.push(u);if(this.settings(t,"batchEdgesDrawing"))c="edges_"+this.conradId,g=_("canvasEdgesBatchSize"),f=this.edgesOnScreen,a=f.length,d=0,l=Math.min(f.length,d+g),h=function(){for(m=this.contexts.edges.globalCompositeOperation,this.contexts.edges.globalCompositeOperation="destination-over",p=r.canvas.edges,o=d;l>o;o++)u=f[o],(p[u.type||this.settings(t,"defaultEdgeType")]||p.def)(u,v.nodes(u.source),v.nodes(u.target),this.contexts.edges,_);if(S)for(p=r.canvas.edges.labels,o=d;l>o;o++)u=f[o],u.hidden||(p[u.type||this.settings(t,"defaultEdgeType")]||p.def)(u,v.nodes(u.source),v.nodes(u.target),this.contexts.labels,_);return this.contexts.edges.globalCompositeOperation=m,l===f.length?(delete this.jobs[c],!1):(d=l+1,l=Math.min(f.length,d+g),!0)},this.jobs[c]=h,i.addJob(c,h.bind(this));else{for(p=r.canvas.edges,n=this.edgesOnScreen,o=0,a=n.length;a>o;o++)u=n[o],(p[u.type||this.settings(t,"defaultEdgeType")]||p.def)(u,v.nodes(u.source),v.nodes(u.target),this.contexts.edges,_);if(S)for(p=r.canvas.edges.labels,n=this.edgesOnScreen,o=0,a=n.length;a>o;o++)n[o].hidden||(p[n[o].type||this.settings(t,"defaultEdgeType")]||p.def)(n[o],v.nodes(n[o].source),v.nodes(n[o].target),this.contexts.labels,_)}}if(x)for(p=r.canvas.nodes,n=this.nodesOnScreen,o=0,a=n.length;a>o;o++)n[o].hidden||(p[n[o].type||this.settings(t,"defaultNodeType")]||p.def)(n[o],this.contexts.nodes,_);if(E)for(p=r.canvas.labels,n=this.nodesOnScreen,o=0,a=n.length;a>o;o++)n[o].hidden||(p[n[o].type||this.settings(t,"defaultNodeType")]||p.def)(n[o],this.contexts.labels,_);return this.dispatchEvent("render"),this},r.renderers.canvas.prototype.initDOM=function(e,t){var n=document.createElement(e);n.style.position="absolute",n.setAttribute("class","sigma-"+t),this.domElements[t]=n,this.container.appendChild(n),"canvas"===e.toLowerCase()&&(this.contexts[t]=n.getContext("2d"))},r.renderers.canvas.prototype.resize=function(t,n){var r,i=this.width,o=this.height,s=1;if(t!==e&&n!==e?(this.width=t,this.height=n):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,n=this.height),i!==this.width||o!==this.height)for(r in this.domElements)this.domElements[r].style.width=t+"px",this.domElements[r].style.height=n+"px","canvas"===this.domElements[r].tagName.toLowerCase()&&(this.domElements[r].setAttribute("width",t*s+"px"),this.domElements[r].setAttribute("height",n*s+"px"),1!==s&&this.contexts[r].scale(s,s));return this},r.renderers.canvas.prototype.clear=function(){var e;for(e in this.domElements)"CANVAS"===this.domElements[e].tagName&&(this.domElements[e].width=this.domElements[e].width);return this},r.renderers.canvas.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},r.utils.pkg("sigma.canvas.nodes"),r.utils.pkg("sigma.canvas.edges"),r.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.renderers"),r.renderers.webgl=function(e,t,n,i){if("object"!=typeof i)throw"sigma.renderers.webgl: Wrong arguments.";if(!(i.container instanceof HTMLElement))throw"Container not found.";var o,s,a,u;for(r.classes.dispatcher.extend(this),this.jobs={},Object.defineProperty(this,"conradId",{value:r.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=i,this.container=this.options.container,this.settings="object"==typeof i.settings&&i.settings?n.embedObjects(i.settings):n,this.options.prefix=this.camera.readPrefix,Object.defineProperty(this,"nodePrograms",{value:{}}),Object.defineProperty(this,"edgePrograms",{value:{}}),Object.defineProperty(this,"nodeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeFloatArrays",{value:{}}),this.settings(i,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene),this.initDOM("canvas","labels"),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],a=this.options.captors||[r.captors.mouse,r.captors.touch],o=0,s=a.length;s>o;o++)u="function"==typeof a[o]?a[o]:r.captors[a[o]],this.captors.push(new u(this.domElements.mouse,this.camera,this.settings));r.misc.bindEvents.call(this,this.camera.prefix),r.misc.drawHovers.call(this,this.camera.prefix),this.resize()},r.renderers.webgl.prototype.process=function(){var e,t,n,i,o,s,a=this.graph,u=r.utils.extend(u,this.options);for(i in this.nodeFloatArrays)delete this.nodeFloatArrays[i];for(i in this.edgeFloatArrays)delete this.edgeFloatArrays[i];for(e=a.edges(),t=0,n=e.length;n>t;t++)o=e[t].type||this.settings(u,"defaultEdgeType"),i=o&&r.webgl.edges[o]?o:"def",this.edgeFloatArrays[i]||(this.edgeFloatArrays[i]={edges:[]}),this.edgeFloatArrays[i].edges.push(e[t]);for(e=a.nodes(),t=0,n=e.length;n>t;t++)o=e[t].type||this.settings(u,"defaultNodeType"),i=o&&r.webgl.nodes[o]?o:"def",this.nodeFloatArrays[i]||(this.nodeFloatArrays[i]={nodes:[]}),this.nodeFloatArrays[i].nodes.push(e[t]);for(i in this.edgeFloatArrays)for(s=r.webgl.edges[i],e=this.edgeFloatArrays[i].edges,t=0,n=e.length;n>t;t++)this.edgeFloatArrays[i].array||(this.edgeFloatArrays[i].array=new Float32Array(e.length*s.POINTS*s.ATTRIBUTES)),e[t].hidden||a.nodes(e[t].source).hidden||a.nodes(e[t].target).hidden||s.addEdge(e[t],a.nodes(e[t].source),a.nodes(e[t].target),this.edgeFloatArrays[i].array,t*s.POINTS*s.ATTRIBUTES,u.prefix,this.settings);for(i in this.nodeFloatArrays)for(s=r.webgl.nodes[i],e=this.nodeFloatArrays[i].nodes,t=0,n=e.length;n>t;t++)this.nodeFloatArrays[i].array||(this.nodeFloatArrays[i].array=new Float32Array(e.length*s.POINTS*s.ATTRIBUTES)),e[t].hidden||s.addNode(e[t],this.nodeFloatArrays[i].array,t*s.POINTS*s.ATTRIBUTES,u.prefix,this.settings);return this},r.renderers.webgl.prototype.render=function(t){var n,o,s,a,u,c,l=this,h=(this.graph,this.contexts.nodes),d=this.contexts.edges,f=this.camera.getMatrix(),p=r.utils.extend(t,this.options),g=this.settings(p,"drawLabels"),m=this.settings(p,"drawEdges"),y=this.settings(p,"drawNodes");this.resize(!1),this.settings(p,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(m=!1),this.clear(),f=r.utils.matrices.multiply(f,r.utils.matrices.translation(this.width/2,this.height/2));for(a in this.jobs)i.hasJob(a)&&i.killJob(a);if(m)if(this.settings(p,"batchEdgesDrawing"))(function(){var e,t,n,o,s,a,u,c,l;n="edges_"+this.conradId,l=this.settings(p,"webglEdgesBatchSize"),e=Object.keys(this.edgeFloatArrays),e.length&&(t=0,c=r.webgl.edges[e[t]],s=this.edgeFloatArrays[e[t]].array,u=0,a=Math.min(u+l*c.POINTS,s.length/c.ATTRIBUTES),o=function(){return this.edgePrograms[e[t]]||(this.edgePrograms[e[t]]=c.initProgram(d)),a>u&&(d.useProgram(this.edgePrograms[e[t]]),c.render(d,this.edgePrograms[e[t]],s,{settings:this.settings,matrix:f,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(p,"webglOversamplingRatio"),start:u,count:a-u})),a>=s.length/c.ATTRIBUTES&&t===e.length-1?(delete this.jobs[n],!1):(a>=s.length/c.ATTRIBUTES?(t++,s=this.edgeFloatArrays[e[t]].array,c=r.webgl.edges[e[t]],u=0,a=Math.min(u+l*c.POINTS,s.length/c.ATTRIBUTES)):(u=a,a=Math.min(u+l*c.POINTS,s.length/c.ATTRIBUTES)),!0)},this.jobs[n]=o,i.addJob(n,o.bind(this)))}).call(this);else for(a in this.edgeFloatArrays)c=r.webgl.edges[a],this.edgePrograms[a]||(this.edgePrograms[a]=c.initProgram(d)),this.edgeFloatArrays[a]&&(d.useProgram(this.edgePrograms[a]),c.render(d,this.edgePrograms[a],this.edgeFloatArrays[a].array,{settings:this.settings,matrix:f,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(p,"webglOversamplingRatio")}));if(y){h.blendFunc(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA),h.enable(h.BLEND);for(a in this.nodeFloatArrays)c=r.webgl.nodes[a],this.nodePrograms[a]||(this.nodePrograms[a]=c.initProgram(h)),this.nodeFloatArrays[a]&&(h.useProgram(this.nodePrograms[a]),c.render(h,this.nodePrograms[a],this.nodeFloatArrays[a].array,{settings:this.settings,matrix:f,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(p,"webglOversamplingRatio")}))}if(g)for(n=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(e,e,{nodes:n,edges:[],width:this.width,height:this.height}),u=function(e){return l.settings({prefix:l.camera.prefix},e)},o=0,s=n.length;s>o;o++)n[o].hidden||(r.canvas.labels[n[o].type||this.settings(p,"defaultNodeType")]||r.canvas.labels.def)(n[o],this.contexts.labels,u);return this.dispatchEvent("render"),this},r.renderers.webgl.prototype.initDOM=function(e,t,n){var r=document.createElement(e),i=this;r.style.position="absolute",r.setAttribute("class","sigma-"+t),this.domElements[t]=r,this.container.appendChild(r),"canvas"===e.toLowerCase()&&(this.contexts[t]=r.getContext(n?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}),n&&(r.addEventListener("webglcontextlost",function(e){e.preventDefault()},!1),r.addEventListener("webglcontextrestored",function(){i.render()},!1)))},r.renderers.webgl.prototype.resize=function(t,n){var r,i=this.width,o=this.height;if(t!==e&&n!==e?(this.width=t,this.height=n):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,n=this.height),i!==this.width||o!==this.height)for(r in this.domElements)this.domElements[r].style.width=t+"px",this.domElements[r].style.height=n+"px","canvas"===this.domElements[r].tagName.toLowerCase()&&(this.contexts[r]&&this.contexts[r].scale?(this.domElements[r].setAttribute("width",t+"px"),this.domElements[r].setAttribute("height",n+"px")):(this.domElements[r].setAttribute("width",t*this.settings("webglOversamplingRatio")+"px"),this.domElements[r].setAttribute("height",n*this.settings("webglOversamplingRatio")+"px")));for(r in this.contexts)this.contexts[r]&&this.contexts[r].viewport&&this.contexts[r].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this},r.renderers.webgl.prototype.clear=function(){var e;for(e in this.domElements)"CANVAS"===this.domElements[e].tagName&&(this.domElements[e].width=this.domElements[e].width);return this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this},r.renderers.webgl.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},r.utils.pkg("sigma.webgl.nodes"),r.utils.pkg("sigma.webgl.edges"),r.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof r)throw"sigma is not declared";if("undefined"==typeof i)throw"conrad is not declared";r.utils.pkg("sigma.renderers"),r.renderers.svg=function(e,t,n,i){if("object"!=typeof i)throw"sigma.renderers.svg: Wrong arguments.";if(!(i.container instanceof HTMLElement))throw"Container not found.";var o,s,a,u,c=this;for(r.classes.dispatcher.extend(this),this.graph=e,this.camera=t,this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}},this.measurementCanvas=null,this.options=i,this.container=this.options.container,this.settings="object"==typeof i.settings&&i.settings?n.embedObjects(i.settings):n,this.settings("freeStyle",!!this.options.freeStyle),this.settings("xmlns","http://www.w3.org/2000/svg"),this.nodesOnScreen=[],this.edgesOnScreen=[],this.options.prefix="renderer"+r.utils.id()+":",this.initDOM("svg"),this.captors=[],a=this.options.captors||[r.captors.mouse,r.captors.touch],o=0,s=a.length;s>o;o++)u="function"==typeof a[o]?a[o]:r.captors[a[o]],this.captors.push(new u(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",function(){c.resize()}),r.misc.bindDOMEvents.call(this,this.domElements.graph),this.bindHovers(this.options.prefix),this.resize(!1)},r.renderers.svg.prototype.render=function(t){t=t||{};var n,i,o,s,a,u,c,l,h,d={},f=this.graph,p=this.graph.nodes,g=(this.options.prefix||"",this.settings(t,"drawEdges")),m=this.settings(t,"drawNodes"),y=(this.settings(t,"drawLabels"),this.settings.embedObjects(t,{prefix:this.options.prefix,forceLabels:this.options.forceLabels}));for(this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(g=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.hideDOMElements(this.domElements.nodes),this.hideDOMElements(this.domElements.edges),this.hideDOMElements(this.domElements.labels),this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),n=this.nodesOnScreen,i=0,s=n.length;s>i;i++)d[n[i].id]=n[i];for(n=f.edges(),i=0,s=n.length;s>i;i++)a=n[i],!d[a.source]&&!d[a.target]||a.hidden||p(a.source).hidden||p(a.target).hidden||this.edgesOnScreen.push(a);if(l=r.svg.nodes,h=r.svg.labels,m)for(n=this.nodesOnScreen,i=0,s=n.length;s>i;i++)n[i].hidden||this.domElements.nodes[n[i].id]||(o=(l[n[i].type]||l.def).create(n[i],y),this.domElements.nodes[n[i].id]=o,this.domElements.groups.nodes.appendChild(o),o=(h[n[i].type]||h.def).create(n[i],y),this.domElements.labels[n[i].id]=o,this.domElements.groups.labels.appendChild(o));if(m)for(n=this.nodesOnScreen,i=0,s=n.length;s>i;i++)n[i].hidden||((l[n[i].type]||l.def).update(n[i],this.domElements.nodes[n[i].id],y),(h[n[i].type]||h.def).update(n[i],this.domElements.labels[n[i].id],y));if(l=r.svg.edges,g)for(n=this.edgesOnScreen,i=0,s=n.length;s>i;i++)this.domElements.edges[n[i].id]||(u=p(n[i].source),c=p(n[i].target),o=(l[n[i].type]||l.def).create(n[i],u,c,y),this.domElements.edges[n[i].id]=o,this.domElements.groups.edges.appendChild(o));if(g)for(n=this.edgesOnScreen,i=0,s=n.length;s>i;i++)u=p(n[i].source),c=p(n[i].target),(l[n[i].type]||l.def).update(n[i],this.domElements.edges[n[i].id],u,c,y);return this.dispatchEvent("render"),this},r.renderers.svg.prototype.initDOM=function(e){var t,n,r,i=document.createElementNS(this.settings("xmlns"),e),o=this.settings("classPrefix");i.style.position="absolute",i.setAttribute("class",o+"-svg"),i.setAttribute("xmlns",this.settings("xmlns")),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1");var s=document.createElement("canvas");s.setAttribute("class",o+"-measurement-canvas"),this.domElements.graph=this.container.appendChild(i);var a=["edges","nodes","labels","hovers"];for(r=0,n=a.length;n>r;r++)t=document.createElementNS(this.settings("xmlns"),"g"),t.setAttributeNS(null,"id",o+"-group-"+a[r]),t.setAttributeNS(null,"class",o+"-group"),this.domElements.groups[a[r]]=this.domElements.graph.appendChild(t);this.container.appendChild(s),this.measurementCanvas=s.getContext("2d")},r.renderers.svg.prototype.hideDOMElements=function(e){var t,n;for(n in e)t=e[n],r.svg.utils.hide(t);return this},r.renderers.svg.prototype.bindHovers=function(e){function t(t){var n=t.data.node,r=a.settings.embedObjects({prefix:e});if(r("enableHovering")){var i=(s[n.type]||s.def).create(n,a.domElements.nodes[n.id],a.measurementCanvas,r);a.domElements.hovers[n.id]=i,a.domElements.groups.hovers.appendChild(i),o=n}}function n(t){var n=t.data.node,r=a.settings.embedObjects({prefix:e});r("enableHovering")&&(a.domElements.groups.hovers.removeChild(a.domElements.hovers[n.id]),o=null,delete a.domElements.hovers[n.id],a.domElements.groups.nodes.appendChild(a.domElements.nodes[n.id]))}function i(){if(o){var t=a.settings.embedObjects({prefix:e});a.domElements.groups.hovers.removeChild(a.domElements.hovers[o.id]),delete a.domElements.hovers[o.id];var n=(s[o.type]||s.def).create(o,a.domElements.nodes[o.id],a.measurementCanvas,t);a.domElements.hovers[o.id]=n,a.domElements.groups.hovers.appendChild(n)}}var o,s=r.svg.hovers,a=this;this.bind("overNode",t),this.bind("outNode",n),this.bind("render",i)},r.renderers.svg.prototype.resize=function(t,n){var r=this.width,i=this.height,o=1;return t!==e&&n!==e?(this.width=t,this.height=n):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,n=this.height),(r!==this.width||i!==this.height)&&(this.domElements.graph.style.width=t+"px",this.domElements.graph.style.height=n+"px","svg"===this.domElements.graph.tagName.toLowerCase()&&(this.domElements.graph.setAttribute("width",t*o),this.domElements.graph.setAttribute("height",n*o))),this},r.utils.pkg("sigma.svg.nodes"),r.utils.pkg("sigma.svg.edges"),r.utils.pkg("sigma.svg.labels")}.call(this),function(e){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.renderers");var t,n=!!e.WebGLRenderingContext;if(n){t=document.createElement("canvas");try{n=!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(i){n=!1}}r.renderers.def=n?r.renderers.webgl:r.renderers.canvas}(this),function(){"use strict";r.utils.pkg("sigma.webgl.nodes"),r.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(e,t,n,i,o){var s=r.utils.floatColor(e.color||o("defaultNodeColor"));t[n++]=e[i+"x"],t[n++]=e[i+"y"],t[n++]=e[i+"size"],t[n++]=s,t[n++]=0,t[n++]=e[i+"x"],t[n++]=e[i+"y"],t[n++]=e[i+"size"],t[n++]=s,t[n++]=2*Math.PI/3,t[n++]=e[i+"x"],t[n++]=e[i+"y"],t[n++]=e[i+"size"],t[n++]=s,t[n++]=4*Math.PI/3},render:function(e,t,n,r){var i,o=e.getAttribLocation(t,"a_position"),s=e.getAttribLocation(t,"a_size"),a=e.getAttribLocation(t,"a_color"),u=e.getAttribLocation(t,"a_angle"),c=e.getUniformLocation(t,"u_resolution"),l=e.getUniformLocation(t,"u_matrix"),h=e.getUniformLocation(t,"u_ratio"),d=e.getUniformLocation(t,"u_scale");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(c,r.width,r.height),e.uniform1f(h,1/Math.pow(r.ratio,r.settings("nodesPowRatio"))),e.uniform1f(d,r.scalingRatio),e.uniformMatrix3fv(l,!1,r.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(s),e.enableVertexAttribArray(a),e.enableVertexAttribArray(u),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(s,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.drawArrays(e.TRIANGLES,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,i;return t=r.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","varying vec2 center;","varying float radius;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=r.utils.loadShader(e,["precision mediump float;","varying vec4 color;","varying vec2 center;","varying float radius;","void main(void) {","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_FragCoord.xy - center;","float diff = radius - sqrt(m.x * m.x + m.y * m.y);","if (diff > 0.0)","gl_FragColor = color;","else","gl_FragColor = color0;","}"].join("\n"),e.FRAGMENT_SHADER),i=r.utils.loadProgram(e,[t,n])}}}(),function(){"use strict";r.utils.pkg("sigma.webgl.nodes"),r.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(e,t,n,i,o){t[n++]=e[i+"x"],t[n++]=e[i+"y"],t[n++]=e[i+"size"],t[n++]=r.utils.floatColor(e.color||o("defaultNodeColor"))},render:function(e,t,n,r){var i,o=e.getAttribLocation(t,"a_position"),s=e.getAttribLocation(t,"a_size"),a=e.getAttribLocation(t,"a_color"),u=e.getUniformLocation(t,"u_resolution"),c=e.getUniformLocation(t,"u_matrix"),l=e.getUniformLocation(t,"u_ratio"),h=e.getUniformLocation(t,"u_scale");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(u,r.width,r.height),e.uniform1f(l,1/Math.pow(r.ratio,r.settings("nodesPowRatio"))),e.uniform1f(h,r.scalingRatio),e.uniformMatrix3fv(c,!1,r.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(s),e.enableVertexAttribArray(a),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(s,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.drawArrays(e.POINTS,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,i;return t=r.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=r.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),i=r.utils.loadProgram(e,[t,n])}}}(),function(){"use strict";r.utils.pkg("sigma.webgl.edges"),r.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(e,t,n,i,o,s,a){var u=(e[s+"size"]||1)/2,c=t[s+"x"],l=t[s+"y"],h=n[s+"x"],d=n[s+"y"],f=e.color;if(!f)switch(a("edgeColor")){case"source":f=t.color||a("defaultNodeColor");
break;case"target":f=n.color||a("defaultNodeColor");break;default:f=a("defaultEdgeColor")}f=r.utils.floatColor(f),i[o++]=c,i[o++]=l,i[o++]=h,i[o++]=d,i[o++]=u,i[o++]=0,i[o++]=f,i[o++]=h,i[o++]=d,i[o++]=c,i[o++]=l,i[o++]=u,i[o++]=1,i[o++]=f,i[o++]=h,i[o++]=d,i[o++]=c,i[o++]=l,i[o++]=u,i[o++]=0,i[o++]=f,i[o++]=h,i[o++]=d,i[o++]=c,i[o++]=l,i[o++]=u,i[o++]=0,i[o++]=f,i[o++]=c,i[o++]=l,i[o++]=h,i[o++]=d,i[o++]=u,i[o++]=1,i[o++]=f,i[o++]=c,i[o++]=l,i[o++]=h,i[o++]=d,i[o++]=u,i[o++]=0,i[o++]=f},render:function(e,t,n,i){var o,s=e.getAttribLocation(t,"a_color"),a=e.getAttribLocation(t,"a_position1"),u=e.getAttribLocation(t,"a_position2"),c=e.getAttribLocation(t,"a_thickness"),l=e.getAttribLocation(t,"a_minus"),h=e.getUniformLocation(t,"u_resolution"),d=e.getUniformLocation(t,"u_matrix"),f=e.getUniformLocation(t,"u_matrixHalfPi"),p=e.getUniformLocation(t,"u_matrixHalfPiMinus"),g=e.getUniformLocation(t,"u_ratio"),m=e.getUniformLocation(t,"u_scale");o=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.uniform2f(h,i.width,i.height),e.uniform1f(g,i.ratio/Math.pow(i.ratio,i.settings("edgesPowRatio"))),e.uniform1f(m,i.scalingRatio),e.uniformMatrix3fv(d,!1,i.matrix),e.uniformMatrix2fv(f,!1,r.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(p,!1,r.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(s),e.enableVertexAttribArray(a),e.enableVertexAttribArray(u),e.enableVertexAttribArray(c),e.enableVertexAttribArray(l),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(u,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(c,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(s,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.drawArrays(e.TRIANGLES,i.start||0,i.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,i;return t=r.utils.loadShader(e,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=r.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),i=r.utils.loadProgram(e,[t,n])}}}(),function(){"use strict";r.utils.pkg("sigma.webgl.edges"),r.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(e,t,n,i,o,s,a){var u=((e[s+"size"]||1)/2,t[s+"x"]),c=t[s+"y"],l=n[s+"x"],h=n[s+"y"],d=e.color;if(!d)switch(a("edgeColor")){case"source":d=t.color||a("defaultNodeColor");break;case"target":d=n.color||a("defaultNodeColor");break;default:d=a("defaultEdgeColor")}d=r.utils.floatColor(d),i[o++]=u,i[o++]=c,i[o++]=d,i[o++]=l,i[o++]=h,i[o++]=d},render:function(e,t,n,r){var i,o=e.getAttribLocation(t,"a_color"),s=e.getAttribLocation(t,"a_position"),a=e.getUniformLocation(t,"u_resolution"),u=e.getUniformLocation(t,"u_matrix");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(a,r.width,r.height),e.uniformMatrix3fv(u,!1,r.matrix),e.enableVertexAttribArray(s),e.enableVertexAttribArray(o),e.vertexAttribPointer(s,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.lineWidth(3),e.drawArrays(e.LINES,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,i;return t=r.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=r.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),i=r.utils.loadProgram(e,[t,n])}}}(),function(){"use strict";r.utils.pkg("sigma.webgl.edges"),r.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(e,t,n,i,o,s,a){var u=(e[s+"size"]||1)/2,c=t[s+"x"],l=t[s+"y"],h=n[s+"x"],d=n[s+"y"],f=n[s+"size"],p=e.color;if(!p)switch(a("edgeColor")){case"source":p=t.color||a("defaultNodeColor");break;case"target":p=n.color||a("defaultNodeColor");break;default:p=a("defaultEdgeColor")}p=r.utils.floatColor(p),i[o++]=c,i[o++]=l,i[o++]=h,i[o++]=d,i[o++]=u,i[o++]=f,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=p,i[o++]=h,i[o++]=d,i[o++]=c,i[o++]=l,i[o++]=u,i[o++]=f,i[o++]=1,i[o++]=1,i[o++]=0,i[o++]=0,i[o++]=p,i[o++]=h,i[o++]=d,i[o++]=c,i[o++]=l,i[o++]=u,i[o++]=f,i[o++]=1,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=p,i[o++]=h,i[o++]=d,i[o++]=c,i[o++]=l,i[o++]=u,i[o++]=f,i[o++]=1,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=p,i[o++]=c,i[o++]=l,i[o++]=h,i[o++]=d,i[o++]=u,i[o++]=f,i[o++]=0,i[o++]=1,i[o++]=0,i[o++]=0,i[o++]=p,i[o++]=c,i[o++]=l,i[o++]=h,i[o++]=d,i[o++]=u,i[o++]=f,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=p,i[o++]=h,i[o++]=d,i[o++]=c,i[o++]=l,i[o++]=u,i[o++]=f,i[o++]=1,i[o++]=0,i[o++]=1,i[o++]=-1,i[o++]=p,i[o++]=h,i[o++]=d,i[o++]=c,i[o++]=l,i[o++]=u,i[o++]=f,i[o++]=1,i[o++]=0,i[o++]=1,i[o++]=0,i[o++]=p,i[o++]=h,i[o++]=d,i[o++]=c,i[o++]=l,i[o++]=u,i[o++]=f,i[o++]=1,i[o++]=0,i[o++]=1,i[o++]=1,i[o++]=p},render:function(e,t,n,i){var o,s=e.getAttribLocation(t,"a_pos1"),a=e.getAttribLocation(t,"a_pos2"),u=e.getAttribLocation(t,"a_thickness"),c=e.getAttribLocation(t,"a_tSize"),l=e.getAttribLocation(t,"a_delay"),h=e.getAttribLocation(t,"a_minus"),d=e.getAttribLocation(t,"a_head"),f=e.getAttribLocation(t,"a_headPosition"),p=e.getAttribLocation(t,"a_color"),g=e.getUniformLocation(t,"u_resolution"),m=e.getUniformLocation(t,"u_matrix"),y=e.getUniformLocation(t,"u_matrixHalfPi"),v=e.getUniformLocation(t,"u_matrixHalfPiMinus"),b=e.getUniformLocation(t,"u_ratio"),w=e.getUniformLocation(t,"u_nodeRatio"),x=e.getUniformLocation(t,"u_arrowHead"),E=e.getUniformLocation(t,"u_scale");o=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.uniform2f(g,i.width,i.height),e.uniform1f(b,i.ratio/Math.pow(i.ratio,i.settings("edgesPowRatio"))),e.uniform1f(w,Math.pow(i.ratio,i.settings("nodesPowRatio"))/i.ratio),e.uniform1f(x,5),e.uniform1f(E,i.scalingRatio),e.uniformMatrix3fv(m,!1,i.matrix),e.uniformMatrix2fv(y,!1,r.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(v,!1,r.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(s),e.enableVertexAttribArray(a),e.enableVertexAttribArray(u),e.enableVertexAttribArray(c),e.enableVertexAttribArray(l),e.enableVertexAttribArray(h),e.enableVertexAttribArray(d),e.enableVertexAttribArray(f),e.enableVertexAttribArray(p),e.vertexAttribPointer(s,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(c,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.vertexAttribPointer(h,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),e.vertexAttribPointer(f,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),e.vertexAttribPointer(p,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),e.drawArrays(e.TRIANGLES,i.start||0,i.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,i;return t=r.utils.loadShader(e,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=r.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),i=r.utils.loadProgram(e,[t,n])}}}(),function(){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.canvas.labels"),r.canvas.labels.def=function(e,t,n){var r,i=n("prefix")||"",o=e[i+"size"];o<n("labelThreshold")||e.label&&"string"==typeof e.label&&(r="fixed"===n("labelSize")?n("defaultLabelSize"):n("labelSizeRatio")*o,t.font=(n("fontStyle")?n("fontStyle")+" ":"")+r+"px "+n("font"),t.fillStyle="node"===n("labelColor")?e.color||n("defaultNodeColor"):n("defaultLabelColor"),t.fillText(e.label,Math.round(e[i+"x"]+o+3),Math.round(e[i+"y"]+r/3)))}}.call(this),function(){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.canvas.hovers"),r.canvas.hovers.def=function(e,t,n){var i,o,s,a,u,c=n("hoverFontStyle")||n("fontStyle"),l=n("prefix")||"",h=e[l+"size"],d="fixed"===n("labelSize")?n("defaultLabelSize"):n("labelSizeRatio")*h;t.font=(c?c+" ":"")+d+"px "+(n("hoverFont")||n("font")),t.beginPath(),t.fillStyle="node"===n("labelHoverBGColor")?e.color||n("defaultNodeColor"):n("defaultHoverLabelBGColor"),e.label&&n("labelHoverShadow")&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor=n("labelHoverShadowColor")),e.label&&"string"==typeof e.label&&(i=Math.round(e[l+"x"]-d/2-2),o=Math.round(e[l+"y"]-d/2-2),s=Math.round(t.measureText(e.label).width+d/2+h+7),a=Math.round(d+4),u=Math.round(d/2+2),t.moveTo(i,o+u),t.arcTo(i,o,i+u,o,u),t.lineTo(i+s,o),t.lineTo(i+s,o+a),t.lineTo(i+u,o+a),t.arcTo(i,o+a,i,o+a-u,u),t.lineTo(i,o+u),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),n("borderSize")>0&&(t.beginPath(),t.fillStyle="node"===n("nodeBorderColor")?e.color||n("defaultNodeColor"):n("defaultNodeBorderColor"),t.arc(e[l+"x"],e[l+"y"],h+n("borderSize"),0,2*Math.PI,!0),t.closePath(),t.fill());var f=r.canvas.nodes[e.type]||r.canvas.nodes.def;f(e,t,n),e.label&&"string"==typeof e.label&&(t.fillStyle="node"===n("labelHoverColor")?e.color||n("defaultNodeColor"):n("defaultLabelHoverColor"),t.fillText(e.label,Math.round(e[l+"x"]+h+3),Math.round(e[l+"y"]+d/3)))}}.call(this),function(){"use strict";r.utils.pkg("sigma.canvas.nodes"),r.canvas.nodes.def=function(e,t,n){var r=n("prefix")||"";t.fillStyle=e.color||n("defaultNodeColor"),t.beginPath(),t.arc(e[r+"x"],e[r+"y"],e[r+"size"],0,2*Math.PI,!0),t.closePath(),t.fill()}}(),function(){"use strict";r.utils.pkg("sigma.canvas.edges"),r.canvas.edges.def=function(e,t,n,r,i){var o=e.color,s=i("prefix")||"",a=e[s+"size"]||1,u=i("edgeColor"),c=i("defaultNodeColor"),l=i("defaultEdgeColor");if(!o)switch(u){case"source":o=t.color||c;break;case"target":o=n.color||c;break;default:o=l}r.strokeStyle=o,r.lineWidth=a,r.beginPath(),r.moveTo(t[s+"x"],t[s+"y"]),r.lineTo(n[s+"x"],n[s+"y"]),r.stroke()}}(),function(){"use strict";r.utils.pkg("sigma.canvas.edges"),r.canvas.edges.curve=function(e,t,n,i,o){var s=e.color,a=o("prefix")||"",u=e[a+"size"]||1,c=o("edgeColor"),l=o("defaultNodeColor"),h=o("defaultEdgeColor"),d={},f=t[a+"size"],p=t[a+"x"],g=t[a+"y"],m=n[a+"x"],y=n[a+"y"];if(d=t.id===n.id?r.utils.getSelfLoopControlPoints(p,g,f):r.utils.getQuadraticControlPoint(p,g,m,y),!s)switch(c){case"source":s=t.color||l;break;case"target":s=n.color||l;break;default:s=h}i.strokeStyle=s,i.lineWidth=u,i.beginPath(),i.moveTo(p,g),t.id===n.id?i.bezierCurveTo(d.x1,d.y1,d.x2,d.y2,m,y):i.quadraticCurveTo(d.x,d.y,m,y),i.stroke()}}(),function(){"use strict";r.utils.pkg("sigma.canvas.edges"),r.canvas.edges.arrow=function(e,t,n,r,i){var o=e.color,s=i("prefix")||"",a=i("edgeColor"),u=i("defaultNodeColor"),c=i("defaultEdgeColor"),l=e[s+"size"]||1,h=n[s+"size"],d=t[s+"x"],f=t[s+"y"],p=n[s+"x"],g=n[s+"y"],m=Math.max(2.5*l,i("minArrowSize")),y=Math.sqrt(Math.pow(p-d,2)+Math.pow(g-f,2)),v=d+(p-d)*(y-m-h)/y,b=f+(g-f)*(y-m-h)/y,w=(p-d)*m/y,x=(g-f)*m/y;if(!o)switch(a){case"source":o=t.color||u;break;case"target":o=n.color||u;break;default:o=c}r.strokeStyle=o,r.lineWidth=l,r.beginPath(),r.moveTo(d,f),r.lineTo(v,b),r.stroke(),r.fillStyle=o,r.beginPath(),r.moveTo(v+w,b+x),r.lineTo(v+.6*x,b-.6*w),r.lineTo(v-.6*x,b+.6*w),r.lineTo(v+w,b+x),r.closePath(),r.fill()}}(),function(){"use strict";r.utils.pkg("sigma.canvas.edges"),r.canvas.edges.curvedArrow=function(e,t,n,i,o){var s,a,u,c,l,h=e.color,d=o("prefix")||"",f=o("edgeColor"),p=o("defaultNodeColor"),g=o("defaultEdgeColor"),m={},y=e[d+"size"]||1,v=n[d+"size"],b=t[d+"x"],w=t[d+"y"],x=n[d+"x"],E=n[d+"y"],S=Math.max(2.5*y,o("minArrowSize"));if(m=t.id===n.id?r.utils.getSelfLoopControlPoints(b,w,v):r.utils.getQuadraticControlPoint(b,w,x,E),t.id===n.id?(s=Math.sqrt(Math.pow(x-m.x1,2)+Math.pow(E-m.y1,2)),a=m.x1+(x-m.x1)*(s-S-v)/s,u=m.y1+(E-m.y1)*(s-S-v)/s,c=(x-m.x1)*S/s,l=(E-m.y1)*S/s):(s=Math.sqrt(Math.pow(x-m.x,2)+Math.pow(E-m.y,2)),a=m.x+(x-m.x)*(s-S-v)/s,u=m.y+(E-m.y)*(s-S-v)/s,c=(x-m.x)*S/s,l=(E-m.y)*S/s),!h)switch(f){case"source":h=t.color||p;break;case"target":h=n.color||p;break;default:h=g}i.strokeStyle=h,i.lineWidth=y,i.beginPath(),i.moveTo(b,w),t.id===n.id?i.bezierCurveTo(m.x2,m.y2,m.x1,m.y1,a,u):i.quadraticCurveTo(m.x,m.y,a,u),i.stroke(),i.fillStyle=h,i.beginPath(),i.moveTo(a+c,u+l),i.lineTo(a+.6*l,u-.6*c),i.lineTo(a-.6*l,u+.6*c),i.lineTo(a+c,u+l),i.closePath(),i.fill()}}(),function(){"use strict";r.utils.pkg("sigma.canvas.edgehovers"),r.canvas.edgehovers.def=function(e,t,n,r,i){var o=e.color,s=i("prefix")||"",a=e[s+"size"]||1,u=i("edgeColor"),c=i("defaultNodeColor"),l=i("defaultEdgeColor");if(!o)switch(u){case"source":o=t.color||c;break;case"target":o=n.color||c;break;default:o=l}o="edge"===i("edgeHoverColor")?e.hover_color||o:e.hover_color||i("defaultEdgeHoverColor")||o,a*=i("edgeHoverSizeRatio"),r.strokeStyle=o,r.lineWidth=a,r.beginPath(),r.moveTo(t[s+"x"],t[s+"y"]),r.lineTo(n[s+"x"],n[s+"y"]),r.stroke()}}(),function(){"use strict";r.utils.pkg("sigma.canvas.edgehovers"),r.canvas.edgehovers.curve=function(e,t,n,i,o){var s=e.color,a=o("prefix")||"",u=o("edgeHoverSizeRatio")*(e[a+"size"]||1),c=o("edgeColor"),l=o("defaultNodeColor"),h=o("defaultEdgeColor"),d={},f=t[a+"size"],p=t[a+"x"],g=t[a+"y"],m=n[a+"x"],y=n[a+"y"];if(d=t.id===n.id?r.utils.getSelfLoopControlPoints(p,g,f):r.utils.getQuadraticControlPoint(p,g,m,y),!s)switch(c){case"source":s=t.color||l;break;case"target":s=n.color||l;break;default:s=h}s="edge"===o("edgeHoverColor")?e.hover_color||s:e.hover_color||o("defaultEdgeHoverColor")||s,i.strokeStyle=s,i.lineWidth=u,i.beginPath(),i.moveTo(p,g),t.id===n.id?i.bezierCurveTo(d.x1,d.y1,d.x2,d.y2,m,y):i.quadraticCurveTo(d.x,d.y,m,y),i.stroke()}}(),function(){"use strict";r.utils.pkg("sigma.canvas.edgehovers"),r.canvas.edgehovers.arrow=function(e,t,n,r,i){var o=e.color,s=i("prefix")||"",a=i("edgeColor"),u=i("defaultNodeColor"),c=i("defaultEdgeColor"),l=e[s+"size"]||1,h=n[s+"size"],d=t[s+"x"],f=t[s+"y"],p=n[s+"x"],g=n[s+"y"];l=e.hover?i("edgeHoverSizeRatio")*l:l;var m=2.5*l,y=Math.sqrt(Math.pow(p-d,2)+Math.pow(g-f,2)),v=d+(p-d)*(y-m-h)/y,b=f+(g-f)*(y-m-h)/y,w=(p-d)*m/y,x=(g-f)*m/y;if(!o)switch(a){case"source":o=t.color||u;break;case"target":o=n.color||u;break;default:o=c}o="edge"===i("edgeHoverColor")?e.hover_color||o:e.hover_color||i("defaultEdgeHoverColor")||o,r.strokeStyle=o,r.lineWidth=l,r.beginPath(),r.moveTo(d,f),r.lineTo(v,b),r.stroke(),r.fillStyle=o,r.beginPath(),r.moveTo(v+w,b+x),r.lineTo(v+.6*x,b-.6*w),r.lineTo(v-.6*x,b+.6*w),r.lineTo(v+w,b+x),r.closePath(),r.fill()}}(),function(){"use strict";r.utils.pkg("sigma.canvas.edgehovers"),r.canvas.edgehovers.curvedArrow=function(e,t,n,i,o){var s,a,u,c,l,h,d=e.color,f=o("prefix")||"",p=o("edgeColor"),g=o("defaultNodeColor"),m=o("defaultEdgeColor"),y={},v=o("edgeHoverSizeRatio")*(e[f+"size"]||1),b=n[f+"size"],w=t[f+"x"],x=t[f+"y"],E=n[f+"x"],S=n[f+"y"];if(y=t.id===n.id?r.utils.getSelfLoopControlPoints(w,x,b):r.utils.getQuadraticControlPoint(w,x,E,S),t.id===n.id?(s=Math.sqrt(Math.pow(E-y.x1,2)+Math.pow(S-y.y1,2)),a=2.5*v,u=y.x1+(E-y.x1)*(s-a-b)/s,c=y.y1+(S-y.y1)*(s-a-b)/s,l=(E-y.x1)*a/s,h=(S-y.y1)*a/s):(s=Math.sqrt(Math.pow(E-y.x,2)+Math.pow(S-y.y,2)),a=2.5*v,u=y.x+(E-y.x)*(s-a-b)/s,c=y.y+(S-y.y)*(s-a-b)/s,l=(E-y.x)*a/s,h=(S-y.y)*a/s),!d)switch(p){case"source":d=t.color||g;break;case"target":d=n.color||g;break;default:d=m}d="edge"===o("edgeHoverColor")?e.hover_color||d:e.hover_color||o("defaultEdgeHoverColor")||d,i.strokeStyle=d,i.lineWidth=v,i.beginPath(),i.moveTo(w,x),t.id===n.id?i.bezierCurveTo(y.x2,y.y2,y.x1,y.y1,u,c):i.quadraticCurveTo(y.x,y.y,u,c),i.stroke(),i.fillStyle=d,i.beginPath(),i.moveTo(u+l,c+h),i.lineTo(u+.6*h,c-.6*l),i.lineTo(u-.6*h,c+.6*l),i.lineTo(u+l,c+h),i.closePath(),i.fill()}}(),function(){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.canvas.extremities"),r.canvas.extremities.def=function(e,t,n,i,o){(r.canvas.hovers[t.type]||r.canvas.hovers.def)(t,i,o),(r.canvas.hovers[n.type]||r.canvas.hovers.def)(n,i,o)}}.call(this),function(){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.middlewares"),r.utils.pkg("sigma.utils"),r.middlewares.rescale=function(e,t,n){var i,o,s,a,u,c,l,h,d=this.graph.nodes(),f=this.graph.edges(),p=this.settings.embedObjects(n||{}),g=p("bounds")||r.utils.getBoundaries(this.graph,e,!0),m=g.minX,y=g.minY,v=g.maxX,b=g.maxY,w=g.sizeMax,x=g.weightMax,E=p("width")||1,S=p("height")||1,_=p("autoRescale"),T={nodePosition:1,nodeSize:1,edgeSize:1};for(_ instanceof Array||(_=["nodePosition","nodeSize","edgeSize"]),i=0,o=_.length;o>i;i++)if(!T[_[i]])throw new Error('The rescale setting "'+_[i]+'" is not recognized.');var A=~_.indexOf("nodePosition"),C=~_.indexOf("nodeSize"),k=~_.indexOf("edgeSize");for(l="outside"===p("scalingMode")?Math.max(E/Math.max(v-m,1),S/Math.max(b-y,1)):Math.min(E/Math.max(v-m,1),S/Math.max(b-y,1)),h=(p("rescaleIgnoreSize")?0:(p("maxNodeSize")||w)/l)+(p("sideMargin")||0),v+=h,m-=h,b+=h,y-=h,l="outside"===p("scalingMode")?Math.max(E/Math.max(v-m,1),S/Math.max(b-y,1)):Math.min(E/Math.max(v-m,1),S/Math.max(b-y,1)),p("maxNodeSize")||p("minNodeSize")?p("maxNodeSize")===p("minNodeSize")?(s=0,a=+p("maxNodeSize")):(s=(p("maxNodeSize")-p("minNodeSize"))/w,a=+p("minNodeSize")):(s=1,a=0),p("maxEdgeSize")||p("minEdgeSize")?p("maxEdgeSize")===p("minEdgeSize")?(u=0,c=+p("minEdgeSize")):(u=(p("maxEdgeSize")-p("minEdgeSize"))/x,c=+p("minEdgeSize")):(u=1,c=0),i=0,o=f.length;o>i;i++)f[i][t+"size"]=f[i][e+"size"]*(k?u:1)+(k?c:0);for(i=0,o=d.length;o>i;i++)d[i][t+"size"]=d[i][e+"size"]*(C?s:1)+(C?a:0),d[i][t+"x"]=(d[i][e+"x"]-(v+m)/2)*(A?l:1),d[i][t+"y"]=(d[i][e+"y"]-(b+y)/2)*(A?l:1)},r.utils.getBoundaries=function(e,t,n){var r,i,o=e.edges(),s=e.nodes(),a=-1/0,u=-1/0,c=1/0,l=1/0,h=-1/0,d=-1/0;if(n)for(r=0,i=o.length;i>r;r++)a=Math.max(o[r][t+"size"],a);for(r=0,i=s.length;i>r;r++)u=Math.max(s[r][t+"size"],u),h=Math.max(s[r][t+"x"],h),c=Math.min(s[r][t+"x"],c),d=Math.max(s[r][t+"y"],d),l=Math.min(s[r][t+"y"],l);return a=a||1,u=u||1,{weightMax:a,sizeMax:u,minX:c,minY:l,maxX:h,maxY:d}}}.call(this),function(){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.middlewares"),r.middlewares.copy=function(e,t){var n,r,i;if(t+""!=e+""){for(i=this.graph.nodes(),n=0,r=i.length;r>n;n++)i[n][t+"x"]=i[n][e+"x"],i[n][t+"y"]=i[n][e+"y"],i[n][t+"size"]=i[n][e+"size"];for(i=this.graph.edges(),n=0,r=i.length;r>n;n++)i[n][t+"size"]=i[n][e+"size"]}}}.call(this),function(e){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.misc.animation.running");var t=function(){var e=0;return function(){return""+ ++e}}();r.misc.animation.camera=function(n,i,o){if(!(n instanceof r.classes.camera&&"object"==typeof i&&i))throw"animation.camera: Wrong arguments.";if("number"!=typeof i.x&&"number"!=typeof i.y&&"number"!=typeof i.ratio&&"number"!=typeof i.angle)throw"There must be at least one valid coordinate in the given val.";var s,a,u,c,l,h,d=o||{},f=r.utils.dateNow();return h={x:n.x,y:n.y,ratio:n.ratio,angle:n.angle},l=d.duration,c="function"!=typeof d.easing?r.utils.easings[d.easing||"quadraticInOut"]:d.easing,s=function(){var t,o=d.duration?(r.utils.dateNow()-f)/d.duration:1;o>=1?(n.isAnimated=!1,n.goTo({x:i.x!==e?i.x:h.x,y:i.y!==e?i.y:h.y,ratio:i.ratio!==e?i.ratio:h.ratio,angle:i.angle!==e?i.angle:h.angle}),cancelAnimationFrame(a),delete r.misc.animation.running[a],"function"==typeof d.onComplete&&d.onComplete()):(t=c(o),n.isAnimated=!0,n.goTo({x:i.x!==e?h.x+(i.x-h.x)*t:h.x,y:i.y!==e?h.y+(i.y-h.y)*t:h.y,ratio:i.ratio!==e?h.ratio+(i.ratio-h.ratio)*t:h.ratio,angle:i.angle!==e?h.angle+(i.angle-h.angle)*t:h.angle}),"function"==typeof d.onNewFrame&&d.onNewFrame(),u.frameId=requestAnimationFrame(s))},a=t(),u={frameId:requestAnimationFrame(s),target:n,type:"camera",options:d,fn:s},r.misc.animation.running[a]=u,a},r.misc.animation.kill=function(e){if(1!==arguments.length||"number"!=typeof e)throw"animation.kill: Wrong arguments.";var t=r.misc.animation.running[e];return t&&(cancelAnimationFrame(e),delete r.misc.animation.running[t.frameId],"camera"===t.type&&(t.target.isAnimated=!1),"function"==typeof(t.options||{}).onComplete&&t.options.onComplete()),this},r.misc.animation.killAll=function(e){var t,n,i=0,o="string"==typeof e?e:null,s="object"==typeof e?e:null,a=r.misc.animation.running;for(n in a)o&&a[n].type!==o||s&&a[n].target!==s||(t=r.misc.animation.running[n],cancelAnimationFrame(t.frameId),delete r.misc.animation.running[n],"camera"===t.type&&(t.target.isAnimated=!1),i++,"function"==typeof(t.options||{}).onComplete&&t.options.onComplete());return i},r.misc.animation.has=function(e){var t,n="string"==typeof e?e:null,i="object"==typeof e?e:null,o=r.misc.animation.running;for(t in o)if(!(n&&o[t].type!==n||i&&o[t].target!==i))return!0;return!1}}.call(this),function(e){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.misc"),r.misc.bindEvents=function(t){function n(e){e&&(u="x"in e.data?e.data.x:u,c="y"in e.data?e.data.y:c);var n,r,i,o,s,a,h,d,f=[],p=u+l.width/2,g=c+l.height/2,m=l.camera.cameraPosition(u,c),y=l.camera.quadtree.point(m.x,m.y);if(y.length)for(n=0,i=y.length;i>n;n++)if(o=y[n],s=o[t+"x"],a=o[t+"y"],h=o[t+"size"],!o.hidden&&p>s-h&&s+h>p&&g>a-h&&a+h>g&&Math.sqrt(Math.pow(p-s,2)+Math.pow(g-a,2))<h){for(d=!1,r=0;r<f.length;r++)if(o.size>f[r].size){f.splice(r,0,o),d=!0;break}d||f.push(o)}return f}function i(n){function i(e,t){for(v=!1,a=0;a<e.length;a++)if(t.size>e[a].size){e.splice(a,0,t),v=!0;break}v||e.push(t)}if(!l.settings("enableEdgeHovering"))return[];var o=r.renderers.canvas&&l instanceof r.renderers.canvas;if(!o)throw new Error("The edge events feature is not compatible with the WebGL renderer");n&&(u="x"in n.data?n.data.x:u,c="y"in n.data?n.data.y:c);var s,a,h,d,f,p,g,m,y,v,b=l.settings("edgeHoverPrecision"),w={},x=[],E=u+l.width/2,S=c+l.height/2,_=l.camera.cameraPosition(u,c),T=[];if(o){var A=l.camera.quadtree.area(l.camera.getRectangle(l.width,l.height));for(d=A,s=0,h=d.length;h>s;s++)w[d[s].id]=d[s]}if(l.camera.edgequadtree!==e&&(T=l.camera.edgequadtree.point(_.x,_.y)),T.length)for(s=0,h=T.length;h>s;s++)f=T[s],g=l.graph.nodes(f.source),m=l.graph.nodes(f.target),p=f[t+"size"]||f["read_"+t+"size"],!f.hidden&&!g.hidden&&!m.hidden&&(!o||w[f.source]||w[f.target])&&r.utils.getDistance(g[t+"x"],g[t+"y"],E,S)>g[t+"size"]&&r.utils.getDistance(m[t+"x"],m[t+"y"],E,S)>m[t+"size"]&&("curve"==f.type||"curvedArrow"==f.type?g.id===m.id?(y=r.utils.getSelfLoopControlPoints(g[t+"x"],g[t+"y"],g[t+"size"]),r.utils.isPointOnBezierCurve(E,S,g[t+"x"],g[t+"y"],m[t+"x"],m[t+"y"],y.x1,y.y1,y.x2,y.y2,Math.max(p,b))&&i(x,f)):(y=r.utils.getQuadraticControlPoint(g[t+"x"],g[t+"y"],m[t+"x"],m[t+"y"]),r.utils.isPointOnQuadraticCurve(E,S,g[t+"x"],g[t+"y"],m[t+"x"],m[t+"y"],y.x,y.y,Math.max(p,b))&&i(x,f)):r.utils.isPointOnSegment(E,S,g[t+"x"],g[t+"y"],m[t+"x"],m[t+"y"],Math.max(p,b))&&i(x,f));return x}function o(e){function t(e){l.settings("eventsEnabled")&&(l.dispatchEvent("click",e.data),u=n(e),c=i(e),u.length?(l.dispatchEvent("clickNode",{node:u[0],captor:e.data}),l.dispatchEvent("clickNodes",{node:u,captor:e.data})):c.length?(l.dispatchEvent("clickEdge",{edge:c[0],captor:e.data}),l.dispatchEvent("clickEdges",{edge:c,captor:e.data})):l.dispatchEvent("clickStage",{captor:e.data}))}function r(e){l.settings("eventsEnabled")&&(l.dispatchEvent("doubleClick",e.data),u=n(e),c=i(e),u.length?(l.dispatchEvent("doubleClickNode",{node:u[0],captor:e.data}),l.dispatchEvent("doubleClickNodes",{node:u,captor:e.data})):c.length?(l.dispatchEvent("doubleClickEdge",{edge:c[0],captor:e.data}),l.dispatchEvent("doubleClickEdges",{edge:c,captor:e.data})):l.dispatchEvent("doubleClickStage",{captor:e.data}))}function o(e){l.settings("eventsEnabled")&&(l.dispatchEvent("rightClick",e.data),u=n(e),c=i(e),u.length?(l.dispatchEvent("rightClickNode",{node:u[0],captor:e.data}),l.dispatchEvent("rightClickNodes",{node:u,captor:e.data})):c.length?(l.dispatchEvent("rightClickEdge",{edge:c[0],captor:e.data}),l.dispatchEvent("rightClickEdges",{edge:c,captor:e.data})):l.dispatchEvent("rightClickStage",{captor:e.data}))}function s(e){if(l.settings("eventsEnabled")){var t,n,r,i,o=[],s=[];for(t in h)o.push(h[t]);for(h={},n=0,r=o.length;r>n;n++)l.dispatchEvent("outNode",{node:o[n],captor:e.data});for(o.length&&l.dispatchEvent("outNodes",{nodes:o,captor:e.data}),d={},n=0,i=s.length;i>n;n++)l.dispatchEvent("outEdge",{edge:s[n],captor:e.data});s.length&&l.dispatchEvent("outEdges",{edges:s,captor:e.data})}}function a(e){if(l.settings("eventsEnabled")){u=n(e),c=i(e);var t,r,o,s,a=[],f=[],p={},g=u.length,m=[],y=[],v={},b=c.length;for(t=0;g>t;t++)o=u[t],p[o.id]=o,h[o.id]||(f.push(o),h[o.id]=o);for(r in h)p[r]||(a.push(h[r]),delete h[r]);for(t=0,g=f.length;g>t;t++)l.dispatchEvent("overNode",{node:f[t],captor:e.data});for(t=0,g=a.length;g>t;t++)l.dispatchEvent("outNode",{node:a[t],captor:e.data});for(f.length&&l.dispatchEvent("overNodes",{nodes:f,captor:e.data}),a.length&&l.dispatchEvent("outNodes",{nodes:a,captor:e.data}),t=0;b>t;t++)s=c[t],v[s.id]=s,d[s.id]||(y.push(s),d[s.id]=s);for(r in d)v[r]||(m.push(d[r]),delete d[r]);for(t=0,b=y.length;b>t;t++)l.dispatchEvent("overEdge",{edge:y[t],captor:e.data});for(t=0,b=m.length;b>t;t++)l.dispatchEvent("outEdge",{edge:m[t],captor:e.data});y.length&&l.dispatchEvent("overEdges",{edges:y,captor:e.data}),m.length&&l.dispatchEvent("outEdges",{edges:m,captor:e.data})}}var u,c,h={},d={};e.bind("click",t),e.bind("mousedown",a),e.bind("mouseup",a),e.bind("mousemove",a),e.bind("mouseout",s),e.bind("doubleclick",r),e.bind("rightclick",o),l.bind("render",a)}var s,a,u,c,l=this;for(s=0,a=this.captors.length;a>s;s++)o(this.captors[s])}}.call(this),function(){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.misc"),r.misc.bindDOMEvents=function(e){function t(e){this.attr=function(t){return e.getAttributeNS(null,t)},this.tag=e.tagName,this.class=this.attr("class"),this.id=this.attr("id"),this.isNode=function(){return!!~this.class.indexOf(a.settings("classPrefix")+"-node")},this.isEdge=function(){return!!~this.class.indexOf(a.settings("classPrefix")+"-edge")},this.isHover=function(){return!!~this.class.indexOf(a.settings("classPrefix")+"-hover")}}function n(e){if(a.settings("eventsEnabled")){a.dispatchEvent("click",e);var n=new t(e.target);n.isNode()?a.dispatchEvent("clickNode",{node:u.nodes(n.attr("data-node-id"))}):a.dispatchEvent("clickStage"),e.preventDefault(),e.stopPropagation()}}function i(e){if(a.settings("eventsEnabled")){a.dispatchEvent("doubleClick",e);var n=new t(e.target);n.isNode()?a.dispatchEvent("doubleClickNode",{node:u.nodes(n.attr("data-node-id"))}):a.dispatchEvent("doubleClickStage"),e.preventDefault(),e.stopPropagation()}}function o(e){var n=e.toElement||e.target;if(a.settings("eventsEnabled")&&n){var r=new t(n);if(r.isNode())a.dispatchEvent("overNode",{node:u.nodes(r.attr("data-node-id"))});else if(r.isEdge()){var i=u.edges(r.attr("data-edge-id"));a.dispatchEvent("overEdge",{edge:i,source:u.nodes(i.source),target:u.nodes(i.target)})}}}function s(e){var n=e.fromElement||e.originalTarget;if(a.settings("eventsEnabled")){var r=new t(n);if(r.isNode())a.dispatchEvent("outNode",{node:u.nodes(r.attr("data-node-id"))});else if(r.isEdge()){var i=u.edges(r.attr("data-edge-id"));a.dispatchEvent("outEdge",{edge:i,source:u.nodes(i.source),target:u.nodes(i.target)})}}}var a=this,u=this.graph;e.addEventListener("click",n,!1),r.utils.doubleClick(e,"click",i),e.addEventListener("touchstart",n,!1),r.utils.doubleClick(e,"touchstart",i),e.addEventListener("mouseover",o,!0),e.addEventListener("mouseout",s,!0)}}.call(this),function(){"use strict";if("undefined"==typeof r)throw"sigma is not declared";r.utils.pkg("sigma.misc"),r.misc.drawHovers=function(e){function t(){n.contexts.hover.canvas.width=n.contexts.hover.canvas.width;var t,s,a,u,c,l=n.settings("defaultNodeType"),h=n.settings("defaultEdgeType"),d=r.canvas.hovers,f=r.canvas.edgehovers,p=r.canvas.extremities,g=n.settings.embedObjects({prefix:e});if(g("enableHovering")&&g("singleHover")&&Object.keys(i).length&&(u=i[Object.keys(i)[0]],(d[u.type]||d[l]||d.def)(u,n.contexts.hover,g)),g("enableHovering")&&!g("singleHover"))for(t in i)(d[i[t].type]||d[l]||d.def)(i[t],n.contexts.hover,g);if(g("enableEdgeHovering")&&g("singleHover")&&Object.keys(o).length&&(c=o[Object.keys(o)[0]],s=n.graph.nodes(c.source),a=n.graph.nodes(c.target),c.hidden||((f[c.type]||f[h]||f.def)(c,s,a,n.contexts.hover,g),g("edgeHoverExtremities")?(p[c.type]||p.def)(c,s,a,n.contexts.hover,g):((r.canvas.nodes[s.type]||r.canvas.nodes.def)(s,n.contexts.hover,g),(r.canvas.nodes[a.type]||r.canvas.nodes.def)(a,n.contexts.hover,g)))),g("enableEdgeHovering")&&!g("singleHover"))for(t in o)c=o[t],s=n.graph.nodes(c.source),a=n.graph.nodes(c.target),c.hidden||((f[c.type]||f[h]||f.def)(c,s,a,n.contexts.hover,g),g("edgeHoverExtremities")?(p[c.type]||p.def)(c,s,a,n.contexts.hover,g):((r.canvas.nodes[s.type]||r.canvas.nodes.def)(s,n.contexts.hover,g),(r.canvas.nodes[a.type]||r.canvas.nodes.def)(a,n.contexts.hover,g)))
}var n=this,i={},o={};this.bind("overNode",function(e){var n=e.data.node;n.hidden||(i[n.id]=n,t())}),this.bind("outNode",function(e){delete i[e.data.node.id],t()}),this.bind("overEdge",function(e){var n=e.data.edge;n.hidden||(o[n.id]=n,t())}),this.bind("outEdge",function(e){delete o[e.data.edge.id],t()}),this.bind("render",function(){t()})}}.call(this)},{}],209:[function(e,t){function n(e,t,n,r,i,o,s,a){var u,c,l,h,d,f,p,g,m,y,v,b,w,x={x:0,y:0};return u=r-t,l=e-n,d=n*t-e*r,m=u*i+l*o+d,y=u*s+l*a+d,0!==m&&0!==y&&m>=0==y>=4?null:(c=a-o,h=i-s,f=s*o-i*a,p=c*e+h*t+f,g=c*n+h*r+f,0!==p&&0!==g&&p>=0==g>=0?null:(v=u*h-c*l,0===v?null:(b=0>v?-v/2:v/2,b=0,w=l*f-h*d,x.x=(0>w?w-b:w+b)/v,w=c*d-u*f,x.y=(0>w?w-b:w+b)/v,x)))}t.exports=n},{}],210:[function(e,t){t.exports.degree=e("./src/degree.js"),t.exports.betweenness=e("./src/betweenness.js")},{"./src/betweenness.js":211,"./src/degree.js":212}],211:[function(e,t){function n(e,t){function n(e){g[e]/=2}function r(e){g[e.id]=0}function i(e){u=e.id,a(u),o()}function o(){for(e.forEachNode(s);l.length;){for(var t=l.pop(),n=(1+p[t])/f[t],r=h[t],i=0;i<r.length;++i){var o=r[i];p[o]+=f[o]*n}t!==u&&(g[t]+=p[t])}}function s(e){p[e.id]=0}function a(n){function r(e){o(e.id)}function i(e){var t=e.id;h[t]=[],d[t]=-1,f[t]=0}function o(e){-1===d[e]&&(d[e]=d[s]+1,c.push(e)),d[e]===d[s]+1&&(f[e]+=f[s],h[e].push(s))}for(e.forEachNode(i),d[n]=0,f[n]=1,c.push(n);c.length;){{var s=c.shift();Object.create(null)}l.push(s),e.forEachLinkedNode(s,r,t)}}var u,c=[],l=[],h=Object.create(null),d=Object.create(null),f=Object.create(null),p=Object.create(null),g=Object.create(null);return e.forEachNode(r),e.forEachNode(i),t||Object.keys(g).forEach(n),g}t.exports=n},{}],212:[function(e,t){function n(e,t){function n(t){var n=e.getLinks(t.id);a[t.id]=s(n,t.id)}var s,a=Object.create(null);if(t=(t||"both").toLowerCase(),"both"===t||"inout"===t)s=o;else if("in"===t)s=r;else{if("out"!==t)throw new Error("Expected centrality degree kind is: in, out or both");s=i}return e.forEachNode(n),a}function r(e,t){for(var n=0,r=0;r<e.length;r+=1)n+=e[r].toId===t?1:0;return n}function i(e,t){for(var n=0,r=0;r<e.length;r+=1)n+=e[r].fromId===t?1:0;return n}function o(e){return e.length}t.exports=n},{}],213:[function(e,t){function n(e){var t=Object.create(null);return{on:function(n,r,i){if("function"!=typeof r)throw new Error("callback is expected to be a function");var o=t[n];return o||(o=t[n]=[]),o.push({callback:r,ctx:i}),e},off:function(n,r){var i="undefined"==typeof n;if(i)return t=Object.create(null),e;if(t[n]){var o="function"!=typeof r;if(o)delete t[n];else for(var s=t[n],a=0;a<s.length;++a)s[a].callback===r&&s.splice(a,1)}return e},fire:function(n){var r=t[n];if(!r)return e;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var o=0;o<r.length;++o){var s=r[o];s.callback.apply(s.ctx,i)}return e}}}function r(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],n=0;n<t.length;++n)if(e.hasOwnProperty(t[n]))throw new Error("Subject cannot be eventified, since it already has property '"+t[n]+"'")}t.exports=function(e){r(e);var t=n(e);return e.on=t.on,e.off=t.off,e.fire=t.fire,e}},{}],214:[function(e,t){function n(t,n){function i(e,n){var r;if(void 0===n)r="string"==typeof e?e:e.id;else{var i=t.hasLink(e,n);if(!i)return;r=i.id}return x[r]}function o(e){return w[e]}function s(){t.on("changed",a)}function a(e){for(var t=0;t<e.length;++t){var n=e[t];"add"===n.changeType?(n.node&&c(n.node.id),n.link&&h(n.link)):"remove"===n.changeType&&(n.node&&l(n.node),n.link&&d(n.link))}}function u(){t.forEachNode(function(e){c(e.id)}),t.forEachLink(h)}function c(e){var n=w[e];if(!n){var r=t.getNode(e);if(!r)throw new Error("initBody() was called with unknown node id");var i=r.position;if(!i){var o=f(r);i=b.getBestNewBodyPosition(o)}n=b.addBodyAt(i),w[e]=n,p(e),g(r)&&(n.isPinned=!0)}}function l(e){var t=e.id,n=w[t];n&&(w[t]=null,delete w[t],b.removeBody(n))}function h(e){p(e.fromId),p(e.toId);var t=w[e.fromId],n=w[e.toId],r=b.addSpring(t,n,e.length);E(e,r),x[e.id]=r}function d(e){var n=x[e.id];if(n){var r=t.getNode(e.fromId),i=t.getNode(e.toId);r&&p(r.id),i&&p(i.id),delete x[e.id],b.removeSpring(n)}}function f(e){var t=[];if(!e.links)return t;for(var n=Math.min(e.links.length,2),r=0;n>r;++r){var i=e.links[r],o=i.fromId!==e.id?w[i.fromId]:w[i.toId];o&&o.pos&&t.push(o)}return t}function p(e){var t=w[e];t.mass=y(e)}function g(e){return e&&(e.isPinned||e.data&&e.data.isPinned)}function m(e){var t=w[e];return t||(c(e),t=w[e]),t}function y(e){var n=t.getNode(e),r=n.data&&void 0!==n.data.massMod?n.data.massMod:1;return r+t.getLinks(e).length/3}if(!t)throw new Error("Graph structure cannot be undefined");var v=e("ngraph.physics.simulator"),b=v(n),w="function"==typeof Object.create?Object.create(null):{},x={},E=b.settings.springTransform||r;u(),s();var S={step:function(){return b.step()},getNodePosition:function(e){return m(e).pos},setNodePosition:function(e){var t=m(e);t.setPosition.apply(t,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(e){var t=x[e];return t?{from:t.from.pos,to:t.to.pos}:void 0},getGraphRect:function(){return b.getBBox()},pinNode:function(e,t){var n=m(e.id);n.isPinned=!!t},isNodePinned:function(e){return m(e.id).isPinned},dispose:function(){t.off("changed",a)},getBody:o,getSpring:i,simulator:b};return S}function r(){}t.exports=n,t.exports.simulator=e("ngraph.physics.simulator")},{"ngraph.physics.simulator":215}],215:[function(e,t){function n(t){function n(){var e,t=d.length;if(t)for(p.insertBodies(d);t--;)e=d[t],e.force.reset(),p.updateBodyForce(e),y.update(e);for(t=f.length;t--;)m.update(f[t])}var r=e("./lib/spring"),i=e("ngraph.expose"),o=e("ngraph.merge");t=o(t,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20,stableThreshold:.009});var s=t.createQuadTree||e("ngraph.quadtreebh"),a=t.createBounds||e("./lib/bounds"),u=t.createDragForce||e("./lib/dragForce"),c=t.createSpringForce||e("./lib/springForce"),l=t.integrator||e("./lib/eulerIntegrator"),h=t.createBody||e("./lib/createBody"),d=[],f=[],p=s(t),g=a(d,t),m=c(t),y=u(t),v={bodies:d,springs:f,settings:t,step:function(){n();var e=l(d,t.timeStep);return g.update(),e<t.stableThreshold},addBody:function(e){if(!e)throw new Error("Body is required");return d.push(e),e},addBodyAt:function(e){if(!e)throw new Error("Body position is required");var t=h(e);return d.push(t),t},removeBody:function(e){if(e){var t=d.indexOf(e);if(!(0>t))return d.splice(t,1),0===d.length&&g.reset(),!0}},addSpring:function(e,t,n,i,o){if(!e||!t)throw new Error("Cannot add null spring to force simulator");"number"!=typeof n&&(n=-1);var s=new r(e,t,n,o>=0?o:-1,i);return f.push(s),s},removeSpring:function(e){if(e){var t=f.indexOf(e);return t>-1?(f.splice(t,1),!0):void 0}},getBestNewBodyPosition:function(e){return g.getBestNewPosition(e)},getBBox:function(){return g.box},gravity:function(e){return void 0!==e?(t.gravity=e,p.options({gravity:e}),this):t.gravity},theta:function(e){return void 0!==e?(t.theta=e,p.options({theta:e}),this):t.theta}};return i(t,v),v}t.exports=n},{"./lib/bounds":216,"./lib/createBody":217,"./lib/dragForce":218,"./lib/eulerIntegrator":219,"./lib/spring":220,"./lib/springForce":221,"ngraph.expose":222,"ngraph.merge":231,"ngraph.quadtreebh":224}],216:[function(e,t){t.exports=function(t,n){function r(){var e=t.length;if(0!==e){for(var n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,s=Number.MIN_VALUE;e--;){var a=t[e];a.isPinned?(a.pos.x=a.prevPos.x,a.pos.y=a.prevPos.y):(a.prevPos.x=a.pos.x,a.prevPos.y=a.pos.y),a.pos.x<n&&(n=a.pos.x),a.pos.x>i&&(i=a.pos.x),a.pos.y<r&&(r=a.pos.y),a.pos.y>s&&(s=a.pos.y)}o.x1=n,o.x2=i,o.y1=r,o.y2=s}}var i=e("ngraph.random").random(42),o={x1:0,y1:0,x2:0,y2:0};return{box:o,update:r,reset:function(){o.x1=o.y1=0,o.x2=o.y2=0},getBestNewPosition:function(e){var t=o,r=0,s=0;if(e.length){for(var a=0;a<e.length;++a)r+=e[a].pos.x,s+=e[a].pos.y;r/=e.length,s/=e.length}else r=(t.x1+t.x2)/2,s=(t.y1+t.y2)/2;var u=n.springLength;return{x:r+i.next(u)-u/2,y:s+i.next(u)-u/2}}}}},{"ngraph.random":232}],217:[function(e,t){var n=e("ngraph.physics.primitives");t.exports=function(e){return new n.Body(e)}},{"ngraph.physics.primitives":223}],218:[function(e,t){t.exports=function(t){var n=e("ngraph.merge"),r=e("ngraph.expose");t=n(t,{dragCoeff:.02});var i={update:function(e){e.force.x-=t.dragCoeff*e.velocity.x,e.force.y-=t.dragCoeff*e.velocity.y}};return r(t,i,["dragCoeff"]),i}},{"ngraph.expose":222,"ngraph.merge":231}],219:[function(e,t){function n(e,t){var n,r=0,i=0,o=0,s=0,a=e.length;for(n=0;a>n;++n){var u=e[n],c=t/u.mass;u.velocity.x+=c*u.force.x,u.velocity.y+=c*u.force.y;var l=u.velocity.x,h=u.velocity.y,d=Math.sqrt(l*l+h*h);d>1&&(u.velocity.x=l/d,u.velocity.y=h/d),r=t*u.velocity.x,o=t*u.velocity.y,u.pos.x+=r,u.pos.y+=o,i+=Math.abs(r),s+=Math.abs(o)}return(i*i+s*s)/e.length}t.exports=n},{}],220:[function(e,t){function n(e,t,n,r,i){this.from=e,this.to=t,this.length=n,this.coeff=r,this.weight="number"==typeof i?i:1}t.exports=n},{}],221:[function(e,t){t.exports=function(t){var n=e("ngraph.merge"),r=e("ngraph.random").random(42),i=e("ngraph.expose");t=n(t,{springCoeff:2e-4,springLength:80});var o={update:function(e){var n=e.from,i=e.to,o=e.length<0?t.springLength:e.length,s=i.pos.x-n.pos.x,a=i.pos.y-n.pos.y,u=Math.sqrt(s*s+a*a);0===u&&(s=(r.nextDouble()-.5)/50,a=(r.nextDouble()-.5)/50,u=Math.sqrt(s*s+a*a));var c=u-o,l=(!e.coeff||e.coeff<0?t.springCoeff:e.coeff)*c/u*e.weight;n.force.x+=l*s,n.force.y+=l*a,i.force.x-=l*s,i.force.y-=l*a}};return i(t,o,["springCoeff","springLength"]),o}},{"ngraph.expose":222,"ngraph.merge":231,"ngraph.random":232}],222:[function(e,t){function n(e,t,n){var i="[object Array]"===Object.prototype.toString.call(n);if(i)for(var o=0;o<n.length;++o)r(e,t,n[o]);else for(var s in e)r(e,t,s)}function r(e,t,n){if(e.hasOwnProperty(n)){if("function"==typeof t[n])return;t[n]=function(r){return void 0!==r?(e[n]=r,t):e[n]}}}t.exports=n},{}],223:[function(e,t){function n(e,t){this.pos=new r(e,t),this.prevPos=new r(e,t),this.force=new r,this.velocity=new r,this.mass=1}function r(e,t){e&&"number"!=typeof e?(this.x="number"==typeof e.x?e.x:0,this.y="number"==typeof e.y?e.y:0):(this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0)}function i(e,t,n){this.pos=new o(e,t,n),this.prevPos=new o(e,t,n),this.force=new o,this.velocity=new o,this.mass=1}function o(e,t,n){e&&"number"!=typeof e?(this.x="number"==typeof e.x?e.x:0,this.y="number"==typeof e.y?e.y:0,this.z="number"==typeof e.z?e.z:0):(this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0,this.z="number"==typeof n?n:0)}t.exports={Body:n,Vector2d:r,Body3d:i,Vector3d:o},n.prototype.setPosition=function(e,t){this.prevPos.x=this.pos.x=e,this.prevPos.y=this.pos.y=t},r.prototype.reset=function(){this.x=this.y=0},i.prototype.setPosition=function(e,t,n){this.prevPos.x=this.pos.x=e,this.prevPos.y=this.pos.y=t,this.prevPos.z=this.pos.z=n},o.prototype.reset=function(){this.x=this.y=this.z=0}},{}],224:[function(e,t){function n(e,t){return 0===t?e.quad0:1===t?e.quad1:2===t?e.quad2:3===t?e.quad3:null}function r(e,t,n){0===t?e.quad0=n:1===t?e.quad1=n:2===t?e.quad2=n:3===t&&(e.quad3=n)}t.exports=function(t){t=t||{},t.gravity="number"==typeof t.gravity?t.gravity:-1,t.theta="number"==typeof t.theta?t.theta:.8;var i=e("ngraph.random").random(1984),o=e("./node"),s=e("./insertStack"),a=e("./isSamePosition"),u=t.gravity,c=[],l=new s,h=t.theta,d=[],f=0,p=function(){var e=d[f];return e?(e.quad0=null,e.quad1=null,e.quad2=null,e.quad3=null,e.body=null,e.mass=e.massX=e.massY=0,e.left=e.right=e.top=e.bottom=0):(e=new o,d[f]=e),++f,e},g=p(),m=function(e){for(l.reset(),l.push(g,e);!l.isEmpty();){var t=l.pop(),o=t.node,s=t.body;if(o.body){var u=o.body;if(o.body=null,a(u.pos,s.pos)){var c=3;do{var h=i.nextDouble(),d=(o.right-o.left)*h,f=(o.bottom-o.top)*h;u.pos.x=o.left+d,u.pos.y=o.top+f,c-=1}while(c>0&&a(u.pos,s.pos));if(0===c&&a(u.pos,s.pos))return}l.push(o,u),l.push(o,s)}else{var m=s.pos.x,y=s.pos.y;o.mass=o.mass+s.mass,o.massX=o.massX+s.mass*m,o.massY=o.massY+s.mass*y;var v=0,b=o.left,w=(o.right+b)/2,x=o.top,E=(o.bottom+x)/2;if(m>w){v+=1;var S=b;b=w,w+=w-S}if(y>E){v+=2;var _=x;x=E,E+=E-_}var T=n(o,v);T?l.push(T,s):(T=p(),T.left=b,T.top=x,T.right=w,T.bottom=E,T.body=s,r(o,v,T))}}},y=function(e){var t,n,r,o,s=c,a=0,l=0,d=1,f=0,p=1;for(s[0]=g;d;){var m=s[f],y=m.body;d-=1,f+=1;var v=y!==e;y&&v?(n=y.pos.x-e.pos.x,r=y.pos.y-e.pos.y,o=Math.sqrt(n*n+r*r),0===o&&(n=(i.nextDouble()-.5)/50,r=(i.nextDouble()-.5)/50,o=Math.sqrt(n*n+r*r)),t=u*y.mass*e.mass/(o*o*o),a+=t*n,l+=t*r):v&&(n=m.massX/m.mass-e.pos.x,r=m.massY/m.mass-e.pos.y,o=Math.sqrt(n*n+r*r),0===o&&(n=(i.nextDouble()-.5)/50,r=(i.nextDouble()-.5)/50,o=Math.sqrt(n*n+r*r)),(m.right-m.left)/o<h?(t=u*m.mass*e.mass/(o*o*o),a+=t*n,l+=t*r):(m.quad0&&(s[p]=m.quad0,d+=1,p+=1),m.quad1&&(s[p]=m.quad1,d+=1,p+=1),m.quad2&&(s[p]=m.quad2,d+=1,p+=1),m.quad3&&(s[p]=m.quad3,d+=1,p+=1)))}e.force.x+=a,e.force.y+=l},v=function(e){var t,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,o=Number.MIN_VALUE,s=e.length;for(t=s;t--;){var a=e[t].pos.x,u=e[t].pos.y;n>a&&(n=a),a>i&&(i=a),r>u&&(r=u),u>o&&(o=u)}var c=i-n,l=o-r;for(c>l?o=r+c:i=n+l,f=0,g=p(),g.left=n,g.right=i,g.top=r,g.bottom=o,t=s-1,t>0&&(g.body=e[t]);t--;)m(e[t],g)};return{insertBodies:v,updateBodyForce:y,options:function(e){return e?("number"==typeof e.gravity&&(u=e.gravity),"number"==typeof e.theta&&(h=e.theta),this):{gravity:u,theta:h}}}}},{"./insertStack":225,"./isSamePosition":226,"./node":227,"ngraph.random":232}],225:[function(e,t){function n(){this.stack=[],this.popIdx=0}function r(e,t){this.node=e,this.body=t}t.exports=n,n.prototype={isEmpty:function(){return 0===this.popIdx},push:function(e,t){var n=this.stack[this.popIdx];n?(n.node=e,n.body=t):this.stack[this.popIdx]=new r(e,t),++this.popIdx},pop:function(){return this.popIdx>0?this.stack[--this.popIdx]:void 0},reset:function(){this.popIdx=0}}},{}],226:[function(e,t){t.exports=function(e,t){var n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1e-8>n&&1e-8>r}},{}],227:[function(e,t){t.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},{}],228:[function(e,t){function n(e,t,n){var o;t=t||r,n=n||r,o="string"==typeof e?JSON.parse(e):e;var s,a=i();if(void 0===o.links||void 0===o.nodes)throw new Error("Cannot load graph without links and nodes");for(s=0;s<o.nodes.length;++s){var u=t(o.nodes[s]);if(!u.hasOwnProperty("id"))throw new Error("Graph node format is invalid: Node id is missing");a.addNode(u.id,u.data)}for(s=0;s<o.links.length;++s){var c=n(o.links[s]);if(!c.hasOwnProperty("fromId")||!c.hasOwnProperty("toId"))throw new Error("Graph link format is invalid. Both fromId and toId are required");a.addLink(c.fromId,c.toId,c.data)}return a}function r(e){return e}t.exports=n;var i=e("ngraph.graph")},{"ngraph.graph":230}],229:[function(e,t){function n(e){if(!e||0>e)throw new Error("Invalid number of nodes");var t,n=d();for(t=0;e-1>t;++t)n.addLink(t,t+1),n.addLink(e+t,e+t+1),n.addLink(t,e+t);return n.addLink(e-1,2*e-1),n}function r(e){if(!e||0>e)throw new Error("Invalid number of nodes");var t=n(e);return t.addLink(0,e-1),t.addLink(e,2*e-1),t}function i(e){if(!e||1>e)throw new Error("At least two nodes are expected for complete graph");var t,n,r=d();for(t=0;e>t;++t)for(n=t+1;e>n;++n)t!==n&&r.addLink(t,n);return r}function o(e,t){if(!e||!t||0>e||0>t)throw new Error("Graph dimensions are invalid. Number of nodes in each partition should be greater than 0");var n,r,i=d();for(n=0;e>n;++n)for(r=e;e+t>r;++r)i.addLink(n,r);return i}function s(e){if(!e||0>e)throw new Error("Invalid number of nodes");var t,n=d();for(n.addNode(0),t=1;e>t;++t)n.addLink(t-1,t);return n}function a(e,t){if(1>e||1>t)throw new Error("Invalid number of nodes in grid graph");var n,r,i=d();if(1===e&&1===t)return i.addNode(0),i;for(n=0;e>n;++n)for(r=0;t>r;++r){var o=n+r*e;n>0&&i.addLink(o,n-1+r*e),r>0&&i.addLink(o,n+(r-1)*e)}return i}function u(e,t,n){if(1>e||1>t||1>n)throw new Error("Invalid number of nodes in grid3 graph");var r,i,o,s=d();if(1===e&&1===t&&1===n)return s.addNode(0),s;for(o=0;n>o;++o)for(r=0;e>r;++r)for(i=0;t>i;++i){var a=o*e*t,u=r+i*e+a;r>0&&s.addLink(u,r-1+i*e+a),i>0&&s.addLink(u,r+(i-1)*e+a),o>0&&s.addLink(u,r+i*e+(o-1)*e*t)}return s}function c(e){if(0>e)throw new Error("Invalid number of nodes in balanced tree");var t,n=d(),r=Math.pow(2,e);for(0===e&&n.addNode(1),t=1;r>t;++t){var i=t,o=2*i,s=2*i+1;n.addLink(i,o),n.addLink(i,s)}return n}function l(e){if(0>e)throw new Error("Number of nodes shoul be >= 0");var t,n=d();for(t=0;e>t;++t)n.addNode(t);return n}function h(t,n,r,i){if(n>=t)throw new Error("Choose smaller `k`. It cannot be larger than number of nodes `n`");var o,s,a=e("ngraph.random").random(i||42),u=d();for(o=0;t>o;++o)u.addNode(o);for(var c=Math.floor(n/2+1),l=1;c>l;++l)for(o=0;t>o;++o)s=(l+o)%t,u.addLink(o,s);for(l=1;c>l;++l)for(o=0;t>o;++o)if(a.nextDouble()<r){var h=o;s=(l+o)%t;var f=a.next(t),p=f===h||u.hasLink(h,f);if(p&&u.getLinks(h).length===t-1)continue;for(;p;)f=a.next(t),p=f===h||u.hasLink(h,f);var g=u.hasLink(h,s);u.removeLink(g),u.addLink(h,f)}return u}t.exports={ladder:n,complete:i,completeBipartite:o,balancedBinTree:c,path:s,circularLadder:r,grid:a,grid3:u,noLinks:l,wattsStrogatz:h};var d=e("ngraph.graph")},{"ngraph.graph":230,"ngraph.random":232}],230:[function(e,t){function n(e){function t(){function e(){return V.beginUpdate=G=T,V.endUpdate=X=A,Y=n,q=u,H=P,V.on=t,t.apply(V,arguments)}var t=V.on;V.on=e}function n(e,t){W.push({link:e,changeType:t})}function u(e,t){W.push({node:e,changeType:t})}function c(e,t){if(void 0===e)throw new Error("Invalid node identifier");G();var n=l(e);return n?q(n,"update"):(n=new i(e),F++,q(n,"add")),n.data=t,O[e]=n,X(),n}function l(e){return O[e]}function h(e){var t=l(e);if(!t)return!1;for(G();t.links.length;){var n=t.links[0];y(n)}return delete O[e],F--,q(t,"remove"),X(),!0}function d(e,t,n,r){var i=l(e),o=l(t);if(!i)throw"Given id does not correspond to an existing node: "+e;if(!o)throw"Given id does not correspond to an existing node: "+t;var s=B(e,t,n);return f(s,r)}function f(e,t){var n=l(e.fromId),r=l(e.toId);return G(),t&&(e.length=t),j.push(e),n.links.push(e),e.fromId!==e.toId&&r.links.push(e),Y(e,"add"),X(),e}function p(e,t,n){var r=e.toString()+t.toString();return new o(e,t,n,r)}function g(e,t,n){var r=e.toString()+"👉 "+t.toString(),i=R.hasOwnProperty(r);return(i||v(e,t))&&(i||(R[r]=0),r+="@"+ ++R[r]),new o(e,t,n,r)}function m(e){var t=l(e);return t?t.links.slice(0):null}function y(e){if(!e)return!1;var t=r(e,j);if(0>t)return!1;G(),j.splice(t,1);var n=l(e.fromId),i=l(e.toId);return n&&(t=r(e,n.links),t>=0&&n.links.splice(t,1)),i&&(t=r(e,i.links),t>=0&&i.links.splice(t,1)),Y(e,"remove"),X(),!0}function v(e,t){var n,r=l(e);if(!r)return null;for(n=0;n<r.links.length;++n){var i=r.links[n];if(i.fromId===e&&i.toId===t)return i}return null}function b(){G(),z(function(e){h(e.id)}),D(function(e){I(e.id)}),X()}function w(e){var t,n;if("function"==typeof e)for(t=0,n=j.length;n>t;++t)e(j[t])}function x(e,t,n){var r=l(e);return r&&r.links&&"function"==typeof t?n?S(r.links,e,t):E(r.links,e,t):void 0}function E(e,t,n){for(var r,i=0;i<e.length;++i){var o=e[i],s=o.fromId===t?o.toId:o.fromId;if(r=n(O[s],o))return!0}}function S(e,t,n){for(var r,i=0;i<e.length;++i){var o=e[i];if(o.fromId===t&&(r=n(O[o.toId],o)))return!0}}function _(){}function T(){U+=1}function A(){U-=1,0===U&&W.length>0&&(V.fire("changed",W),W.length=0)}function C(){return Object.keys?k:M}function k(e){if("function"==typeof e)for(var t=Object.keys(O),n=0;n<t.length;++n)if(e(O[t[n]]))return!0}function M(e){if("function"==typeof e){var t;for(t in O)if(e(O[t]))return!0}}function P(e,t){W.push({label:e,changeType:t})}function N(e,t){if(void 0===e)throw new Error("Invalid node identifier");G();var n=L(e);return n?H(n,"update"):(n=new s(e),H(n,"add")),n.data=t,$[e]=n,X(),n}function L(e){return $[e]}function I(e){var t=L(e);return t?(G(),delete $[e],H(t,"remove"),X(),!0):!1}function D(e){if("function"==typeof e)for(var t in $)e($[t])}e=e||{},void 0===e.uniqueLinkId&&(e.uniqueLinkId=!0);var O="function"==typeof Object.create?Object.create(null):{},j=[],R={},F=0,U=0,z=C(),B=e.uniqueLinkId?g:p,W=[],Y=_,q=_,H=_,G=_,X=_,$={},V={addNode:c,addLink:d,createLink:B,addCreatedLink:f,removeLink:y,removeNode:h,addLabel:N,removeLabel:I,getLabel:L,forEachLabel:D,getNode:l,getNodesCount:function(){return F},getLinksCount:function(){return j.length},getLinks:m,forEachNode:z,forEachLinkedNode:x,forEachLink:w,beginUpdate:G,endUpdate:X,clear:b,hasLink:v,getLink:v};return a(V),t(),V}function r(e,t){if(t.indexOf)return t.indexOf(e);var n,r=t.length;for(n=0;r>n;n+=1)if(t[n]===e)return n;return-1}function i(e){this.id=e,this.links=[],this.data=null}function o(e,t,n,r){this.fromId=e,this.toId=t,this.data=n,this.id=r}function s(e){this.id=e}t.exports=n;var a=e("ngraph.events")},{"ngraph.events":213}],231:[function(e,t){function n(e,t){var r;if(e||(e={}),t)for(r in t)if(t.hasOwnProperty(r)){var i=e.hasOwnProperty(r),o=typeof t[r],s=!i||typeof e[r]!==o;s?e[r]=t[r]:"object"===o&&(e[r]=n(e[r],t[r]))}return e}t.exports=n},{}],232:[function(e,t){function n(e){var t="number"==typeof e?e:+new Date,n=function(){return t=t+2127912214+(t<<12)&4294967295,t=4294967295&(3345072700^t^t>>>19),t=t+374761393+(t<<5)&4294967295,t=4294967295&(t+3550635116^t<<9),t=t+4251993797+(t<<3)&4294967295,t=4294967295&(3042594569^t^t>>>16),(268435455&t)/268435456};return{next:function(e){return Math.floor(n()*e)},nextDouble:function(){return n()}}}function r(e,t){var r=t||n();if("function"!=typeof r.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(t){var n,i,o;for(n=e.length-1;n>0;--n)i=r.next(n+1),o=e[i],e[i]=e[n],e[n]=o,t(o);e.length&&t(e[0])},shuffle:function(){var t,n,i;for(t=e.length-1;t>0;--t)n=r.next(t+1),i=e[n],e[n]=e[t],e[t]=i;return e}}}t.exports={random:n,randomIterator:r}},{}],233:[function(e,t){function n(e,t,n){function r(e){a.nodes.push(u(e))}function i(e){a.links.push(c(e))}function o(e){var t={id:e.id};return void 0!==e.data&&(t.data=e.data),t}function s(e){var t={fromId:e.fromId,toId:e.toId};return void 0!==e.data&&(t.data=e.data),t}var a={nodes:[],links:[]},u=t||o,c=n||s;return e.forEachNode(r),e.forEachLink(i),JSON.stringify(a)}t.exports=n},{}],234:[function(e,t){function n(e,t){var n=r(e);if(void 0===t)return n;for(var i=Object.keys(t),o=0;o<i.length;++o){var s=i[o],a=t[s];"link"===s?n.link(a):n.attr(s,a)}return n}function r(e){function t(e){return x||(x=s(w)),x.link(e),w}function r(e,t,n){return a.addEventListener(w,e,t,n),w}function l(e,t,n){return a.removeEventListener(w,e,t,n),w}function h(e){var t=n(e);return w.appendChild(t),t}function d(e){if(e){var t=i(w);return t[e]=!0,o(w,t),w}}function f(e){for(var t=0;t<e.length;t++)d(e[t]);return w}function p(e){if(e){var t=i(w);return t[e]=!1,o(w,t),w}}function g(e){for(var t=0;t<e.length;t++)p(e[t]);return w}function m(e,t){return 2===arguments.length?(null!==t?w.setAttributeNS(null,e,t):w.removeAttributeNS(null,e),w):w.getAttributeNS(null,e)}function y(e){for(var t in e)m(t,e[t]);return w}function v(e){return arguments.length?(w.setAttributeNS(c,"xlink:href",e),w):w.getAttributeNS(c,"xlink:href")}function b(e){return void 0!==e?(w.textContent=e,w):w.textContent}var w=e;if("string"==typeof e)w=window.document.createElementNS(u,e);else if(e.simplesvg)return e;var x;return w.simplesvg=!0,w.attr=m,w.attrs=y,w.append=h,w.link=v,w.text=b,w.addClass=d,w.addClasses=f,w.removeClass=p,w.removeClasses=g,w.on=r,w.off=l,w.dataSource=t,w}function i(e){for(var t=e.getAttributeNS(null,"class"),n=t?t.split(" "):[],r=Object.create(null),i=0;i<n.length;i++){var o=n[i];r[o]=!0}return r}function o(e,t){var n=[];for(var r in t)t[r]&&n.push(r);var i=n.join(" ");e.setAttributeNS(null,"class",i)}t.exports=n,n.compile=e("./lib/compile");var s=n.compileTemplate=e("./lib/compile_template"),a=e("add-event-listener"),u="http://www.w3.org/2000/svg",c="http://www.w3.org/1999/xlink"},{"./lib/compile":235,"./lib/compile_template":236,"add-event-listener":238}],235:[function(e,t){function n(e){try{return e=r(e),o(i.parseFromString(e,"text/xml").documentElement)}catch(t){throw t}}function r(e){if(e){var t='xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg"',n=e.match(/^<\w+/);if(n){var r=n[0].length;return e.substr(0,r)+" "+t+" "+e.substr(r)}throw new Error("Cannot parse input text: invalid xml?")}}var i=e("./domparser.js"),o=e("../");t.exports=n},{"../":234,"./domparser.js":237}],236:[function(e,t){function n(e){var t=Object.create(null);return r(e,t),{link:function(e){function n(t){t(e)}Object.keys(t).forEach(function(e){var r=t[e];r.forEach(n)})}}}function r(e,t){var n=e.nodeType,s=1===n||3===n;if(s){var a;if(e.hasChildNodes()){var u=e.childNodes;for(a=0;a<u.length;++a)r(u[a],t)}if(3===n&&o(e,t),e.attributes){var c=e.attributes;for(a=0;a<c.length;++a)i(c[a],e,t)}}}function i(e,t,n){function r(e){t.setAttributeNS(null,a,e[u])}var i=e.value;if(i){var o=i.match(s);if(o){var a=e.localName,u=o[1],c=u.indexOf(".")<0;if(!c)throw new Error("simplesvg currently does not support nested bindings");var l=n[u];l?l.push(r):l=n[u]=[r]}}}function o(e,t){function n(t){e.nodeValue=t[o]}var r=e.nodeValue;if(r){var i=r.match(s);if(i){var o=i[1],a=(o.indexOf(".")<0,t[o]);a?a.push(n):a=t[o]=[n]}}}t.exports=n;var s=/{{(.+?)}}/},{}],237:[function(e,t){function n(){return"undefined"==typeof DOMParser?{parseFromString:r}:new DOMParser}function r(){throw new Error("DOMParser is not supported by this platform. Please open issue here https://github.com/anvaka/simplesvg")}t.exports=n()},{}],238:[function(e,t){function n(e,t,n,r){return u=u||(document.addEventListener?{add:i,rm:o}:{add:s,rm:a}),u.add(e,t,n,r)}function r(e,t,n,r){return u=u||(document.addEventListener?{add:i,rm:o}:{add:s,rm:a}),u.rm(e,t,n,r)}function i(e,t,n,r){e.addEventListener(t,n,r)}function o(e,t,n,r){e.removeEventListener(t,n,r)}function s(e,t,n,r){if(r)throw new Error("cannot useCapture in oldIE");e.attachEvent("on"+t,n)}function a(e,t,n){e.detachEvent("on"+t,n)}n.removeEventListener=r,n.addEventListener=n,t.exports=n;var u=null},{}],239:[function(e,t){function n(){return{betweennessCentrality:r,degreeCentrality:i}}function r(e){var t=s.betweenness(e);return o(t)}function i(e,t){var n=s.degree(e,t);return o(n)}function o(e){function t(t,n){return e[n]-e[t]}function n(t){return{key:t,value:e[t]}}return Object.keys(e).sort(t).map(n)}var s=e("ngraph.centrality");t.exports=n},{"ngraph.centrality":210}],240:[function(e,t){function n(){return{density:function(e,t){var n=e.getNodesCount();return 0===n?0/0:t?e.getLinksCount()/(n*(n-1)):2*e.getLinksCount()/(n*(n-1))}}}t.exports=n},{}],241:[function(e,t){function n(e,t){function n(e,n){var o;if(n){var s=t.getNodeUI(e.id);o=r(s),"function"==typeof n.onStart&&o.onStart(n.onStart),"function"==typeof n.onDrag&&o.onDrag(n.onDrag),"function"==typeof n.onStop&&o.onStop(n.onStop),i[e.id]=o}else(o=i[e.id])&&(o.release(),delete i[e.id])}var i={};return{bindDragNDrop:n}}t.exports=n;var r=e("./dragndrop.js")},{"./dragndrop.js":242}],242:[function(e,t){function n(e){var t,n,s,a,u,c,l,h=0,d=0,f=!1,p=0,g=function(e){var t=0,n=0;return e=e||window.event,e.pageX||e.pageY?(t=e.pageX,n=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+window.document.body.scrollLeft+window.document.documentElement.scrollLeft,n=e.clientY+window.document.body.scrollTop+window.document.documentElement.scrollTop),[t,n]},m=function(e,t,r){n&&n(e,{x:t-h,y:r-d}),h=t,d=r},y=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},v=function(e){e.preventDefault&&e.preventDefault()},b=function(e){return y(e),!1},w=function(e){e=e||window.event,m(e,e.clientX,e.clientY)},x=function(e){if(e=e||window.event,f)return y(e),!1;var n=1===e.button&&null!==window.event||0===e.button;return n?(h=e.clientX,d=e.clientY,l=e.target||e.srcElement,t&&t(e,{x:h,y:d}),r.on("mousemove",w),r.on("mouseup",E),y(e),u=window.document.onselectstart,c=window.document.ondragstart,window.document.onselectstart=b,l.ondragstart=b,!1):void 0},E=function(e){e=e||window.event,r.off("mousemove",w),r.off("mouseup",E),window.document.onselectstart=u,l.ondragstart=c,l=null,s&&s(e)},S=function(t){if("function"==typeof a){t=t||window.event,t.preventDefault&&t.preventDefault(),t.returnValue=!1;var n,r=g(t),i=o(e),s={x:r[0]-i[0],y:r[1]-i[1]};n=t.wheelDelta?t.wheelDelta/360:t.detail/-9,a(t,n,s)}},_=function(t){!a&&t?"webkit"===i.browser?e.addEventListener("mousewheel",S,!1):e.addEventListener("DOMMouseScroll",S,!1):a&&!t&&("webkit"===i.browser?e.removeEventListener("mousewheel",S,!1):e.removeEventListener("DOMMouseScroll",S,!1)),a=t},T=function(e,t){return(e.clientX-t.clientX)*(e.clientX-t.clientX)+(e.clientY-t.clientY)*(e.clientY-t.clientY)},A=function(e){if(1===e.touches.length){y(e);var t=e.touches[0];m(e,t.clientX,t.clientY)}else if(2===e.touches.length){var n=T(e.touches[0],e.touches[1]),r=0;p>n?r=-1:n>p&&(r=1),a(e,r,{x:e.touches[0].clientX,y:e.touches[0].clientY}),p=n,y(e),v(e)}},C=function(e){f=!1,r.off("touchmove",A),r.off("touchend",C),r.off("touchcancel",C),l=null,s&&s(e)},k=function(e,n){y(e),v(e),h=n.clientX,d=n.clientY,l=e.target||e.srcElement,t&&t(e,{x:h,y:d}),f||(f=!0,r.on("touchmove",A),r.on("touchend",C),r.on("touchcancel",C))},M=function(e){return 1===e.touches.length?k(e,e.touches[0]):void(2===e.touches.length&&(y(e),v(e),p=T(e.touches[0],e.touches[1])))};return e.addEventListener("mousedown",x),e.addEventListener("touchstart",M),{onStart:function(e){return t=e,this},onDrag:function(e){return n=e,this},onStop:function(e){return s=e,this},onScroll:function(e){return _(e),this},release:function(){e.removeEventListener("mousedown",x),e.removeEventListener("touchstart",M),r.off("mousemove",w),r.off("mouseup",E),r.off("touchmove",A),r.off("touchend",C),r.off("touchcancel",C),_(null)}}}t.exports=n;var r=e("../Utils/documentEvents.js"),i=e("../Utils/browserInfo.js"),o=e("../Utils/findElementPosition.js")},{"../Utils/browserInfo.js":246,"../Utils/documentEvents.js":247,"../Utils/findElementPosition.js":248}],243:[function(e,t){function n(e,t){var n=r(t),i=null,o={},s={x:0,y:0};return n.mouseDown(function(e,t){i=e,s.x=t.clientX,s.y=t.clientY,n.mouseCapture(i);var r=o[e.id];return r&&r.onStart&&r.onStart(t,s),!0}).mouseUp(function(e){n.releaseMouseCapture(i),i=null;var t=o[e.id];return t&&t.onStop&&t.onStop(),!0}).mouseMove(function(e,t){if(i){var n=o[i.id];return n&&n.onDrag&&n.onDrag(t,{x:t.clientX-s.x,y:t.clientY-s.y}),s.x=t.clientX,s.y=t.clientY,!0}}),{bindDragNDrop:function(e,t){o[e.id]=t,t||delete o[e.id]}}}t.exports=n;var r=e("../WebGL/webglInputEvents.js")},{"../WebGL/webglInputEvents.js":264}],244:[function(e,t){function n(e,t){function n(e){return h[e]}t=r(t,{maxX:1024,maxY:1024,seed:"Deterministic randomness made me do this"});var s=i(t.seed),a=new o(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),u={},c=function(){return{x:s.next(t.maxX),y:s.next(t.maxY)}},l=function(e,t){e.x<t.x1&&(t.x1=e.x),e.x>t.x2&&(t.x2=e.x),e.y<t.y1&&(t.y1=e.y),e.y>t.y2&&(t.y2=e.y)},h="function"==typeof Object.create?Object.create(null):{},d=function(e){h[e.id]=c(e),l(h[e.id],a)},f=function(){0!==e.getNodesCount()&&(a.x1=Number.MAX_VALUE,a.y1=Number.MAX_VALUE,a.x2=Number.MIN_VALUE,a.y2=Number.MIN_VALUE,e.forEachNode(d))},p=function(e){u[e.id]=e},g=function(e){for(var t=0;t<e.length;++t){var n=e[t];n.node&&("add"===n.changeType?d(n.node):delete h[n.node.id]),n.link&&("add"===n.changeType?p(n.link):delete u[n.link.id])}};return e.forEachNode(d),e.forEachLink(p),e.on("changed",g),{run:function(){this.step()},step:function(){return f(),!0},getGraphRect:function(){return a},dispose:function(){e.off("change",g)},isNodePinned:function(){return!0},pinNode:function(){},getNodePosition:n,getLinkPosition:function(e){var t=u[e];return{from:n(t.fromId),to:n(t.toId)}
},setNodePosition:function(e,t,n){var r=h[e];r&&(r.x=t,r.y=n)},placeNode:function(e){return"function"==typeof e?(c=e,f(),this):c(e)}}}t.exports=n;var r=e("ngraph.merge"),i=e("ngraph.random").random,o=e("../Utils/rect.js")},{"../Utils/rect.js":252,"ngraph.merge":231,"ngraph.random":232}],245:[function(e,t){function n(e){function t(){var t=r(e);return t.addEventListener=t.on,t}if(console.log("This method is deprecated. Please use Viva.events() instead"),!e)return e;var n=void 0!==e.on||void 0!==e.off||void 0!==e.fire;return n?{extend:function(){return e},on:e.on,stop:e.off}:{extend:t,on:e.on,stop:e.off}}var r=e("ngraph.events");t.exports=n},{"ngraph.events":213}],246:[function(e,t){function n(){if("undefined"==typeof window||!window.hasOwnProperty("navigator"))return{browser:"",version:"0"};var e=window.navigator.userAgent.toLowerCase(),t=/(webkit)[ \/]([\w.]+)/,n=/(opera)(?:.*version)?[ \/]([\w.]+)/,r=/(msie) ([\w.]+)/,i=/(mozilla)(?:.*? rv:([\w.]+))?/,o=t.exec(e)||n.exec(e)||r.exec(e)||e.indexOf("compatible")<0&&i.exec(e)||[];return{browser:o[1]||"",version:o[2]||"0"}}t.exports=n()},{}],247:[function(e,t){function n(){return void 0===typeof document?o:{on:r,off:i}}function r(e,t){document.addEventListener(e,t)}function i(e,t){document.removeEventListener(e,t)}var o=e("./nullEvents.js");t.exports=n()},{"./nullEvents.js":251}],248:[function(e,t){function n(e){var t=0,n=0;if(e.offsetParent)do t+=e.offsetLeft,n+=e.offsetTop;while(null!==(e=e.offsetParent));return[t,n]}t.exports=n},{}],249:[function(e,t){function n(e){if(!e)throw{message:"Cannot get dimensions of undefined container"};var t=e.clientWidth,n=e.clientHeight;return{left:0,top:0,width:t,height:n}}t.exports=n},{}],250:[function(e,t){function n(e,t,n,i,o,s,a,u){return r(e,t,e,i,o,s,a,u)||r(e,i,n,i,o,s,a,u)||r(n,i,n,t,o,s,a,u)||r(n,t,e,t,o,s,a,u)}var r=e("gintersect");t.exports=n},{gintersect:209}],251:[function(e,t){function n(){return{on:r,off:r,stop:r}}function r(){}t.exports=n()},{}],252:[function(e,t){function n(e,t,n,r){this.x1=e||0,this.y1=t||0,this.x2=n||0,this.y2=r||0}t.exports=n},{}],253:[function(e,t){(function(e){function n(){function t(e){function t(){i=s.requestAnimationFrame(t),e()||n()}function n(){s.cancelAnimationFrame(i),i=0}function r(){i||t()}var i;return t(),{stop:n,restart:r}}function n(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-a)),r=s.setTimeout(function(){e(t+n)},n);return a=t+n,r}function i(e){s.clearTimeout(e)}var o,s,a=0,u=["ms","moz","webkit","o"];for(s="undefined"!=typeof window?window:"undefined"!=typeof e?e:{setTimeout:r,clearTimeout:r},o=0;o<u.length&&!s.requestAnimationFrame;++o){var c=u[o];s.requestAnimationFrame=s[c+"RequestAnimationFrame"],s.cancelAnimationFrame=s[c+"CancelAnimationFrame"]||s[c+"CancelRequestAnimationFrame"]}return s.requestAnimationFrame||(s.requestAnimationFrame=n),s.cancelAnimationFrame||(s.cancelAnimationFrame=i),t}function r(){}t.exports=n()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],254:[function(e,t){function n(){return void 0===typeof window?o:{on:r,off:i}}function r(e,t){window.addEventListener(e,t)}function i(e,t){window.removeEventListener(e,t)}var o=e("./nullEvents.js");t.exports=n()},{"./nullEvents.js":251}],255:[function(e,t){function n(e,t){function n(e){return"string"==typeof H?H.indexOf(e)>=0:"boolean"==typeof H?H:!0}function h(){q=q||window.document.body,W=W||i(e,{springLength:80,springCoeff:2e-4}),Y=Y||o(e,{container:q}),t.hasOwnProperty("renderLinks")||(t.renderLinks=!0),t.prerender=t.prerender||0,U=(Y.inputManager||a)(e,Y)}function d(){Y.beginRender(),t.renderLinks&&Y.renderLinks(),Y.renderNodes(),Y.renderLabels(),Y.endRender()}function f(){return Q=W.step()&&!J,d(),!Q}function p(e){return z?void(K+=e):void(e?(K+=e,z=u(function(){return f()},F)):(V=0,K=0,z=u(f,F)))}function g(){Z||(Q=!1,z.restart())}function m(){if("number"==typeof t.prerender&&t.prerender>0)for(var e=0;e<t.prerender;e+=1)W.step()}function y(){var e=W.getGraphRect(),t=c(q),n=(e.x2+e.x1)/2,r=(e.y2+e.y1)/2;et.offsetX=t.width/2-(n*et.scale-n),et.offsetY=t.height/2-(r*et.scale-r),Y.graphCenterChanged(et.offsetX,et.offsetY),X=!1}function v(e){var t=W.getNodePosition(e.id);Y.addNode(e,t)}function b(e){Y.releaseNode(e)}function w(e){var t=W.getLinkPosition(e.id);Y.addLink(e,t)}function x(e){Y.releaseLink(e)}function E(e){var t={x:0,y:0};Y.addLabel(e,t)}function S(e){Y.releaseLabel(e)}function _(e){if(n("node")){var t=!1;U.bindDragNDrop(e,{onStart:function(){t=W.isNodePinned(e),W.pinNode(e,!0),J=!0,g()},onDrag:function(t,n){var r=W.getNodePosition(e.id);W.setNodePosition(e.id,r.x+n.x/et.scale,r.y+n.y/et.scale),J=!0,d()},onStop:function(){W.pinNode(e,t),J=!1}})}}function T(e){U.bindDragNDrop(e,null)}function A(){Y.init(q),e.forEachLabel(E),e.forEachNode(v),t.renderLinks&&e.forEachLink(w)}function C(){Y.release(q)}function k(t){var n=t.node;"add"===t.changeType?(v(n),_(n),X&&y()):"remove"===t.changeType?(T(n),b(n),0===e.getNodesCount()&&(X=!0)):"update"===t.changeType&&(T(n),b(n),v(n),_(n))}function M(e){var n=e.link;if("add"===e.changeType)t.renderLinks&&w(n);else if("remove"===e.changeType)t.renderLinks&&x(n);else if("update"===e.changeType)throw"Update type is not implemented. TODO: Implement me!"}function P(e){var t=e.label;if("add"===e.changeType)E(t);else if("remove"===e.changeType)S(t);else if("update"===e.changeType)throw"Update type is not implemented. TODO: Implement me!"}function N(e){var t,n;for(t=0;t<e.length;t+=1)n=e[t],n.node?k(n):n.link?M(n):n.label&&P(n);g()}function L(){}function I(){B&&(B.release(),B=null)}function D(){e.off("changed",N)}function O(e,t){if(!t){var n=c(q);t={x:n.width/2,y:n.height/2}}$||($=.5);var r=Math.pow(1+$,e?-.2:.2);return et.scale=Y.scale(r,t),d(),tt.fire("scale",et.scale),et.scale}function j(){s.on("resize",L),I(),n("drag")&&(B=l(q),B.onDrag(function(e,t){Y.translateRel(t.x,t.y),d()})),n("scroll")&&(B||(B=l(q)),B.onScroll(function(e,t,n){O(0>t,n)})),e.forEachNode(_),D(),e.on("changed",N)}function R(){G=!1,D(),I(),s.off("resize",L),tt.off(),z.stop(),e.forEachLink(function(e){t.renderLinks&&x(e)}),e.forEachNode(function(e){T(e),b(e)}),e.forEachLabel(function(e){S(e)}),W.dispose(),C()}var F=30;t=t||{};var U,z,B,W=t.layout,Y=t.graphics,q=t.container,H=void 0!==t.interactive?t.interactive:!0,G=!1,X=!0,$=t.zoomSpeed||.5,V=0,K=0,Q=!1,J=!1,Z=!1,et={offsetX:0,offsetY:0,scale:1},tt=r({});return{run:function(e){return G||(h(),m(),A(),y(),j(),G=!0),p(e),this},reset:function(){Y.resetScale(),y(),et.scale=1},pause:function(){Z=!0,z.stop()},resume:function(){Z=!1,z.restart()},rerender:function(){return d(),this},zoomOut:function(){return O(!0)},zoomIn:function(){return O(!1)},moveTo:function(e,t){Y.graphCenterChanged(et.offsetX-e*et.scale,et.offsetY-t*et.scale),d()},getGraphics:function(){return Y},dispose:function(){R()},on:function(e,t){return tt.on(e,t),this},off:function(e,t){return tt.off(e,t),this}}}t.exports=n;var r=e("ngraph.events"),i=e("ngraph.forcelayout"),o=e("./svgGraphics.js"),s=e("../Utils/windowEvents.js"),a=e("../Input/domInputManager.js"),u=e("../Utils/timer.js"),c=e("../Utils/getDimensions.js"),l=e("../Input/dragndrop.js")},{"../Input/domInputManager.js":241,"../Input/dragndrop.js":242,"../Utils/getDimensions.js":249,"../Utils/timer.js":253,"../Utils/windowEvents.js":254,"./svgGraphics.js":256,"ngraph.events":213,"ngraph.forcelayout":214}],256:[function(e,t){function n(){function e(){var e=r("svg");return t=r("g").attr("buffered-rendering","dynamic"),e.appendChild(t),e}var t,n,s,a=0,u=0,c=1,l={},h={},d={};nodeBuilder=function(){return r("rect").attr("width",10).attr("height",10).attr("fill","#00a2e8")},nodePositionCallback=function(e,t){e.attr("x",t.x-5).attr("y",t.y-5)},linkBuilder=function(){return r("line").attr("stroke","#999")},linkPositionCallback=function(e,t,n){e.attr("x1",t.x).attr("y1",t.y).attr("x2",n.x).attr("y2",n.y)},labelBuilder=function(e){var t=e.id;return r("text").text(t).attr("fill","#999").attr("font-size","250%")},labelPositionCallback=function(e,t){e.attr("x",t.x).attr("y",t.y)},fireRescaled=function(e){e.fire("rescaled")},cachedPos={x:0,y:0},cachedFromPos={x:0,y:0},cachedToPos={x:0,y:0},updateTransform=function(){if(t){var e="matrix("+c+", 0, 0,"+c+","+a+","+u+")";t.attr("transform",e)}};var f=[];n=e();var p={getNodeUI:function(e){return l[e]},getLinkUI:function(e){return h[e]},getLabelUI:function(e){return d[e]},node:function(e){return"function"==typeof e?(nodeBuilder=e,this):void 0},link:function(e){return"function"==typeof e?(linkBuilder=e,this):void 0},label:function(e){return"function"==typeof e?(labelBuilder=e,this):void 0},placeNode:function(e){return nodePositionCallback=e,this},placeLink:function(e){return linkPositionCallback=e,this},placeLabel:function(e){return labelPositionCallback=e,this},beginRender:function(){},endRender:function(){},graphCenterChanged:function(e,t){a=e,u=t,updateTransform()},inputManager:o,translateRel:function(e,r){var i=n.createSVGPoint(),o=t.getCTM(),s=n.createSVGPoint().matrixTransform(o.inverse());i.x=e,i.y=r,i=i.matrixTransform(o.inverse()),i.x=(i.x-s.x)*o.a,i.y=(i.y-s.y)*o.d,o.e+=i.x,o.f+=i.y;var a="matrix("+o.a+", 0, 0,"+o.d+","+o.e+","+o.f+")";t.attr("transform",a)},scale:function(e,r){var i=n.createSVGPoint();i.x=r.x,i.y=r.y,i=i.matrixTransform(t.getCTM().inverse());var o=n.createSVGMatrix().translate(i.x,i.y).scale(e).translate(-i.x,-i.y),s=t.getCTM().multiply(o);c=s.a,a=s.e,u=s.f;var l="matrix("+s.a+", 0, 0,"+s.d+","+s.e+","+s.f+")";return t.attr("transform",l),fireRescaled(this),c},resetScale:function(){c=1;var e="matrix(1, 0, 0, 1, 0, 0)";return t.attr("transform",e),fireRescaled(this),this},init:function(e){e.appendChild(n),updateTransform(),"function"==typeof s&&s(n)},release:function(e){n&&e&&e.removeChild(n)},addLink:function(e,n){var r=linkBuilder(e);if(r)return r.position=n,r.link=e,h[e.id]=r,f.length>0?t.insertBefore(r,f[0]):t.appendChild(r),r},releaseLink:function(e){var n=h[e.id];n&&(t.removeChild(n),delete h[e.id])},addNode:function(e,n){var r=nodeBuilder(e);if(r)return r.position=n,r.node=e,l[e.id]=r,t.appendChild(r),f.push(r),r},releaseNode:function(e){var n=l[e.id];n&&(t.removeChild(n),f.splice(f.indexOf(n)),delete l[e.id])},addLabel:function(e,n){var r=labelBuilder(e);if(r)return r.position=n,r.label=e,d[e.id]=r,t.childElementCount>0?t.insertBefore(r,t.firstChild):t.appendChild(r),r},releaseLabel:function(e){var n=d[e.id];n&&(t.removeChild(n),delete d[e.id])},renderNodes:function(){for(var e in l)if(l.hasOwnProperty(e)){var t=l[e];cachedPos.x=t.position.x,cachedPos.y=t.position.y,nodePositionCallback(t,cachedPos,t.node)}},renderLinks:function(){for(var e in h)if(h.hasOwnProperty(e)){var t=h[e];cachedFromPos.x=t.position.from.x,cachedFromPos.y=t.position.from.y,cachedToPos.x=t.position.to.x,cachedToPos.y=t.position.to.y,linkPositionCallback(t,cachedFromPos,cachedToPos,t.link)}},renderLabels:function(){for(var e in d)if(d.hasOwnProperty(e)){var t=d[e];cachedPos.x=t.position.x,cachedPos.y=t.position.y,labelPositionCallback(t,cachedPos,t.label)}},getGraphicsRoot:function(e){return"function"==typeof e&&(n?e(n):s=e),n},getSvgRoot:function(){return n}};return i(p),p}t.exports=n;var r=e("simplesvg"),i=e("ngraph.events"),o=e("../Input/domInputManager.js")},{"../Input/domInputManager.js":241,"ngraph.events":213,simplesvg:234}],257:[function(e,t){function n(e){e=c(e,{enableBlending:!0,preserveDrawingBuffer:!1,clearColor:!1,clearColorValue:{r:1,g:1,b:1,a:1}});var t,n,l,h,d,f,p,g,m=0,y=0,v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],b=[],w=[],x={},E={},S=i(),_=o(),T=function(){return s()},A=function(){return a(3014898687)},C=function(){S.updateTransform(v),_.updateTransform(v)},k=function(){v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},M=function(){t&&n&&(h=n.width=Math.max(t.offsetWidth,1),d=n.height=Math.max(t.offsetHeight,1),l&&l.viewport(0,0,h,d),S&&S.updateSize(h/2,d/2),_&&_.updateSize(h/2,d/2))},P=function(e){e.fire("rescaled")};n=window.document.createElement("canvas");var N={getLinkUI:function(e){return E[e]},getNodeUI:function(e){return x[e]},node:function(e){return"function"==typeof e?(T=e,this):void 0},link:function(e){return"function"==typeof e?(A=e,this):void 0},placeNode:function(e){return f=e,this},placeLink:function(e){return p=e,this},inputManager:r,beginRender:function(){},endRender:function(){y>0&&S.render(),m>0&&_.render()},bringLinkToFront:function(e){var t,n,r=S.getFrontLinkId();S.bringToFront(e),r>e.id&&(t=e.id,n=w[r],w[r]=w[t],w[r].id=r,w[t]=n,w[t].id=t)},graphCenterChanged:function(e,t){v[12]=2*e/h-1,v[13]=1-2*t/d,C()},addLink:function(e,t){var n=y++,r=A(e);return r.id=n,r.pos=t,S.createLink(r),w[n]=r,E[e.id]=r,r},addNode:function(e,t){var n=m++,r=T(e);return r.id=n,r.position=t,r.node=e,_.createNode(r),b[n]=r,x[e.id]=r,r},translateRel:function(e,t){v[12]+=2*v[0]*e/h/v[0],v[13]-=2*v[5]*t/d/v[5],C()},scale:function(e,t){var n=2*t.x/h-1,r=1-2*t.y/d;return n-=v[12],r-=v[13],v[12]+=n*(1-e),v[13]+=r*(1-e),v[0]*=e,v[5]*=e,C(),P(this),v[0]},resetScale:function(){return k(),l&&(M(),C()),this},init:function(r){var i={};if(e.preserveDrawingBuffer&&(i.preserveDrawingBuffer=!0),t=r,M(),k(),t.appendChild(n),l=n.getContext("experimental-webgl",i),!l){var o="Could not initialize WebGL. Seems like the browser doesn't support it.";throw window.alert(o),o}if(e.enableBlending&&(l.blendFunc(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA),l.enable(l.BLEND)),e.clearColor){var s=e.clearColorValue;l.clearColor(s.r,s.g,s.b,s.a),this.beginRender=function(){l.clear(l.COLOR_BUFFER_BIT)}}S.load(l),S.updateSize(h/2,d/2),_.load(l),_.updateSize(h/2,d/2),C(),"function"==typeof g&&g(n)},release:function(e){n&&e&&e.removeChild(n)},isSupported:function(){var e=window.document.createElement("canvas"),t=e&&e.getContext&&e.getContext("experimental-webgl");return t},releaseLink:function(e){y>0&&(y-=1);var t=E[e.id];delete E[e.id],S.removeLink(t);var n=t.id;if(y>n){if(0===y||y===n)return;var r=w[y];w[n]=r,r.id=n}},releaseNode:function(e){m>0&&(m-=1);var t=x[e.id];delete x[e.id],_.removeNode(t);var n=t.id;if(m>n){if(0===m||m===n)return;var r=b[m];b[n]=r,r.id=n,_.replaceProperties(t,r)}},renderNodes:function(){for(var e={x:0,y:0},t=0;m>t;++t){var n=b[t];e.x=n.position.x,e.y=-n.position.y,f&&f(n,e),_.position(n,e)}},renderLinks:function(){if(!this.omitLinksRendering)for(var e={x:0,y:0},t={x:0,y:0},n=0;y>n;++n){var r=w[n],i=r.pos.from;t.x=i.x,t.y=-i.y,i=r.pos.to,e.x=i.x,e.y=-i.y,p&&p(r,t,e),S.position(r,t,e)}},getGraphicsRoot:function(e){return"function"==typeof e&&(n?e(n):g=e),n},setNodeProgram:function(e){if(!l&&e)_=e;else if(e)throw"Not implemented. Cannot swap shader on the fly... Yet."},setLinkProgram:function(e){if(!l&&e)S=e;else if(e)throw"Not implemented. Cannot swap shader on the fly... Yet."},transformClientToGraphCoordinates:function(e){return e.x=2*e.x/h-1,e.y=1-2*e.y/d,e.x=(e.x-v[12])/v[0],e.y=(e.y-v[13])/v[5],e.x*=h/2,e.y*=-d/2,e},getNodeAtClientPos:function(e,t){if("function"!=typeof t)return null;this.transformClientToGraphCoordinates(e);for(var n=0;m>n;++n)if(t(b[n],e.x,e.y))return b[n].node;return null}};return u(N),N}t.exports=n;var r=e("../Input/webglInputManager.js"),i=e("../WebGL/webglLinkProgram.js"),o=e("../WebGL/webglNodeProgram.js"),s=e("../WebGL/webglSquare.js"),a=e("../WebGL/webglLine.js"),u=e("ngraph.events"),c=e("ngraph.merge")},{"../Input/webglInputManager.js":243,"../WebGL/webglLine.js":265,"../WebGL/webglLinkProgram.js":266,"../WebGL/webglNodeProgram.js":267,"../WebGL/webglSquare.js":268,"ngraph.events":213,"ngraph.merge":231}],258:[function(e,t){function n(e){var t=10414335;if("string"==typeof e&&e)if(4===e.length&&(e=e.replace(/([^#])/g,"$1$1")),9===e.length)t=parseInt(e.substr(1),16);else{if(7!==e.length)throw'Color expected in hex format with preceding "#". E.g. #00ff00. Got value: '+e;t=parseInt(e.substr(1),16)<<8|255}else"number"==typeof e&&(t=e);return t}t.exports=n},{}],259:[function(e,t){function n(e){this.canvas=window.document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.isDirty=!1,this.canvas.width=this.canvas.height=e}t.exports=n},{}],260:[function(e,t){function n(e){function t(t,n){var r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var i=e.getShaderInfoLog(r);throw window.alert(i),i}return r}function n(n,r){var i=e.createProgram(),o=t(n,e.VERTEX_SHADER),s=t(r,e.FRAGMENT_SHADER);if(e.attachShader(i,o),e.attachShader(i,s),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS)){var a=e.getShaderInfoLog(i);throw window.alert(a),a}return i}function o(e,t,n){if((t+1)*n>e.length){var r=new Float32Array(e.length*n*2);return r.set(e),r}return e}function s(t,n){for(var r={},i=0;i<n.length;++i){var o=n[i],s=-1;if("a"===o[0]&&"_"===o[1]){if(s=e.getAttribLocation(t,o),-1===s)throw new Error("Program doesn't have required attribute: "+o);r[o.slice(2)]=s}else{if("u"!==o[0]||"_"!==o[1])throw new Error("Couldn't figure out your intent. All uniforms should start with 'u_' prefix, and attributes with 'a_'");if(s=e.getUniformLocation(t,o),null===s)throw new Error("Program doesn't have required uniform: "+o);r[o.slice(2)]=s}}return r}return{createProgram:n,extendArray:o,copyArrayPart:r,swapArrayPart:i,getLocations:s,context:e}}function r(e,t,n,r){for(var i=0;r>i;++i)e[t+i]=e[n+i]}function i(e,t,n,r){for(var i=0;r>i;++i){var o=e[t+i];e[t+i]=e[n+i],e[n+i]=o}}t.exports=n},{}],261:[function(e,t){function n(e){function t(){var e;for(E.isDirty=!1,e=0;e<w.length;++e)w[e].isDirty=!1}function n(e){var t=v[e];if(!t)return!1;if(delete v[e],y-=1,y===t.offset)return!0;var n=l(t.offset),r=l(y);f(r,n);var i=v[x[y]];return i.offset=t.offset,x[t.offset]=x[y],d(),!0}function o(){return w}function s(e){return v[e]}function a(e,t){if(v.hasOwnProperty(e))t(v[e]);else{var n=new window.Image,r=y;y+=1,n.crossOrigin="anonymous",n.onload=function(){d(),c(r,n,t)},n.src=e}}function u(){var e=new i(g*m);w.push(e)}function c(e,t,n){var r=l(e),i={offset:e};r.textureNumber>=w.length&&u();var o=w[r.textureNumber];o.ctx.drawImage(t,r.col*m,r.row*m,m,m),x[e]=t.src,v[t.src]=i,o.isDirty=!0,n(i)}function l(t){var n=t/e<<0,r=t%e,i=r/g<<0,o=r%g;return{textureNumber:n,row:i,col:o}}function h(){E.isDirty=!0,b=0,p=null}function d(){p&&(window.clearTimeout(p),b+=1,p=null),b>10?h():p=window.setTimeout(h,400)}function f(e,t){var n=w[e.textureNumber].canvas,r=w[t.textureNumber].ctx,i=t.col*m,o=t.row*m;r.drawImage(n,e.col*m,e.row*m,m,m,i,o,m,m),w[e.textureNumber].isDirty=!0,w[t.textureNumber].isDirty=!0}var p,g=Math.sqrt(e||1024)<<0,m=g,y=1,v={},b=0,w=[],x=[];if(!r(e))throw"Tiles per texture should be power of two.";var E={isDirty:!1,clearDirty:t,remove:n,getTextures:o,getCoordinates:s,load:a};return E}function r(e){return 0===(e&e-1)}var i=e("./texture.js");t.exports=n},{"./texture.js":259}],262:[function(e,t){function n(e,t){return{_texture:0,_offset:0,size:"number"==typeof e?e:32,src:t}}t.exports=n},{}],263:[function(e,t){function n(){function e(e,t){e.nativeObject&&m.deleteTexture(e.nativeObject);var n=m.createTexture();m.activeTexture(m["TEXTURE"+t]),m.bindTexture(m.TEXTURE_2D,n),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,e.canvas),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR_MIPMAP_NEAREST),m.generateMipmap(m.TEXTURE_2D),m.uniform1i(b["sampler"+t],t),e.nativeObject=n}function t(){if(p.isDirty){var t,n=p.getTextures();for(t=0;t<n.length;++t)(n[t].isDirty||!n[t].nativeObject)&&e(n[t],t);p.clearDirty()}}function n(e){m=e,v=s(e),p=new o(C),g=v.createProgram(A,T),m.useProgram(g),b=v.getLocations(g,["a_vertexPos","a_customAttributes","u_screenSize","u_transform","u_sampler0","u_sampler1","u_sampler2","u_sampler3","u_tilesPerTexture"]),m.uniform1f(b.tilesPerTexture,C),m.enableVertexAttribArray(b.vertexPos),m.enableVertexAttribArray(b.customAttributes),y=m.createBuffer()}function a(e,t){var n=e.id*_;M[n]=t.x-e.size,M[n+1]=t.y-e.size,M[n+2]=4*e._offset,M[n+3]=t.x+e.size,M[n+4]=t.y-e.size,M[n+5]=4*e._offset+1,M[n+6]=t.x-e.size,M[n+7]=t.y+e.size,M[n+8]=4*e._offset+2,M[n+9]=t.x-e.size,M[n+10]=t.y+e.size,M[n+11]=4*e._offset+2,M[n+12]=t.x+e.size,M[n+13]=t.y-e.size,M[n+14]=4*e._offset+1,M[n+15]=t.x+e.size,M[n+16]=t.y+e.size,M[n+17]=4*e._offset+3}function u(e){M=v.extendArray(M,k,_),k+=1;var t=p.getCoordinates(e.src);t?e._offset=t.offset:(e._offset=0,p.load(e.src,function(t){e._offset=t.offset}))}function c(e){k>0&&(k-=1),e.id<k&&k>0&&(e.src&&p.remove(e.src),v.copyArrayPart(M,e.id*_,k*_,_))}function l(e,t){t._offset=e._offset}function h(e){S=!0,E=e}function d(e,t){w=e,x=t,S=!0}function f(){m.useProgram(g),m.bindBuffer(m.ARRAY_BUFFER,y),m.bufferData(m.ARRAY_BUFFER,M,m.DYNAMIC_DRAW),S&&(S=!1,m.uniformMatrix4fv(b.transform,!1,E),m.uniform2f(b.screenSize,w,x)),m.vertexAttribPointer(b.vertexPos,2,m.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),m.vertexAttribPointer(b.customAttributes,1,m.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,8),t(),m.drawArrays(m.TRIANGLES,0,6*k)}var p,g,m,y,v,b,w,x,E,S,_=18,T=r(),A=i(),C=1024,k=0,M=new Float32Array(64);return{load:n,position:a,createNode:u,removeNode:c,replaceProperties:l,updateTransform:h,updateSize:d,render:f}}function r(){return["precision mediump float;","varying vec4 color;","varying vec3 vTextureCoord;","uniform sampler2D u_sampler0;","uniform sampler2D u_sampler1;","uniform sampler2D u_sampler2;","uniform sampler2D u_sampler3;","void main(void) {","   if (vTextureCoord.z == 0.) {","     gl_FragColor = texture2D(u_sampler0, vTextureCoord.xy);","   } else if (vTextureCoord.z == 1.) {","     gl_FragColor = texture2D(u_sampler1, vTextureCoord.xy);","   } else if (vTextureCoord.z == 2.) {","     gl_FragColor = texture2D(u_sampler2, vTextureCoord.xy);","   } else if (vTextureCoord.z == 3.) {","     gl_FragColor = texture2D(u_sampler3, vTextureCoord.xy);","   } else { gl_FragColor = vec4(0, 1, 0, 1); }","}"].join("\n")}function i(){return["attribute vec2 a_vertexPos;","attribute float a_customAttributes;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","uniform float u_tilesPerTexture;","varying vec3 vTextureCoord;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0, 1);","float corner = mod(a_customAttributes, 4.);","float tileIndex = mod(floor(a_customAttributes / 4.), u_tilesPerTexture);","float tilesPerRow = sqrt(u_tilesPerTexture);","float tileSize = 1./tilesPerRow;","float tileColumn = mod(tileIndex, tilesPerRow);","float tileRow = floor(tileIndex/tilesPerRow);","if(corner == 0.0) {","  vTextureCoord.xy = vec2(0, 1);","} else if(corner == 1.0) {","  vTextureCoord.xy = vec2(1, 1);","} else if(corner == 2.0) {","  vTextureCoord.xy = vec2(0, 0);","} else {","  vTextureCoord.xy = vec2(1, 0);","}","vTextureCoord *= tileSize;","vTextureCoord.x += tileColumn * tileSize;","vTextureCoord.y += tileRow * tileSize;","vTextureCoord.z = floor(floor(a_customAttributes / 4.)/u_tilesPerTexture);","}"].join("\n")}var o=e("./webglAtlas.js"),s=e("./webgl.js");t.exports=n},{"./webgl.js":260,"./webglAtlas.js":261}],264:[function(e,t){function n(e){function t(){b=null}function n(e){b=e}function i(e){return"function"==typeof e&&A.push(e),k}function o(e){return"function"==typeof e&&T.push(e),k}function s(e){return"function"==typeof e&&_.push(e),k}function a(e){return"function"==typeof e&&S.push(e),k}function u(e){return"function"==typeof e&&E.push(e),k}function c(e){return"function"==typeof e&&x.push(e),k}function l(e){return"function"==typeof e&&w.push(e),k}function h(e,t,n){if(e&&e.size){var r=e.position,i=e.size;return r.x-i<t&&t<r.x+i&&r.y-i<n&&n<r.y+i}return!0}function d(t){return e.getNodeAtClientPos(t,h)}function f(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function p(e){return f(e),!1}function g(e,t){var n,r;for(n=0;n<e.length;n+=1)if(r=e[n].apply(void 0,t))return!0}function m(e){var t={x:0,y:0},n=null,i=1,o=+new Date,s=function(e){g(_,[n,e]),t.x=e.clientX,t.y=e.clientY},a=function(){r.off("mousemove",s),r.off("mouseup",a)},u=function(){v=e.getBoundingClientRect()};window.addEventListener("resize",u),u(),e.addEventListener("mousemove",function(e){if(!b){i++%7===0&&(u(),i=1);var r,o=!1;t.x=e.clientX-v.left,t.y=e.clientY-v.top,r=d(t),r&&n!==r?(n=r,o=o||g(w,[n])):null===r&&n!==r&&(o=o||g(x,[n]),n=null),o&&f(e)}}),e.addEventListener("mousedown",function(e){var i,o=!1;u(),t.x=e.clientX-v.left,t.y=e.clientY-v.top,i=[d(t),e],i[0]?(o=g(E,i),r.on("mousemove",s),r.on("mouseup",a),y=window.document.onselectstart,window.document.onselectstart=p,n=i[0]):n=null,o&&f(e)}),e.addEventListener("mouseup",function(e){var r,i=+new Date;t.x=e.clientX-v.left,t.y=e.clientY-v.top,r=[d(t),e],r[0]&&(window.document.onselectstart=y,400>i-o&&r[0]===n?g(A,r):g(T,r),o=i,g(S,r)&&f(e))})}if(e.webglInputEvents)return e.webglInputEvents;var y,v,b=null,w=[],x=[],E=[],S=[],_=[],T=[],A=[],C=e.getGraphicsRoot();m(C);var k={mouseEnter:l,mouseLeave:c,mouseDown:u,mouseUp:a,mouseMove:s,click:o,dblClick:i,mouseCapture:n,releaseMouseCapture:t};return e.webglInputEvents=k,k}var r=e("../Utils/documentEvents.js");t.exports=n},{"../Utils/documentEvents.js":247}],265:[function(e,t){function n(e){return{color:r(e)}}var r=e("./parseColor.js");t.exports=n},{"./parseColor.js":258}],266:[function(e,t){function n(){var e,t,n,i,o,s,a,u,c,l,h=6,d=2*(2*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT),f=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join("\n"),p=["attribute vec2 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0.0, 1.0);","   color = a_color.abgr;","}"].join("\n"),g=0,m=new ArrayBuffer(16*d),y=new Float32Array(m),v=new Uint32Array(m),b=function(){if((g+1)*d>m.byteLength){var e=new ArrayBuffer(2*m.byteLength),t=new Float32Array(e),n=new Uint32Array(e);n.set(v),y=t,v=n,m=e}};return{load:function(s){t=s,i=r(s),e=i.createProgram(p,f),t.useProgram(e),o=i.getLocations(e,["a_vertexPos","a_color","u_screenSize","u_transform"]),t.enableVertexAttribArray(o.vertexPos),t.enableVertexAttribArray(o.color),n=t.createBuffer()},position:function(e,t,n){var r=e.id,i=r*h;y[i]=t.x,y[i+1]=t.y,v[i+2]=e.color,y[i+3]=n.x,y[i+4]=n.y,v[i+5]=e.color},createLink:function(e){b(),g+=1,s=e.id},removeLink:function(e){g>0&&(g-=1),e.id<g&&g>0&&i.copyArrayPart(v,e.id*h,g*h,h)},updateTransform:function(e){l=!0,c=e},updateSize:function(e,t){a=e,u=t,l=!0},render:function(){t.useProgram(e),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,m,t.DYNAMIC_DRAW),l&&(l=!1,t.uniformMatrix4fv(o.transform,!1,c),t.uniform2f(o.screenSize,a,u)),t.vertexAttribPointer(o.vertexPos,2,t.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(o.color,4,t.UNSIGNED_BYTE,!0,3*Float32Array.BYTES_PER_ELEMENT,8),t.drawArrays(t.LINES,0,2*g),s=g-1},bringToFront:function(e){s>e.id&&i.swapArrayPart(y,e.id*h,s*h,h),s>0&&(s-=1)},getFrontLinkId:function(){return s}}}var r=e("./webgl.js");t.exports=n},{"./webgl.js":260}],267:[function(e,t){function n(){function e(){if((A+1)*w>=S.byteLength){var e=new ArrayBuffer(2*S.byteLength),t=new Float32Array(e),n=new Uint32Array(e);n.set(T),_=t,T=n,S=e}}function t(e){h=e,p=r(e),l=p.createProgram(E,x),h.useProgram(l),f=p.getLocations(l,["a_vertexPos","a_color","u_screenSize","u_transform"]),h.enableVertexAttribArray(f.vertexPos),h.enableVertexAttribArray(f.color),d=h.createBuffer()}function n(e,t){var n=e.id;_[n*b]=t.x,_[n*b+1]=t.y,_[n*b+2]=e.size,T[n*b+3]=e.color}function i(e){v=!0,y=e}function o(e,t){g=e,m=t,v=!0}function s(e){A>0&&(A-=1),e.id<A&&A>0&&p.copyArrayPart(T,e.id*b,A*b,b)}function a(){e(),A+=1}function u(){}function c(){h.useProgram(l),h.bindBuffer(h.ARRAY_BUFFER,d),h.bufferData(h.ARRAY_BUFFER,S,h.DYNAMIC_DRAW),v&&(v=!1,h.uniformMatrix4fv(f.transform,!1,y),h.uniform2f(f.screenSize,g,m)),h.vertexAttribPointer(f.vertexPos,3,h.FLOAT,!1,b*Float32Array.BYTES_PER_ELEMENT,0),h.vertexAttribPointer(f.color,4,h.UNSIGNED_BYTE,!0,b*Float32Array.BYTES_PER_ELEMENT,12),h.drawArrays(h.POINTS,0,A)}var l,h,d,f,p,g,m,y,v,b=4,w=3*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT,x=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join("\n"),E=["attribute vec3 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos.xy/u_screenSize, 0, 1);","   gl_PointSize = a_vertexPos.z * u_transform[0][0];","   color = a_color.abgr;","}"].join("\n"),S=new ArrayBuffer(16*w),_=new Float32Array(S),T=new Uint32Array(S),A=0;return{load:t,position:n,updateTransform:i,updateSize:o,removeNode:s,createNode:a,replaceProperties:u,render:c}}var r=e("./webgl.js");t.exports=n},{"./webgl.js":260}],268:[function(e,t){function n(e,t){return{size:"number"==typeof e?e:10,color:r(t)}}var r=e("./parseColor.js");t.exports=n},{"./parseColor.js":258}],269:[function(e,t){t.exports="0.7.12"},{}],270:[function(e,t){var n=e("ngraph.random"),r={lazyExtend:function(){return e("ngraph.merge").apply(this,arguments)},randomIterator:function(){return n.randomIterator.apply(n,arguments)},random:function(){return n.random.apply(n,arguments)},events:e("ngraph.events")};r.Graph={version:e("./version.js"),graph:e("ngraph.graph"),serializer:function(){return{loadFromJSON:e("ngraph.fromjson"),storeToJSON:e("ngraph.tojson")}},centrality:e("./Algorithms/centrality.js"),operations:e("./Algorithms/operations.js"),geom:function(){return{intersect:e("gintersect"),intersectRect:e("./Utils/intersectRect.js")}},webgl:e("./WebGL/webgl.js"),webglInputEvents:e("./WebGL/webglInputEvents.js"),generator:function(){return e("ngraph.generators")},Input:{domInputManager:e("./Input/domInputManager.js"),webglInputManager:e("./Input/webglInputManager.js")},Utils:{dragndrop:e("./Input/dragndrop.js"),findElementPosition:e("./Utils/findElementPosition.js"),timer:e("./Utils/timer.js"),getDimension:e("./Utils/getDimensions.js"),events:e("./Utils/backwardCompatibleEvents.js")},Layout:{forceDirected:e("ngraph.forcelayout"),constant:e("./Layout/constant.js")},View:{Texture:e("./WebGL/texture.js"),webglAtlas:e("./WebGL/webglAtlas.js"),webglImageNodeProgram:e("./WebGL/webglImageNodeProgram.js"),webglLinkProgram:e("./WebGL/webglLinkProgram.js"),webglNodeProgram:e("./WebGL/webglNodeProgram.js"),webglLine:e("./WebGL/webglLine.js"),webglSquare:e("./WebGL/webglSquare.js"),webglImage:e("./WebGL/webglImage.js"),webglGraphics:e("./View/webglGraphics.js"),_webglUtil:{parseColor:e("./WebGL/parseColor.js")},svgGraphics:e("./View/svgGraphics.js"),renderer:e("./View/renderer.js"),cssGraphics:function(){throw new Error("cssGraphics is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},svgNodeFactory:function(){throw new Error("svgNodeFactory is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},community:function(){throw new Error("community is deprecated. Please use vivagraph < 0.7 if you need it, or `https://github.com/anvaka/ngraph.slpa` module")}},Rect:e("./Utils/rect.js"),svg:e("simplesvg"),BrowserInfo:e("./Utils/browserInfo.js")},t.exports=r},{"./Algorithms/centrality.js":239,"./Algorithms/operations.js":240,"./Input/domInputManager.js":241,"./Input/dragndrop.js":242,"./Input/webglInputManager.js":243,"./Layout/constant.js":244,"./Utils/backwardCompatibleEvents.js":245,"./Utils/browserInfo.js":246,"./Utils/findElementPosition.js":248,"./Utils/getDimensions.js":249,"./Utils/intersectRect.js":250,"./Utils/rect.js":252,"./Utils/timer.js":253,"./View/renderer.js":255,"./View/svgGraphics.js":256,"./View/webglGraphics.js":257,"./WebGL/parseColor.js":258,"./WebGL/texture.js":259,"./WebGL/webgl.js":260,"./WebGL/webglAtlas.js":261,"./WebGL/webglImage.js":262,"./WebGL/webglImageNodeProgram.js":263,"./WebGL/webglInputEvents.js":264,"./WebGL/webglLine.js":265,"./WebGL/webglLinkProgram.js":266,"./WebGL/webglNodeProgram.js":267,"./WebGL/webglSquare.js":268,"./version.js":269,gintersect:209,"ngraph.events":213,"ngraph.forcelayout":214,"ngraph.fromjson":228,"ngraph.generators":229,"ngraph.graph":230,"ngraph.merge":231,"ngraph.random":232,"ngraph.tojson":233,simplesvg:234}]},{},[1]);
