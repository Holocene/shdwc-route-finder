!function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t){"use strict";var e=t("q"),n=t("request"),r=t("local/repositories/system"),i=t("local/repositories/wormhole-class"),o=t("local/repositories/bridge"),s=t("local/repositories/scanned-system"),a=t("local/repositories/signature"),u=t("local/repositories/wormhole");t("./helpers"),t("./lib-config");var c=t("local/repositories");c.setFirebaseUrl(siteConfig.firebaseUrl),n(siteConfig.maintenanceServerUrl,function(){}),t("./extensions/signature-repository"),t("./extensions/wormhole-repository");var l=t("angular"),h=l.module("wormholeMapper",["ui.router","ui.bootstrap"]);h.constant("fbRef",new Firebase(siteConfig.firebaseUrl)),t("./controllers"),t("./angular-factories"),t("./directives");var f={staticData:function(){var t=r.initialize(),n=i.initialize();return e.all([t,n])},authorize:["authorizationService",function(t){return t.authorize()}]},d={roles:["user"]},p={roles:["admin"]};h.config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("index",{url:"/",templateUrl:"views/front-page.html",resolve:f}).state("login",{url:"/login",controller:"LoginController",params:{ret:null},templateUrl:"views/login.html",resolve:f}).state("login-return",{url:"/login-return?code&dev",controller:"LoginReturnController",templateUrl:"views/login-return.html",resolve:f}).state("accessdenied",{template:"<div class='panel panel-default'><h2>Access Denied</h2></div>",resolve:f}).state("system-list",{url:"/system-list",controller:"SystemListController",templateUrl:"views/system-list.html",resolve:f,data:d}).state("system-list.details",{url:"/:systemName",controller:"SystemDetailsController",templateUrl:"views/system-list.details.html"}).state("wormhole-list",{url:"/wormhole-list",controller:"WormholeListController",templateUrl:"views/wormhole-list.html",resolve:f,data:d}).state("wormhole-list.edit",{templateUrl:"views/wormhole-list.edit.html",params:{wormhole:null}}).state("bridge-list",{url:"/bridge-list",controller:"BridgeListController",templateUrl:"views/bridge-list.html",resolve:f,data:d}).state("bridge-list.edit",{templateUrl:"views/bridge-list.edit.html",controller:"BridgeEditController",params:{bridge:null}}).state("bridge-list.in-range",{templateUrl:"views/bridge-list.in-range.html",params:{bridge:{}},controller:"BridgeSystemsInRangeController"}).state("route-finder",{url:"/route-finder",controller:"RouteFinderSearchController",templateUrl:"views/route-finder.html",reloadOnSearch:!1,resolve:f,data:d}).state("route-finder.find",{controller:"RouteFinderController",templateUrl:"views/route-finder.find.html",params:{start:{},end:{},hi:{},lo:{},nl:{},ws:{},br:{},st:{},wh:{},mbd:{},mr:{}}}).state("users",{url:"/users",controller:"UserListController",templateUrl:"views/user-list.html",data:d}).state("user-details",{url:"/users/:user",controller:"UserDetailsController",templateUrl:"views/user-details.html",data:d}).state("leaderboard",{url:"/leaderboard",controller:"LeaderboardController",templateUrl:"views/leaderboard.html",resolve:f,data:d}).state("access-control",{url:"/access-control",controller:"AccessControlController",templateUrl:"views/access-control.html",resolve:f,data:p}).state("payments",{url:"/payments",controller:"PaymentsController",templateUrl:"views/payments.html",resolve:f,data:p}),e.otherwise("/")}]),h.config(["$provide",function(t){return t.decorator("$rootScope",["$delegate",function(t){return t.safeApply=function(e){var n=t.$$phase;"$apply"===n||"$digest"===n?e&&"function"==typeof e&&e():t.$apply(e)},t}])}]),h.run(function(){f.staticData().then(function(){siteConfig.homeSystem=r.getSystem(siteConfig.homeSystemId),o.initialize(),u.initialize(),s.initialize(),a.initialize()});var e=t("./services/theme-service.js");e.loadTheme()});var m=t("local/repositories/firebase-auth"),g=t("./services/user-service.js"),y=t("local/repositories/user");h.run(["$rootScope","$state","$stateParams","authorizationService",function(t,e,n,r){t.$on("$stateChangeStart",function(e,n,i){t.toState=n,t.toStateParams=i,m.isIdentityResolved()&&r.authorize(),g.getCurrentUser().then(function(t){t&&(t.lastActivity=Date.now(),y.update(t))})})}])},{"./angular-factories":3,"./controllers":10,"./directives":29,"./extensions/signature-repository":37,"./extensions/wormhole-repository":38,"./helpers":39,"./lib-config":40,"./services/theme-service.js":45,"./services/user-service.js":46,angular:47,"local/repositories":144,"local/repositories/bridge":141,"local/repositories/firebase-auth":142,"local/repositories/scanned-system":152,"local/repositories/signature":155,"local/repositories/system":158,"local/repositories/user":161,"local/repositories/wormhole":166,"local/repositories/wormhole-class":163,q:73,request:48}],2:[function(t,e){"use strict";var n=t("local/repositories/firebase-auth"),r=function(t,e){var r={};return r.authorize=function(){var r=n.identity().then(function(){var r=n.isAuthenticated();t.toState.data&&t.toState.data.roles&&t.toState.data.roles.length>0&&!n.isInAnyRole(t.toState.data.roles)&&(r?e.go("accessdenied"):(t.returnToState=t.toState,t.returnToStateParams=t.toStateParams,e.go("login",{retName:t.returnToState.name})))});return r},r};e.exports=r},{"local/repositories/firebase-auth":142}],3:[function(t){"use strict";var e=t("angular").module("wormholeMapper");e.factory("authorizationService",["$rootScope","$state",t("./authorization-service")])},{"./authorization-service":2,angular:47}],4:[function(t,e){"use strict";var n=t("local/repositories/authorization"),r=t("local/eve-api/entity-search"),i=t("local/eve-api/image-server"),o=(t("q"),t("moment"),function(t){this.data=t,this.name=t.name,this.type=t.type,this.picUrl=t.getPortraitUrl(32),this.lastModified=t.lastModified,this.lastModifiedPretty=t.getLastModifiedPretty(),this.lastModifiedFuzzy=t.getLastModifiedFuzzy()}),s={name:function(t,e){return t.name.toLowerCase()<e.name.toLowerCase()?-1:1},type:function(t,e){return t.type<e.type?-1:1},lastModified:function(t,e){return t.lastModified===e.lastModified?s.name(t,e):t.lastModified<e.lastModified?1:-1}};e.exports=function(t){function e(){t.safeApply(function(){var e=n.getArray().map(function(t){return new o(t)}).sort(a);t.items=e})}n.initialize().then(e),n.changed(e);var a=s.name;t.sort=function(t){var n=s[t];if(n===a){var r=a;a=function(t,e){return-1*r(t,e)}}else a=n;e()},t.$watch("searchQuery",function(e){t.search(e)}),t.search=function(e){r(e).then(function(e){t.safeApply(function(){t.searchResult=e?{id:e.id,name:e.name,type:e.type,picUrl:i(e.id,e.type,128)}:null})})},t.add=function(t){n.set(t.id,t.name,t.type)},t.delete=function(t){n.delete(t)},t.$on("$destroy",function(){n.changedRemoveHandler(e)})}},{"local/eve-api/entity-search":76,"local/eve-api/image-server":77,"local/repositories/authorization":137,moment:71,q:73}],5:[function(t,e){e.exports=t("./access-control.js")},{"./access-control.js":4}],6:[function(t,e){"use strict";var n=t("local/repositories/bridge"),r=t("local/repositories/bridge/bridge.js");e.exports=function(t,e){e.bridge?(t.bridge=e.bridge.clone(),t.isExisting=!0):t.bridge=new r,t.$watchGroup(["bridge.homeSystemId","bridge.bridgeType"],function(){var e=t.bridge.bridgeType;e=e?e:"bridge";var n=t.bridge.getHomeSystem();n=n?n.systemName:"new",n=t.homeSystem?t.homeSystem.systemName:n,t.bridge.name="The "+n+" "+e}),t.bridgeTypes=r.possibleBridgeTypes,t.canSave=function(){return t.bridge.homeSystemId&&t.bridge.bridgeType},t.save=function(){t.bridge.id?n.updateBridge(t.bridge):n.createBridge(t.bridge),t.close()},t.delete=function(){n.deleteBridge(t.bridge),t.close()},t.close=function(){t.$parent.unselect()}}},{"local/repositories/bridge":141,"local/repositories/bridge/bridge.js":140}],7:[function(t,e){"use strict";var n=t("q"),r=t("local/repositories/bridge"),i=t("local/repositories/scanned-system");e.exports=function(t,e){function o(){t.safeApply(function(){var e=s.getSystemsInRange().map(function(e){e=i.getSystem(e.id);var n={data:e,jumpsHome:t.homeSystem.getStaticJumpsToSystem(e),jumpsBridge:s.getHomeSystem().getStaticJumpsToSystem(e),name:e.systemName,dist:e.getDistanceFromSystem(s.getHomeSystem()).toFixed(2)+"ly",isPinned:e.isPinned};return n}).sort(function(t,e){return t.dist<e.dist?-1:1});t.systems=e})}var s=e.bridge;t.bridge=s,t.homeSystem=siteConfig.homeSystem,t.jumpsMode="bridge",n.all([r.initialize(),i.initialize()]).then(o),r.bridgesChanged(o),i.systemsChanged(o),t.toggleJumpMode=function(){t.jumpsMode="bridge"===t.jumpsMode?"home":"bridge"},t.togglePinned=function(t){t.isPinned=!t.isPinned,i.updateSystem(t)},t.close=function(){t.$parent.unselect()},t.$on("$destroy",function(){r.bridgesChangedRemoveHandler(o),i.systemsChangedRemoveHandler(o)})}},{"local/repositories/bridge":141,"local/repositories/scanned-system":152,q:73}],8:[function(t,e){"use strict";var n=t("local/repositories/bridge"),r=function(t){this.bridge=t,this.homeSystem=t.getHomeSystem(),this.name=t.name,this.bridgeRange=t.getBridgeRange()+" light years",this.bridgeType=t.getBridgeTypePretty(),this.systemsInRange=t.getSystemsInRange().length},i={homeSystem:function(t,e){return t.homeSystem===e.homeSystem?0:t.homeSystem.systemName<e.homeSystem.systemName?-1:1},type:function(t,e){return t.bridgeType===e.bridgeType?i.homeSystem(t,e):t.bridgeType<e.bridgeType?-1:1},systemsInRange:function(t,e){return t.systemsInRange==e.systemsInRange?0:t.systemsInRange<e.systemsInRange?-1:1}};e.exports=function(t,e){function o(){t.safeApply(function(){var e=n.getBridgesArray().map(function(t){return new r(t)}).sort(s);t.bridges=e})}n.initialize().then(o),n.bridgesChanged(o);var s=i.homeSystem;t.edit=function(n){t.selected===n?t.unselect():(t.selected=n,e.go("bridge-list.edit",{bridge:n.bridge}))},t.create=function(){t.selected=void 0,e.go("bridge-list.edit",{bridgeDetails:null})},t.unselect=function(){t.selected=void 0,e.go("bridge-list")},t.systemsInRange=function(n){t.selected=n,e.go("bridge-list.in-range",{bridge:n.bridge})},t.sort=function(t){var e=i[t];if(e===s){var n=s;s=function(t,e){return-1*n(t,e)}}else s=e;o()},t.$on("$destroy",function(){n.bridgesChangedRemoveHandler(o)})}},{"local/repositories/bridge":141}],9:[function(t,e){"use strict";var n=t("../services/user-service"),r=t("local/repositories/firebase-auth"),i=t("../services/theme-service.js"),o=function(t,e){function o(e){if(e){var r={};e.roles.forEach(function(t){r[t]=!0}),n.getCurrentUser().then(function(e){t.safeApply(function(){t.user=e,t.userRoles=r})})}else t.user=null,t.roles={}}t.siteConfig=siteConfig,r.identity().then(function(t){o(t)}),r.principalChanged(function(t){o(t)}),t.is=function(t){return e.includes(t)},t.logout=function(){r.logout(),e.go("index")},t.themes={},i.getAllThemes().sort().forEach(function(e){t.themes[e]=e.charAt(0).toUpperCase()+e.slice(1)}),delete t.themes.default,t.setTheme=function(t){i.saveTheme(t)},t.hasTheme=function(t){return t===i.getCurrentTheme()}};e.exports=o},{"../services/theme-service.js":45,"../services/user-service":46,"local/repositories/firebase-auth":142}],10:[function(t){"use strict";var e=t("angular").module("wormholeMapper");e.controller("GlobalController",["$scope","$state","$timeout",t("./global-controller.js")]),e.controller("BridgeListController",["$scope","$state",t("./bridge-list/bridge-list.js")]),e.controller("BridgeEditController",["$scope","$stateParams",t("./bridge-list/bridge-list.edit.js")]),e.controller("BridgeSystemsInRangeController",["$scope","$stateParams",t("./bridge-list/bridge-list.in-range.js")]),e.controller("LoginController",["$scope","$state",t("./login/login.js")]),e.controller("LoginReturnController",["$scope","$state","$timeout",t("./login/login-return.js")]),e.controller("RouteFinderSearchController",["$scope","$state","$timeout",t("./route-finder/route-finder.search.js")]),e.controller("RouteFinderController",["$scope","$state","$stateParams","$timeout",t("./route-finder/route-finder.display.js")]),e.controller("SystemListController",["$scope","$state","$timeout","$q",t("./system-list/system-list.js")]),e.controller("SystemDetailsController",["$scope","$state","$stateParams","$q",t("./system-list/system-list.details.js")]),e.controller("WormholeListController",["$scope","$state","$timeout",t("./wormhole-list/wormhole-list.js")]),e.controller("WormholeEditController",["$scope","$stateParams",t("./wormhole-list/wormhole-list.edit.js")]),e.controller("UserListController",["$scope","$state",t("./user-list")]),e.controller("UserDetailsController",["$scope","$state","$stateParams",t("./user-details")]),e.controller("LeaderboardController",["$scope","$state",t("./leaderboard")]),e.controller("AccessControlController",["$scope","$state",t("./access-control")]),e.controller("PaymentsController",["$scope","$state",t("./payments")])},{"./access-control":5,"./bridge-list/bridge-list.edit.js":6,"./bridge-list/bridge-list.in-range.js":7,"./bridge-list/bridge-list.js":8,"./global-controller.js":9,"./leaderboard":11,"./login/login-return.js":13,"./login/login.js":14,"./payments":15,"./route-finder/route-finder.display.js":17,"./route-finder/route-finder.search.js":18,"./system-list/system-list.details.js":19,"./system-list/system-list.js":20,"./user-details":21,"./user-list":23,"./wormhole-list/wormhole-list.edit.js":26,"./wormhole-list/wormhole-list.js":27,angular:47}],11:[function(t,e){"use strict";e.exports=t("./leaderboard.js")},{"./leaderboard.js":12}],12:[function(t,e){"use strict";{var n=t("local/repositories/user"),r=t("local/repositories/leaderboard"),i=t("q");t("moment")}e.exports=function(t){function e(){t.safeApply(function(){var t=n.getArray().map(function(t){var e=r.get(t.id);return{usr:t,ldr:e}});o(t)})}function o(e){t.hasLoadedLeaderboard=!0;var n=Date.now(),r=n-864e5,i=e.map(function(t){return{usr:t.usr,data:t.ldr.getTotal()}}),o=e.map(function(t){return{usr:t.usr,data:t.ldr.getDayForTime(n)}}).filter(function(t){return t.data}),a=e.map(function(t){return{usr:t.usr,data:t.ldr.getDayForTime(r)}}).filter(function(t){return t.data}),u=e.map(function(t){return{usr:t.usr,data:t.ldr.getDaysTotal(10)}}).filter(function(t){return t.data});t.whAdded={today:s(o,"wormholesAdded"),yesterday:s(a,"wormholesAdded"),last10:s(u,"wormholesAdded"),allTime:s(i,"wormholesAdded")},t.whComplete={today:s(o,"totalWormholesCompleted"),yesterday:s(a,"totalWormholesCompleted"),last10:s(u,"totalWormholesCompleted"),allTime:s(i,"totalWormholesCompleted")}}function s(t,e){return t.map(function(t){return{user:t.usr,score:t.data[e]}}).filter(function(t){return t.score>0})}i.all([n.initialize(),r.initialize()]).then(e),n.changed(e),r.changed(e),t.$on("$destroy",function(){r.changedRemoveHandler(e),n.changedRemoveHandler(e)})}},{"local/repositories/leaderboard":145,"local/repositories/user":161,moment:71,q:73}],13:[function(t,e){var n=t("../../services/user-service");e.exports=function(t,e,r){function i(r){var i=r.characterInfo,o=r.token;t.statusText="Authenticating to database...",n.login(o,i).then(function(){t.statusText="Success!",e.go("system-list")}).fail(function(){t.statusText=errorMsg,t.failed=!0})}var o=e.params.code;o||e.params.dev||e.go("login");var s=siteConfig.serverLoginUrl,a={type:siteConfig.type,authCode:o};return siteConfig.devCodeO&&"o"===e.params.dev?void i({token:siteConfig.devCodeO}):siteConfig.devCodeP&&"p"===e.params.dev?void i({token:siteConfig.devCodeP}):($.post(s,a).done(function(t){i(t)}).fail(function(e){r(function(){t.failed=!0,t.statusText=e.responseText?e.responseText:"Login request failed in unknown manner. Check Noscript."})}),t.failed=!1,void(t.statusText="Querying login server..."))}},{"../../services/user-service":46}],14:[function(t,e){e.exports=function(t,e){var n=siteConfig.redirectUri.replace("#","%23"),r=siteConfig.clientId,i="",o=siteConfig.ssoHost+"/oauth/authorize/?response_type=code&redirect_uri={0}&client_id={1}&scope=&state={2}".format(n,r,i);t.ssoUrl=o,t.returnToState=e.params.retName}},{}],15:[function(t,e){e.exports=t("./payments.js")},{"./payments.js":16}],16:[function(t,e){"use strict";function n(t){return a(t).format("0,0")+" ISK"}var r=t("local/repositories/user"),i=t("local/repositories/leaderboard"),o=t("local/repositories/metadata"),s=t("q"),a=(t("moment"),t("numeral")),u=function(t,e,n){this.data=t,this.leaderboard=e,this.name=t.name,this.alliance=t.alliance?t.alliance:"-",this.picUrl=t.getPortraitUrl(32);var r=e.getTotal(),i=e.getFindsPaidFor();this.consts=n,this.wormholesAdded=r.wormholesAdded-i.wormholesAdded,this.wormholesCompleted=r.wormholesCompleted-i.wormholesCompleted};u.prototype.getTotalPaid=function(){return this.leaderboard.totalPaidAmount},u.prototype.getTotalPaidPretty=function(){return n(this.getTotalPaid())},u.prototype.getAmountDue=function(){var t=this.wormholesAdded*this.consts.wormholesAdded,e=this.wormholesCompleted*this.consts.wormholesCompleted;return t+e},u.prototype.getAmountDuePretty=function(){return n(this.getAmountDue())};var c={};u.prototype.getReconciled=function(){return c[this.data.id]},u.prototype.toggleReconcile=function(){c[this.data.id]=!c[this.data.id]};var l={name:function(t,e){return t.name.toLowerCase()<e.name.toLowerCase()?-1:1},alliance:function(t,e){return t.alliance===e.alliance?l.name(t,e):t.alliance.toLowerCase()<e.alliance.toLowerCase()?-1:1},totalPaid:function(t,e){return t.getTotalPaid()===e.getTotalPaid()?l.name(t,e):t.getTotalPaid()<e.getTotalPaid()?1:-1},amountDue:function(t,e){return t.getAmountDue()===e.getAmountDue()?l.name(t,e):t.getAmountDue()<e.getAmountDue()?1:-1},added:function(t,e){return t.wormholesAdded===e.wormholesAdded?l.name(t,e):t.wormholesAdded<e.wormholesAdded?1:-1},completed:function(t,e){return t.wormholesCompleted===e.wormholesCompleted?l.name(t,e):t.wormholesCompleted<e.wormholesCompleted?1:-1}},h={noncontributors:function(t){return t.getTotalPaid()>0||t.wormholesAdded>0||t.wormholesCompleted>0}};e.exports=function(t){function e(){t.safeApply(function(){t.hasLoaded=!0,d.wormholesAdded=o.get("iskPerWormholeAdded"),d.wormholesCompleted=o.get("iskPerWormholeCompleted"),t.wormholeValues=d;var e={totalPaid:0,wormholesAdded:0,wormholesCompleted:0},s=r.getArray().map(function(t){var n=i.get(t.id),r=new u(t,n,d);return e.totalPaid+=r.getTotalPaid(),e.wormholesAdded+=r.wormholesAdded,e.wormholesCompleted+=r.wormholesCompleted,r});s=s.sort(f),s=s.filter(h.noncontributors),t.items=s,t.totals={totalPaid:n(e.totalPaid),wormholesAdded:e.wormholesAdded,wormholesCompleted:e.wormholesCompleted},Object.defineProperty(t.totals,"amountDue",{get:function(){var e=t.items.reduce(function(t,e){return t+e.getAmountDue()},0);return n(e)}})})}function a(t){var e=(t.data,t.leaderboard),n=t.getAmountDue(),r=e.totalPaidAmount,o=n+r;e.totalPaidAmount=o,e.setFindsPaidFor(e.getTotal()),i.update(e)}s.all([r.initialize(),i.initialize(),o.initialize()]).then(e);var f=l.name,d={wormholesAdded:0,wormholesCompleted:0,wormholesAddedPretty:function(){return n(this.wormholesAdded)},wormholesCompletedPretty:function(){return n(this.wormholesCompleted)}};t.sort=function(t){var n=l[t];if(n===f){var r=f;f=function(t,e){return-1*r(t,e)}}else f=n;e()},t.getTotalReconciled=function(){var e=t.items;if(!e)return!1;var r=e.reduce(function(t,e){return e.getReconciled()?t+e.getAmountDue():t},0);return n(r)},t.canSaveReconciliations=function(){var e=t.items;return e?e.some(function(t){return t.getReconciled()}):!1},t.saveReconciliations=function(){var n=t.items;n=n.filter(function(t){return t.getReconciled()});var r="Reconcile "+n.length+" payments? This is not reversible.",o=confirm(r);if(o){i.supressChanged(!0);for(var s=0;s<n.length;s++)a(n[s]);i.supressChanged(!1),c={},e()}},t.$watch("wormholeValues",function(t){void 0!=t&&(t.wormholesAdded=Number(t.wormholesAdded),t.wormholesCompleted=Number(t.wormholesCompleted),o.set("iskPerWormholeAdded",t.wormholesAdded),o.set("iskPerWormholeCompleted",t.wormholesCompleted))},!0),t.$on("$destroy",function(){o.changedRemoveHandler(e)})}},{"local/repositories/leaderboard":145,"local/repositories/metadata":150,"local/repositories/user":161,moment:71,numeral:72,q:73}],17:[function(t,e){"use strict";var n=t("local/repositories/bridge"),r=t("local/repositories/wormhole"),i=t("local/pathfinder"),o=t("../wormhole-list/wormhole-details.js"),s=t("../../models/ship-classes");e.exports=function(t,e,a){function u(){t.linksChanged=!0}function c(){t.linksChanged=!1,t.isFindingPaths=!0;var e=h.br.map(function(t){return n.getBridge(t)}),o=h.wh?r.getArray():[];console.log(h);var s={startSys:h.start,endSys:h.end,wormholes:o,bridges:e,highsec:h.hi,lowsec:h.lo,nullsec:h.nl,wspace:h.ws,maxPaths:h.mr,minBridgeDistance:h.mbd};i.findPaths(s).done(function(e){e.forEach(function(t){l(t)}),t.safeApply(function(){t.foundPaths=e,t.isFindingPaths=!1,t.hasFoundPaths=t.foundPaths.length>0})})}function l(t){t.routePartition.forEach(function(t){if("wormhole"===t.type){t.wormholeDetails=t.wormholes.map(function(t){return new o(t)});var e=t.startSystem;t.wormholeDetails.forEach(function(t){if(t.nearSystem=e,t.startSystem===e){t.farSystem=t.endSystem;var n=t.wormhole.getStartSignature()}else{t.farSystem=t.startSystem;var n=t.wormhole.getEndSignature()}t.wormholeId=n?n.id:"-",e=t.farSystem})}})}var h=a;return h.start&&h.end?(t.toggleExpandPartition=function(t){t.expanded=!t.expanded},t.recalculatePaths=c,t.shipClass=s.cruiser,t.showTimeToExpire=!1,t.toggleShowTimeToExpire=function(){t.showTimeToExpire=!t.showTimeToExpire},t.getPathTimeTooltip=function(e){return e.hasWormholes?t.showTimeToExpire?e.getAgeFuzzy():e.getDateExpiresFuzzy():null},c(),r.changed(u),n.bridgesChanged(u),void t.$on("$destroy",function(){r.changedRemoveHandler(u),n.bridgesChangedRemoveHandler(u)})):void e.go("route-finder")}},{"../../models/ship-classes":41,"../wormhole-list/wormhole-details.js":25,"local/pathfinder":126,"local/repositories/bridge":141,"local/repositories/wormhole":166}],18:[function(t,e){"use strict";var n=t("../../services/route-search-params-service"),r=t("../../services/user-service.js"),i=t("local/repositories/user");e.exports=function(t,e){function o(){if(t.startSystem&&t.endSystem){n.setParams(t);var r=n.getParamsForFinder();r.start=t.startSystem,r.end=t.endSystem,s(),e.go("route-finder.find",r)}else e.go("route-finder")}function s(){r.getCurrentUser().then(function(t){t&&(t.routesSearched++,i.update(t))})}n.initialize().done(function(){t.safeApply(function(){n.getParamsToEditor(t)})}),console.log(t.maxQueryTime),t.$watch("systemTypes",o,!0),t.$watch("transportMethods",o,!0),t.$watch("minBridgeDistance",o),t.$watch("maxResults",o),t.$watchGroup(["startSystem","endSystem"],o),t.reverse=function(){var e=t.startSystem;t.startSystem=t.endSystem,t.endSystem=e}}},{"../../services/route-search-params-service":42,"../../services/user-service.js":46,"local/repositories/user":161}],19:[function(t,e){"use strict";var n=t("local/repositories/system"),r=t("local/repositories/scanned-system"),i=t("local/repositories/wormhole"),o=t("local/repositories/signature"),s=t("../../services/scanning-service"),a=t("../../services/route-search-params-service.js"),u=t("local/repositories/signature/signature.js"),c=t("local/repositories/scanned-system//scanned-system"),l=function(t){this.data=t,this.id=t.id,this.name=t.systemName,this.lastScannedPretty=t.getLastScannedPretty(),this.lastScannedFuzzy=t.getLastScannedFuzzy(),this.lastPartialScanPretty=t.getLastPartialScanPretty(),this.lastPartialScanFuzzy=t.getLastPartialScanFuzzy(),this.security=t.getSecurityPretty(),this.region=t.regionName,this.numWormholes=t.getWormholes().length,this.dotlanLink="http://evemaps.dotlan.net/system/"+this.name,this.wormhol_esLink="http://wh.pasta.gg/"+this.name,this.isWspace=t.isWormholeSpace();var e=siteConfig.homeSystem;this.homeSystem=e.systemName,this.distance=t.getStaticJumpsToSystem(e),null===this.distance&&(this.distance="∞"),this.note=t.note,this.connectedSystems=t.getGates()},h=function(t,e,n){this.wormhole=t,this.signature=n,this.newSig=this.signature,t.startSystemId==e.id?(this.destination=t.getEndSystem(),this.destType="end"):t.endSystemId==e.id&&(this.destination=t.getStartSystem(),this.destType="start"),this.wormholeClass=t.getWormholeClass(),this.id=this.signature?this.signature.id:"-",this.staticJumps=t.getStaticJumps(),this.staticJumpsNoHighsec=t.getStaticJumpsNoHighsec();var r="∞";this.equivJumps=this.staticJumps?this.staticJumps:r,this.equivLowsecJumps=this.staticJumpsNoHighsec?this.staticJumpsNoHighsec:r;var i=t.getCreator();this.user=i?i.name:null,this.note=t.getShortNote(),this.longNote=t.noteIsShort()?null:t.note};h.prototype.isDuplicate=function(){return this.wormhole.hasDuplicate()};var f=function(t){this.sig=t,this.note=t.getShortNote(),this.longNote=t.noteIsShort()?null:t.note},d=function(t,e,d,p){function m(t){v=t,g(v)}function g(e){t.sys=new l(e);var n=s.getUnusedSignatures(y),r=s.getWormholesWithSignatures(e);t.wormholes=r.map(function(t){return new h(t.wormhole,y,t.signature)}),t.sigs=n.map(function(t){return new f(t)}),t.show=!0}var y=n.getSystemByName(d.systemName);if(!y)return void e.go("system-list");t.$parent.setSelected(y);var v,b=p.all([r.initialize(),i.initialize(),o.initialize()]);b.then(function(){var t=r.getSystem(y.id);m(t)});var w=r.getSystem(y.id);m(w),r.systemChanged(y.id,m),t.sigTypes=u.allowedTypes,t.togglePinned=function(){v.isPinned=!v.isPinned,r.updateSystem(v)},t.toggleStarred=function(){v.isStarred=!v.isStarred,r.updateSystem(v)},t.toggleEditNote=function(){t.editingNote||(t.newNote=t.sys.note),t.editingNote=!t.editingNote},t.isSafeNoteLength=function(){return!t.newNote||t.newNote.length<c.MAX_NOTE_LENGTH},t.saveNote=function(){v.note=t.newNote,t.toggleEditNote(),r.updateSystem(v)},t.markAsScanned=function(){s.makeSystemObservation(y)},t.findRouteTo=function(){var t=siteConfig.homeSystem,n=y;a.setSystems(t,n),e.go("route-finder")},t.togglePasteSignatues=function(){t.pastingScanResults=!t.pastingScanResults},t.pasteScanResults=function(){if(!t.pastedScanResultData)return void(t.pastingScanResults=!1);var e=t.pastedScanResultData;t.pastedScanResultData=null;var n=s.pasteSignatureData(y,e);n?t.pastingScanResults=!1:alert("Couldn't parse signatures. Did you paste the correct data?")},t.todo=function(){alert("Unimplemented")},t.go=function(t){e.go("system-list.details",{systemName:t.systemName})},t.newWormhole=function(){t.wormholes.forEach(function(t){t.isEditing=!1}),t.showNewWormhole=!0},t.editWormhole=function(e){t.showNewWormhole=!1,e.isEditing?e.isEditing=!1:(t.wormholes.forEach(function(t){t.isEditing=!1}),e.isEditing=!0)},t.deleteWormhole=function(t){i.delete(t)},t.closeWormhole=function(){t.showNewWormhole=!1,t.wormholes.forEach(function(t){t.isEditing=!1})},t.observeWormhole=function(t){s.makeWormholeObservation(t)},t.newSig=function(){t.sigs.forEach(function(t){t.isEditing=!1}),t.showNewSig=!0},t.editSig=function(e){t.showNewSig=!1,e.isEditing?e.isEditing=!1:(t.sigs.forEach(function(t){t.isEditing=!1}),e.isEditing=!0)},t.deleteSig=function(t){o.deleteSignature(t)},t.closeSig=function(){t.showNewSig=!1,t.sigs.forEach(function(t){t.isEditing=!1})},t.observeSig=function(t){s.makeSignatureObservation(t)},t.$on("$destroy",function(){t.$parent.setSelected(null),r.systemChangedRemoveHandler(y.id,m)})};e.exports=d},{"../../services/route-search-params-service.js":42,"../../services/scanning-service":43,"local/repositories/scanned-system":152,"local/repositories/scanned-system//scanned-system":154,"local/repositories/signature":155,"local/repositories/signature/signature.js":157,"local/repositories/system":158,"local/repositories/wormhole":166}],20:[function(t,e){"use strict";var n=t("local/repositories/scanned-system"),r=t("local/repositories/wormhole"),i=function(t){this.data=t,this.id=t.id,this.name=t.systemName,this.lastScannedPretty=t.getLastScannedPretty(),this.lastScannedFuzzy=t.getLastScannedFuzzy(),this.lastPartialScanPretty=t.getLastPartialScanPretty(),this.lastPartialScanFuzzy=t.getLastPartialScanFuzzy();var e=siteConfig.homeSystem;this.distance=t.getStaticJumpsToSystem(e),null===this.distance&&(this.distance="∞"),this.security=t.getSecurityPretty(),this.region=t.regionName,this.numWormholes=t.getWormholes().length,this.lastScanned=t.lastScanned,this.lastPartial=t.lastPartialScan};i.prototype.isRecent=function(t){var e="full"==t?this.lastScanned:this.lastPartial;return e+288e5>(new Date).getTime()},i.prototype.isMedium=function(t){var e="full"==t?this.lastScanned:this.lastPartial;return!this.isRecent(t)&&e+864e5>(new Date).getTime()},i.prototype.isOld=function(t){return!this.isRecent(t)&&!this.isMedium(t)},i.prototype.isSelected=function(t){return t&&this.id==t.id};var o={pinned:function(t,e){return t.data.isPinned&&e.data.isPinned?o.lastScanned(t,e):t.data.isPinned?-1:1},starred:function(t,e){return t.data.isStarred&&e.data.isStarred||!t.data.isStarred&&!e.data.isStarred?o.pinned(t,e):t.data.isStarred?-1:1},name:function(t,e){return t.name<e.name?-1:1},lastScanned:function(t,e){var n=t.data.lastScanned,r=e.data.lastScanned;return n==r?o.name(t,e):r>n?-1:1},lastPartialScan:function(t,e){var n=t.data.lastPartialScan,r=e.data.lastPartialScan;return n==r?o.name(t,e):r>n?-1:1},wormholes:function(t,e){return t.numWormholes==e.numWormholes?0:t.numWormholes<e.numWormholes?-1:1},distance:function(t,e){var n=isNumber(t.distance)?t.distance:1e3,r=isNumber(e.distance)?e.distance:1e3;return n==r?0:r>n?-1:1},region:function(t,e){return t.region==e.region?o.lastScanned(t,e):t.region<e.region?-1:1}},s=function(t,e,s,a){function u(){t.safeApply(function(){var e=n.getSystemsArray().filter(function(t){return t.isPinned||t.isStarred}).map(function(t){return new i(t)}).sort(h);t.scannedSystems=e})}var c=a.all([n.initialize(),r.initialize()]);c.then(u),n.systemsChanged(u),r.changed(u),t.home=siteConfig.homeSystem.systemName;var l=function(e,n){return"full"==t.scanMode?o.lastScanned(e,n):o.lastPartialScan(e,n)},h=o.starred;t.scanMode="full";var f=function(e,n){return"distance"==t.distanceMode?o.distance(e,n):o.region(e,n)};t.distanceMode="distance",t.sort=function(t){var e=o[t];if("lastScan"==t?e=l:"distance"==t&&(e=f),e===h){var n=h;h=function(t,e){return-1*n(t,e)}}else h=e;u()},t.toggleScanMode=function(){t.scanMode="full"==t.scanMode?"partial":"full",u()},t.toggleDistanceMode=function(){t.distanceMode="distance"==t.distanceMode?"region":"distance",u()},t.$watch("selectedSystem",function(t){t?e.go("system-list.details",{systemName:t.systemName}):e.go("system-list")}),t.clearSearch=function(){e.go("system-list")},t.go=function(e){t.setSelected(t.selectedSystem==e?null:e)},t.setSelected=function(e){e!==t.selectedSystem&&(t.selectedSystem=e,t.searchQuery=e?e.systemName:null)},t.$on("$destroy",function(){n.systemsChangedRemoveHandler(u),r.changedRemoveHandler(u)})};e.exports=s},{"local/repositories/scanned-system":152,"local/repositories/wormhole":166}],21:[function(t,e){"use strict";e.exports=t("./user-details.js")},{"./user-details.js":22}],22:[function(t,e){"use strict";var n=t("local/repositories/user"),r=t("local/repositories/leaderboard"),i=t("q"),o=(t("moment"),function(t,e){this.data=t,this.id=t.id,this.name=t.name,this.corporation=t.corporation,this.alliance=t.alliance?t.alliance:"-",this.picUrl=t.getPortraitUrl(64);var n=e.getTotal();this.totals=n,this.wa=n.wormholedAdded,this.wpc=n.wormholesPartCompleted,this.fwpc=n.foreignWormholesPartCompleted,this.wc=n.wormholesCompleted,this.fwc=n.foreignWormholesCompleted,this.sps=n.systemsPartScanned,this.ss=n.systemsFullScanned,this.l=n.likes}),s=function(t){this.datePretty=t.getPeriodStartPretty(),this.totals=t,this.wa=t.wormholesAdded,this.wpc=t.wormholesPartCompleted+t.foreignWormholesPartCompleted,this.wc=t.wormholesCompleted+t.foreignWormholesCompleted,this.sps=t.systemsPartScanned,this.ss=t.systemsFullScanned,this.l=t.likes
};e.exports=function(t,e,a){function u(){t.safeApply(function(){var i=n.getByName(c);if(!i)return void e.go("users");var a=r.get(i.id),u=new o(i,a),l=a.getDays(10).map(function(t){return new s(t)});t.usrDtls=u,t.days=l})}var c=a.user;i.all([n.initialize(),r.initialize()]).then(u),n.changed(u),r.changed(u),t.$on("$destroy",function(){r.changedRemoveHandler(u),n.changedRemoveHandler(u)})}},{"local/repositories/leaderboard":145,"local/repositories/user":161,moment:71,q:73}],23:[function(t,e){"use strict";e.exports=t("./user-list.js")},{"./user-list.js":24}],24:[function(t,e){"use strict";var n=t("local/repositories/user"),r=t("local/repositories/leaderboard"),i=t("q"),o=(t("moment"),function(t,e){this.data=t,this.name=t.name,this.corporation=t.corporation,this.alliance=t.alliance?t.alliance:"-",this.picUrl=t.getPortraitUrl(32),this.lastActivity=t.lastActivity,this.lastActivityPretty=t.getLastActivityPretty(),this.lastActivityFuzzy=t.getLastActivityFuzzy(),this.routesSearched=t.routesSearched,this.wormholesAdded=e.getTotal().wormholesAdded,this.lastModified=e.lastModified,this.lastModifiedPretty=e.getLastModifiedPretty(),this.lastModifiedFuzzy=e.getLastModifiedFuzzy()}),s={name:function(t,e){return t.name.toLowerCase()<e.name.toLowerCase()?-1:1},corporation:function(t,e){return t.corporation==e.corporation?s.name:t.corporation.toLowerCase()<e.corporation.toLowerCase()?-1:1},alliance:function(t,e){return t.alliance==e.alliance?s.corporation:t.alliance.toLowerCase()<e.alliance.toLowerCase()?-1:1}},a=function(t){return s[t]||(s[t]=function(e,n){return e[t]===n[t]?s.name(e,n):e[t]<n[t]?1:-1}),s[t]};e.exports=function(t,e){function u(){t.safeApply(function(){var e=n.getArray().map(function(t){var e=r.get(t.id);return new o(t,e)}).sort(c);t.items=e})}i.all([n.initialize(),r.initialize()]).then(u),n.changed(u),r.changed(u);var c=s.name;t.select=function(t){e.go("user-details",{user:t.name})},t.sort=function(t){var e=a(t);if(e===c){var n=c;c=function(t,e){return-1*n(t,e)}}else c=e;u()},t.$on("$destroy",function(){r.changedRemoveHandler(u),n.changedRemoveHandler(u)})}},{"local/repositories/leaderboard":145,"local/repositories/user":161,moment:71,q:73}],25:[function(t,e){"use strict";var n=function(t){this.wormhole=t,this.startSystem=t.getStartSystem(),this.endSystem=t.getEndSystem();var e=t.getClosestEndToHome();if(e)this.nearSystem=e,this.farSystem=e===this.startSystem?this.endSystem:this.startSystem;else{var n=this.startSystem.systemName<this.endSystem.systemName;this.nearSystem=n?this.startSystem:this.endSystem,this.farSystem=n?this.endSystem:this.startSystem}this.dateFound=t.getDateFoundPretty(),this.dateFoundFuzzy=t.getDateFoundFuzzy(),this.dateExpires=t.getDateExpiresPretty(),this.dateExpiresFuzzy=t.getDateExpiresFuzzy(),this.className=t.getClassNamePretty(),this.wormholeClass=t.getWormholeClass(),this.maxShipSize=t.getMaxShipSizePretty(),this.staticJumps=t.getStaticJumps(),this.staticJumpsNoHighsec=t.getStaticJumpsNoHighsec();var r="∞";this.equivJumps=this.staticJumps?this.staticJumps:r,this.equivLowsecJumps=this.staticJumpsNoHighsec?this.staticJumpsNoHighsec:r,this.closestEndName=e?e.systemName:"(no route)",this.distanceFromHome=e?e.getStaticJumpsToSystem(siteConfig.homeSystem):r,this.isDuplicate=t.hasDuplicate(),this.transientDuplicate=!1,this.note=t.getShortNote(),this.longNote=t.noteIsShort()?null:t.note;var i=t.getCreator();this.user=i?i.name:null};e.exports=n},{}],26:[function(t,e){"use strict";var n=t("local/repositories/wormhole"),r=t("local/repositories/wormhole/wormhole.js"),i=function(t,e){e.wormhole?(console.log(e),t.wormhole=e.wormhole.clone(),t.isExisting=!0):t.wormhole=new r,t.$watchGroup(["wormhole.startSystemId","wormhole.endSystemId"],function(){t.$parent.setTransientDuplicate(t.wormhole)}),t.canSave=function(){var e=t.wormhole.startSystemId&&t.wormhole.endSystemId,n=!t.wormhole.noteIsTooLong();return e&&n},t.save=function(){t.wormhole.id?n.update(t.wormhole):n.create(t.wormhole),t.close()},t.delete=function(){n.delete(t.wormhole),t.close()},t.close=function(){t.$parent.unselect()}};e.exports=i},{"local/repositories/wormhole":166,"local/repositories/wormhole/wormhole.js":168}],27:[function(t,e){"use strict";var n=t("./wormhole-details"),r=t("local/repositories/wormhole"),i={near:function(t,e){return t.nearSystem===e.nearSystem&&t.farSystem==e.farSystem?0:t.nearSystem===e.nearSystem?i.far(t,e):t.nearSystem.systemName<e.nearSystem.systemName?-1:1},far:function(t,e){return t.farSystem===e.farSystem?i.near(t,e):t.farSystem.systemName<e.farSystem.systemName?-1:1},"class":function(t,e){return t.class==e.class?0:t.class<e.class?-1:1},timeFound:function(t,e){var n=t.wormhole.getDateFound(),r=e.wormhole.getDateFound();return r>n?1:-1},timeExpires:function(t,e){var n=t.wormhole.getDateExpires(),r=e.wormhole.getDateExpires();return r>n?-1:1},jumps:function(t,e){var n=isNumber(t.staticJumps)?t.staticJumps:1e3,r=isNumber(e.staticJumps)?e.staticJumps:1e3;return n===r?i.near(t,e):r>n?-1:1},distance:function(t,e){var n=isNumber(t.distanceFromHome)?t.distanceFromHome:1e3,r=isNumber(e.distanceFromHome)?e.distanceFromHome:1e3;return n===r?i.near(t,e):r>n?-1:1}},o=function(t,e,o){function s(){o(function(){var e=r.getArray().map(function(t){return new n(t)}).sort(a);t.wormholes=e})}t.home=siteConfig.homeSystem;var a=i.timeFound;r.initialize().then(s),r.changed(s),t.edit=function(n){t.selected===n?t.unselect():(t.selected=n,e.go("wormhole-list.edit",{wormhole:n.wormhole}))},t.create=function(){t.selected=void 0,e.go("wormhole-list.edit")},t.unselect=function(){t.selected=void 0,t.setTransientDuplicate(null),e.go("wormhole-list")},t.setTransientDuplicate=function(e){t.wormholes.forEach(function(t){t.isTransientDuplicate=e&&e.id!==t.wormhole.id?t.wormhole.isDuplicate(e):!1})},t.sort=function(t){var e=i[t];if(e===a){var n=a;a=function(t,e){return-1*n(t,e)}}else a=e;s()},t.$on("$destroy",function(){r.changedRemoveHandler(s)})};e.exports=o},{"./wormhole-details":25,"local/repositories/wormhole":166}],28:[function(t){var e=t("angular").module("wormholeMapper");e.directive("triggerOnEnter",function(){var t={restrict:"A"};return t.link=function(t,e,n){$(e).keypress(function(e){13==e.which&&t.$eval(n.triggerOnEnter)})},t}),e.directive("systemDetailsTooltip",function(){var t={restrict:"A"};return t.scope={system:"=systemDetailsTooltip",tooltipPlacement:"@"},t.controller=["$scope","$state",function(t,e){t.clicked=function(){e.go("system-list.details",{systemName:t.system.systemName})}}],t.link=function(t,e){e=$(e);var n=t.system,r=n.getWormholes();if(r.length>0)var i=1===r.length?"1 wormhole":"{0} wormholes".format(r.length);var o="{0} / {1}".format(n.getSecurityPretty(),n.regionName);i&&(o=o+" / "+i);var s={title:o,placement:t.tooltipPlacement};e.tooltip(s),e.is("a")&&e.on("click",function(e){t.clicked(),e.stopPropagation()})},t}),e.directive("wormholeClassDetailsTooltip",function(){var t={restrict:"A"};return t.scope={"class":"=wormholeClassDetailsTooltip",tooltipPlacement:"@"},t.link=function(t,e){if(t.class){e=$(e);var n={title:t.class.getTooltip(),placement:t.tooltipPlacement,trigger:"hover"};e.tooltip(n);var r="<div><strong>{0}</strong>: {1}</div>",i="<div>",o=t.class.getPopoverData();for(key in o)i+=r.format(key,o[key]);i+="</div>";var s={title:t.class.className,content:i,html:!0,trigger:"focus"};e.attr("tabindex",0),e.popover(s),e.is("a")&&e.on("click",function(t){console.log("lol"),e.tooltip("hide"),t.stopPropagation()})}},t}),e.directive("focusOnCondition",["$timeout",function(t){return{restrict:"A",link:function(e,n,r){e.$watch(r.focusOnCondition,function(e){e&&t(function(){n[0].focus()})})}}}])},{angular:47}],29:[function(t){"use strict";var e=t("angular").module("wormholeMapper");t("./directives"),e.directive("toggleList",t("./toggle-list")),e.directive("toggleListPopover",["$compile",t("./toggle-list-popover")]),e.directive("editWormhole",t("./system-list-directives/edit-wormhole")),e.directive("editSignature",t("./system-list-directives/edit-signature")),e.directive("systemSearch",["$compile",t("./repository-search/system-search")]),e.directive("wormholeSearch",["$compile",t("./repository-search/wormhole-class-search")]),e.directive("leaderboardPart",t("./leaderboard-part"))},{"./directives":28,"./leaderboard-part":30,"./repository-search/system-search":31,"./repository-search/wormhole-class-search":32,"./system-list-directives/edit-signature":33,"./system-list-directives/edit-wormhole":34,"./toggle-list":36,"./toggle-list-popover":35,angular:47}],30:[function(t,e){"use strict";var n=function(){var t={restrict:"E",templateUrl:"views/directives/leaderboard-part.html",scope:{inData:"=leaderboardStats",title:"@title",showTotal:"@showTotal",expandable:"@expandable",numRecords:"@maxRecords"},controller:["$scope","$state",function(t){var e,n,r;t.numRecords||(t.numRecords=10),void 0===t.showTotal&&(t.showTotal=!0),t.$watch("inData",function(){if(t.inData){t.hasLoaded=!0,t.total=0,t.remainder=0;var i=t.inData.sort(function(t,e){return t.score<e.score?1:-1}).map(function(e){return t.total+=e.score,{picUrl:e.user.getPortraitUrl(32),name:e.user.name,score:e.score}});e=i,n=i.slice(0,t.numRecords),r=i.slice(t.numRecords).reduce(function(t,e){return t+e.score},0),t.isExpanded=!1,t.data=n,t.remainder=r}}),t.toggleShowAll=function(){t.isExpanded?(t.isExpanded=!1,t.data=n,t.remainder=r):(t.isExpanded=!0,t.data=e,t.remainder=0)}}]};return t};e.exports=n},{}],31:[function(t,e){"use strict";var n=t("local/repositories/system"),r=function(t){var e={restrict:"A",priority:1e3,terminal:!0};return e.scope={systemSearch:"=",usrSearchQuery:"=searchQuery",useId:"@systemSearchUseId",initialSearch:"="},e.controller=["$scope","$timeout",function(t){if(t.systemSearch=t.systemSearch?t.systemSearch:null,t.systemSearch)if(t.useId){var e=n.getSystem(t.systemSearch);t.searchQuery=e?e.systemName:""}else t.searchQuery=t.systemSearch.systemName;else t.searchQuery=t.initialSearch;t.search=function(t,e){return n.searchSystems(t,e,!0)},t.$watch("systemSearch",function(e){e&&void 0!==t.usrSearchQuery&&(t.usrSearchQuery=e.systemName)}),t.$watch("usrSearchQuery",function(e){void 0!==e&&e!=t.searchQuery&&(t.searchQuery=e)}),t.$watch("searchQuery",function(e){void 0!==t.usrSearchQuery&&(t.usrSearchQuery=e);var r=n.getSystemByName(e);t.systemSearch=r?t.useId?r.id:r:null})}],e.link=function(e,n){n.attr("typeahead","system.systemName for system in search($viewValue,5)"),n.attr("ng-model","searchQuery"),n.removeAttr("system-search"),n.removeAttr("data-system-search"),t(n)(e)},e};e.exports=r},{"local/repositories/system":158}],32:[function(t,e){"use strict";var n=t("local/repositories/wormhole-class"),r=function(t){var e={restrict:"A",priority:1e3,terminal:!0};return e.scope={wormholeSearch:"=",usrSearchQuery:"=searchQuery",useId:"&wormholeSearchUseId",initialSearch:"="},e.controller=["$scope",function(t){if(t.wormholeSearch=t.wormholeSearch?t.wormholeSearch:null,t.wormholeSearch)if(t.useId){var e=n.getWormholeClass(t.wormholeSearch);t.searchQuery=e?e.className:""}else t.searchQuery=t.wormholeSearch.className;else t.searchQuery=t.initialSearch;t.search=function(t,e){return n.searchWormholeClasses(t,e,!0)},t.$watch("usrSearchQuery",function(e){void 0!==e&&e!=t.searchQuery&&(t.searchQuery=e)}),t.$watch("searchQuery",function(e){void 0!==t.usrSearchQuery&&(t.usrSearchQuery=e);var r=n.getWormholeClass(e);t.wormholeSearch=r?t.useId?r.className:r:null})}],e.link=function(e,n){n.attr("typeahead","wc.className for wc in search($viewValue,5)"),n.attr("ng-model","searchQuery"),n.removeAttr("wormhole-search"),n.removeAttr("data-wormhole-search"),t(n)(e)},e};e.exports=r},{"local/repositories/wormhole-class":163}],33:[function(t,e){"use strict";var n=t("local/repositories/signature"),r=t("local/repositories/signature/signature.js"),i=function(){var t={templateUrl:"views/directives/system-list.details.edit-signature.html"};return t.scope={targetSignature:"=editSignature",systemId:"=signatureSystemId",parentClose:"&onClose"},t.controller=["$scope",function(t){if(!t.systemId)throw"must set systemId";t.targetSignature?(t.isExisting=!0,t.signature=t.targetSignature.clone()):t.signature=new r,t.allowedTypes=r.allowedTypes,t.canSave=function(){if(!t.signature.id)return!1;var e=t.signature.id.toUpperCase().trim();return e.match(/^[A-Z0-9\-]+$/)},t.save=function(){if(t.canSave()){var e=t.signature;e.systemId=t.systemId,n.updateSignature(e),t.close()}},t.close=function(){t.parentClose&&t.parentClose()}}],t};e.exports=i},{"local/repositories/signature":155,"local/repositories/signature/signature.js":157}],34:[function(t,e){"use strict";var n=(t("local/repositories/signature"),t("local/repositories/system")),r=t("../../services/scanning-service"),i=t("local/repositories/wormhole/wormhole.js"),o=function(){var t={templateUrl:"views/directives/system-list.details.edit-wormhole.html"};return t.scope={targetWormhole:"=editWormhole",currSig:"=currentSignature",systemId:"=thisSystemId",parentClose:"&onClose"},t.controller=["$scope",function(t){if(!t.systemId)throw"must set thisSystemId";t.targetWormhole?(t.isExisting=!0,t.wormhole=t.targetWormhole.clone(),t.sig=t.currSig,t.destination=t.wormhole.startSystemId===t.systemId?t.wormhole.getEndSystem():t.wormhole.getStartSystem()):(t.wormhole=new i,t.wormhole.startSystemId=t.systemId);var e=n.getSystem(t.systemId);t.allowedSigs=r.getUnusedSignatures(e,"wormhole"),t.sig&&t.allowedSigs.push(t.sig),t.allowedSigs=t.allowedSigs.sort(function(t,e){return t.id<e.id?-1:1}),t.canSave=function(){return t.destination&&!t.wormhole.noteIsTooLong()},t.save=function(){t.canSave()&&(t.wormhole.startSystemId===t.systemId?t.wormhole.endSystemId=t.destination.id:t.wormhole.startSystemId=t.destination.id,r.saveWormholeWithSignature(t.wormhole,t.currSig,t.sig),t.close())},t.close=function(){t.parentClose&&t.parentClose()}}],t};e.exports=o},{"../../services/scanning-service":43,"local/repositories/signature":155,"local/repositories/system":158,"local/repositories/wormhole/wormhole.js":168}],35:[function(t,e){var n,r=function(t){return n||($("body").on("click",function(t){$("[data-toggle-list-popover]").each(function(){$(this).is(t.target)||0!==$(this).has(t.target).length||0!==$(".popover").has(t.target).length||$(this).popover("hide")})}),n=!0),{restrict:"A",scope:{data:"=toggleListPopover",placement:"@"},link:function(e,n){e.placement=e.placement?e.placement:"left";var r='<div class="list-group" data-toggle-list="data"></div>',i='<div class="popover popover-toggle-list" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>',o={content:t($(r))(e),template:i,placement:e.placement,html:!0,date:e.date};$(n).popover(o)}}};e.exports=r},{}],36:[function(t,e){"use strict";var n=function(){var t={};return t.templateUrl="views/directives/toggle-list.html",t.scope={data:"=toggleList",threeValue:"@threeValue"},t.controller=["$scope",function(t){function e(t){return o(t)?t.value:t}function n(t){var n=Object.keys(t).map(function(e){return t[e]}),r=function(t){return e(t)};return n.every(r)?"all":n.some(r)?"some":"none"}function r(t,e){a?(t[e]++,t[e]>2&&(t[e]=0)):o(t[e])?t[e].value=!t[e].value:t[e]=!t[e]}function i(t){var e=n(t),r=!("some"===e||"all"===e);Object.keys(t).forEach(function(e){o(t[e])?t[e].value=r:t[e]=r})}function o(t){return"object"!=typeof t?!1:void 0!==t.value}function s(t){return"object"!=typeof t?!1:void 0===t.value}var a=(t.data,t.threeValue?!0:!1);t.test="Test content",t.getName=function(e){return o(t.data[e])?t.data[e].name:e},t.getValue=function(r){return s(t.data[r])?n(t.data[r]):e(t.data[r])},t.toggle=function(e){s(t.data[e])?i(t.data[e]):r(t.data,e)},t.isNested=function(e){return s(t.data[e])}}],t};e.exports=n},{}],37:[function(t){"use strict";{var e=t("local/repositories/signature");t("../services/user-service.js"),e.createSignature,e.updateSignature}},{"../services/user-service.js":46,"local/repositories/signature":155}],38:[function(t){"use strict";function e(t,e){return r.getCurrentUser().then(function(n){var r=n?n.id:0,i=(new Date).getTime();return t.log||(t.log={}),t.log[i]={user:r,type:e},t})}var n=t("local/repositories/wormhole"),r=t("../services/user-service.js"),i=n.create,o=n.update;n.create=function(t){return e(t,"c").then(function(t){return i(t)})},n.update=function(t){return e(t,"u").then(function(t){return o(t)})}},{"../services/user-service.js":46,"local/repositories/wormhole":166}],39:[function(){(function(t){"use strict";Array.prototype.remove=function(t){var e=this.indexOf(t);-1!==e&&this.splice(e,1)},Array.prototype.detectChanges=function(t,e,n){var r=this;if(e=e?e:"id",n=n?n:"lastModified",r.length!==t.length)return!0;for(var i=0;i<r.length;i++){var o=r[i],s=t.find(function(t){return t[e]===o[e]});if(!s)return!0;if(s[n]&&o[n]){if(s[n].getTime&&o[n].getTime){if(s[n].getTime()!==o[n].getTime())return!0}else if(s[n]!==o[n])return!0}else if(s[n]!==o[n])return!0}return!1},String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(e,n){return"undefined"!=typeof t[n]?t[n]:e})}),t.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},t.getWatchers=function(t){function e(t){var r=n(t.data().$isolateScope),i=n(t.data().$scope),o=i.concat(r);return angular.forEach(t.children(),function(t){o=o.concat(e(angular.element(t)))}),o}function n(t){return t?t.$$watchers||[]:[]}t=angular.element(t||document.documentElement);return e(t)},t.countWatchers=function(){return getWatchers().length}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(t){"use strict";var e=t("moment");e.locale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"seconds",m:"1 minute",mm:"%d minutes",h:"1 hour",hh:"%d hours",d:"1 day",dd:"%d days",M:"1 month",MM:"%d months",y:"1 year",yy:"%d years"}})},{moment:71}],41:[function(t,e){"use strict";var n={};n.frigate={friendlyName:"Frigate",mass:16e5,alignTime:4,warpTime20:20},n.cruiser={friendlyName:"Cruiser",mass:15e6,alignTime:6,warpTime20:33},n.battlecruiser={friendlyName:"Battlecruiser",mass:17e6,alignTime:8,warpTime20:44},n.battleship={friendlyName:"Battleship",mass:1e8,alignTime:11,warpTime20:54},n.capital={friendlyName:"Capital Ship",mass:12e8,alignTime:31,warpTime20:71},e.exports=n},{}],42:[function(t,e){"use strict";function n(){var t=r.getBridges(),e=r.getBridgesArray(),n=i.transportMethods.Titans,o=i.transportMethods["Black Ops"];"object"!=typeof n&&(n={}),"object"!=typeof o&&(o={}),e.forEach(function(t){"titan"===t.bridgeType?n[t.id]||(n[t.id]={name:t.name,value:!0}):"blackops"===t.bridgeType&&(o[t.id]||(o[t.id]={name:t.name,value:!1}))});var s=function(e){t[e]||delete this[e]};Object.keys(n).forEach(s,n),Object.keys(o).forEach(s,o),n=0===Object.keys(n).length?!1:n,o=0===Object.keys(o).length?!1:o,i.transportMethods.Titans=n,i.transportMethods["Black Ops"]=o}var r=t("local/repositories/bridge"),i={};i.startSystemQuery="",i.endSystemQuery="",i.systemTypes={Highsec:0,Lowsec:0,Nullsec:0,"Wormhole space":0},i.transportMethods={Titans:!0,"Black Ops":!1,Wormholes:!0},i.minBridgeDistance=3,i.maxResults=20,i.setSystems=function(t,e){i.startSystemQuery=t.systemName,i.endSystemQuery=e.systemName},i.setParams=function(t){i.systemTypes=t.systemTypes,i.startSystemQuery=t.startSystemQuery,i.endSystemQuery=t.endSystemQuery,i.minBridgeDistance=t.minBridgeDistance,i.maxResults=t.maxResults},i.getParamsToEditor=function(t){t.systemTypes=i.systemTypes,t.transportMethods=i.transportMethods,t.startSystemQuery=i.startSystemQuery,t.endSystemQuery=i.endSystemQuery,t.minBridgeDistance=i.minBridgeDistance,t.maxResults=i.maxResults},i.getParamsForFinder=function(){var t,e;return t="object"!=typeof i.transportMethods.Titans?[]:Object.keys(i.transportMethods.Titans).filter(function(t){return i.transportMethods.Titans[t].value}),e="object"!=typeof i.transportMethods["Black Ops"]?[]:Object.keys(i.transportMethods["Black Ops"]).filter(function(t){return i.transportMethods["Black Ops"][t].value}),{hi:i.systemTypes.Highsec,lo:i.systemTypes.Lowsec,nl:i.systemTypes.Nullsec,ws:i.systemTypes["Wormhole space"],br:t.concat(e),st:i.transportMethods.Stargates,wh:i.transportMethods.Wormholes,mbd:i.minBridgeDistance,mr:i.maxResults}},i.hasInitialized=!1,i.initialize=function(){var t=r.initialize().then(function(){i.hasInitialized=!0,n(),r.bridgesChanged(n)});return t},e.exports=i},{"local/repositories/bridge":141}],43:[function(t,e){"use strict";function n(t,e,n){t&&(t.wormholeId=void 0,r.updateSignature(t)),e&&(e.wormholeId=n,r.updateSignature(e))}var r=t("local/repositories/signature"),i=t("local/repositories/wormhole"),o=t("local/repositories/scanned-system"),s=t("./signature-parser-service"),a={};a.makeSystemObservation=function(t,e){var n=o.getSystem(t.id);e?n.lastPartialScan=(new Date).getTime():n.lastScanned=(new Date).getTime(),o.updateSystem(n)},a.makeSignatureObservation=function(t){t.lastScanned=(new Date).getTime(),r.updateSignature(t)},a.makeWormholeObservation=function(t){t._lastObserved=(new Date).getTime(),i.update(t)},a.getWormholesWithSignatures=function(t){var e=t.getWormholes(),n=t.getSignatures();return e.map(function(t){var e=n.find(function(e){return e.wormholeId==t.id});return{wormhole:t,signature:e}})},a.getUnusedSignatures=function(t,e){var n=t.getWormholes(),r=t.getSignatures();return r.filter(function(t){return e&&t.type!=e?!1:!n.some(function(e){return e.id==t.wormholeId})})},a.saveWormholeWithSignature=function(t,e,r){if(t.id){var o=t.id;i.update(t),n(e,r,o)}else i.create(t).then(function(t){n(e,r,t)})},a.pasteSignatureData=function(t,e){var n=s.getSignatures(t.id,e);if(!n||0==n.length)return!1;var i=t.getSignatures(),o=[],u=[];n.forEach(function(t){var e=i.find(function(e){return e.equals(t)});e?(e.type=t.type?t.type:e.type,e.lastScanned=(new Date).getTime(),u.push(e)):o.push(t)}),r.supressChanged(!0),o.forEach(function(t){r.createSignature(t)}),u.forEach(function(t){r.updateSignature(t)}),r.supressChanged(!1);var c=u.some(function(t){return!t.type}),l=o.some(function(t){return!t.type}),h=c||l;return a.makeSystemObservation(t,h),!0},e.exports=a},{"./signature-parser-service":44,"local/repositories/scanned-system":152,"local/repositories/signature":155,"local/repositories/wormhole":166}],44:[function(t,e){"use strict";function n(t){return t=t.trim(),Object.keys(i).find(function(e){var n=i[e];return n.indexOf(t)>-1})}var r=["Cosmic Signature","Kosmische Signatur","Источник Сигналов"],i={wormhole:["Wormhole","Wurmloch","Червоточина"],gas:["Gas Site","Gasgebiet","ГАЗ: район добычи газа"],relic:["Relic Site","Reliktgebiet","АРТЕФАКТЫ: район поиска артефактов"],combat:["Combat Site","Kampfgebiet","ОПАСНО: район повышенной опасности"],data:["Data Site","Datengebiet","ДАННЫЕ: район сбора данных"],ore:["Ore Site","Mineraliengebiet","РУДА: район добычи руды"]},o={};o.parseData=function(t){try{var e=t.trim().split("\n"),n=e.map(function(t){var e=t.split("	");return e.length<6?null:{id:e[0].trim(),scanGroup:e[1].trim(),group:e[2].trim(),type:e[3].trim(),readingStrength:e[4].trim(),distance:e[5].trim()}}).filter(function(t){return null!==t})}catch(r){return console.error(r),null}return n},o.getSignatures=function(t,e){var i=o.parseData(e);if(!i||0===i.length)return null;var s=i.filter(function(t){return r.indexOf(t.scanGroup)>-1});return s=s.map(function(e){return{id:e.id,systemId:t,type:n(e.group)}})},e.exports=o},{}],45:[function(t,e){var n=t("store"),r={},i={"default":{main:"https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css",custom:"css/theme.default.custom.css"},cerulean:{main:"css/theme.cerulean.min.css"},cyborg:{main:"css/theme.cyborg.min.css"},darkly:{main:"css/theme.darkly.min.css"},journal:{main:"css/theme.journal.min.css"},readable:{main:"css/theme.readable.min.css"},sandstone:{main:"css/theme.sandstone.min.css"},simplex:{main:"css/theme.simplex.min.css"},slate:{main:"css/theme.slate.min.css"},united:{main:"css/theme.united.min.css"},yeti:{main:"css/theme.yeti.min.css"},adamYawl:{main:"https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css",custom:"css/theme.adamYawl.custom.css"}};r.getAllThemes=function(){return Object.keys(i)},r.getCurrentTheme=function(){var t=n.get("theme");return i[t]?t:"default"},r.saveTheme=function(t){n.set("theme",t),r.setTheme(t)},r.loadTheme=function(){var t=n.get("theme");r.setTheme(t)},r.setTheme=function(t){var e=i[t];e||(e=i["default"]);var n=document.getElementById("bootstrap-css"),r=document.getElementById("theme-css"),o=e.main,s=e.custom?e.custom:"";n.href=o,r.href=s},e.exports=r},{store:74}],46:[function(t,e){"use strict";var n=t("local/repositories/user"),r=t("local/repositories/firebase-auth"),i=(t("q"),{});i.getCurrentUser=function(){return r.identity().then(function(t){return t?n.initialize().then(function(){var e=n.get(t.uid);return e}):null})},i.login=function(t,e){return r.loginWithFirebase(t).then(function(){return e?n.initialize().then(function(){var t=n.get(e.id);t||(t={id:e.id}),t.name=e.name,t.corporation=e.corporation,t.alliance=e.alliance,t.lastLogin=Date.now(),n.update(t)}):void 0})},e.exports=i},{"local/repositories/firebase-auth":142,"local/repositories/user":161,q:73}],47:[function(t,e){e.exports=angular},{}],48:[function(t,e,n){!function(t,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof n?e.exports=r():t.returnExports=r()}(this,function(){function t(i,o){if("function"!=typeof o)throw new Error("Bad callback given: "+o);if(!i)throw new Error("No options given");var a=i.onResponse;if(i="string"==typeof i?{uri:i}:JSON.parse(JSON.stringify(i)),i.onResponse=a,i.verbose&&(t.log=r()),i.url&&(i.uri=i.url,delete i.url),!i.uri&&""!==i.uri)throw new Error("options.uri is a required argument");if("string"!=typeof i.uri)throw new Error("options.uri must be a string");for(var u=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],c=0;c<u.length;c++)if(i[u[c]])throw new Error("options."+u[c]+" is not supported");if(i.callback=o,i.method=i.method||"GET",i.headers=i.headers||{},i.body=i.body||null,i.timeout=i.timeout||t.DEFAULT_TIMEOUT,i.headers.host)throw new Error("Options.headers.host is not supported");i.json&&(i.headers.accept=i.headers.accept||"application/json","GET"!==i.method&&(i.headers["content-type"]="application/json"),"boolean"!=typeof i.json?i.body=JSON.stringify(i.json):"string"!=typeof i.body&&(i.body=JSON.stringify(i.body)));var l=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")};if(i.qs){var h="string"==typeof i.qs?i.qs:l(i.qs);i.uri=-1!==i.uri.indexOf("?")?i.uri+"&"+h:i.uri+"?"+h}var f=function(t){var e={};e.boundry="-------------------------------"+Math.floor(1e9*Math.random());var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push("--"+e.boundry+'\nContent-Disposition: form-data; name="'+r+'"\n\n'+t[r]+"\n");return n.push("--"+e.boundry+"--"),e.body=n.join(""),e.length=e.body.length,e.type="multipart/form-data; boundary="+e.boundry,e};if(i.form){if("string"==typeof i.form)throw"form name unsupported";if("POST"===i.method){var d=(i.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(i.headers["content-type"]=d,d){case"application/x-www-form-urlencoded":i.body=l(i.form).replace(/%20/g,"+");break;case"multipart/form-data":var p=f(i.form);i.body=p.body,i.headers["content-type"]=p.type;break;default:throw new Error("unsupported encoding:"+d)}}}return i.onResponse=i.onResponse||n,i.onResponse===!0&&(i.onResponse=o,i.callback=n),!i.headers.authorization&&i.auth&&(i.headers.authorization="Basic "+s(i.auth.username+":"+i.auth.password)),e(i)}function e(e){function n(){h=!0;var n=new Error("ETIMEDOUT");return n.code="ETIMEDOUT",n.duration=e.timeout,t.log.error("Timeout",{id:l._id,milliseconds:e.timeout}),e.callback(n,l)}function r(){if(h)return t.log.debug("Ignoring timed out state change",{state:l.readyState,id:l.id});if(t.log.debug("State change",{state:l.readyState,id:l.id,timed_out:h}),l.readyState===a.OPENED){t.log.debug("Request started",{id:l.id});for(var n in e.headers)l.setRequestHeader(n,e.headers[n])}else l.readyState===a.HEADERS_RECEIVED?i():l.readyState===a.LOADING?(i(),s()):l.readyState===a.DONE&&(i(),s(),u())}function i(){if(!m.response){if(m.response=!0,t.log.debug("Got response",{id:l.id,status:l.status}),clearTimeout(l.timeoutTimer),l.statusCode=l.status,f&&0==l.statusCode){var n=new Error("CORS request rejected: "+e.uri);return n.cors="rejected",m.loading=!0,m.end=!0,e.callback(n,l)}e.onResponse(null,l)}}function s(){m.loading||(m.loading=!0,t.log.debug("Response body loading",{id:l.id}))}function u(){if(!m.end){if(m.end=!0,t.log.debug("Request done",{id:l.id}),l.body=l.responseText,e.json)try{l.body=JSON.parse(l.responseText)}catch(n){return e.callback(n,l)}e.callback(null,l,l.body)}}var l=new a,h=!1,f=o(e.uri),d="withCredentials"in l;if(c+=1,l.seq_id=c,l.id=c+": "+e.method+" "+e.uri,l._id=l.id,f&&!d){var p=new Error("Browser does not support cross-origin request: "+e.uri);return p.cors="unsupported",e.callback(p,l)}l.timeoutTimer=setTimeout(n,e.timeout);var m={response:!1,loading:!1,end:!1};return l.onreadystatechange=r,l.open(e.method,e.uri,!0),f&&(l.withCredentials=!!e.withCredentials),l.send(e.body),l}function n(){}function r(){var t,e,r={},o=["trace","debug","info","warn","error"];for(e=0;e<o.length;e++)t=o[e],r[t]=n,"undefined"!=typeof console&&console&&console[t]&&(r[t]=i(console,t));return r}function i(t,e){function n(n,r){return"object"==typeof r&&(n+=" "+JSON.stringify(r)),t[e].call(t,n)}return n}function o(t){var e,n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{e=location.href}catch(r){e=document.createElement("a"),e.href="",e=e.href}var i=n.exec(e.toLowerCase())||[],o=n.exec(t.toLowerCase()),s=!(!o||o[1]==i[1]&&o[2]==i[2]&&(o[3]||("http:"===o[1]?80:443))==(i[3]||("http:"===i[1]?80:443)));return s}function s(t){var e,n,r,i,o,s,a,u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,h=0,f="",d=[];if(!t)return t;do e=t.charCodeAt(l++),n=t.charCodeAt(l++),r=t.charCodeAt(l++),u=e<<16|n<<8|r,i=u>>18&63,o=u>>12&63,s=u>>6&63,a=63&u,d[h++]=c.charAt(i)+c.charAt(o)+c.charAt(s)+c.charAt(a);while(l<t.length);switch(f=d.join(""),t.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"="}return f}var a=XMLHttpRequest;if(!a)throw new Error("missing XMLHttpRequest");t.log={trace:n,debug:n,info:n,warn:n,error:n};var u=18e4,c=0;t.withCredentials=!1,t.DEFAULT_TIMEOUT=u,t.defaults=function(e){var n=function(t){var n=function(n,r){n="string"==typeof n?{uri:n}:JSON.parse(JSON.stringify(n));for(var i in e)void 0===n[i]&&(n[i]=e[i]);return t(n,r)};return n},r=n(t);return r.get=n(t.get),r.post=n(t.post),r.put=n(t.put),r.head=n(t.head),r};var l=["get","put","post","head"];return l.forEach(function(e){var n=e.toUpperCase(),r=e.toLowerCase();t[r]=function(e){"string"==typeof e?e={method:n,uri:e}:(e=JSON.parse(JSON.stringify(e)),e.method=n);var r=[e].concat(Array.prototype.slice.apply(arguments,[1]));return t.apply(this,r)}}),t.couch=function(e,r){function i(t,e,n){if(t)return r(t,e,n);if((e.statusCode<200||e.statusCode>299)&&n.error){t=new Error("CouchDB error: "+(n.error.reason||n.error.error));for(var i in n)t[i]=n[i];return r(t,e,n)}return r(t,e,n)}"string"==typeof e&&(e={uri:e}),e.json=!0,e.body&&(e.json=e.body),delete e.body,r=r||n;var o=t(e,i);return o},t})},{}],49:[function(){},{}],50:[function(t,e,n){function r(t,e){var n=this;if(!(n instanceof r))return new r(t,e);var i,o=typeof t;if("number"===o)i=+t;else if("string"===o)i=r.byteLength(t,e);else{if("object"!==o||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&j(t.data)&&(t=t.data),i=+t.length}if(i>F)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+F.toString(16)+" bytes");0>i?i=0:i>>>=0,r.TYPED_ARRAY_SUPPORT?n=r._augment(new Uint8Array(i)):(n.length=i,n._isBuffer=!0);var s;if(r.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)n._set(t);else if(x(t))if(r.isBuffer(t))for(s=0;i>s;s++)n[s]=t.readUInt8(s);
else for(s=0;i>s;s++)n[s]=(t[s]%256+256)%256;else if("string"===o)n.write(t,0,e);else if("number"===o&&!r.TYPED_ARRAY_SUPPORT)for(s=0;i>s;s++)n[s]=0;return i>0&&i<=r.poolSize&&(n.parent=R),n}function i(t,e){if(!(this instanceof i))return new i(t,e);var n=new r(t,e);return delete n.parent,n}function o(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[n+s]=a}return s}function s(t,e,n,r){var i=I(C(e,t.length-n),t,n,r);return i}function a(t,e,n,r){var i=I(M(e),t,n,r);return i}function u(t,e,n,r){return a(t,e,n,r)}function c(t,e,n,r){var i=I(k(e),t,n,r);return i}function l(t,e,n,r){var i=I(O(e,t.length-n),t,n,r);return i}function h(t,e,n){return N.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function f(t,e,n){var r="",i="";n=Math.min(t.length,n);for(var o=e;n>o;o++)t[o]<=127?(r+=P(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return r+P(i)}function d(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(127&t[i]);return r}function p(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(t[i]);return r}function m(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=e;n>o;o++)i+=D(t[o]);return i}function g(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function y(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function v(t,e,n,i,o,s){if(!r.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||s>e)throw new RangeError("value is out of bounds");if(n+i>t.length)throw new RangeError("index out of range")}function b(t,e,n,r){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);o>i;i++)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function w(t,e,n,r){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);o>i;i++)t[n+i]=e>>>8*(r?i:3-i)&255}function S(t,e,n,r,i,o){if(e>i||o>e)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function _(t,e,n,r,i){return i||S(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),L.write(t,e,n,r,23,4),n+4}function T(t,e,n,r,i){return i||S(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),L.write(t,e,n,r,52,8),n+8}function E(t){if(t=A(t).replace(B,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function A(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function x(t){return j(t)||r.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function D(t){return 16>t?"0"+t.toString(16):t.toString(16)}function C(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;r>s;s++){if(n=t.charCodeAt(s),n>55295&&57344>n){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&((e-=3)>-1&&o.push(239,191,189),i=null);if(128>n){if((e-=1)<0)break;o.push(n)}else if(2048>n){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(2097152>n))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function M(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function O(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);s++)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function k(t){return N.toByteArray(E(t))}function I(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function P(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var N=t("base64-js"),L=t("ieee754"),j=t("is-array");n.Buffer=r,n.SlowBuffer=i,n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var F=1073741823,R={};r.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),r.isBuffer=function(t){return!(null==t||!t._isBuffer)},r.compare=function(t,e){if(!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,s=Math.min(n,i);s>o&&t[o]===e[o];o++);return o!==s&&(n=t[o],i=e[o]),i>n?-1:n>i?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!j(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new r(0);if(1===t.length)return t[0];var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var i=new r(e),o=0;for(n=0;n<t.length;n++){var s=t[n];s.copy(i,o),o+=s.length}return i},r.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":n=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;case"hex":n=t.length>>>1;break;case"utf8":case"utf-8":n=C(t).length;break;case"base64":n=k(t).length;break;default:n=t.length}return n},r.prototype.length=void 0,r.prototype.parent=void 0,r.prototype.toString=function(t,e,n){var r=!1;if(e>>>=0,n=void 0===n||1/0===n?this.length:n>>>0,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return m(this,e,n);case"utf8":case"utf-8":return f(this,e,n);case"ascii":return d(this,e,n);case"binary":return p(this,e,n);case"base64":return h(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}},r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===r.compare(this,t)},r.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},r.prototype.compare=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:r.compare(this,t)},r.prototype.indexOf=function(t,e){function n(t,e,n){for(var r=-1,i=0;n+i<t.length;i++)if(t[n+i]===e[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===e.length)return n+r}else r=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(r.isBuffer(t))return n(this,t,e);if("number"==typeof t)return r.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):n(this,[t],e);throw new TypeError("val must be string, number or Buffer")},r.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},r.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},r.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var i=r;r=e,e=n,n=i}if(e=Number(e)||0,0>n||0>e||e>this.length)throw new RangeError("attempt to write outside buffer bounds");var h=this.length-e;n?(n=Number(n),n>h&&(n=h)):n=h,r=String(r||"utf8").toLowerCase();var f;switch(r){case"hex":f=o(this,t,e,n);break;case"utf8":case"utf-8":f=s(this,t,e,n);break;case"ascii":f=a(this,t,e,n);break;case"binary":f=u(this,t,e,n);break;case"base64":f=c(this,t,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":f=l(this,t,e,n);break;default:throw new TypeError("Unknown encoding: "+r)}return f},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),t>e&&(e=t);var i;if(r.TYPED_ARRAY_SUPPORT)i=r._augment(this.subarray(t,e));else{var o=e-t;i=new r(o,void 0);for(var s=0;o>s;s++)i[s]=this[s+t]}return i.length&&(i.parent=this.parent||this),i},r.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||y(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},r.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||y(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},r.prototype.readUInt8=function(t,e){return e||y(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,e){return e||y(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,e){return e||y(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,e){return e||y(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,e){return e||y(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||y(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},r.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||y(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},r.prototype.readInt8=function(t,e){return e||y(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,e){e||y(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(t,e){e||y(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(t,e){return e||y(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return e||y(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,e){return e||y(t,4,this.length),L.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return e||y(t,4,this.length),L.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return e||y(t,8,this.length),L.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return e||y(t,8,this.length),L.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||v(this,t,e,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i>>>0&255;return e+n},r.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||v(this,t,e,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o>>>0&255;return e+n},r.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,1,255,0),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},r.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):b(this,t,e,!0),e+2},r.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):b(this,t,e,!1),e+2},r.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):w(this,t,e,!0),e+4},r.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):w(this,t,e,!1),e+4},r.prototype.writeIntLE=function(t,e,n,r){t=+t,e>>>=0,r||v(this,t,e,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var i=0,o=1,s=0>t?1:0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=(t/o>>0)-s&255;return e+n},r.prototype.writeIntBE=function(t,e,n,r){t=+t,e>>>=0,r||v(this,t,e,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var i=n-1,o=1,s=0>t?1:0;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=(t/o>>0)-s&255;return e+n},r.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,1,127,-128),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},r.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):b(this,t,e,!0),e+2},r.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):b(this,t,e,!1),e+2},r.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):w(this,t,e,!0),e+4},r.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||v(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):w(this,t,e,!1),e+4},r.prototype.writeFloatLE=function(t,e,n){return _(this,t,e,!0,n)},r.prototype.writeFloatBE=function(t,e,n){return _(this,t,e,!1,n)},r.prototype.writeDoubleLE=function(t,e,n){return T(this,t,e,!0,n)},r.prototype.writeDoubleBE=function(t,e,n){return T(this,t,e,!1,n)},r.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&n>i&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o=i-n;if(1e3>o||!r.TYPED_ARRAY_SUPPORT)for(var s=0;o>s;s++)t[s+e]=this[s+n];else t._set(this.subarray(n,n+o),e);return o},r.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var i=C(t.toString()),o=i.length;for(r=e;n>r;r++)this[r]=i[r%o]}return this}},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r.TYPED_ARRAY_SUPPORT)return new r(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;n>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var U=r.prototype;r._augment=function(t){return t.constructor=r,t._isBuffer=!0,t._set=t.set,t.get=U.get,t.set=U.set,t.write=U.write,t.toString=U.toString,t.toLocaleString=U.toString,t.toJSON=U.toJSON,t.equals=U.equals,t.compare=U.compare,t.indexOf=U.indexOf,t.copy=U.copy,t.slice=U.slice,t.readUIntLE=U.readUIntLE,t.readUIntBE=U.readUIntBE,t.readUInt8=U.readUInt8,t.readUInt16LE=U.readUInt16LE,t.readUInt16BE=U.readUInt16BE,t.readUInt32LE=U.readUInt32LE,t.readUInt32BE=U.readUInt32BE,t.readIntLE=U.readIntLE,t.readIntBE=U.readIntBE,t.readInt8=U.readInt8,t.readInt16LE=U.readInt16LE,t.readInt16BE=U.readInt16BE,t.readInt32LE=U.readInt32LE,t.readInt32BE=U.readInt32BE,t.readFloatLE=U.readFloatLE,t.readFloatBE=U.readFloatBE,t.readDoubleLE=U.readDoubleLE,t.readDoubleBE=U.readDoubleBE,t.writeUInt8=U.writeUInt8,t.writeUIntLE=U.writeUIntLE,t.writeUIntBE=U.writeUIntBE,t.writeUInt16LE=U.writeUInt16LE,t.writeUInt16BE=U.writeUInt16BE,t.writeUInt32LE=U.writeUInt32LE,t.writeUInt32BE=U.writeUInt32BE,t.writeIntLE=U.writeIntLE,t.writeIntBE=U.writeIntBE,t.writeInt8=U.writeInt8,t.writeInt16LE=U.writeInt16LE,t.writeInt16BE=U.writeInt16BE,t.writeInt32LE=U.writeInt32LE,t.writeInt32BE=U.writeInt32BE,t.writeFloatLE=U.writeFloatLE,t.writeFloatBE=U.writeFloatBE,t.writeDoubleLE=U.writeDoubleLE,t.writeDoubleBE=U.writeDoubleBE,t.fill=U.fill,t.inspect=U.inspect,t.toArrayBuffer=U.toArrayBuffer,t};var B=/[^+\/0-9A-z\-]/g},{"base64-js":51,ieee754:52,"is-array":53}],51:[function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===h?62:e===a||e===f?63:u>e?-1:u+10>e?e-u+26+26:l+26>e?e-l:c+26>e?e-c+26:void 0}function n(t){function n(t){c[h++]=t}var r,i,s,a,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=t.length;u="="===t.charAt(l-2)?2:"="===t.charAt(l-1)?1:0,c=new o(3*t.length/4-u),s=u>0?t.length-4:t.length;var h=0;for(r=0,i=0;s>r;r+=4,i+=3)a=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&a)):1===u&&(a=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(a>>8&255),n(255&a)),c}function i(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,s,a=t.length%3,u="";for(i=0,s=t.length-a;s>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=n(o);switch(a){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),h="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],52:[function(t,e,n){n.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+t[e+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?0/0:1/0*(d?-1:1);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+d]=255&s,d+=p,s/=256,c-=8);t[n+d-p]|=128*m}},{}],53:[function(t,e){var n=Array.isArray,r=Object.prototype.toString;e.exports=n||function(t){return!!t&&"[object Array]"==r.call(t)}},{}],54:[function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,a,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,a=new Array(i-1),u=1;i>u;u++)a[u-1]=arguments[u];n.apply(this,a)}else if(o(n)){for(i=arguments.length,a=new Array(i-1),u=1;i>u;u++)a[u-1]=arguments[u];for(c=n.slice(),i=c.length,u=0;i>u;u++)c[u].apply(this,a)}return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned){var i;i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-->0;)if(n[a]===e||n[a].listener&&n[a].listener===e){i=a;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?r(t._events[e])?1:t._events[e].length:0}},{}],55:[function(t,e){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],56:[function(t,e){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],57:[function(t,e){function n(){if(!s){s=!0;for(var t,e=o.length;e;){t=o,o=[];for(var n=-1;++n<e;)t[n]();e=o.length}s=!1}}function r(){}var i=e.exports={},o=[],s=!1;i.nextTick=function(t){o.push(t),s||setTimeout(n,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],58:[function(t,e){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":59}],59:[function(t,e){(function(n){function r(t){return this instanceof r?(u.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(t)}function i(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function o(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)}e.exports=r;var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=t("core-util-is");a.inherits=t("inherits");var u=t("./_stream_readable"),c=t("./_stream_writable");a.inherits(r,u),o(s(c.prototype),function(t){r.prototype[t]||(r.prototype[t]=c.prototype[t])})}).call(this,t("_process"))},{"./_stream_readable":61,"./_stream_writable":63,_process:57,"core-util-is":64,inherits:55}],60:[function(t,e){function n(t){return this instanceof n?void r.call(this,t):new n(t)}e.exports=n;var r=t("./_stream_transform"),i=t("core-util-is");i.inherits=t("inherits"),i.inherits(n,r),n.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":62,"core-util-is":64,inherits:55}],61:[function(t,e){(function(n){function r(e,n){var r=t("./_stream_duplex");e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(C||(C=t("string_decoder/").StringDecoder),this.decoder=new C(e.encoding),this.encoding=e.encoding)}function i(e){t("./_stream_duplex");return this instanceof i?(this._readableState=new r(e,this),this.readable=!0,void x.call(this)):new i(e)}function o(t,e,n,r,i){var o=c(e,n);if(o)t.emit("error",o);else if(D.isNullOrUndefined(n))e.reading=!1,e.ended||l(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||i||r||(n=e.decoder.write(n)),i||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&h(t)),d(t,e);else i||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=O)t=O;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||D.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var n=null;return D.isBuffer(e)||D.isString(e)||D.isNullOrUndefined(e)||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,h(t)}function h(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(M("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n.nextTick(function(){f(t)}):f(t))}function f(t){M("emit readable"),t.emit("readable"),v(t)}function d(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(function(){p(t,e)}))}function p(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(M("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function m(t){return function(){var e=t._readableState;M("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&A.listenerCount(t,"data")&&(e.flowing=!0,v(t))}}function g(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(function(){y(t,e)}))}function y(t,e){e.resumeScheduled=!1,t.emit("resume"),v(t),e.flowing&&!e.reading&&t.read(0)}function v(t){var e=t._readableState;if(M("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function b(t,e){var n,r=e.buffer,i=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!t||t>=i)n=o?r.join(""):E.concat(r,i),r.length=0;else if(t<r[0].length){var a=r[0];n=a.slice(0,t),r[0]=a.slice(t)}else if(t===r[0].length)n=r.shift();else{n=o?"":new E(t);for(var u=0,c=0,l=r.length;l>c&&t>u;c++){var a=r[0],h=Math.min(t-u,a.length);o?n+=a.slice(0,h):a.copy(n,u,0,h),h<a.length?r[0]=a.slice(h):r.shift(),u+=h}}return n}function w(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");e.endEmitted||(e.ended=!0,n.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function S(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)}function _(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}e.exports=i;var T=t("isarray"),E=t("buffer").Buffer;i.ReadableState=r;var A=t("events").EventEmitter;A.listenerCount||(A.listenerCount=function(t,e){return t.listeners(e).length});var x=t("stream"),D=t("core-util-is");D.inherits=t("inherits");var C,M=t("util");M=M&&M.debuglog?M.debuglog("stream"):function(){},D.inherits(i,x),i.prototype.push=function(t,e){var n=this._readableState;return D.isString(t)&&!n.objectMode&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=new E(t,e),e="")),o(this,n,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},i.prototype.setEncoding=function(e){return C||(C=t("string_decoder/").StringDecoder),this._readableState.decoder=new C(e),this._readableState.encoding=e,this};var O=8388608;i.prototype.read=function(t){M("read",t);var e=this._readableState,n=t;if((!D.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return M("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?w(this):h(this),null;if(t=u(t,e),0===t&&e.ended)return 0===e.length&&w(this),null;var r=e.needReadable;M("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&(r=!0,M("length less than watermark",r)),(e.ended||e.reading)&&(r=!1,M("reading or ended",r)),r&&(M("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=u(n,e));var i;return i=t>0?b(t,e):null,D.isNull(i)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&w(this),D.isNull(i)||this.emit("data",i),i},i.prototype._read=function(){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,e){function r(t){M("onunpipe"),t===h&&o()}function i(){M("onend"),t.end()}function o(){M("cleanup"),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("drain",g),t.removeListener("error",a),t.removeListener("unpipe",r),h.removeListener("end",i),h.removeListener("end",o),h.removeListener("data",s),!f.awaitDrain||t._writableState&&!t._writableState.needDrain||g()}function s(e){M("ondata");var n=t.write(e);!1===n&&(M("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,h.pause())}function a(e){M("onerror",e),l(),t.removeListener("error",a),0===A.listenerCount(t,"error")&&t.emit("error",e)}function u(){t.removeListener("finish",c),l()}function c(){M("onfinish"),t.removeListener("close",u),l()}function l(){M("unpipe"),h.unpipe(t)}var h=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1,M("pipe count=%d opts=%j",f.pipesCount,e);var d=(!e||e.end!==!1)&&t!==n.stdout&&t!==n.stderr,p=d?i:o;f.endEmitted?n.nextTick(p):h.once("end",p),t.on("unpipe",r);var g=m(h);return t.on("drain",g),h.on("data",s),t._events&&t._events.error?T(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",u),t.once("finish",c),t.emit("pipe",h),f.flowing||(M("pipe resume"),h.resume()),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=_(e.pipes,t);return-1===i?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,e){var r=x.prototype.on.call(this,t,e);
if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&h(this,i);else{var o=this;n.nextTick(function(){M("readable nexttick read 0"),o.read(0)})}}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var t=this._readableState;return t.flowing||(M("resume"),t.flowing=!0,t.reading||(M("resume read 0"),this.read(0)),g(this,t)),this},i.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(M("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){if(M("wrapped data"),e.decoder&&(i=e.decoder.write(i)),i&&(e.objectMode||i.length)){var o=r.push(i);o||(n=!0,t.pause())}});for(var i in t)D.isFunction(t[i])&&D.isUndefined(this[i])&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return S(o,function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){M("wrapped _read",e),n&&(n=!1,t.resume())},r},i._fromList=b}).call(this,t("_process"))},{"./_stream_duplex":59,_process:57,buffer:50,"core-util-is":64,events:54,inherits:55,isarray:56,stream:69,"string_decoder/":70,util:49}],62:[function(t,e){function n(t,e){this.afterTransform=function(t,n){return r(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function r(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,a.isNullOrUndefined(n)||t.push(n),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function i(t){if(!(this instanceof i))return new i(t);s.call(this,t),this._transformState=new n(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){a.isFunction(this._flush)?this._flush(function(t){o(e,t)}):o(e)})}function o(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=i;var s=t("./_stream_duplex"),a=t("core-util-is");a.inherits=t("inherits"),a.inherits(i,s),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},i.prototype._transform=function(){throw new Error("not implemented")},i.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(){var t=this._transformState;a.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},{"./_stream_duplex":59,"core-util-is":64,inherits:55}],63:[function(t,e){(function(n){function r(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function i(e,n){var r=t("./_stream_duplex");e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!e.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){d(n,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(e){var n=t("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new i(e,this),this.writable=!0,void T.call(this)):new o(e)}function s(t,e,r){var i=new Error("write after end");t.emit("error",i),n.nextTick(function(){r(i)})}function a(t,e,r,i){var o=!0;if(!(_.isBuffer(r)||_.isString(r)||_.isNullOrUndefined(r)||e.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),n.nextTick(function(){i(s)}),o=!1}return o}function u(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&_.isString(e)&&(e=new S(e,n)),e}function c(t,e,n,i,o){n=u(e,n,i),_.isBuffer(n)&&(i="buffer");var s=e.objectMode?1:n.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new r(n,i,o)):l(t,e,!1,s,n,i,o),a}function l(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function h(t,e,r,i,o){r?n.nextTick(function(){e.pendingcb--,o(i)}):(e.pendingcb--,o(i)),t._writableState.errorEmitted=!0,t.emit("error",i)}function f(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function d(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if(f(r),e)h(t,r,i,e,o);else{var s=y(t,r);s||r.corked||r.bufferProcessing||!r.buffer.length||g(t,r),i?n.nextTick(function(){p(t,r,s,o)}):p(t,r,s,o)}}function p(t,e,n,r){n||m(t,e),e.pendingcb--,r(),b(t,e)}function m(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function g(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var n=[],r=0;r<e.buffer.length;r++)n.push(e.buffer[r].callback);e.pendingcb++,l(t,e,!0,e.length,e.buffer,"",function(t){for(var r=0;r<n.length;r++)e.pendingcb--,n[r](t)}),e.buffer=[]}else{for(var r=0;r<e.buffer.length;r++){var i=e.buffer[r],o=i.chunk,s=i.encoding,a=i.callback,u=e.objectMode?1:o.length;if(l(t,e,!1,u,o,s,a),e.writing){r++;break}}r<e.buffer.length?e.buffer=e.buffer.slice(r):e.buffer.length=0}e.bufferProcessing=!1}function y(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function v(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function b(t,e){var n=y(t,e);return n&&(0===e.pendingcb?(v(t,e),e.finished=!0,t.emit("finish")):v(t,e)),n}function w(t,e,r){e.ending=!0,b(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r)),e.ended=!0}e.exports=o;var S=t("buffer").Buffer;o.WritableState=i;var _=t("core-util-is");_.inherits=t("inherits");var T=t("stream");_.inherits(o,T),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return _.isFunction(e)&&(n=e,e=null),_.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),_.isFunction(n)||(n=function(){}),r.ended?s(this,r,n):a(this,r,t,n)&&(r.pendingcb++,i=c(this,r,t,e,n)),i},o.prototype.cork=function(){var t=this._writableState;t.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||g(this,t))},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,n){var r=this._writableState;_.isFunction(t)?(n=t,t=null,e=null):_.isFunction(e)&&(n=e,e=null),_.isNullOrUndefined(t)||this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(this,t("_process"))},{"./_stream_duplex":59,_process:57,buffer:50,"core-util-is":64,inherits:55,stream:69}],64:[function(t,e,n){(function(t){function e(t){return Array.isArray(t)}function r(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function c(t){return void 0===t}function l(t){return h(t)&&"[object RegExp]"===y(t)}function h(t){return"object"==typeof t&&null!==t}function f(t){return h(t)&&"[object Date]"===y(t)}function d(t){return h(t)&&("[object Error]"===y(t)||t instanceof Error)}function p(t){return"function"==typeof t}function m(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function g(e){return t.isBuffer(e)}function y(t){return Object.prototype.toString.call(t)}n.isArray=e,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=s,n.isString=a,n.isSymbol=u,n.isUndefined=c,n.isRegExp=l,n.isObject=h,n.isDate=f,n.isError=d,n.isFunction=p,n.isPrimitive=m,n.isBuffer=g}).call(this,t("buffer").Buffer)},{buffer:50}],65:[function(t,e){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":60}],66:[function(t,e,n){n=e.exports=t("./lib/_stream_readable.js"),n.Stream=t("stream"),n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":59,"./lib/_stream_passthrough.js":60,"./lib/_stream_readable.js":61,"./lib/_stream_transform.js":62,"./lib/_stream_writable.js":63,stream:69}],67:[function(t,e){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":62}],68:[function(t,e){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":63}],69:[function(t,e){function n(){r.call(this)}e.exports=n;var r=t("events").EventEmitter,i=t("inherits");i(n,r),n.Readable=t("readable-stream/readable.js"),n.Writable=t("readable-stream/writable.js"),n.Duplex=t("readable-stream/duplex.js"),n.Transform=t("readable-stream/transform.js"),n.PassThrough=t("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function i(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,t.end())}function s(){l||(l=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(u(),0===r.listenerCount(this,"error"))throw t}function u(){c.removeListener("data",n),t.removeListener("drain",i),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),t.removeListener("error",a),c.removeListener("end",u),c.removeListener("close",u),t.removeListener("close",u)}var c=this;c.on("data",n),t.on("drain",i),t._isStdio||e&&e.end===!1||(c.on("end",o),c.on("close",s));var l=!1;return c.on("error",a),t.on("error",a),c.on("end",u),c.on("close",u),t.on("close",u),t.emit("pipe",c),t}},{events:54,inherits:55,"readable-stream/duplex.js":58,"readable-stream/passthrough.js":65,"readable-stream/readable.js":66,"readable-stream/transform.js":67,"readable-stream/writable.js":68}],70:[function(t,e,n){function r(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=t("buffer").Buffer,u=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),r(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=e.charCodeAt(e.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,r=e.charCodeAt(i);if(r>=55296&&56319>=r){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},c.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(2>=e&&n>>4==14){this.charLength=3;break}if(3>=e&&n>>3==30){this.charLength=4;break}}this.charReceived=e},c.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e}},{buffer:50}],71:[function(t,e){(function(n){(function(r){function i(t,e,n){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:n;default:throw new Error("Implement me")}}function o(t,e){return Ce.call(t,e)}function s(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function a(t){_e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function u(t,e){var n=!0;return m(function(){return n&&(a(t),n=!1),e.apply(this,arguments)},e)}function c(t,e){wn[t]||(a(e),wn[t]=!0)}function l(t,e){return function(n){return v(t.call(this,n),e)}}function h(t,e){return function(n){return this.localeData().ordinal(t.call(this,n),e)}}function f(){}function d(t,e){e!==!1&&N(t),g(this,t),this._d=new Date(+t._d)}function p(t){var e=D(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||0,s=e.day||0,a=e.hour||0,u=e.minute||0,c=e.second||0,l=e.millisecond||0;this._milliseconds=+l+1e3*c+6e4*u+36e5*a,this._days=+s+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=_e.localeData(),this._bubble()}function m(t,e){for(var n in e)o(e,n)&&(t[n]=e[n]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function g(t,e){var n,r,i;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Fe.length>0)for(n in Fe)r=Fe[n],i=e[r],"undefined"!=typeof i&&(t[r]=i);return t}function y(t){return 0>t?Math.ceil(t):Math.floor(t)}function v(t,e,n){for(var r=""+Math.abs(t),i=t>=0;r.length<e;)r="0"+r;return(i?n?"+":"":"-")+r}function b(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function w(t,e){var n;return e=U(e,t),t.isBefore(e)?n=b(t,e):(n=b(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function S(t,e){return function(n,r){var i,o;return null===r||isNaN(+r)||(c(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=_e.duration(n,r),_(this,i,t),this}}function _(t,e,n,r){var i=e._milliseconds,o=e._days,s=e._months;r=null==r?!0:r,i&&t._d.setTime(+t._d+i*n),o&&ge(t,"Date",me(t,"Date")+o*n),s&&pe(t,me(t,"Month")+s*n),r&&_e.updateOffset(t,o||s)}function T(t){return"[object Array]"===Object.prototype.toString.call(t)}function E(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function A(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(r=0;i>r;r++)(n&&t[r]!==e[r]||!n&&M(t[r])!==M(e[r]))&&s++;return s+o}function x(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=dn[t]||pn[e]||e}return t}function D(t){var e,n,r={};for(n in t)o(t,n)&&(e=x(n),e&&(r[e]=t[n]));return r}function C(t){var e,n;if(0===t.indexOf("week"))e=7,n="day";else{if(0!==t.indexOf("month"))return;e=12,n="month"}_e[t]=function(i,o){var s,a,u=_e._locale[t],c=[];if("number"==typeof i&&(o=i,i=r),a=function(t){var e=_e().utc().set(n,t);return u.call(_e._locale,e,i||"")},null!=o)return a(o);for(s=0;e>s;s++)c.push(a(s));return c}}function M(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function O(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function k(t,e,n){return le(_e([t,11,31+e-n]),e,n).week}function I(t){return P(t)?366:365}function P(t){return t%4===0&&t%100!==0||t%400===0}function N(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[Oe]<0||t._a[Oe]>11?Oe:t._a[ke]<1||t._a[ke]>O(t._a[Me],t._a[Oe])?ke:t._a[Ie]<0||t._a[Ie]>24||24===t._a[Ie]&&(0!==t._a[Pe]||0!==t._a[Ne]||0!==t._a[Le])?Ie:t._a[Pe]<0||t._a[Pe]>59?Pe:t._a[Ne]<0||t._a[Ne]>59?Ne:t._a[Le]<0||t._a[Le]>999?Le:-1,t._pf._overflowDayOfYear&&(Me>e||e>ke)&&(e=ke),t._pf.overflow=e)}function L(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===r)),t._isValid}function j(t){return t?t.toLowerCase().replace("_","-"):t}function F(t){for(var e,n,r,i,o=0;o<t.length;){for(i=j(t[o]).split("-"),e=i.length,n=j(t[o+1]),n=n?n.split("-"):null;e>0;){if(r=R(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&A(i,n,!0)>=e-1)break;e--}o++}return null}function R(e){var n=null;if(!je[e]&&Re)try{n=_e.locale(),t("./locale/"+e),_e.locale(n)}catch(r){}return je[e]}function U(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(_e.isMoment(t)||E(t)?+t:+_e(t))-+n,n._d.setTime(+n._d+r),_e.updateOffset(n,!1),n):_e(t).local()}function B(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function W(t){var e,n,r=t.match(ze);for(e=0,n=r.length;n>e;e++)r[e]=bn[r[e]]?bn[r[e]]:B(r[e]);return function(i){var o="";for(e=0;n>e;e++)o+=r[e]instanceof Function?r[e].call(i,t):r[e];return o}}function z(t,e){return t.isValid()?(e=Y(e,t.localeData()),mn[e]||(mn[e]=W(e)),mn[e](t)):t.localeData().invalidDate()}function Y(t,e){function n(t){return e.longDateFormat(t)||t}var r=5;for(Ye.lastIndex=0;r>=0&&Ye.test(t);)t=t.replace(Ye,n),Ye.lastIndex=0,r-=1;return t}function $(t,e){var n,r=e._strict;switch(t){case"Q":return tn;case"DDDD":return nn;case"YYYY":case"GGGG":case"gggg":return r?rn:Ge;case"Y":case"G":case"g":return sn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?on:He;case"S":if(r)return tn;case"SS":if(r)return en;case"SSS":if(r)return nn;case"DDD":return qe;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Xe;case"a":case"A":return e._locale._meridiemParse;case"x":return Ke;case"X":return Ze;case"Z":case"ZZ":return Je;case"T":return Ve;case"SSSS":return Qe;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?en:$e;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return $e;case"Do":return r?e._locale._ordinalParse:e._locale._ordinalParseLenient;default:return n=new RegExp(Z(K(t.replace("\\","")),"i"))}}function q(t){t=t||"";var e=t.match(Je)||[],n=e[e.length-1]||[],r=(n+"").match(hn)||["-",0,0],i=+(60*r[1])+M(r[2]);return"+"===r[0]?-i:i}function G(t,e,n){var r,i=n._a;switch(t){case"Q":null!=e&&(i[Oe]=3*(M(e)-1));break;case"M":case"MM":null!=e&&(i[Oe]=M(e)-1);break;case"MMM":case"MMMM":r=n._locale.monthsParse(e,t,n._strict),null!=r?i[Oe]=r:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(i[ke]=M(e));break;case"Do":null!=e&&(i[ke]=M(parseInt(e.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=M(e));break;case"YY":i[Me]=_e.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":i[Me]=M(e);break;case"a":case"A":n._isPm=n._locale.isPM(e);break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":i[Ie]=M(e);break;case"m":case"mm":i[Pe]=M(e);break;case"s":case"ss":i[Ne]=M(e);break;case"S":case"SS":case"SSS":case"SSSS":i[Le]=M(1e3*("0."+e));break;case"x":n._d=new Date(M(e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=q(e);break;case"dd":case"ddd":case"dddd":r=n._locale.weekdaysParse(e),null!=r?(n._w=n._w||{},n._w.d=r):n._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=M(e));break;case"gg":case"GG":n._w=n._w||{},n._w[t]=_e.parseTwoDigitYear(e)}}function H(t){var e,n,r,o,s,a,u;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(s=1,a=4,n=i(e.GG,t._a[Me],le(_e(),1,4).year),r=i(e.W,1),o=i(e.E,1)):(s=t._locale._week.dow,a=t._locale._week.doy,n=i(e.gg,t._a[Me],le(_e(),s,a).year),r=i(e.w,1),null!=e.d?(o=e.d,s>o&&++r):o=null!=e.e?e.e+s:s),u=he(n,r,o,a,s),t._a[Me]=u.year,t._dayOfYear=u.dayOfYear}function Q(t){var e,n,r,o,s=[];if(!t._d){for(r=J(t),t._w&&null==t._a[ke]&&null==t._a[Oe]&&H(t),t._dayOfYear&&(o=i(t._a[Me],r[Me]),t._dayOfYear>I(o)&&(t._pf._overflowDayOfYear=!0),n=se(o,0,t._dayOfYear),t._a[Oe]=n.getUTCMonth(),t._a[ke]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=s[e]=r[e];for(;7>e;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Ie]&&0===t._a[Pe]&&0===t._a[Ne]&&0===t._a[Le]&&(t._nextDay=!0,t._a[Ie]=0),t._d=(t._useUTC?se:oe).apply(null,s),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()+t._tzm),t._nextDay&&(t._a[Ie]=24)}}function X(t){var e;t._d||(e=D(t._i),t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],Q(t))}function J(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function V(t){if(t._f===_e.ISO_8601)return void ee(t);t._a=[],t._pf.empty=!0;var e,n,i,o,s,a=""+t._i,u=a.length,c=0;for(i=Y(t._f,t._locale).match(ze)||[],e=0;e<i.length;e++)o=i[e],n=(a.match($(o,t))||[])[0],n&&(s=a.substr(0,a.indexOf(n)),s.length>0&&t._pf.unusedInput.push(s),a=a.slice(a.indexOf(n)+n.length),c+=n.length),bn[o]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(o),G(o,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(o);t._pf.charsLeftOver=u-c,a.length>0&&t._pf.unusedInput.push(a),t._pf.bigHour===!0&&t._a[Ie]<=12&&(t._pf.bigHour=r),t._isPm&&t._a[Ie]<12&&(t._a[Ie]+=12),t._isPm===!1&&12===t._a[Ie]&&(t._a[Ie]=0),Q(t),N(t)}function K(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,i){return e||n||r||i})}function Z(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function te(t){var e,n,r,i,o;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(i=0;i<t._f.length;i++)o=0,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=s(),e._f=t._f[i],V(e),L(e)&&(o+=e._pf.charsLeftOver,o+=10*e._pf.unusedTokens.length,e._pf.score=o,(null==r||r>o)&&(r=o,n=e));m(t,n||e)}function ee(t){var e,n,r=t._i,i=an.exec(r);if(i){for(t._pf.iso=!0,e=0,n=cn.length;n>e;e++)if(cn[e][1].exec(r)){t._f=cn[e][0]+(i[6]||" ");break}for(e=0,n=ln.length;n>e;e++)if(ln[e][1].exec(r)){t._f+=ln[e][0];break}r.match(Je)&&(t._f+="Z"),V(t)}else t._isValid=!1}function ne(t){ee(t),t._isValid===!1&&(delete t._isValid,_e.createFromInputFallback(t))}function re(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function ie(t){var e,n=t._i;n===r?t._d=new Date:E(n)?t._d=new Date(+n):null!==(e=Ue.exec(n))?t._d=new Date(+e[1]):"string"==typeof n?ne(t):T(n)?(t._a=re(n.slice(0),function(t){return parseInt(t,10)}),Q(t)):"object"==typeof n?X(t):"number"==typeof n?t._d=new Date(n):_e.createFromInputFallback(t)}function oe(t,e,n,r,i,o,s){var a=new Date(t,e,n,r,i,o,s);return 1970>t&&a.setFullYear(t),a}function se(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function ae(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function ue(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function ce(t,e,n){var r=_e.duration(t).abs(),i=De(r.as("s")),o=De(r.as("m")),s=De(r.as("h")),a=De(r.as("d")),u=De(r.as("M")),c=De(r.as("y")),l=i<gn.s&&["s",i]||1===o&&["m"]||o<gn.m&&["mm",o]||1===s&&["h"]||s<gn.h&&["hh",s]||1===a&&["d"]||a<gn.d&&["dd",a]||1===u&&["M"]||u<gn.M&&["MM",u]||1===c&&["y"]||["yy",c];return l[2]=e,l[3]=+t>0,l[4]=n,ue.apply({},l)}function le(t,e,n){var r,i=n-e,o=n-t.day();return o>i&&(o-=7),i-7>o&&(o+=7),r=_e(t).add(o,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function he(t,e,n,r,i){var o,s,a=se(t,0,1).getUTCDay();return a=0===a?7:a,n=null!=n?n:i,o=i-a+(a>r?7:0)-(i>a?7:0),s=7*(e-1)+(n-i)+o+1,{year:s>0?t:t-1,dayOfYear:s>0?s:I(t-1)+s}}function fe(t){var e,n=t._i,i=t._f;return t._locale=t._locale||_e.localeData(t._l),null===n||i===r&&""===n?_e.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),_e.isMoment(n)?new d(n,!0):(i?T(i)?te(t):V(t):ie(t),e=new d(t),e._nextDay&&(e.add(1,"d"),e._nextDay=r),e))}function de(t,e){var n,r;if(1===e.length&&T(e[0])&&(e=e[0]),!e.length)return _e();for(n=e[0],r=1;r<e.length;++r)e[r][t](n)&&(n=e[r]);return n}function pe(t,e){var n;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),O(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function me(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function ge(t,e,n){return"Month"===e?pe(t,n):t._d["set"+(t._isUTC?"UTC":"")+e](n)}function ye(t,e){return function(n){return null!=n?(ge(this,t,n),_e.updateOffset(this,e),this):me(this,t)}}function ve(t){return 400*t/146097}function be(t){return 146097*t/400}function we(t){_e.duration.fn[t]=function(){return this._data[t]}}function Se(t){"undefined"==typeof ender&&(Te=xe.moment,xe.moment=t?u("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",_e):_e)}for(var _e,Te,Ee,Ae="2.8.4",xe="undefined"!=typeof n?n:this,De=Math.round,Ce=Object.prototype.hasOwnProperty,Me=0,Oe=1,ke=2,Ie=3,Pe=4,Ne=5,Le=6,je={},Fe=[],Re="undefined"!=typeof e&&e&&e.exports,Ue=/^\/?Date\((\-?\d+)/i,Be=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,We=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ze=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Ye=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,$e=/\d\d?/,qe=/\d{1,3}/,Ge=/\d{1,4}/,He=/[+\-]?\d{1,6}/,Qe=/\d+/,Xe=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Je=/Z|[\+\-]\d\d:?\d\d/gi,Ve=/T/i,Ke=/[\+\-]?\d+/,Ze=/[\+\-]?\d+(\.\d{1,3})?/,tn=/\d/,en=/\d\d/,nn=/\d{3}/,rn=/\d{4}/,on=/[+-]?\d{6}/,sn=/[+-]?\d+/,an=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,un="YYYY-MM-DDTHH:mm:ssZ",cn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ln=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],hn=/([\+\-]|\d\d)/gi,fn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),dn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},pn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},mn={},gn={s:45,m:45,h:22,d:26,M:11},yn="DDD w W M D d".split(" "),vn="M D H h m s w W".split(" "),bn={M:function(){return this.month()+1},MMM:function(t){return this.localeData().monthsShort(this,t)},MMMM:function(t){return this.localeData().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.localeData().weekdaysMin(this,t)},ddd:function(t){return this.localeData().weekdaysShort(this,t)},dddd:function(t){return this.localeData().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+v(Math.abs(t),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return M(this.milliseconds()/100)},SS:function(){return v(M(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+v(M(t/60),2)+":"+v(M(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+v(M(t/60),2)+v(M(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},wn={},Sn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];yn.length;)Ee=yn.pop(),bn[Ee+"o"]=h(bn[Ee],Ee);for(;vn.length;)Ee=vn.pop(),bn[Ee+Ee]=l(bn[Ee],2);bn.DDDD=l(bn.DDD,3),m(f.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t,e,n){var r,i,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(i=_e.utc([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=_e([2e3,1]).day(e),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e
},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e,n){var r=this._calendar[t];return"function"==typeof r?r.apply(e,[n]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(t,e,n,r):i.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(t){return t},postformat:function(t){return t},week:function(t){return le(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),_e=function(t,e,n,i){var o;return"boolean"==typeof n&&(i=n,n=r),o={},o._isAMomentObject=!0,o._i=t,o._f=e,o._l=n,o._strict=i,o._isUTC=!1,o._pf=s(),fe(o)},_e.suppressDeprecationWarnings=!1,_e.createFromInputFallback=u("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),_e.min=function(){var t=[].slice.call(arguments,0);return de("isBefore",t)},_e.max=function(){var t=[].slice.call(arguments,0);return de("isAfter",t)},_e.utc=function(t,e,n,i){var o;return"boolean"==typeof n&&(i=n,n=r),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=n,o._i=t,o._f=e,o._strict=i,o._pf=s(),fe(o).utc()},_e.unix=function(t){return _e(1e3*t)},_e.duration=function(t,e){var n,r,i,s,a=t,u=null;return _e.isDuration(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(a={},e?a[e]=t:a.milliseconds=t):(u=Be.exec(t))?(n="-"===u[1]?-1:1,a={y:0,d:M(u[ke])*n,h:M(u[Ie])*n,m:M(u[Pe])*n,s:M(u[Ne])*n,ms:M(u[Le])*n}):(u=We.exec(t))?(n="-"===u[1]?-1:1,i=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},a={y:i(u[2]),M:i(u[3]),d:i(u[4]),h:i(u[5]),m:i(u[6]),s:i(u[7]),w:i(u[8])}):"object"==typeof a&&("from"in a||"to"in a)&&(s=w(_e(a.from),_e(a.to)),a={},a.ms=s.milliseconds,a.M=s.months),r=new p(a),_e.isDuration(t)&&o(t,"_locale")&&(r._locale=t._locale),r},_e.version=Ae,_e.defaultFormat=un,_e.ISO_8601=function(){},_e.momentProperties=Fe,_e.updateOffset=function(){},_e.relativeTimeThreshold=function(t,e){return gn[t]===r?!1:e===r?gn[t]:(gn[t]=e,!0)},_e.lang=u("moment.lang is deprecated. Use moment.locale instead.",function(t,e){return _e.locale(t,e)}),_e.locale=function(t,e){var n;return t&&(n="undefined"!=typeof e?_e.defineLocale(t,e):_e.localeData(t),n&&(_e.duration._locale=_e._locale=n)),_e._locale._abbr},_e.defineLocale=function(t,e){return null!==e?(e.abbr=t,je[t]||(je[t]=new f),je[t].set(e),_e.locale(t),je[t]):(delete je[t],null)},_e.langData=u("moment.langData is deprecated. Use moment.localeData instead.",function(t){return _e.localeData(t)}),_e.localeData=function(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return _e._locale;if(!T(t)){if(e=R(t))return e;t=[t]}return F(t)},_e.isMoment=function(t){return t instanceof d||null!=t&&o(t,"_isAMomentObject")},_e.isDuration=function(t){return t instanceof p};for(Ee=Sn.length-1;Ee>=0;--Ee)C(Sn[Ee]);_e.normalizeUnits=function(t){return x(t)},_e.invalid=function(t){var e=_e.utc(0/0);return null!=t?m(e._pf,t):e._pf.userInvalidated=!0,e},_e.parseZone=function(){return _e.apply(null,arguments).parseZone()},_e.parseTwoDigitYear=function(t){return M(t)+(M(t)>68?1900:2e3)},m(_e.fn=d.prototype,{clone:function(){return _e(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=_e(this).utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():z(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):z(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return L(this)},isDSTShifted:function(){return this._a?this.isValid()&&A(this._a,(this._isUTC?_e.utc(this._a):_e(this._a)).toArray())>0:!1},parsingFlags:function(){return m({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(t){return this.zone(0,t)},local:function(t){return this._isUTC&&(this.zone(0,t),this._isUTC=!1,t&&this.add(this._dateTzOffset(),"m")),this},format:function(t){var e=z(this,t||_e.defaultFormat);return this.localeData().postformat(e)},add:S(1,"add"),subtract:S(-1,"subtract"),diff:function(t,e,n){var r,i,o,s=U(t,this),a=6e4*(this.zone()-s.zone());return e=x(e),"year"===e||"month"===e?(r=432e5*(this.daysInMonth()+s.daysInMonth()),i=12*(this.year()-s.year())+(this.month()-s.month()),o=this-_e(this).startOf("month")-(s-_e(s).startOf("month")),o-=6e4*(this.zone()-_e(this).startOf("month").zone()-(s.zone()-_e(s).startOf("month").zone())),i+=o/r,"year"===e&&(i/=12)):(r=this-s,i="second"===e?r/1e3:"minute"===e?r/6e4:"hour"===e?r/36e5:"day"===e?(r-a)/864e5:"week"===e?(r-a)/6048e5:r),n?i:y(i)},from:function(t,e){return _e.duration({to:this,from:t}).locale(this.locale()).humanize(!e)},fromNow:function(t){return this.from(_e(),t)},calendar:function(t){var e=t||_e(),n=U(e,this).startOf("day"),r=this.diff(n,"days",!0),i=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this,_e(e)))},isLeapYear:function(){return P(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=ae(t,this.localeData()),this.add(t-e,"d")):e},month:ye("Month",!0),startOf:function(t){switch(t=x(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=x(t),t===r||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(t,e){var n;return e=x("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=_e.isMoment(t)?t:_e(t),+this>+t):(n=_e.isMoment(t)?+t:+_e(t),n<+this.clone().startOf(e))},isBefore:function(t,e){var n;return e=x("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=_e.isMoment(t)?t:_e(t),+t>+this):(n=_e.isMoment(t)?+t:+_e(t),+this.clone().endOf(e)<n)},isSame:function(t,e){var n;return e=x(e||"millisecond"),"millisecond"===e?(t=_e.isMoment(t)?t:_e(t),+this===+t):(n=+_e(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))},min:u("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=_e.apply(null,arguments),this>t?this:t}),max:u("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=_e.apply(null,arguments),t>this?this:t}),zone:function(t,e){var n,r=this._offset||0;return null==t?this._isUTC?r:this._dateTzOffset():("string"==typeof t&&(t=q(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(n=this._dateTzOffset()),this._offset=t,this._isUTC=!0,null!=n&&this.subtract(n,"m"),r!==t&&(!e||this._changeInProgress?_(this,_e.duration(r-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,_e.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?_e(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return O(this.year(),this.month())},dayOfYear:function(t){var e=De((_e(this).startOf("day")-_e(this).startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=le(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},isoWeekYear:function(t){var e=le(this,1,4).year;return null==t?e:this.add(t-e,"y")},week:function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},isoWeek:function(t){var e=le(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},weekday:function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return k(this.year(),1,4)},weeksInYear:function(){var t=this.localeData()._week;return k(this.year(),t.dow,t.doy)},get:function(t){return t=x(t),this[t]()},set:function(t,e){return t=x(t),"function"==typeof this[t]&&this[t](e),this},locale:function(t){var e;return t===r?this._locale._abbr:(e=_e.localeData(t),null!=e&&(this._locale=e),this)},lang:u("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===r?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),_e.fn.millisecond=_e.fn.milliseconds=ye("Milliseconds",!1),_e.fn.second=_e.fn.seconds=ye("Seconds",!1),_e.fn.minute=_e.fn.minutes=ye("Minutes",!1),_e.fn.hour=_e.fn.hours=ye("Hours",!0),_e.fn.date=ye("Date",!0),_e.fn.dates=u("dates accessor is deprecated. Use date instead.",ye("Date",!0)),_e.fn.year=ye("FullYear",!0),_e.fn.years=u("years accessor is deprecated. Use year instead.",ye("FullYear",!0)),_e.fn.days=_e.fn.day,_e.fn.months=_e.fn.month,_e.fn.weeks=_e.fn.week,_e.fn.isoWeeks=_e.fn.isoWeek,_e.fn.quarters=_e.fn.quarter,_e.fn.toJSON=_e.fn.toISOString,m(_e.duration.fn=p.prototype,{_bubble:function(){var t,e,n,r=this._milliseconds,i=this._days,o=this._months,s=this._data,a=0;s.milliseconds=r%1e3,t=y(r/1e3),s.seconds=t%60,e=y(t/60),s.minutes=e%60,n=y(e/60),s.hours=n%24,i+=y(n/24),a=y(ve(i)),i-=y(be(a)),o+=y(i/30),i%=30,a+=y(o/12),o%=12,s.days=i,s.months=o,s.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return y(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*M(this._months/12)},humanize:function(t){var e=ce(this,!t,this.localeData());return t&&(e=this.localeData().pastFuture(+this,e)),this.localeData().postformat(e)},add:function(t,e){var n=_e.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=_e.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=x(t),this[t.toLowerCase()+"s"]()},as:function(t){var e,n;if(t=x(t),"month"===t||"year"===t)return e=this._days+this._milliseconds/864e5,n=this._months+12*ve(e),"month"===t?n:n/12;switch(e=this._days+Math.round(be(this._months/12)),t){case"week":return e/7+this._milliseconds/6048e5;case"day":return e+this._milliseconds/864e5;case"hour":return 24*e+this._milliseconds/36e5;case"minute":return 24*e*60+this._milliseconds/6e4;case"second":return 24*e*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+t)}},lang:_e.fn.lang,locale:_e.fn.locale,toIsoString:u("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(r||i||o?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale}}),_e.duration.fn.toString=_e.duration.fn.toISOString;for(Ee in fn)o(fn,Ee)&&we(Ee.toLowerCase());_e.duration.fn.asMilliseconds=function(){return this.as("ms")},_e.duration.fn.asSeconds=function(){return this.as("s")},_e.duration.fn.asMinutes=function(){return this.as("m")},_e.duration.fn.asHours=function(){return this.as("h")},_e.duration.fn.asDays=function(){return this.as("d")},_e.duration.fn.asWeeks=function(){return this.as("weeks")},_e.duration.fn.asMonths=function(){return this.as("M")},_e.duration.fn.asYears=function(){return this.as("y")},_e.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===M(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),Re?e.exports=_e:"function"==typeof define&&define.amd?(define("moment",function(t,e,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(xe.moment=Te),_e}),Se(!0)):Se()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],72:[function(t,e){(function(){function t(t){this._value=t}function n(t,e,n,r){var i,o,s=Math.pow(10,e);return o=(n(t*s)/s).toFixed(e),r&&(i=new RegExp("0{1,"+r+"}$"),o=o.replace(i,"")),o}function r(t,e,n){var r;return r=e.indexOf("$")>-1?o(t,e,n):e.indexOf("%")>-1?s(t,e,n):e.indexOf(":")>-1?a(t,e):c(t._value,e,n)}function i(t,e){var n,r,i,o,s,a=e,c=["KB","MB","GB","TB","PB","EB","ZB","YB"],l=!1;if(e.indexOf(":")>-1)t._value=u(e);else if(e===y)t._value=0;else{for("."!==m[g].delimiters.decimal&&(e=e.replace(/\./g,"").replace(m[g].delimiters.decimal,".")),n=new RegExp("[^a-zA-Z]"+m[g].abbreviations.thousand+"(?:\\)|(\\"+m[g].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+m[g].abbreviations.million+"(?:\\)|(\\"+m[g].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+m[g].abbreviations.billion+"(?:\\)|(\\"+m[g].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+m[g].abbreviations.trillion+"(?:\\)|(\\"+m[g].currency.symbol+")?(?:\\))?)?$"),s=0;s<=c.length&&!(l=e.indexOf(c[s])>-1?Math.pow(1024,s+1):!1);s++);t._value=(l?l:1)*(a.match(n)?Math.pow(10,3):1)*(a.match(r)?Math.pow(10,6):1)*(a.match(i)?Math.pow(10,9):1)*(a.match(o)?Math.pow(10,12):1)*(e.indexOf("%")>-1?.01:1)*((e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1)*Number(e.replace(/[^0-9\.]+/g,"")),t._value=l?Math.ceil(t._value):t._value}return t._value}function o(t,e,n){var r,i,o=e.indexOf("$"),s=e.indexOf("("),a=e.indexOf("-"),u="";return e.indexOf(" $")>-1?(u=" ",e=e.replace(" $","")):e.indexOf("$ ")>-1?(u=" ",e=e.replace("$ ","")):e=e.replace("$",""),i=c(t._value,e,n),1>=o?i.indexOf("(")>-1||i.indexOf("-")>-1?(i=i.split(""),r=1,(s>o||a>o)&&(r=0),i.splice(r,0,m[g].currency.symbol+u),i=i.join("")):i=m[g].currency.symbol+u+i:i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,u+m[g].currency.symbol),i=i.join("")):i=i+u+m[g].currency.symbol,i}function s(t,e,n){var r,i="",o=100*t._value;return e.indexOf(" %")>-1?(i=" ",e=e.replace(" %","")):e=e.replace("%",""),r=c(o,e,n),r.indexOf(")")>-1?(r=r.split(""),r.splice(-1,0,i+"%"),r=r.join("")):r=r+i+"%",r}function a(t){var e=Math.floor(t._value/60/60),n=Math.floor((t._value-60*e*60)/60),r=Math.round(t._value-60*e*60-60*n);return e+":"+(10>n?"0"+n:n)+":"+(10>r?"0"+r:r)}function u(t){var e=t.split(":"),n=0;return 3===e.length?(n+=60*Number(e[0])*60,n+=60*Number(e[1]),n+=Number(e[2])):2===e.length&&(n+=60*Number(e[0]),n+=Number(e[1])),Number(n)}function c(t,e,r){var i,o,s,a,u,c,l=!1,h=!1,f=!1,d="",p=!1,v=!1,b=!1,w=!1,S=!1,_="",T="",E=Math.abs(t),A=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],x="",D=!1;if(0===t&&null!==y)return y;if(e.indexOf("(")>-1?(l=!0,e=e.slice(1,-1)):e.indexOf("+")>-1&&(h=!0,e=e.replace(/\+/g,"")),e.indexOf("a")>-1&&(p=e.indexOf("aK")>=0,v=e.indexOf("aM")>=0,b=e.indexOf("aB")>=0,w=e.indexOf("aT")>=0,S=p||v||b||w,e.indexOf(" a")>-1?(d=" ",e=e.replace(" a","")):e=e.replace("a",""),E>=Math.pow(10,12)&&!S||w?(d+=m[g].abbreviations.trillion,t/=Math.pow(10,12)):E<Math.pow(10,12)&&E>=Math.pow(10,9)&&!S||b?(d+=m[g].abbreviations.billion,t/=Math.pow(10,9)):E<Math.pow(10,9)&&E>=Math.pow(10,6)&&!S||v?(d+=m[g].abbreviations.million,t/=Math.pow(10,6)):(E<Math.pow(10,6)&&E>=Math.pow(10,3)&&!S||p)&&(d+=m[g].abbreviations.thousand,t/=Math.pow(10,3))),e.indexOf("b")>-1)for(e.indexOf(" b")>-1?(_=" ",e=e.replace(" b","")):e=e.replace("b",""),s=0;s<=A.length;s++)if(i=Math.pow(1024,s),o=Math.pow(1024,s+1),t>=i&&o>t){_+=A[s],i>0&&(t/=i);break}return e.indexOf("o")>-1&&(e.indexOf(" o")>-1?(T=" ",e=e.replace(" o","")):e=e.replace("o",""),T+=m[g].ordinal(t)),e.indexOf("[.]")>-1&&(f=!0,e=e.replace("[.]",".")),a=t.toString().split(".")[0],u=e.split(".")[1],c=e.indexOf(","),u?(u.indexOf("[")>-1?(u=u.replace("]",""),u=u.split("["),x=n(t,u[0].length+u[1].length,r,u[1].length)):x=n(t,u.length,r),a=x.split(".")[0],x=x.split(".")[1].length?m[g].delimiters.decimal+x.split(".")[1]:"",f&&0===Number(x.slice(1))&&(x="")):a=n(t,null,r),a.indexOf("-")>-1&&(a=a.slice(1),D=!0),c>-1&&(a=a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+m[g].delimiters.thousands)),0===e.indexOf(".")&&(a=""),(l&&D?"(":"")+(!l&&D?"-":"")+(!D&&h?"+":"")+a+x+(T?T:"")+(d?d:"")+(_?_:"")+(l&&D?")":"")}function l(t,e){m[t]=e}function h(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)}function f(){var t=Array.prototype.slice.call(arguments);return t.reduce(function(t,e){var n=h(t),r=h(e);return n>r?n:r},-1/0)}var d,p="1.5.3",m={},g="en",y=null,v="0,0",b="undefined"!=typeof e&&e.exports;d=function(e){return d.isNumeral(e)?e=e.value():0===e||"undefined"==typeof e?e=0:Number(e)||(e=d.fn.unformat(e)),new t(Number(e))},d.version=p,d.isNumeral=function(e){return e instanceof t},d.language=function(t,e){if(!t)return g;if(t&&!e){if(!m[t])throw new Error("Unknown language : "+t);g=t}return(e||!m[t])&&l(t,e),d},d.languageData=function(t){if(!t)return m[g];if(!m[t])throw new Error("Unknown language : "+t);return m[t]},d.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),d.zeroFormat=function(t){y="string"==typeof t?t:null},d.defaultFormat=function(t){v="string"==typeof t?t:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var n,r,i=this.length>>>0,o=!1;for(1<arguments.length&&(r=e,o=!0),n=0;i>n;++n)this.hasOwnProperty(n)&&(o?r=t(r,this[n],n,this):(r=this[n],o=!0));if(!o)throw new TypeError("Reduce of empty array with no initial value");return r}),d.fn=t.prototype={clone:function(){return d(this)},format:function(t,e){return r(this,t?t:v,void 0!==e?e:Math.round)},unformat:function(t){return"[object Number]"===Object.prototype.toString.call(t)?t:i(this,t?t:v)},value:function(){return this._value},valueOf:function(){return this._value},set:function(t){return this._value=Number(t),this},add:function(t){function e(t,e){return t+n*e}var n=f.call(null,this._value,t);return this._value=[this._value,t].reduce(e,0)/n,this},subtract:function(t){function e(t,e){return t-n*e}var n=f.call(null,this._value,t);return this._value=[t].reduce(e,this._value*n)/n,this},multiply:function(t){function e(t,e){var n=f(t,e);return t*n*e*n/(n*n)}return this._value=[this._value,t].reduce(e,1),this},divide:function(t){function e(t,e){var n=f(t,e);return t*n/(e*n)}return this._value=[this._value,t].reduce(e),this},difference:function(t){return Math.abs(d(this._value).subtract(t).value())}},b&&(e.exports=d),"undefined"==typeof ender&&(this.numeral=d),"function"==typeof define&&define.amd&&define([],function(){return d})}).call(this)},{}],73:[function(t,e,n){(function(t){!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof n&&"object"==typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if("undefined"==typeof self)throw new Error("This environment was not anticiapted by Q. Please file a bug.");self.Q=t()}}(function(){"use strict";function e(t){return function(){return Q.apply(t,arguments)}}function n(t){return t===Object(t)}function r(t){return"[object StopIteration]"===ne(t)||t instanceof $}function i(t,e){if(W&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(re)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+re+"\n");t.stack=o(i)}}function o(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var i=e[r];u(i)||s(i)||!i||n.push(i)}return n.join("\n")}function s(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function a(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function u(t){var e=a(t);if(!e)return!1;var n=e[0],r=e[1];return n===Y&&r>=q&&ae>=r}function c(){if(W)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=a(n);if(!r)return;return Y=r[0],r[1]}}function l(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function h(t){return t instanceof m?t:b(t)?C(t):D(t)}function f(){function t(t){e=t,o.source=t,J(n,function(e,n){h.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],i=Z(f.prototype),o=Z(m.prototype);if(o.promiseDispatch=function(t,i,o){var s=X(arguments);n?(n.push(s),"when"===i&&o[1]&&r.push(o[1])):h.nextTick(function(){e.promiseDispatch.apply(e,s)})},o.valueOf=function(){if(n)return o;var t=y(e);return v(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},h.longStackSupport&&W)try{throw new Error}catch(s){o.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){e||t(h(n))},i.fulfill=function(n){e||t(D(n))},i.reject=function(n){e||t(x(n))},i.notify=function(t){e||J(r,function(e,n){h.nextTick(function(){n(t)})},void 0)},i}function d(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=f();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function p(t){return d(function(e,n){for(var r=0,i=t.length;i>r;r++)h(t[r]).then(e,n)})}function m(t,e,n){void 0===e&&(e=function(t){return x(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=Z(m.prototype);if(r.promiseDispatch=function(n,i,o){var s;try{s=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(a){s=x(a)}n&&n(s)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function g(t,e,n,r){return h(t).then(e,n,r)}function y(t){if(v(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function v(t){return t instanceof m}function b(t){return n(t)&&"function"==typeof t.then}function w(t){return v(t)&&"pending"===t.inspect().state}function S(t){return!v(t)||"fulfilled"===t.inspect().state}function _(t){return v(t)&&"rejected"===t.inspect().state}function T(){ie.length=0,oe.length=0,se||(se=!0)}function E(t,e){se&&(oe.push(t),ie.push(e&&"undefined"!=typeof e.stack?e.stack:"(no stack) "+e))}function A(t){if(se){var e=V(oe,t);-1!==e&&(oe.splice(e,1),ie.splice(e,1))}}function x(t){var e=m({when:function(e){return e&&A(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return E(e,t),e}function D(t){return m({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},"delete":function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return ee(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function C(t){var e=f();return h.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}function M(t){return m({isDef:function(){}},function(e,n){return L(t,e,n)},function(){return h(t).inspect()})}function O(t,e,n){return h(t).spread(e,n)}function k(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=n[t](e)}catch(a){return x(a)}return s.done?h(s.value):g(s.value,i,o)}try{s=n[t](e)}catch(a){return r(a)?h(a.value):x(a)}return g(s,i,o)}var n=t.apply(this,arguments),i=e.bind(e,"next"),o=e.bind(e,"throw");return i()}}function I(t){h.done(h.async(t)())}function P(t){throw new $(t)}function N(t){return function(){return O([this,j(arguments)],function(e,n){return t.apply(e,n)})}}function L(t,e,n){return h(t).dispatch(e,n)}function j(t){return g(t,function(t){var e=0,n=f();return J(t,function(r,i,o){var s;v(i)&&"fulfilled"===(s=i.inspect()).state?t[o]=s.value:(++e,g(i,function(r){t[o]=r,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function F(t){return g(t,function(t){return t=K(t,h),g(j(K(t,function(t){return g(t,G,G)})),function(){return t})})}function R(t){return h(t).allSettled()}function U(t,e){return h(t).then(void 0,void 0,e)}function B(t,e){return h(t).nodeify(e)}var W=!1;try{throw new Error}catch(z){W=!!z.stack}var Y,$,q=c(),G=function(){},H=function(){function e(){for(;n.next;){n=n.next;var t=n.task;n.task=void 0;var r=n.domain;r&&(n.domain=void 0,r.enter());try{t()}catch(o){if(s)throw r&&r.exit(),setTimeout(e,0),r&&r.enter(),o;setTimeout(function(){throw o},0)}r&&r.exit()}i=!1}var n={task:void 0,next:null},r=n,i=!1,o=void 0,s=!1;if(H=function(e){r=r.next={task:e,domain:s&&t.domain,next:null},i||(i=!0,o())},"undefined"!=typeof t&&t.nextTick)s=!0,o=function(){t.nextTick(e)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){o=u,a.port1.onmessage=e,e()};var u=function(){a.port2.postMessage(0)};o=function(){setTimeout(e,0),u()}}else o=function(){setTimeout(e,0)};return H}(),Q=Function.call,X=e(Array.prototype.slice),J=e(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(e=t(e,this[n],n));return e}),V=e(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),K=e(Array.prototype.map||function(t,e){var n=this,r=[];return J(n,function(i,o,s){r.push(t.call(e,o,s,n))},void 0),r}),Z=Object.create||function(t){function e(){}return e.prototype=t,new e},te=e(Object.prototype.hasOwnProperty),ee=Object.keys||function(t){var e=[];for(var n in t)te(t,n)&&e.push(n);return e},ne=e(Object.prototype.toString);$="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var re="From previous event:";h.resolve=h,h.nextTick=H,h.longStackSupport=!1,"object"==typeof t&&t&&t.env&&t.env.Q_DEBUG&&(h.longStackSupport=!0),h.defer=f,f.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):t.resolve(arguments.length>2?X(arguments,1):n)}},h.Promise=d,h.promise=d,d.race=p,d.all=j,d.reject=x,d.resolve=h,h.passByCopy=function(t){return t},m.prototype.passByCopy=function(){return this},h.join=function(t,e){return h(t).join(e)},m.prototype.join=function(t){return h([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},h.race=p,m.prototype.race=function(){return this.then(h.race)},h.makePromise=m,m.prototype.toString=function(){return"[object Promise]"},m.prototype.then=function(t,e,n){function r(e){try{return"function"==typeof t?t(e):e}catch(n){return x(n)}}function o(t){if("function"==typeof e){i(t,a);try{return e(t)}catch(n){return x(n)}}return x(t)}function s(t){return"function"==typeof n?n(t):t}var a=this,u=f(),c=!1;return h.nextTick(function(){a.promiseDispatch(function(t){c||(c=!0,u.resolve(r(t)))},"when",[function(t){c||(c=!0,u.resolve(o(t)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=s(t)}catch(r){if(n=!0,!h.onerror)throw r;h.onerror(r)}n||u.notify(e)}]),u.promise},h.tap=function(t,e){return h(t).tap(e)},m.prototype.tap=function(t){return t=h(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},h.when=g,m.prototype.thenResolve=function(t){return this.then(function(){return t})},h.thenResolve=function(t,e){return h(t).thenResolve(e)},m.prototype.thenReject=function(t){return this.then(function(){throw t})},h.thenReject=function(t,e){return h(t).thenReject(e)},h.nearer=y,h.isPromise=v,h.isPromiseAlike=b,h.isPending=w,m.prototype.isPending=function(){return"pending"===this.inspect().state},h.isFulfilled=S,m.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},h.isRejected=_,m.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ie=[],oe=[],se=!0;h.resetUnhandledRejections=T,h.getUnhandledReasons=function(){return ie.slice()},h.stopUnhandledRejectionTracking=function(){T(),se=!1},T(),h.reject=x,h.fulfill=D,h.master=M,h.spread=O,m.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},h.async=k,h.spawn=I,h["return"]=P,h.promised=N,h.dispatch=L,m.prototype.dispatch=function(t,e){var n=this,r=f();return h.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},h.get=function(t,e){return h(t).dispatch("get",[e])},m.prototype.get=function(t){return this.dispatch("get",[t])},h.set=function(t,e,n){return h(t).dispatch("set",[e,n])},m.prototype.set=function(t,e){return this.dispatch("set",[t,e])},h.del=h["delete"]=function(t,e){return h(t).dispatch("delete",[e])},m.prototype.del=m.prototype["delete"]=function(t){return this.dispatch("delete",[t])},h.mapply=h.post=function(t,e,n){return h(t).dispatch("post",[e,n])},m.prototype.mapply=m.prototype.post=function(t,e){return this.dispatch("post",[t,e])},h.send=h.mcall=h.invoke=function(t,e){return h(t).dispatch("post",[e,X(arguments,2)])},m.prototype.send=m.prototype.mcall=m.prototype.invoke=function(t){return this.dispatch("post",[t,X(arguments,1)])
},h.fapply=function(t,e){return h(t).dispatch("apply",[void 0,e])},m.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},h["try"]=h.fcall=function(t){return h(t).dispatch("apply",[void 0,X(arguments,1)])},m.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},h.fbind=function(t){var e=h(t),n=X(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(X(arguments))])}},m.prototype.fbind=function(){var t=this,e=X(arguments);return function(){return t.dispatch("apply",[this,e.concat(X(arguments))])}},h.keys=function(t){return h(t).dispatch("keys",[])},m.prototype.keys=function(){return this.dispatch("keys",[])},h.all=j,m.prototype.all=function(){return j(this)},h.allResolved=l(F,"allResolved","allSettled"),m.prototype.allResolved=function(){return F(this)},h.allSettled=R,m.prototype.allSettled=function(){return this.then(function(t){return j(K(t,function(t){function e(){return t.inspect()}return t=h(t),t.then(e,e)}))})},h.fail=h["catch"]=function(t,e){return h(t).then(void 0,e)},m.prototype.fail=m.prototype["catch"]=function(t){return this.then(void 0,t)},h.progress=U,m.prototype.progress=function(t){return this.then(void 0,void 0,t)},h.fin=h["finally"]=function(t,e){return h(t)["finally"](e)},m.prototype.fin=m.prototype["finally"]=function(t){return t=h(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},h.done=function(t,e,n,r){return h(t).done(e,n,r)},m.prototype.done=function(e,n,r){var o=function(t){h.nextTick(function(){if(i(t,s),!h.onerror)throw t;h.onerror(t)})},s=e||n||r?this.then(e,n,r):this;"object"==typeof t&&t&&t.domain&&(o=t.domain.bind(o)),s.then(void 0,o)},h.timeout=function(t,e,n){return h(t).timeout(e,n)},m.prototype.timeout=function(t,e){var n=f(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},h.delay=function(t,e){return void 0===e&&(e=t,t=void 0),h(t).delay(e)},m.prototype.delay=function(t){return this.then(function(e){var n=f();return setTimeout(function(){n.resolve(e)},t),n.promise})},h.nfapply=function(t,e){return h(t).nfapply(e)},m.prototype.nfapply=function(t){var e=f(),n=X(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},h.nfcall=function(t){var e=X(arguments,1);return h(t).nfapply(e)},m.prototype.nfcall=function(){var t=X(arguments),e=f();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},h.nfbind=h.denodeify=function(t){var e=X(arguments,1);return function(){var n=e.concat(X(arguments)),r=f();return n.push(r.makeNodeResolver()),h(t).fapply(n).fail(r.reject),r.promise}},m.prototype.nfbind=m.prototype.denodeify=function(){var t=X(arguments);return t.unshift(this),h.denodeify.apply(void 0,t)},h.nbind=function(t,e){var n=X(arguments,2);return function(){function r(){return t.apply(e,arguments)}var i=n.concat(X(arguments)),o=f();return i.push(o.makeNodeResolver()),h(r).fapply(i).fail(o.reject),o.promise}},m.prototype.nbind=function(){var t=X(arguments,0);return t.unshift(this),h.nbind.apply(void 0,t)},h.nmapply=h.npost=function(t,e,n){return h(t).npost(e,n)},m.prototype.nmapply=m.prototype.npost=function(t,e){var n=X(e||[]),r=f();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},h.nsend=h.nmcall=h.ninvoke=function(t,e){var n=X(arguments,2),r=f();return n.push(r.makeNodeResolver()),h(t).dispatch("post",[e,n]).fail(r.reject),r.promise},m.prototype.nsend=m.prototype.nmcall=m.prototype.ninvoke=function(t){var e=X(arguments,1),n=f();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},h.nodeify=B,m.prototype.nodeify=function(t){return t?void this.then(function(e){h.nextTick(function(){t(null,e)})},function(e){h.nextTick(function(){t(e)})}):this};var ae=c();return h})}).call(this,t("_process"))},{_process:57}],74:[function(t,e){!function(t){function n(){try{return a in t&&t[a]}catch(e){return!1}}function r(t){return t.replace(/^d/,"___$&").replace(d,"___")}var i,o={},s=t.document,a="localStorage",u="script";if(o.disabled=!1,o.version="1.3.17",o.set=function(){},o.get=function(){},o.has=function(t){return void 0!==o.get(t)},o.remove=function(){},o.clear=function(){},o.transact=function(t,e,n){null==n&&(n=e,e=null),null==e&&(e={});var r=o.get(t,e);n(r),o.set(t,r)},o.getAll=function(){},o.forEach=function(){},o.serialize=function(t){return JSON.stringify(t)},o.deserialize=function(t){if("string"!=typeof t)return void 0;try{return JSON.parse(t)}catch(e){return t||void 0}},n())i=t[a],o.set=function(t,e){return void 0===e?o.remove(t):(i.setItem(t,o.serialize(e)),e)},o.get=function(t,e){var n=o.deserialize(i.getItem(t));return void 0===n?e:n},o.remove=function(t){i.removeItem(t)},o.clear=function(){i.clear()},o.getAll=function(){var t={};return o.forEach(function(e,n){t[e]=n}),t},o.forEach=function(t){for(var e=0;e<i.length;e++){var n=i.key(e);t(n,o.get(n))}};else if(s.documentElement.addBehavior){var c,l;try{l=new ActiveXObject("htmlfile"),l.open(),l.write("<"+u+">document.w=window</"+u+'><iframe src="/favicon.ico"></iframe>'),l.close(),c=l.w.frames[0].document,i=c.createElement("div")}catch(h){i=s.createElement("div"),c=s.body}var f=function(t){return function(){var e=Array.prototype.slice.call(arguments,0);e.unshift(i),c.appendChild(i),i.addBehavior("#default#userData"),i.load(a);var n=t.apply(o,e);return c.removeChild(i),n}},d=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");o.set=f(function(t,e,n){return e=r(e),void 0===n?o.remove(e):(t.setAttribute(e,o.serialize(n)),t.save(a),n)}),o.get=f(function(t,e,n){e=r(e);var i=o.deserialize(t.getAttribute(e));return void 0===i?n:i}),o.remove=f(function(t,e){e=r(e),t.removeAttribute(e),t.save(a)}),o.clear=f(function(t){var e=t.XMLDocument.documentElement.attributes;t.load(a);for(var n,r=0;n=e[r];r++)t.removeAttribute(n.name);t.save(a)}),o.getAll=function(){var t={};return o.forEach(function(e,n){t[e]=n}),t},o.forEach=f(function(t,e){for(var n,r=t.XMLDocument.documentElement.attributes,i=0;n=r[i];++i)e(n.name,o.deserialize(t.getAttribute(n.name)))})}try{var p="__storejs__";o.set(p,p),o.get(p)!=p&&(o.disabled=!0),o.remove(p)}catch(h){o.disabled=!0}o.enabled=!o.disabled,"undefined"!=typeof e&&e.exports&&this.module!==e?e.exports=o:"function"==typeof define&&define.amd?define(o):t.store=o}(Function("return this")())},{}],75:[function(t,e){"use strict";function n(t){if(!t)return c(null);if(t=t.trim(),""==t)return c(null);var e=s(t);if(e)return c(e);var n=r(t);return n.then(function(e){a(t,e)}),n}function r(t){var e=c.defer(),n=h+t;return u.get(n,function(t,n,r){t?e.reject(t):l.parseString(r,function(t,n){if(t)e.reject(t);else try{var r=i(n);e.resolve(r)}catch(o){e.reject("Error reading response.")}})}),e.promise}function i(t){t=t.eveapi.result[0].rowset[0].row[0].$;var e={id:Number(t.ownerID),name:t.ownerName,type:o(t.ownerGroupID)};return e.type?e:null}function o(t){var t=Number(t);return 1===t?"character":2===t?"corporation":32===t?"alliance":null}function s(t){var e=f[t];return e?e.expires<Date.now()?null:e.data:null}function a(t,e){var n=Date.now()+36e5;f[t]={expires:n,data:e}}var u=t("request"),c=t("q"),l=t("xml2js"),h="https://api.eveonline.com/eve/OwnerID.xml.aspx?names=",f={};e.exports=n},{q:81,request:78,xml2js:84}],76:[function(t,e){e.exports=t("./entity-search.js")},{"./entity-search.js":75}],77:[function(t,e){"use strict";function n(t,e,n){var r="character"===e?".jpg":".png";return"https://image.eveonline.com/"+e+"/"+t+"_"+n+r}e.exports=n},{}],78:[function(t,e,n){arguments[4][48][0].apply(n,arguments)},{dup:48}],79:[function(require,module,exports){!function(){function n(t){return void 0!==t}function ba(){}function ca(t){t.Qb=function(){return t.ef?t.ef:t.ef=new t}}function da(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function ea(t){return"array"==da(t)}function fa(t){var e=da(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"string"==typeof t}function ga(t){return"number"==typeof t}function ha(t){return"function"==da(t)}function ia(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function ja(t){return t.call.apply(t.bind,arguments)}function ka(t,e){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function q(){return q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka,q.apply(null,arguments)}function la(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function na(t,e){function n(){}n.prototype=e.prototype,t.oc=e.prototype,t.prototype=new n,t.Ag=function(t,n){return e.prototype[n].apply(t,Array.prototype.slice.call(arguments,2))}}function oa(a){if(a=String(a),/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)}function pa(){this.Id=void 0}function qa(t,e,n){switch(typeof e){case"string":ra(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?e:"null");break;case"boolean":n.push(e);break;case"undefined":n.push("null");break;case"object":if(null==e){n.push("null");break}if(ea(e)){var r=e.length;n.push("[");for(var i="",o=0;r>o;o++)n.push(i),i=e[o],qa(t,t.Id?t.Id.call(e,String(o),i):i,n),i=",";n.push("]");break}n.push("{"),r="";for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i=e[o],"function"!=typeof i&&(n.push(r),ra(o,n),n.push(":"),qa(t,t.Id?t.Id.call(e,o,i):i,n),r=","));n.push("}");break;case"function":break;default:throw Error("Unknown type: "+typeof e)}}function ra(t,e){e.push('"',t.replace(ta,function(t){if(t in sa)return sa[t];var e=t.charCodeAt(0),n="\\u";return 16>e?n+="000":256>e?n+="00":4096>e&&(n+="0"),sa[t]=n+e.toString(16)}),'"')}function ua(t){return"undefined"!=typeof JSON&&n(JSON.parse)?JSON.parse(t):oa(t)}function t(t){if("undefined"!=typeof JSON&&n(JSON.stringify))t=JSON.stringify(t);else{var e=[];qa(new pa,t,e),t=e.join("")}return t}function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function v(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function va(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wa(t){var e={};return va(t,function(t,n){e[t]=n}),e}function xa(t){this.xc=t,this.Hd="firebase:"}function ya(){this.ha={}}function za(t){try{if("undefined"!=typeof window&&"undefined"!=typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new xa(e)}}catch(n){}return new ya}function Ca(t,e,n,r,i){this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.Cb=e,this.yb=n,this.yg=r,this.Gd=i||"",this.Ka=Aa.get("host:"+t)||this.host}function Da(t,e){e!==t.Ka&&(t.Ka=e,"s-"===t.Ka.substr(0,2)&&Aa.set("host:"+t.host,t.Ka))}function Ea(){this.Ta=-1}function Fa(){this.Ta=-1,this.Ta=64,this.R=[],this.be=[],this.Af=[],this.Dd=[],this.Dd[0]=128;for(var t=1;t<this.Ta;++t)this.Dd[t]=0;this.Rd=this.Tb=0,this.reset()}function Ga(t,e,n){n||(n=0);var r=t.Af;if(p(e))for(var i=0;16>i;i++)r[i]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(i=0;16>i;i++)r[i]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(i=16;80>i;i++){var o=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=4294967295&(o<<1|o>>>31)}e=t.R[0],n=t.R[1];for(var s,a=t.R[2],u=t.R[3],c=t.R[4],i=0;80>i;i++)40>i?20>i?(o=u^n&(a^u),s=1518500249):(o=n^a^u,s=1859775393):60>i?(o=n&a|u&(n|a),s=2400959708):(o=n^a^u,s=3395469782),o=(e<<5|e>>>27)+o+c+s+r[i]&4294967295,c=u,u=a,a=4294967295&(n<<30|n>>>2),n=e,e=o;t.R[0]=t.R[0]+e&4294967295,t.R[1]=t.R[1]+n&4294967295,t.R[2]=t.R[2]+a&4294967295,t.R[3]=t.R[3]+u&4294967295,t.R[4]=t.R[4]+c&4294967295}function Ha(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ma()).toString(36)}function Oa(t,e){var n=Pa(t,e,void 0);return 0>n?null:p(t)?t.charAt(n):t[n]}function Pa(t,e,n){for(var r=t.length,i=p(t)?t.split(""):t,o=0;r>o;o++)if(o in i&&e.call(n,i[o],o,t))return o;return-1}function Qa(t,e){var n=Ia(t,e);n>=0&&w.splice.call(t,n,1)}function Ra(t){return w.splice.apply(t,Sa(arguments,1))}function Sa(t,e,n){return 2>=arguments.length?w.slice.call(t,e):w.slice.call(t,e,n)}function Ta(t,e){t.sort(e||Ua)}function Ua(t,e){return t>e?1:e>t?-1:0}function Ya(t){return-1!=Va.indexOf(t)}function fb(t,e){if(!fa(t))throw Error("encodeByteArray takes an array as a parameter");gb();for(var n=e?db:cb,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,o=(3&o)<<4|a>>4,a=(15&a)<<2|c>>6,c=63&c;u||(c=64,s||(a=64)),r.push(n[l],n[o],n[a],n[c])}return r.join("")}function gb(){if(!cb){cb={},db={},eb={};for(var t=0;65>t;t++)cb[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),db[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t),eb[db[t]]=t}}function x(t,e){if(!t)throw ib(e)}function ib(t){return Error("Firebase INTERNAL ASSERT FAILED:"+t)}function jb(t){try{var e;if("undefined"!=typeof atob)e=atob(t);else{gb();for(var n=eb,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;var a=i<t.length?n[t.charAt(i)]:64;++i;var u=i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!=a&&(r.push(s<<4&240|a>>2),64!=u&&r.push(a<<6&192|u))}if(8192>r.length)e=String.fromCharCode.apply(null,r);else{for(t="",n=0;n<r.length;n+=8192)t+=String.fromCharCode.apply(null,Sa(r,n,n+8192));e=t}}return e}catch(c){kb("base64Decode failed: ",c)}return null}function lb(t){var e=mb(t);t=new Fa,t.update(e);var e=[],n=8*t.Rd;56>t.Tb?t.update(t.Dd,56-t.Tb):t.update(t.Dd,t.Ta-(t.Tb-56));for(var r=t.Ta-1;r>=56;r--)t.be[r]=255&n,n/=256;for(Ga(t,t.be),r=n=0;5>r;r++)for(var i=24;i>=0;i-=8)e[n]=t.R[r]>>i&255,++n;return fb(e)}function nb(){for(var e="",n=0;n<arguments.length;n++)e=fa(arguments[n])?e+nb.apply(null,arguments[n]):"object"==typeof arguments[n]?e+t(arguments[n]):e+arguments[n],e+=" ";return e}function kb(){if(!0===pb&&(pb=!1,null===ob&&!0===Ba.get("logging_enabled")&&qb(!0)),ob){var t=nb.apply(null,arguments);ob(t)}}function rb(t){return function(){kb(t,arguments)}}function sb(){if("undefined"!=typeof console){var t="FIREBASE INTERNAL ERROR: "+nb.apply(null,arguments);"undefined"!=typeof console.error?console.error(t):console.log(t)}}function tb(){var t=nb.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+t)}function z(){if("undefined"!=typeof console){var t="FIREBASE WARNING: "+nb.apply(null,arguments);"undefined"!=typeof console.warn?console.warn(t):console.log(t)}}function ub(t){var e="",n="",r="",i=!0,o="https",s="";if(p(t)){var a=t.indexOf("//");a>=0&&(o=t.substring(0,a-1),t=t.substring(a+2)),a=t.indexOf("/"),-1===a&&(a=t.length),e=t.substring(0,a),t=t.substring(a+1);var u=e.split(".");if(3===u.length){for(a=u[2].indexOf(":"),i=a>=0?"https"===o||"wss"===o:!0,n=u[1],r=u[0],s="",t=("/"+t).split("/"),a=0;a<t.length;a++)if(0<t[a].length){u=t[a];try{u=decodeURIComponent(u.replace(/\+/g," "))}catch(c){}s+="/"+u}r=r.toLowerCase()}else 2===u.length&&(n=u[0])}return{host:e,domain:n,vg:r,Cb:i,scheme:o,Pc:s}}function vb(t){return ga(t)&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)}function wb(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}function xb(t,e){if(t===e)return 0;if("[MIN_NAME]"===t||"[MAX_NAME]"===e)return-1;if("[MIN_NAME]"===e||"[MAX_NAME]"===t)return 1;var n=yb(t),r=yb(e);return null!==n?null!==r?0==n-r?t.length-e.length:n-r:-1:null!==r?1:e>t?-1:1}function zb(e,n){if(n&&e in n)return n[e];throw Error("Missing required key ("+e+") in object: "+t(n))}function Ab(e){if("object"!=typeof e||null===e)return t(e);var n,r=[];for(n in e)r.push(n);r.sort(),n="{";for(var i=0;i<r.length;i++)0!==i&&(n+=","),n+=t(r[i]),n+=":",n+=Ab(e[r[i]]);return n+"}"}function Bb(t,e){if(t.length<=e)return[t];for(var n=[],r=0;r<t.length;r+=e)n.push(r+e>t?t.substring(r,t.length):t.substring(r,r+e));return n}function Cb(t,e){if(ea(t))for(var n=0;n<t.length;++n)e(n,t[n]);else A(t,e)}function Db(t){x(!vb(t),"Invalid JSON number");var e,n,r,i;for(0===t?(r=n=0,e=-1/0===1/t?1:0):(e=0>t,t=Math.abs(t),t>=Math.pow(2,-1022)?(r=Math.min(Math.floor(Math.log(t)/Math.LN2),1023),n=r+1023,r=Math.round(t*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074)))),i=[],t=52;t;t-=1)i.push(r%2?1:0),r=Math.floor(r/2);for(t=11;t;t-=1)i.push(n%2?1:0),n=Math.floor(n/2);for(i.push(e?1:0),i.reverse(),e=i.join(""),n="",t=0;64>t;t+=8)r=parseInt(e.substr(t,8),2).toString(16),1===r.length&&(r="0"+r),n+=r;return n.toLowerCase()}function yb(t){return Eb.test(t)&&(t=Number(t),t>=-2147483648&&2147483647>=t)?t:null}function Fb(t){try{t()}catch(e){setTimeout(function(){throw e},Math.floor(0))}}function B(t){if(ha(t)){var e=Array.prototype.slice.call(arguments,1).slice();Fb(function(){t.apply(null,e)})}}function Gb(t,e,n,r){this.me=e,this.Ld=n,this.Rc=r,this.nd=t}function Hb(t,e,n){this.me=t,this.error=e,this.path=n}function Ib(t,e,n){this.Kb=t,this.mb=e,this.vc=n||null}function Jb(t,e,n){this.ba=t,this.mb=e,this.vc=n}function mb(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i>=55296&&56319>=i&&(i-=55296,r++,x(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(i<<10)+(t.charCodeAt(r)-56320)),128>i?e[n++]=i:(2048>i?e[n++]=i>>6|192:(65536>i?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function D(t,e,n,r){var i;if(e>r?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function E(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t=t+" failed: "+(r+" argument ")}function F(t,e,r,i){if((!i||n(r))&&!ha(r))throw Error(E(t,e,i)+"must be a valid function.")}function Nb(t,e,r){if(n(r)&&(!ia(r)||null===r))throw Error(E(t,e,!0)+"must be a valid context object.")}function Qb(t){return p(t)&&0!==t.length&&!Ob.test(t)}function Rb(t){return null===t||p(t)||ga(t)&&!vb(t)||ia(t)&&u(t,".sv")}function Sb(t,e,r){r&&!n(e)||Tb(E(t,1,r),e)}function Tb(t,e,r,i){if(r||(r=0),i=i||[],!n(e))throw Error(t+"contains undefined"+Ub(i));if(ha(e))throw Error(t+"contains a function"+Ub(i)+" with contents: "+e.toString());if(vb(e))throw Error(t+"contains "+e.toString()+Ub(i));if(r>1e3)throw new TypeError(t+"contains a cyclic object value ("+i.slice(0,100).join(".")+"...)");if(p(e)&&e.length>10485760/3&&10485760<mb(e).length)throw Error(t+"contains a string greater than 10485760 utf8 bytes"+Ub(i)+" ('"+e.substring(0,50)+"...')");if(ia(e))for(var o in e)if(u(e,o)){var s=e[o];if(".priority"!==o&&".value"!==o&&".sv"!==o&&!Qb(o))throw Error(t+" contains an invalid key ("+o+")"+Ub(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(o),Tb(t,s,r+1,i),i.pop()}}function Ub(t){return 0==t.length?"":" in property '"+t.join(".")+"'"}function Vb(t,e){if(!ia(e)||ea(e))throw Error(E(t,1,!1)+" must be an Object containing the children to replace.");Sb(t,e,!1)}function Wb(t,e,n){if(vb(n))throw Error(E(t,e,!1)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Rb(n))throw Error(E(t,e,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}function Xb(t,e,r){if(!r||n(e))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(E(t,1,r)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Yb(t,e,r,i){if((!i||n(r))&&!Qb(r))throw Error(E(t,e,i)+'was an invalid key: "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Zb(t,e){if(!p(e)||0===e.length||Pb.test(e))throw Error(E(t,1,!1)+'was an invalid path: "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function $b(t,e){if(".info"===G(e))throw Error(t+" failed: Can't modify data under /.info/")}function ac(t,e){if(!p(e))throw Error(E(t,1,!1)+"must be a valid credential (a string).")}function bc(t,e,n){if(!p(n))throw Error(E(t,e,!1)+"must be a valid string.")}function cc(t,e,r,i){if(!(i&&!n(r)||ia(r)&&null!==r))throw Error(E(t,e,i)+"must be a valid object.")}function dc(t,e,n){if(!ia(e)||null===e||!u(e,n))throw Error(E(t,1,!1)+'must contain the key "'+n+'"');if(!p(v(e,n)))throw Error(E(t,1,!1)+'must contain the key "'+n+'" with type "string"')}function ec(t,e){return xb(t.name,e.name)}function fc(t,e){return xb(t,e)}function gc(){}function H(t){return q(t.compare,t)}function jc(t){this.Vb=t}function lc(){}function nc(){this.yc=this.na=this.nc=this.ga=this.ka=!1,this.xb=0,this.Hb="",this.Bc=null,this.Xb="",this.Ac=null,this.Ub="",this.m=L}function pc(t){return x(t.ga,"Only valid if start has been set"),t.Bc}function qc(t){return x(t.ga,"Only valid if start has been set"),t.nc?t.Xb:"[MIN_NAME]"}function rc(t){return x(t.na,"Only valid if end has been set"),t.Ac}function sc(t){return x(t.na,"Only valid if end has been set"),t.yc?t.Ub:"[MAX_NAME]"}function tc(t){return x(t.ka,"Only valid if limit has been set"),t.xb}function uc(t){var e=new nc;return e.ka=t.ka,e.xb=t.xb,e.ga=t.ga,e.Bc=t.Bc,e.nc=t.nc,e.Xb=t.Xb,e.na=t.na,e.Ac=t.Ac,e.yc=t.yc,e.Ub=t.Ub,e.m=t.m,e}function vc(t,e){var n=uc(t);return n.m=e,n}function wc(t){return!(t.ga||t.na||t.ka)}function M(t,e,n,r){this.g=t,this.path=e,this.w=n,this.dc=r}function xc(t){var e=null,n=null;if(t.ga&&(e=pc(t)),t.na&&(n=rc(t)),t.m===mc){if(t.ga){if("[MIN_NAME]"!=qc(t))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if(null!=e&&"string"!=typeof e)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}if(t.na){if("[MAX_NAME]"!=sc(t))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if(null!=n&&"string"!=typeof n)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}}else if(t.m===L){if(null!=e&&!Rb(e)||null!=n&&!Rb(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(x(t.m instanceof jc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")}function yc(t){if(t.ga&&t.na&&t.ka&&(!t.ka||""===t.Hb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")}function zc(t,e){if(!0===t.dc)throw Error(e+": You can't combine multiple orderBy calls.")}function Dc(t){t=t.w;var e={};if(t.ga&&(e.sp=t.Bc,t.nc&&(e.sn=t.Xb)),t.na&&(e.ep=t.Ac,t.yc&&(e.en=t.Ub)),t.ka){e.l=t.xb;var n=t.Hb;""===n&&(n=t.ga?"l":"r"),e.vf=n}return t.m!==L&&(e.i=t.m.toString()),e}function Ac(t,e,n){var r={cancel:null,Ha:null};if(e&&n)r.cancel=e,F(t,3,r.cancel,!0),r.Ha=n,Nb(t,4,r.Ha);else if(e)if("object"==typeof e&&null!==e)r.Ha=e;else{if("function"!=typeof e)throw Error(E(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r}function P(t,e){if(1==arguments.length){this.n=t.split("/");for(var n=0,r=0;r<this.n.length;r++)0<this.n[r].length&&(this.n[n]=this.n[r],n++);this.n.length=n,this.aa=0}else this.n=t,this.aa=e}function G(t){return t.aa>=t.n.length?null:t.n[t.aa]}function Q(t){return t.n.length-t.aa}function R(t){var e=t.aa;return e<t.n.length&&e++,new P(t.n,e)}function T(t,e){var n=G(t);if(null===n)return e;if(n===G(e))return T(R(t),R(e));throw Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ec(){this.children={},this.dd=0,this.value=null}function Fc(t,e,n){this.yd=t?t:"",this.Oc=e?e:null,this.D=n?n:new Ec}function Gc(t,e){for(var n,r=e instanceof P?e:new P(e),i=t;null!==(n=G(r));)i=new Fc(n,i,v(i.D.children,n)||new Ec),r=R(r);return i}function Hc(t,e){x("undefined"!=typeof e,"Cannot set value to undefined"),t.D.value=e,Ic(t)}function Jc(t,e,n,r){n&&!r&&e(t),t.ca(function(t){Jc(t,e,!0,r)}),n&&r&&e(t)}function Kc(t,e){for(var n=t.parent();null!==n&&!e(n);)n=n.parent()}function Ic(t){if(null!==t.Oc){var e=t.Oc,n=t.yd,r=t.e(),i=u(e.D.children,n);r&&i?(delete e.D.children[n],e.D.dd--,Ic(e)):r||i||(e.D.children[n]=t.D,e.D.dd++,Ic(e))}}function Lc(t,e){this.Ga=t,this.pa=e?e:Mc}function Nc(t,e){for(var n,r=t.pa,i=null;!r.e();){if(n=t.Ga(e,r.key),0===n){if(r.left.e())return i?i.key:null;for(r=r.left;!r.right.e();)r=r.right;return r.key}0>n?r=r.left:n>0&&(i=r,r=r.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}function Oc(t,e,n,r,i){for(this.qf=i||null,this.te=r,this.ac=[],i=1;!t.e();)if(i=e?n(t.key,e):1,r&&(i*=-1),0>i)t=this.te?t.left:t.right;else{if(0===i){this.ac.push(t);break}this.ac.push(t),t=this.te?t.right:t.left}}function U(t){if(0===t.ac.length)return null;var e,n=t.ac.pop();if(e=t.qf?t.qf(n.key,n.value):{key:n.key,value:n.value},t.te)for(n=n.left;!n.e();)t.ac.push(n),n=n.right;else for(n=n.right;!n.e();)t.ac.push(n),n=n.left;return e}function Pc(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:!0,this.left=null!=r?r:Mc,this.right=null!=i?i:Mc}function Qc(t){return t.left.e()?t:Qc(t.left)}function Sc(t){return t.left.e()?Mc:(t.left.$()||t.left.left.$()||(t=Tc(t)),t=t.W(null,null,null,Sc(t.left),null),Rc(t))}function Rc(t){return t.right.$()&&!t.left.$()&&(t=Wc(t)),t.left.$()&&t.left.left.$()&&(t=Uc(t)),t.left.$()&&t.right.$()&&(t=Vc(t)),t}function Tc(t){return t=Vc(t),t.right.left.$()&&(t=t.W(null,null,null,null,Uc(t.right)),t=Wc(t),t=Vc(t)),t}function Wc(t){return t.right.W(null,null,t.color,t.W(null,null,!0,null,t.right.left),null)}function Uc(t){return t.left.W(null,null,t.color,null,t.W(null,null,!0,t.left.right,null))}function Vc(t){return t.W(null,null,!t.color,t.left.W(null,null,!t.left.color,null,null),t.right.W(null,null,!t.right.color,null,null))}function Xc(){}function I(t,e){this.name=t,this.K=e}function Yc(t,e){return new I(t,e)}function Zc(t,e){this.A=t,x(null!==this.A,"LeafNode shouldn't be created with null value."),this.fa=e||K,$c(this.fa),this.wb=null}function dd(t,e){this.td=t,this.Wb=e}function ed(t,e,n){var r=fd(t.td,function(r,i){var o=v(t.Wb,i);if(x(o,"Missing index implementation for "+i),r===hc){if(o.se(e.K)){for(var s=[],a=n.Aa(Yc),u=U(a);u;)u.name!=e.name&&s.push(u),u=U(a);return s.push(e),gd(s,H(o))}return hc}return o=n.get(e.name),s=r,o&&(s=s.remove(new I(e.name,o))),s.Ja(e,e.K)});return new dd(r,t.Wb)}function hd(t,e,n){var r=fd(t.td,function(t){if(t===hc)return t;var r=n.get(e.name);return r?t.remove(new I(e.name,r)):t});return new dd(r,t.Wb)}function bd(t,e,n){this.j=t,(this.fa=e)&&$c(this.fa),this.sb=n,this.wb=null}function ld(t,e){var n;return n=(n=kd(t,e))?(n=n.Ic())&&n.name:t.j.Ic(),n?new I(n,t.j.get(n)):null}function md(t,e){var n;return n=(n=kd(t,e))?(n=n.Zb())&&n.name:t.j.Zb(),n?new I(n,t.j.get(n)):null}function kd(t,e){return e===mc?null:t.sb.get(e.toString())}function J(t,e){if(null===t)return K;var n=null;if("object"==typeof t&&".priority"in t?n=t[".priority"]:"undefined"!=typeof e&&(n=e),x(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Zc(t,J(n));if(t instanceof Array){var r=K,i=t;return A(i,function(t,e){if(u(i,e)&&"."!==e.substring(0,1)){var n=J(t);(n.P()||!n.e())&&(r=r.I(e,n))}}),r.ib(J(n))}var o=[],s=!1,a=t;va(a,function(t){if("string"!=typeof t||"."!==t.substring(0,1)){var e=J(a[t]);e.e()||(s=s||!e.O().e(),o.push(new I(t,e)))}});var c=gd(o,ec,function(t){return t.name},fc);if(s){var l=gd(o,H(L));return new bd(c,J(n),new dd({".priority":l},{".priority":L}))}return new bd(c,J(n),id)}function qd(t){this.count=parseInt(Math.log(t+1)/pd,10),this.Ve=this.count-1,this.Jf=t+1&parseInt(Array(this.count+1).join("1"),2)}function rd(t){var e=!(t.Jf&1<<t.Ve);return t.Ve--,e}function gd(t,e,n,r){function i(e,r){var o=r-e;if(0==o)return null;if(1==o){var s=t[e],a=n?n(s):s;return new Pc(a,s.K,!1,null,null)}var s=parseInt(o/2,10)+e,o=i(e,s),u=i(s+1,r),s=t[s],a=n?n(s):s;return new Pc(a,s.K,!1,o,u)}t.sort(e);var o=function(e){function r(e,r){var u=a-e,c=a;a-=e;var c=i(u+1,c),u=t[u],l=n?n(u):u,c=new Pc(l,u.K,r,null,c);o?o.left=c:s=c,o=c}for(var o=null,s=null,a=t.length,u=0;u<e.count;++u){var c=rd(e),l=Math.pow(2,e.count-(u+1));c?r(l,!1):(r(l,!1),r(l,!0))}return s}(new qd(t.length));return null!==o?new Lc(r||e,o):new Lc(r||e)}function ad(t){return"number"==typeof t?"number:"+Db(t):"string:"+t}function $c(t){if(t.P()){var e=t.N();x("string"==typeof e||"number"==typeof e||"object"==typeof e&&u(e,".sv"),"Priority must be a string or number.")}else x(t===kc||t.e(),"priority of unexpected type.");x(t===kc||t.O().e(),"Priority nodes can't have a priority of their own.")}function sd(){bd.call(this,new Lc(fc),K,id)}function C(t,e,n){this.D=t,this.U=e,this.m=n}function td(t){x(ea(t)&&0<t.length,"Requires a non-empty array"),this.Bf=t,this.Gc={}}function ud(t,e){x(Oa(t.Bf,function(t){return t===e}),"Unknown event: "+e)}function vd(){td.call(this,["visible"]);var t,e;if("undefined"!=typeof document&&"undefined"!=typeof document.addEventListener&&("undefined"!=typeof document.hidden?(e="visibilitychange",t="hidden"):"undefined"!=typeof document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):"undefined"!=typeof document.msHidden?(e="msvisibilitychange",t="msHidden"):"undefined"!=typeof document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.qc=!0,e){var n=this;document.addEventListener(e,function(){var e=!document[t];e!==n.qc&&(n.qc=e,n.Td("visible",e))},!1)}}function wd(){if(td.call(this,["online"]),this.Lc=!0,"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener){var t=this;window.addEventListener("online",function(){t.Lc||t.Td("online",!0),t.Lc=!0},!1),window.addEventListener("offline",function(){t.Lc&&t.Td("online",!1),t.Lc=!1},!1)}}function A(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function fd(t,e){var n,r={};for(n in t)r[n]=e.call(void 0,t[n],n,t);return r
}function Mb(t,e){for(var n in t)if(!e.call(void 0,t[n],n,t))return!1;return!0}function Kb(t){var e,n=0;for(e in t)n++;return n}function Lb(t){for(var e in t)return e}function xd(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n}function yd(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n}function nd(t,e){for(var n in t)if(t[n]==e)return!0;return!1}function zd(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r}function Ad(t,e){var n=zd(t,e,void 0);return n&&t[n]}function Bd(t){for(var e in t)return!1;return!0}function Cd(t,e){return e in t?t[e]:void 0}function od(t){var e,n={};for(e in t)n[e]=t[e];return n}function Ed(t){for(var e,n,r=1;r<arguments.length;r++){n=arguments[r];for(e in n)t[e]=n[e];for(var i=0;i<Dd.length;i++)e=Dd[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Fd(){this.wc={}}function Gd(t,e,r){n(r)||(r=1),u(t.wc,e)||(t.wc[e]=0),t.wc[e]+=r}function Hd(t){this.Kf=t,this.vd=null}function Id(t,e){this.uf={},this.Nd=new Hd(t),this.S=e;var n=1e4+2e4*Math.random();setTimeout(q(this.nf,this),Math.floor(n))}function Ld(t){return t=t.toString(),Jd[t]||(Jd[t]=new Fd),Jd[t]}function Md(t,e){var n=t.toString();return Kd[n]||(Kd[n]=e()),Kd[n]}function Od(t,e,n){this.ie=t,this.f=rb(this.ie),this.frames=this.Cc=null,this.kb=this.lb=this.Oe=0,this.Qa=Ld(e),this.Za=(e.Cb?"wss://":"ws://")+e.Ka+"/.ws?v=5","undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(this.Za+="&r=f"),e.host!==e.Ka&&(this.Za=this.Za+"&ns="+e.yb),n&&(this.Za=this.Za+"&s="+n)}function Rd(t,e){if(t.frames.push(e),t.frames.length==t.Oe){var n=t.frames.join("");t.frames=null,n=ua(n),t.cg(n)}}function Qd(t){clearInterval(t.Cc),t.Cc=setInterval(function(){t.oa&&t.oa.send("0"),Qd(t)},Math.floor(45e3))}function Sd(t){this.cc=t,this.Fd=[],this.Mb=0,this.ge=-1,this.Ab=null}function Td(t,e,n){t.ge=e,t.Ab=n,t.ge<t.Mb&&(t.Ab(),t.Ab=null)}function Ud(t,e,n){for(t.Fd[e]=n;t.Fd[t.Mb];){var r=t.Fd[t.Mb];delete t.Fd[t.Mb];for(var i=0;i<r.length;++i)if(r[i]){var o=t;Fb(function(){o.cc(r[i])})}if(t.Mb===t.ge){t.Ab&&(clearTimeout(t.Ab),t.Ab(),t.Ab=null);break}t.Mb++}}function Vd(){this.set={}}function Wd(t,e){A(t.set,function(t,n){e(n,t)})}function Xd(t,e,n){this.ie=t,this.f=rb(t),this.kb=this.lb=0,this.Qa=Ld(e),this.Kd=n,this.zc=!1,this.bd=function(t){e.host!==e.Ka&&(t.ns=e.yb);var n,r=[];for(n in t)t.hasOwnProperty(n)&&r.push(n+"="+t[n]);return(e.Cb?"https://":"http://")+e.Ka+"/.lp?"+r.join("&")}}function ae(e,n){var r=t(n).length;e.kb+=r,Gd(e.Qa,"bytes_received",r)}function $d(t,e,n,r){if(this.bd=r,this.fb=n,this.Fe=new Vd,this.Qc=[],this.ke=Math.floor(1e8*Math.random()),this.Jd=!0,this.Ud=hb(),window["pLPCommand"+this.Ud]=t,window["pRTLPCB"+this.Ud]=e,t=document.createElement("iframe"),t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||kb("No IE domain setting required")}catch(i){t.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}t.contentDocument?t.$a=t.contentDocument:t.contentWindow?t.$a=t.contentWindow.document:t.document&&(t.$a=t.document),this.va=t,t="",this.va.src&&"javascript:"===this.va.src.substr(0,11)&&(t='<script>document.domain="'+document.domain+'";</script>'),t="<html><body>"+t+"</body></html>";try{this.va.$a.open(),this.va.$a.write(t),this.va.$a.close()}catch(o){kb("frame writing exception"),o.stack&&kb(o.stack),kb(o)}}function ce(t){if(t.Zd&&t.Jd&&t.Fe.count()<(0<t.Qc.length?2:1)){t.ke++;var e={};e.id=t.Xf,e.pw=t.Yf,e.ser=t.ke;for(var e=t.bd(e),n="",r=0;0<t.Qc.length&&1870>=t.Qc[0].We.length+30+n.length;){var i=t.Qc.shift(),n=n+"&seg"+r+"="+i.og+"&ts"+r+"="+i.wg+"&d"+r+"="+i.We;r++}return de(t,e+n,t.ke),!0}return!1}function de(t,e,n){function r(){t.Fe.remove(n),ce(t)}t.Fe.add(n);var i=setTimeout(r,Math.floor(25e3));be(t,e,function(){clearTimeout(i),r()})}function be(t,e,n){setTimeout(function(){try{if(t.Jd){var r=t.va.$a.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=function(){kb("Long-poll script failed to load: "+e),t.Jd=!1,t.close()},t.va.$a.body.appendChild(r)}}catch(i){}},Math.floor(1))}function ee(t){fe(this,t)}function fe(t,e){var n=Od&&Od.isAvailable(),r=n&&!(Aa.ff||!0===Aa.get("previous_websocket_failure"));if(e.yg&&(n||z("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)t.$c=[Od];else{var i=t.$c=[];Cb(ge,function(t,e){e&&e.isAvailable()&&i.push(e)})}}function he(t){if(0<t.$c.length)return t.$c[0];throw Error("No transports available")}function ie(t,e,n,r,i,o){this.id=t,this.f=rb("c:"+this.id+":"),this.cc=n,this.Kc=r,this.ea=i,this.De=o,this.Q=e,this.Ed=[],this.Se=0,this.xf=new ee(e),this.Pa=0,this.f("Connection created"),je(this)}function je(t){var e=he(t.xf);t.J=new e("c:"+t.id+":"+t.Se++,t.Q),t.He=e.responsesRequiredToBeHealthy||0;var n=ke(t,t.J),r=le(t,t.J);t.ad=t.J,t.Xc=t.J,t.C=null,t.vb=!1,setTimeout(function(){t.J&&t.J.open(n,r)},Math.floor(0)),e=e.healthyTimeout||0,e>0&&(t.rd=setTimeout(function(){t.rd=null,t.vb||(t.J&&102400<t.J.kb?(t.f("Connection exceeded healthy timeout but has received "+t.J.kb+" bytes.  Marking connection healthy."),t.vb=!0,t.J.wd()):t.J&&10240<t.J.lb?t.f("Connection exceeded healthy timeout but has sent "+t.J.lb+" bytes.  Leaving connection alive."):(t.f("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))}function le(t,e){return function(n){e===t.J?(t.J=null,n||0!==t.Pa?1===t.Pa&&t.f("Realtime connection lost."):(t.f("Realtime connection failed."),"s-"===t.Q.Ka.substr(0,2)&&(Aa.remove("host:"+t.Q.host),t.Q.Ka=t.Q.host)),t.close()):e===t.C?(t.f("Secondary connection lost."),n=t.C,t.C=null,t.ad!==n&&t.Xc!==n||t.close()):t.f("closing an old connection")}}function ke(t,e){return function(n){if(2!=t.Pa)if(e===t.Xc){var r=zb("t",n);if(n=zb("d",n),"c"==r){if(r=zb("t",n),"d"in n)if(n=n.d,"h"===r){var r=n.ts,i=n.v,o=n.h;t.Kd=n.s,Da(t.Q,o),0==t.Pa&&(t.J.start(),me(t,t.J,r),"5"!==i&&z("Protocol version mismatch detected"),n=t.xf,(n=1<n.$c.length?n.$c[1]:null)&&ne(t,n))}else if("n"===r){for(t.f("recvd end transmission on primary"),t.Xc=t.C,n=0;n<t.Ed.length;++n)t.Bd(t.Ed[n]);t.Ed=[],oe(t)}else"s"===r?(t.f("Connection shutdown command received. Shutting down..."),t.De&&(t.De(n),t.De=null),t.ea=null,t.close()):"r"===r?(t.f("Reset packet received.  New host: "+n),Da(t.Q,n),1===t.Pa?t.close():(pe(t),je(t))):"e"===r?sb("Server Error: "+n):"o"===r?(t.f("got pong on primary."),qe(t),re(t)):sb("Unknown control packet command: "+r)}else"d"==r&&t.Bd(n)}else if(e===t.C)if(r=zb("t",n),n=zb("d",n),"c"==r)"t"in n&&(n=n.t,"a"===n?se(t):"r"===n?(t.f("Got a reset on secondary, closing it"),t.C.close(),t.ad!==t.C&&t.Xc!==t.C||t.close()):"o"===n&&(t.f("got pong on secondary."),t.tf--,se(t)));else{if("d"!=r)throw Error("Unknown protocol layer: "+r);t.Ed.push(n)}else t.f("message on old connection")}}function oe(t){t.ad===t.C&&t.Xc===t.C&&(t.f("cleaning up and promoting a connection: "+t.C.ie),t.J=t.C,t.C=null)}function se(t){0>=t.tf?(t.f("Secondary connection is healthy."),t.vb=!0,t.C.wd(),t.C.start(),t.f("sending client ack on secondary"),t.C.send({t:"c",d:{t:"a",d:{}}}),t.f("Ending transmission on primary"),t.J.send({t:"c",d:{t:"n",d:{}}}),t.ad=t.C,oe(t)):(t.f("sending ping on secondary."),t.C.send({t:"c",d:{t:"p",d:{}}}))}function qe(t){t.vb||(t.He--,0>=t.He&&(t.f("Primary connection is healthy."),t.vb=!0,t.J.wd()))}function ne(t,e){t.C=new e("c:"+t.id+":"+t.Se++,t.Q,t.Kd),t.tf=e.responsesRequiredToBeHealthy||0,t.C.open(ke(t,t.C),le(t,t.C)),setTimeout(function(){t.C&&(t.f("Timed out trying to upgrade."),t.C.close())},Math.floor(6e4))}function me(t,e,n){t.f("Realtime connection established."),t.J=e,t.Pa=1,t.Kc&&(t.Kc(n),t.Kc=null),0===t.He?(t.f("Primary connection is healthy."),t.vb=!0):setTimeout(function(){re(t)},Math.floor(5e3))}function re(t){t.vb||1!==t.Pa||(t.f("sending ping on primary."),te(t,{t:"c",d:{t:"p",d:{}}}))}function te(t,e){if(1!==t.Pa)throw"Connection is not connected";t.ad.send(e)}function pe(t){t.f("Shutting down all connections"),t.J&&(t.J.close(),t.J=null),t.C&&(t.C.close(),t.C=null),t.rd&&(clearTimeout(t.rd),t.rd=null)}function ue(t){var e={},n={},r={},i="";try{var o=t.split("."),e=ua(jb(o[0])||""),n=ua(jb(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(s){}return{Bg:e,fe:n,data:r,sg:i}}function ve(t){return t=ue(t).fe,"object"==typeof t&&t.hasOwnProperty("iat")?v(t,"iat"):null}function we(t){t=ue(t);var e=t.fe;return!!t.sg&&!!e&&"object"==typeof e&&e.hasOwnProperty("iat")}function xe(t,e,n,r){this.id=ye++,this.f=rb("p:"+this.id+":"),this.Eb=!0,this.ua={},this.la=[],this.Nc=0,this.Jc=[],this.ia=!1,this.Va=1e3,this.xd=3e5,this.Cd=e,this.Ad=n,this.Ee=r,this.Q=t,this.Ke=null,this.Tc={},this.ng=0,this.Dc=this.ue=null,ze(this,0),vd.Qb().zb("visible",this.fg,this),-1===t.host.indexOf("fblocal")&&wd.Qb().zb("online",this.dg,this)}function Be(t,e,n,r,i){var o=e.Da(),s=e.path.toString();t.f("Listen called for "+s+" "+o),t.ua[s]=t.ua[s]||{},x(!t.ua[s][o],"listen() called twice for same path/queryId."),e={H:i,qd:n,kg:Dc(e),tag:r},t.ua[s][o]=e,t.ia&&Ce(t,s,o,e)}function Ce(t,e,n,r){t.f("Listen on "+e+" for "+n);var i={p:e};r.tag&&(i.q=r.kg,i.t=r.tag),i.h=r.qd(),t.wa("q",i,function(i){if((t.ua[e]&&t.ua[e][n])===r){t.f("listen response",i);var o=i.s;"ok"!==o&&De(t,e,n),i=i.d,r.H&&r.H(o,i)}})}function Ee(t){var e=t.Lb;t.ia&&e&&t.wa("auth",{cred:e.Mf},function(n){var r=n.s;n=n.d||"error","ok"!==r&&t.Lb===e&&delete t.Lb,e.Ye?"ok"!==r&&e.cd&&e.cd(r,n):(e.Ye=!0,e.sc&&e.sc(r,n))})}function Fe(t,e,n,r){t.ia?Ge(t,"o",e,n,r):t.Jc.push({Pc:e,action:"o",data:n,H:r})}function He(t,e,n,r){t.ia?Ge(t,"om",e,n,r):t.Jc.push({Pc:e,action:"om",data:n,H:r})}function Ge(t,e,n,r,i){n={p:n,d:r},t.f("onDisconnect "+e,n),t.wa(e,n,function(t){i&&setTimeout(function(){i(t.s,t.d)},Math.floor(0))})}function Ke(t,e,n,r){Ie(t,"m",e,n,r,void 0)}function Ie(t,e,r,i,o,s){i={p:r,d:i},n(s)&&(i.h=s),t.la.push({action:e,of:i,H:o}),t.Nc++,e=t.la.length-1,t.ia?Le(t,e):t.f("Buffering put: "+r)}function Le(t,e){var n=t.la[e].action,r=t.la[e].of,i=t.la[e].H;t.la[e].lg=t.ia,t.wa(n,r,function(r){t.f(n+" response",r),delete t.la[e],t.Nc--,0===t.Nc&&(t.la=[]),i&&i(r.s,r.d)})}function ze(t,e){x(!t.La,"Scheduling a connect when we're already connected/ing?"),t.Nb&&clearTimeout(t.Nb),t.Nb=setTimeout(function(){t.Nb=null,Oe(t)},Math.floor(e))}function Oe(t){if(t.Eb){t.f("Making a connection attempt"),t.ue=(new Date).getTime(),t.Dc=null;var e=q(t.Bd,t),n=q(t.Kc,t),r=q(t.jf,t),i=t.id+":"+Ae++;t.La=new ie(i,t.Q,e,n,r,function(e){z(e+" ("+t.Q.toString()+")"),t.Eb=!1})}}function Me(t,e,n){n=n?La(n,function(t){return Ab(t)}).join("$"):"default",(t=De(t,e,n))&&t.H&&t.H("permission_denied")}function De(t,e,n){e=new P(e).toString();var r=t.ua[e][n];return delete t.ua[e][n],0===Kb(t.ua[e])&&delete t.ua[e],r}function Ne(t){Ee(t),A(t.ua,function(e,n){A(e,function(e,r){Ce(t,n,r,e)})});for(var e=0;e<t.la.length;e++)t.la[e]&&Le(t,e);for(;t.Jc.length;)e=t.Jc.shift(),Ge(t,e.action,e.Pc,e.data,e.H)}function Pe(){this.j=this.A=null}function Qe(t,e){if(e.e())return t.A=null,t.j=null,!0;if(null!==t.A){if(t.A.P())return!1;var n=t.A;return t.A=null,n.ca(L,function(e,n){t.ic(new P(e),n)}),Qe(t,e)}return null!==t.j?(n=G(e),e=R(e),t.j.contains(n)&&Qe(t.j.get(n),e)&&t.j.remove(n),t.j.e()?(t.j=null,!0):!1):!0}function Re(t,e,n){null!==t.A?n(e,t.A):t.ca(function(t,r){var i=new P(e.toString()+"/"+t);Re(r,i,n)})}function Se(){this.Wc=K}function Te(){this.qb=[]}function Ue(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.Rb();null===n||o.ja(n.Rb())||(t.qb.push(n),n=null),null===n&&(n=new Ve(o)),n.add(i)}n&&t.qb.push(n)}function Cc(t,e,n){Ue(t,n),We(t,function(t){return t.ja(e)})}function Xe(t,e,n){Ue(t,n),We(t,function(t){return t.contains(e)||e.contains(t)})}function We(t,e){for(var n=!0,r=0;r<t.qb.length;r++){var i=t.qb[r];if(i)if(i=i.Rb(),e(i)){for(var i=t.qb[r],o=0;o<i.od.length;o++){var s=i.od[o];if(null!==s){i.od[o]=null;var a=s.Pb();ob&&kb("event: "+s.toString()),Fb(a)}}t.qb[r]=null}else n=!1}n&&(t.qb=[])}function Ve(t){this.Ca=t,this.od=[]}function Ze(t,e,n){this.ed=t||{},this.Sd=e||{},this.lc=n||{},this.ed.remember||(this.ed.remember="default")}function af(t){var e={},n={};return va(t||{},function(t,r){0<=Ia($e,t)?e[t]=r:n[t]=r}),new Ze(e,{},n)}function V(t){var e=Error(v(bf,t),t);return e.code=t,e}function cf(){var t,e=window.opener.frames;for(t=e.length-1;t>=0;t--)try{if(e[t].location.protocol===window.location.protocol&&e[t].location.host===window.location.host&&"__winchan_relay_frame"===e[t].name)return e[t]}catch(n){}return null}function df(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener&&t.addEventListener(e,n,!1)}function ef(t,e,n){t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener&&t.removeEventListener(e,n,!1)}function ff(t){/^https?:\/\//.test(t)||(t=window.location.href);var e=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(t);return e?e[1]:t}function gf(t){var e="";try{t=t.replace("#","");var n={},r=t.replace(/^\?/,"").split("&");for(t=0;t<r.length;t++)if(r[t]){var i=r[t].split("=");n[i[0]]=i[1]}n&&u(n,"__firebase_request_key")&&(e=v(n,"__firebase_request_key"))}catch(o){}return e}function hf(t){var e,n=[];for(e in t)if(u(t,e)){var r=v(t,e);if(ea(r))for(var i=0;i<r.length;i++)n.push(encodeURIComponent(e)+"="+encodeURIComponent(r[i]));else n.push(encodeURIComponent(e)+"="+encodeURIComponent(v(t,e)))}return n.join("&")}function jf(){var t=ub(Ye);return t.scheme+"://"+t.host+"/v2"}function kf(){return!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(navigator.userAgent)}function lf(){var t=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){if((t=t.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&1<t.length)return 8<=parseFloat(t[1])}else if(-1<t.indexOf("Trident")&&(t=t.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&1<t.length)return 8<=parseFloat(t[1]);return!1}function mf(t){t=t||{},t.method||(t.method="GET"),t.headers||(t.headers={}),t.headers.content_type||(t.headers.content_type="application/json"),t.headers.content_type=t.headers.content_type.toLowerCase(),this.options=t}function nf(t){t=t||{},this.Uc=Ha()+Ha()+Ha(),this.kf=t||{}}function of(t){t=t||{},(!t.window_features||-1!==navigator.userAgent.indexOf("Fennec/")||-1!==navigator.userAgent.indexOf("Firefox/")&&-1!==navigator.userAgent.indexOf("Android"))&&(t.window_features=void 0),t.window_name||(t.window_name="_blank"),t.relay_url||(t.relay_url=jf()+"/auth/channel"),this.options=t}function pf(t){t=t||{},t.callback_parameter||(t.callback_parameter="callback"),this.options=t,window.__firebase_auth_jsonp=window.__firebase_auth_jsonp||{}}function qf(t,e,n){setTimeout(function(){try{var r=document.createElement("script");r.type="text/javascript",r.id=t,r.async=!0,r.src=e,r.onerror=function(){var e=document.getElementById(t);null!==e&&e.parentNode.removeChild(e),n&&n(V("NETWORK_ERROR"))};var i=document.getElementsByTagName("head");(i&&0!=i.length?i[0]:document.documentElement).appendChild(r)}catch(o){n&&n(V("NETWORK_ERROR"))}},0)}function rf(t,e){this.Ge=["session",t.Gd,t.yb].join(":"),this.Pd=e}function sf(t){t=t||{},this.Uc=Ha()+Ha()+Ha(),this.kf=t||{}}function tf(t,e,n,r){td.call(this,["auth_status"]),this.Q=t,this.Re=e,this.xg=n,this.Be=r,this.mc=new rf(t,[Aa,Ba]),this.jb=null,uf(this)}function uf(t){Ba.get("redirect_request_id")&&vf(t);var e=t.mc.get();e&&e.token?(wf(t,e),t.Re(e.token,function(n,r){xf(t,n,r,!1,e.token,e)},function(e,n){yf(t,"resumeSession()",e,n)})):wf(t,null)}function zf(t,e,n,r,i,o){"firebaseio-demo.com"===t.Q.domain&&z("Firebase authentication is not supported on demo Firebases (*.firebaseio-demo.com). To secure your Firebase, create a production Firebase at https://www.firebase.com."),t.Re(e,function(o,s){xf(t,o,s,!0,e,n,r||{},i)},function(e,n){yf(t,"auth()",e,n,o)})}function Af(t,e){t.mc.clear(),wf(t,null),t.xg(function(t,n){if("ok"===t)B(e,null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n),i=Error(i),i.code=r,B(e,i)}})}function xf(t,e,n,r,i,o,s,a){"ok"===e?(r&&(e=n.auth,o.auth=e,o.expires=n.expires,o.token=we(i)?i:"",n=null,e&&u(e,"uid")?n=v(e,"uid"):u(o,"uid")&&(n=v(o,"uid")),o.uid=n,n="custom",e&&u(e,"provider")?n=v(e,"provider"):u(o,"provider")&&(n=v(o,"provider")),o.provider=n,t.mc.clear(),we(i)&&(s=s||{},n=Aa,"sessionOnly"===s.remember&&(n=Ba),"none"!==s.remember&&t.mc.set(o,n)),wf(t,o)),B(a,null,o)):(t.mc.clear(),wf(t,null),o=t=(e||"error").toUpperCase(),n&&(o+=": "+n),o=Error(o),o.code=t,B(a,o))}function yf(t,e,n,r,i){z(e+" was canceled: "+r),t.mc.clear(),wf(t,null),t=Error(r),t.code=n.toUpperCase(),B(i,t)}function Bf(t,e,n,r,i){Cf(t);var o=[mf,pf];n=new Ze(r||{},{},n||{}),Df(t,o,"/auth/"+e,n,i)}function Ef(t,e,n,r){Cf(t);var i=[of,nf];n=af(n),"anonymous"===e||"password"===e?setTimeout(function(){B(r,V("TRANSPORT_UNAVAILABLE"))},0):(n.Sd.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height=625,width=625,top="+("object"==typeof screen?.5*(screen.height-625):0)+",left="+("object"==typeof screen?.5*(screen.width-625):0),n.Sd.relay_url=jf()+"/"+t.Q.yb+"/auth/channel",n.Sd.requestWithCredential=q(t.Vc,t),Df(t,i,"/auth/"+e,n,r))}function vf(t){var e=Ba.get("redirect_request_id");if(e){var n=Ba.get("redirect_client_options");Ba.remove("redirect_request_id"),Ba.remove("redirect_client_options");var r=[mf,pf],e={requestId:e,requestKey:gf(document.location.hash)},n=new Ze(n,{},e);try{document.location.hash=document.location.hash.replace(/&__firebase_request_key=([a-zA-z0-9]*)/,"")}catch(i){}Df(t,r,"/auth/session",n)}}function Df(t,e,n,r,i){Ff(t,e,n,r,function(e,n){!e&&n&&n.token&&n.uid?zf(t,n.token,n,r.ed,function(t,e){t?B(i,t):B(i,null,e)}):B(i,e||V("UNKNOWN_ERROR"))})}function Ff(t,e,n,r,i){e=Ka(e,function(t){return"function"==typeof t.isAvailable&&t.isAvailable()}),0===e.length?setTimeout(function(){B(i,V("TRANSPORT_UNAVAILABLE"))},0):(e=new(e.shift())(r.Sd),r=wa(r.lc),r.v="js-2.0.6",r.transport=e.uc(),r.suppress_status_codes=!0,t=jf()+"/"+t.Q.yb+n,e.open(t,r,function(t,e){if(t)B(i,t);else if(e&&e.error){var n=Error(e.error.message);n.code=e.error.code,n.details=e.error.details,B(i,n)}else B(i,null,e)}))}function wf(t,e){var n=null!==t.jb||null!==e;t.jb=e,n&&t.Td("auth_status",e),t.Be(null!==e)}function Cf(t){var e=t.Q;if("firebaseio.com"!==e.domain&&"firebaseio-demo.com"!==e.domain&&"auth.firebase.com"===Ye)throw Error("This custom Firebase server ('"+t.Q.domain+"') does not support delegated login.")}function Gf(t,e){return t&&"object"==typeof t?(x(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t}function Hf(t,e){var n=new Pe;return Re(t,new P(""),function(t,r){n.ic(t,If(r,e))}),n}function If(t,e){var n,r=t.O().N(),r=Gf(r,e);if(t.P()){var i=Gf(t.ta(),e);return i!==t.ta()||r!==t.O().N()?new Zc(i,J(r)):t}return n=t,r!==t.O().N()&&(n=n.ib(new Zc(r))),t.ca(L,function(t,r){var i=If(r,e);i!==r&&(n=n.I(t,i))}),n}function W(t,e,n,r){this.type=t,this.Wa=e,this.nb=n,this.Rc=null,this.$f=r}function Jf(){}function Lf(t,e,n,r){var i,o;return o=X(n),i=X(e),r.e()?n.u?(t=[],i?i.ja(o)||(i.P()?t=Mf(o):o.P()?(t=[],i.P()||i.e()||t.push(new W("children_removed",i))):t=Nf(i,o),t.push(new W("value",o))):(t=Mf(o),t.push(new W("value",o))),0!==t.length||e.u||t.push(new W("value",o)),t):i?Nf(i,o):Mf(o):".priority"===G(r)?!n.u||i&&i.ja(o)?[]:[new W("value",o)]:n.u||1===Q(r)?(i=G(r),o=o.B(i),t.kd(e,n,i,o)):(i=G(r),o.Y(i)?(o=o.B(i),t.kd(e,n,i,o)):[])}function Mf(t){var e=[];return t.P()||t.e()||e.push(new W("children_added",t)),e}function Nf(t,e){var r,i,o,s,a=[],u=[],c=[],l=[],h={},f={};r=t.Aa(L),o=U(r),i=e.Aa(L),s=U(i);for(var d=H(L);null!==o||null!==s;){var p;p=o?s?d(o,s):-1:1,0>p?(p=v(h,o.name),n(p)?(l.push(u[p]),u[p]=null):(f[o.name]=c.length,c.push(o)),o=U(r)):(p>0?(p=v(f,s.name),n(p)?(l.push(s),c[p]=null):(h[s.name]=u.length,u.push(s))):((o=o.K.hash()!==s.K.hash())&&l.push(s),o=U(r)),s=U(i))}for(h=0;h<c.length;h++)(f=c[h])&&a.push(new W("child_removed",f.K,f.name));for(h=0;h<u.length;h++)(c=u[h])&&a.push(new W("child_added",c.K,c.name));for(h=0;h<l.length;h++)u=l[h],a.push(new W("child_changed",u.K,u.name,t.B(u.name)));return a}function Of(t,e,n){this.bb=t,this.Ma=n,this.m=e}function Pf(){}function Tf(t,e){Wf(t,e.F),Wf(t,e.o),Wf(t,e.u),Wf(t,e.X)}function Wf(t,e){x(!e||t.Yb(e),"Expected an indexed snap")}function Yf(t,e){var n=X(t),r=t.ab();return!!(n&&n.Y(e)||r&&r.Y(e))}function Zf(t){this.gb=t,this.index=t.m,this.gb.ga&&n(pc(this.gb))?(t=qc(this.gb),t=this.index.ye(pc(this.gb),t)):t=this.index.Ae(),this.Fb=t,this.gb.na&&n(rc(this.gb))?(t=sc(this.gb),t=this.index.ye(rc(this.gb),t)):t=this.index.ze(),this.pb=t}function $f(t){Zf.call(this,t),this.Ma=!(""===t.Hb?t.ga:"l"===t.Hb),this.bb=tc(t)}function ag(t,e,n,r,i,o){var s,a=H(t.index);s=t.Ma?function(t,e){return-1*a(t,e)}:a,e=X(e),x(e.Ua()===t.bb,"Limit should be full.");var u=new I(n,r),c=t.Ma?ld(e,t.index):md(e,t.index);x(null!=c,"Shouldn't be null, since oldEventCache shouldn't be empty.");var l=0>=H(t.index)(t.Fb,u)&&0>=H(t.index)(u,t.pb);return e.Y(n)?(o=i.de(o,c,1,t.Ma,t.index),i=null,0<o.length&&(i=o[0],i.name===n&&(i=2<=o.length?o[1]:null)),s=null==i?1:s(i,u),l&&!r.e()&&s>=0?e.I(n,r):(n=e.I(n,K),null!=i&&0>=H(t.index)(t.Fb,i)&&0>=H(t.index)(i,t.pb)?n.I(i.name,i.K):n)):r.e()?null:l&&0<=s(c,u)?e.I(n,r).I(c.name,K):null}function bg(t){this.m=t}function cg(t){this.U=t,this.m=t.w.m}function dg(t,e,n,r){var i=[],o=t.m,s=La(Ka(e,function(t){return"child_changed"===t.type&&o.df(t.$f,t.Wa)}),function(t){return new W("child_moved",t.Wa,t.nb)}),a=Pa(e,function(t){return"child_removed"!==t.type&&"child_added"!==t.type});for(la(Ra,e,a,0).apply(null,s);0<e.length;){var s=e[0].type,a=eg(e,s),u=e.slice(0,a);e=e.slice(a),"value"===s||"children_added"===s||"children_removed"===s?x(1===u.length,"We should not have more than one of these at a view"):Ta(u,q(t.Lf,t)),i=i.concat(fg(t,r,u,n))}return i}function eg(t,e){var n=Pa(t,function(t){return t.type!==e});return-1===n?t.length:n}function fg(t,e,n,r){for(var i=[],o=0;o<n.length;++o)for(var s=n[o],a=null,u=null,c=0;c<e.length;++c){var l=e[c];if(l.pf(s.type)){if(!a&&!u)if("children_added"===s.type){var h=t,f=s.Wa,u=[];if(!f.P()&&!f.e())for(var h=f.Aa(h.m),f=null,d=U(h);d;){var p=new W("child_added",d.K,d.name);p.Rc=f,u.push(p),f=d.name,d=U(h)}}else if("children_removed"===s.type){if(h=t,f=s.Wa,u=[],!f.P()&&!f.e())for(h=f.Aa(h.m),f=U(h);f;)u.push(new W("child_removed",f.K,f.name)),f=U(h)}else a=s,"value"!==a.type&&"child_removed"!==a.type&&(a.Rc=r.af(a.nb,a.Wa,t.m));if(a)i.push(l.createEvent(a,t.U));else for(h=0;h<u.length;++h)i.push(l.createEvent(u[h],t.U))}}return i}function gg(t,e){this.U=t;var n=t.w;wc(n)?(this.ec=new bg(n.m),this.ld=Kf):n.ka?(this.ec=new $f(n),this.ld=new Of(tc(n),n.m,this.ec.Ma)):(this.ec=new Zf(n),this.ld=Kf),n=this.ec,this.ha=new Uf(e.F&&n.G(e.F,!1),e.o&&n.G(e.o,!1),e.u&&n.G(e.u),e.X&&n.G(e.X)),this.ya=[],this.le=new cg(t)}function hg(t){return t.U}function Uf(t,e,n,r){this.F=t,this.o=e,this.u=n,this.X=r,x(null==t||null==e,"Only one of serverSnap / serverChildren can be non-null."),x(null==n||null==r,"Only one of eventSnap / eventChildren can be non-null.")}function X(t){return t.u||t.X}function jg(t,e){this.value=t,this.children=e||kg}function mg(t){var e=lg;return A(t,function(t,n){e=e.set(new P(n),t)}),e}function ng(t,e,n){if(null!=t.value&&n(t.value))return{path:S,value:t.value};if(e.e())return null;var r=G(e);return t=t.children.get(r),null!==t?(e=ng(t,R(e),n),null!=e?{path:new P(r).k(e.path),value:e.value}:null):null}function og(t,e){return ng(t,e,function(){return!0})}function pg(t,e,n){if(e.e())return n;var r=G(e);return e=pg(t.children.get(r)||lg,R(e),n),r=e.e()?t.children.remove(r):t.children.Ja(r,e),new jg(t.value,r)}function qg(t,e){return rg(t,S,e)}function rg(t,e,n){var r={};return t.children.Ba(function(t,i){r[t]=rg(i,e.k(t),n)}),n(e,t.value,r)}function sg(t,e,n){return tg(t,e,S,n)}function tg(t,e,n,r){var i=t.value?r(n,t.value):!1;return i?i:e.e()?null:(i=G(e),(t=t.children.get(i))?tg(t,R(e),n.k(i),r):null)}function ug(t,e,n){if(!e.e()){var r=!0;t.value&&(r=n(S,t.value)),!0===r&&(r=G(e),(t=t.children.get(r))&&vg(t,R(e),S.k(r),n))}}function vg(t,e,n,r){if(e.e())return t;t.value&&r(n,t.value);var i=G(e);return(t=t.children.get(i))?vg(t,R(e),n.k(i),r):lg}function Xf(t,e){wg(t,S,e)}function wg(t,e,n){t.children.Ba(function(t,r){wg(r,e.k(t),n)}),t.value&&n(e,t.value)}function xg(t,e){t.children.Ba(function(t,n){n.value&&e(t,n.value)})}function yg(){this.qa={}}function Ag(t){return Ka(xd(t.qa),function(t){return!wc(t.U.w)})}function Bg(t,e){if(wc(e.w))return zg(t);var n=e.Da();return v(t.qa,n)}function zg(t){return Ad(t.qa,function(t){return wc(t.U.w)})||null}function Cg(){this.V=lg,this.ra=[],this.Ec=-1}function Dg(t,e){var n=Pa(t.ra,function(t){return t.Xd===e});x(n>=0,"removeWrite called with nonexistent writeId.");var r=t.ra[n];t.ra.splice(n,1);for(var i=!1,o=!1,s=!1,a=t.ra.length-1;!i&&a>=0;){var u=t.ra[a];a>=n&&Eg(u,r.path)?i=!0:!o&&r.path.contains(u.path)&&(a>=n?o=!0:s=!0),a--}return i||(o||s?Fg(t):r.Oa?t.V=t.V.remove(r.path):A(r.children,function(e,n){t.V=t.V.remove(r.path.k(n))})),n=r.path,og(t.V,n)?s?n:(x(i,"Must have found a shadow"),null):n}function Eg(t,e){return t.Oa?t.path.contains(e):!!zd(t.children,function(n,r){return t.path.k(r).contains(e)})}function Fg(t){t.V=Gg(t.ra,Hg,S),t.Ec=0<t.ra.length?t.ra[t.ra.length-1].Xd:-1}function Hg(t){return t.visible}function Gg(t,e,n){for(var r=lg,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s,a=o.path;o.Oa?(n.contains(a)?(s=T(n,a),o=o.Oa):(s=S,o=o.Oa.da(T(a,n))),r=Ig(r,s,o)):r=Jg(r,o.path,o.children)}}return r}function Ig(t,e,n){var r=og(t,e);if(r){var i=r.value,r=r.path;e=T(r,e),n=i.L(e,n),t=pg(t,r,new jg(n))}else t=pg(t,e,new jg(n));return t}function Jg(t,e,n){var r=og(t,e);if(r){var i=r.value,r=r.path,o=T(r,e),s=i;A(n,function(t,e){s=s.L(o.k(e),t)}),t=pg(t,r,new jg(s))}else A(n,function(n,r){t=pg(t,e.k(r),new jg(n))});return t}function Kg(t,e){this.Gb=t,this.Ib=e}function Lg(t,e,n){this.type=Qf,this.source=t,this.path=e,this.Oa=n}function Mg(t,e){this.type=Sf,this.source=Ng,this.path=t,this.sf=e}function Og(t,e){this.type=Vf,this.source=t,this.path=e}function Pg(t,e,n){this.type=Rf,this.source=t,this.path=e,this.children=n}function Qg(t,e,n,r){this.$e=t,this.Ze=e,this.fc=n,this.wf=r,x(!r||e,"Tagged queries must be from server.")}function Sg(t){this.ma=lg,this.Bb=new Cg,this.Zc={},this.gc={},this.Fc=t}function Ug(t,e,n,r){if(r=Cd(t.Zc,"_"+r),null!=r){var i=Vg(r);return r=i.path,i=i.fc,e=T(r,e),n=new Lg(new Qg(!1,!0,i,!0),e,n),Wg(t,r,n)}return[]}function Xg(t,e,n,r){if(r=Cd(t.Zc,"_"+r)){var i=Vg(r);return r=i.path,i=i.fc,e=T(r,e),n=mg(n),n=new Pg(new Qg(!1,!0,i,!0),e,n),Wg(t,r,n)}return[]}function ah(t){return qg(t,function(t,e,n){if(e&&null!=zg(e))return[zg(e)];var r=[];return e&&(r=Ag(e)),A(n,function(t){r=r.concat(t)}),r})}function dh(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!wc(r.w)){var r=Yg(r),i=t.gc[r];delete t.gc[r],delete t.Zc["_"+i]}}}function $g(t,e,n){var r=e.path,i=ch(t,e);if(n=bh(t,n),e=t.Fc.Le(e,i,n.qd,n.H),r=t.ma.subtree(r),i)x(null==zg(r.value),"If we're adding a query, it shouldn't be shadowed");else for(i=qg(r,function(t,e,n){if(!t.e()&&e&&null!=zg(e))return[hg(zg(e))];var r=[];return e&&(r=r.concat(La(Ag(e),function(t){return t.U}))),A(n,function(t){r=r.concat(t)}),r}),r=0;r<i.length;++r)n=i[r],t.Fc.Od(n,ch(t,n));return e}function bh(t,e){var n=e.U,r=ch(t,n);return{qd:function(){return(e.ab()||K).hash()},H:function(e,i){if("ok"===e){if(i&&"object"==typeof i&&u(i,"w")){var o=v(i,"w");ea(o)&&0<=Ia(o,"no_index")&&z("Using an unspecified index. Consider adding "+('".indexOn": "'+n.w.m.toString()+'"')+" at "+n.path.toString()+" to your security rules for better performance")}if(r){var s=n.path;if(o=Cd(t.Zc,"_"+r))var a=Vg(o),o=a.path,a=a.fc,s=T(o,s),s=new Og(new Qg(!1,!0,a,!0),s),o=Wg(t,o,s);else o=[]}else o=Tg(t,new Og(Rg,n.path));return o}return o="Unknown Error","too_big"===e?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?o="Client doesn't have permission to access the desired data.":"unavailable"==e&&(o="The service is unavailable"),o=Error(e+": "+o),o.code=e.toUpperCase(),t.hb(n,null,o)}}}function Yg(t){return t.path.toString()+"$"+t.Da()}function Vg(t){var e=t.indexOf("$");return x(-1!==e&&e<t.length-1,"Bad queryKey."),{fc:t.substr(e+1),path:new P(t.substr(0,e))}}function ch(t,e){var n=Yg(e);return v(t.gc,n)}function Wg(t,e,n){var r=t.ma.get(e);return x(r,"Missing sync point for query tag that we're tracking"),r.Xa(n,new Kg(e,t.Bb),null)}function Tg(t,e){return eh(t,e,t.ma,null,new Kg(S,t.Bb))}function eh(t,e,n,r,i){if(e.path.e())return fh(t,e,n,r,i);var o=n.get(S);null==r&&null!=o&&(r=o.za(S));var s=[],a=G(e.path),u=e.Mc(a);if((n=n.children.get(a))&&u)var c=r?r.B(a):null,a=i.k(a),s=s.concat(eh(t,u,n,c,a));return o&&(s=s.concat(o.Xa(e,i,r))),s}function fh(t,e,n,r,i){var o=n.get(S);null==r&&null!=o&&(r=o.za(S));var s=[];return n.children.Ba(function(n,o){var a=r?r.B(n):null,u=i.k(n),c=e.Mc(n);c&&(s=s.concat(fh(t,c,o,a,u)))}),o&&(s=s.concat(o.Xa(e,i,r))),s}function gh(t){this.Q=t,this.Qa=Ld(t),this.Z=new Te,this.zd=1,this.S=new xe(this.Q,q(this.Cd,this),q(this.Ad,this),q(this.Ee,this)),this.ug=Md(t,q(function(){return new Id(this.Qa,this.S)},this)),this.pc=new Fc,this.qe=new Se;var e=this;this.ud=new Sg({Le:function(t,n,r,i){return n=[],r=e.qe.Wc.da(t.path),r.e()||(n=e.ud.Sa(t.path,r),setTimeout(function(){i("ok")},0)),n},Od:ba}),hh(this,"connected",!1),this.ea=new Pe,this.T=new tf(t,q(this.S.T,this.S),q(this.S.Pe,this.S),q(this.Be,this)),this.jd=0,this.re=null,this.M=new Sg({Le:function(t,n,r,i){return Be(e.S,t,r,n,function(n,r){var o=i(n,r);Xe(e.Z,t.path,o)}),[]},Od:function(t,n){var r=e.S,i=t.path.toString(),o=t.Da();if(r.f("Unlisten called for "+i+" "+o),De(r,i,o)&&r.ia){var s=Dc(t);r.f("Unlisten on "+i+" for "+o),i={p:i},n&&(i.q=s,i.t=n),r.wa("n",i)}}})}function ih(t){var e=new P(".info/serverTimeOffset");return t=t.qe.Wc.da(e).N()||0,(new Date).getTime()+t}function jh(t){return t=t={timestamp:ih(t)},t.timestamp=t.timestamp||(new Date).getTime(),t}function hh(t,e,n){e=new P("/.info/"+e),n=J(n);var r=t.qe;r.Wc=r.Wc.L(e,n),n=t.ud.Sa(e,n),Xe(t.Z,e,n)}function lh(t){t.f("onDisconnectEvents");var e=jh(t),n=[];Re(Hf(t.ea,e),S,function(e,r){n=n.concat(t.M.Sa(e,r));var i=nh(t,e);kh(t,i)}),t.ea=new Pe,Xe(t.Z,S,n)}function oh(t,e,n,r){var i=J(n);Fe(t.S,e.toString(),i.N(!0),function(n,o){"ok"===n&&t.ea.ic(e,i),mh(r,n,o)})}function ph(t,e,n,r,i){var o=J(n,r);Fe(t.S,e.toString(),o.N(!0),function(n,r){"ok"===n&&t.ea.ic(e,o),mh(i,n,r)})}function qh(t,e,n,r){var i,o=!0;for(i in n)o=!1;o?(kb("onDisconnect().update() called with empty data.  Don't do anything."),mh(r,"ok")):He(t.S,e.toString(),n,function(i,o){if("ok"===i)for(var s in n){var a=J(n[s]);t.ea.ic(e.k(s),a)}mh(r,i,o)})}function Bc(t,e,n){n=".info"===G(e.path)?t.ud.Jb(e,n):t.M.Jb(e,n),Cc(t.Z,e.path,n)}function mh(t,e,n){t&&Fb(function(){if("ok"==e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n),i=Error(i),i.code=r,t(i)}})}function rh(t,e,r,i,o){function s(){}t.f("transaction on "+e);var a=new O(t,e);if(a.zb("value",s),r={path:e,update:r,H:i,status:null,lf:hb(),Qe:o,rf:0,Vd:function(){a.bc("value",s)},Yd:null,sa:null,fd:null,gd:null,hd:null},i=t.M.xa(e,void 0)||K,r.fd=i,i=r.update(i.N()),n(i)){Tb("transaction failed: Data returned ",i),r.status=1,o=Gc(t.pc,e);var c=o.ta()||[];c.push(r),Hc(o,c),"object"==typeof i&&null!==i&&u(i,".priority")?(c=v(i,".priority"),x(Rb(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(t.M.xa(e)||K).O().N(),o=jh(t),i=J(i,c),o=If(i,o),r.gd=i,r.hd=o,r.sa=t.zd++,r=t.M.Fa(e,o,r.sa,r.Qe),Xe(t.Z,e,r),sh(t)
}else r.Vd(),r.gd=null,r.hd=null,r.H&&(t=new C(r.fd,new O(t,r.path),L),r.H(null,!1,t))}function sh(t,e){var n=e||t.pc;if(e||th(t,n),null!==n.ta()){var r=uh(t,n);x(0<r.length,"Sending zero length transaction queue"),Na(r,function(t){return 1===t.status})&&vh(t,n.path(),r)}else n.pd()&&n.ca(function(e){sh(t,e)})}function vh(t,e,n){for(var r=La(n,function(t){return t.sa}),i=t.M.xa(e,r)||K,r=i,i=i.hash(),o=0;o<n.length;o++){var s=n[o];x(1===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=2,s.rf++;var a=T(e,s.path),r=r.L(a,s.gd)}r=r.N(!0),t.S.put(e.toString(),r,function(r){t.f("transaction put response",{path:e.toString(),status:r});var i=[];if("ok"===r){for(r=[],o=0;o<n.length;o++){if(n[o].status=3,i=i.concat(t.M.Ea(n[o].sa)),n[o].H){var s=n[o].hd,a=new O(t,n[o].path);r.push(q(n[o].H,null,null,!0,new C(s,a,L)))}n[o].Vd()}for(th(t,Gc(t.pc,e)),sh(t),Xe(t.Z,e,i),o=0;o<r.length;o++)Fb(r[o])}else{if("datastale"===r)for(o=0;o<n.length;o++)n[o].status=4===n[o].status?5:1;else for(z("transaction at "+e.toString()+" failed: "+r),o=0;o<n.length;o++)n[o].status=5,n[o].Yd=r;kh(t,e)}},i)}function kh(t,e){var n=wh(t,e),r=n.path(),n=uh(t,n);return xh(t,n,r),r}function xh(t,e,r){if(0!==e.length){for(var i=[],o=[],s=La(e,function(t){return t.sa}),a=0;a<e.length;a++){var c,l=e[a],h=T(r,l.path),f=!1;if(x(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),5===l.status)f=!0,c=l.Yd,o=o.concat(t.M.Ea(l.sa,!0));else if(1===l.status)if(25<=l.rf)f=!0,c="maxretry",o=o.concat(t.M.Ea(l.sa,!0));else{var d=t.M.xa(l.path,s)||K;l.fd=d;var p=e[a].update(d.N());n(p)?(Tb("transaction failed: Data returned ",p),h=J(p),"object"==typeof p&&null!=p&&u(p,".priority")||(h=h.ib(d.O())),d=l.sa,p=jh(t),p=If(h,p),l.gd=h,l.hd=p,l.sa=t.zd++,Qa(s,d),o=o.concat(t.M.Fa(l.path,p,l.sa,l.Qe)),o=o.concat(t.M.Ea(d,!0))):(f=!0,c="nodata",o=o.concat(t.M.Ea(l.sa,!0)))}Xe(t.Z,r,o),o=[],f&&(e[a].status=3,setTimeout(e[a].Vd,Math.floor(0)),e[a].H&&("nodata"===c?(l=new O(t,e[a].path),i.push(q(e[a].H,null,null,!1,new C(e[a].fd,l,L)))):i.push(q(e[a].H,null,Error(c),!1,null))))}for(th(t,t.pc),a=0;a<i.length;a++)Fb(i[a]);sh(t)}}function wh(t,e){for(var n,r=t.pc;null!==(n=G(e))&&null===r.ta();)r=Gc(r,n),e=R(e);return r}function uh(t,e){var n=[];return yh(t,e,n),n.sort(function(t,e){return t.lf-e.lf}),n}function yh(t,e,n){var r=e.ta();if(null!==r)for(var i=0;i<r.length;i++)n.push(r[i]);e.ca(function(e){yh(t,e,n)})}function th(t,e){var n=e.ta();if(n){for(var r=0,i=0;i<n.length;i++)3!==n[i].status&&(n[r]=n[i],r++);n.length=r,Hc(e,0<n.length?n:null)}e.ca(function(e){th(t,e)})}function nh(t,e){var n=wh(t,e).path(),r=Gc(t.pc,e);return Kc(r,function(e){zh(t,e)}),zh(t,r),Jc(r,function(e){zh(t,e)}),n}function zh(t,e){var n=e.ta();if(null!==n){for(var r=[],i=[],o=-1,s=0;s<n.length;s++)4!==n[s].status&&(2===n[s].status?(x(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=4,n[s].Yd="set"):(x(1===n[s].status,"Unexpected transaction status in abort"),n[s].Vd(),i=i.concat(t.M.Ea(n[s].sa,!0)),n[s].H&&r.push(q(n[s].H,null,Error("set"),!1,null))));for(-1===o?Hc(e,null):n.length=o+1,Xe(t.Z,e.path(),i),s=0;s<r.length;s++)Fb(r[s])}}function Ah(){this.jc={}}function Bh(t){var e=this;if(this.tc=t,this.Qd="*",lf()?this.Hc=this.sd=cf():(this.Hc=window.opener,this.sd=window),!e.Hc)throw"Unable to find relay frame";df(this.sd,"message",q(this.cc,this)),df(this.sd,"message",q(this.hf,this));try{Ch(this,{a:"ready"})}catch(n){df(this.Hc,"load",function(){Ch(e,{a:"ready"})})}df(window,"unload",q(this.eg,this))}function Ch(e,n){n=t(n),lf()?e.Hc.doPost(n,e.Qd):e.Hc.postMessage(n,e.Qd)}function Z(t,e){this.Sc=t,this.Ca=e}function O(t,e){var n,r,i;if(t instanceof gh)n=t,r=e;else{D("new Firebase",1,2,arguments.length),r=ub(arguments[0]),n=r.vg,"firebase"===r.domain&&tb(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n||tb("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.Cb||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&z("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),n=new Ca(r.host,r.Cb,n,"ws"===r.scheme||"wss"===r.scheme),r=new P(r.Pc),i=r.toString();var o;if(!(o=!p(n.host)||0===n.host.length||!Qb(n.yb))&&(o=0!==i.length)&&(i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),o=!(p(i)&&0!==i.length&&!Pb.test(i))),o)throw Error(E("new Firebase",1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');if(e)if(e instanceof Ah)i=e;else{if(!p(e))throw Error("Expected a valid Firebase.Context for second argument to new Firebase()");i=Ah.Qb(),n.Gd=e}else i=Ah.Qb();o=n.toString();var s=v(i.jc,o);s||(s=new gh(n),i.jc[o]=s),n=s}M.call(this,n,r,oc,!1)}function qb(t,e){x(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?("undefined"!=typeof console&&("function"==typeof console.log?ob=q(console.log,console):"object"==typeof console.log&&(ob=function(t){console.log(t)})),e&&Ba.set("logging_enabled",!0)):t?ob=t:(ob=null,Ba.remove("logging_enabled"))}var h,aa=this,ma=Date.now||function(){return+new Date},sa={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},ta=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;h=xa.prototype,h.set=function(e,n){null==n?this.xc.removeItem(this.Hd+e):this.xc.setItem(this.Hd+e,t(n))},h.get=function(t){return t=this.xc.getItem(this.Hd+t),null==t?null:ua(t)},h.remove=function(t){this.xc.removeItem(this.Hd+t)},h.ff=!1,h.toString=function(){return this.xc.toString()},ya.prototype.set=function(t,e){null==e?delete this.ha[t]:this.ha[t]=e},ya.prototype.get=function(t){return u(this.ha,t)?this.ha[t]:null},ya.prototype.remove=function(t){delete this.ha[t]},ya.prototype.ff=!0;var Aa=za("localStorage"),Ba=za("sessionStorage");Ca.prototype.toString=function(){var t=(this.Cb?"https://":"http://")+this.host;return this.Gd&&(t+="<"+this.Gd+">"),t},na(Fa,Ea),Fa.prototype.reset=function(){this.R[0]=1732584193,this.R[1]=4023233417,this.R[2]=2562383102,this.R[3]=271733878,this.R[4]=3285377520,this.Rd=this.Tb=0},Fa.prototype.update=function(t,e){n(e)||(e=t.length);for(var r=e-this.Ta,i=0,o=this.be,s=this.Tb;e>i;){if(0==s)for(;r>=i;)Ga(this,t,i),i+=this.Ta;if(p(t)){for(;e>i;)if(o[s]=t.charCodeAt(i),++s,++i,s==this.Ta){Ga(this,o),s=0;break}}else for(;e>i;)if(o[s]=t[i],++s,++i,s==this.Ta){Ga(this,o),s=0;break}}this.Tb=s,this.Rd+=e};var w=Array.prototype,Ia=w.indexOf?function(t,e,n){return w.indexOf.call(t,e,n)}:function(t,e,n){if(n=null==n?0:0>n?Math.max(0,t.length+n):n,p(t))return p(e)&&1==e.length?t.indexOf(e,n):-1;for(;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ja=w.forEach?function(t,e,n){w.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=p(t)?t.split(""):t,o=0;r>o;o++)o in i&&e.call(n,i[o],o,t)},Ka=w.filter?function(t,e,n){return w.filter.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=[],o=0,s=p(t)?t.split(""):t,a=0;r>a;a++)if(a in s){var u=s[a];e.call(n,u,a,t)&&(i[o++]=u)}return i},La=w.map?function(t,e,n){return w.map.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=Array(r),o=p(t)?t.split(""):t,s=0;r>s;s++)s in o&&(i[s]=e.call(n,o[s],s,t));return i},Ma=w.reduce?function(t,e,n,r){return r&&(e=q(e,r)),w.reduce.call(t,e,n)}:function(t,e,n,r){var i=n;return Ja(t,function(n,o){i=e.call(r,i,n,o,t)}),i},Na=w.every?function(t,e,n){return w.every.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=p(t)?t.split(""):t,o=0;r>o;o++)if(o in i&&!e.call(n,i[o],o,t))return!1;return!0},Va;t:{var Wa=aa.navigator;if(Wa){var Xa=Wa.userAgent;if(Xa){Va=Xa;break t}}Va=""}var Za=Ya("Opera")||Ya("OPR"),$a=Ya("Trident")||Ya("MSIE"),ab=Ya("Gecko")&&-1==Va.toLowerCase().indexOf("webkit")&&!(Ya("Trident")||Ya("MSIE")),bb=-1!=Va.toLowerCase().indexOf("webkit");!function(){var t,e="";return Za&&aa.opera?(e=aa.opera.version,ha(e)?e():e):(ab?t=/rv\:([^\);]+)(\)|;)/:$a?t=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:bb&&(t=/WebKit\/(\S+)/),t&&(e=(e=t.exec(Va))?e[1]:""),$a&&(t=(t=aa.document)?t.documentMode:void 0,t>parseFloat(e))?String(t):e)}();var cb=null,db=null,eb=null,hb=function(){var t=1;return function(){return t++}}(),ob=null,pb=!0,Eb=/^-?\d{1,10}$/;Gb.prototype.Rb=function(){var t=this.Ld.hc();return"value"===this.nd?t.path:t.parent().path},Gb.prototype.oe=function(){return this.nd},Gb.prototype.Pb=function(){return this.me.Pb(this)},Gb.prototype.toString=function(){return this.Rb().toString()+":"+this.nd+":"+t(this.Ld.Xe())},Hb.prototype.Rb=function(){return this.path},Hb.prototype.oe=function(){return"cancel"},Hb.prototype.Pb=function(){return this.me.Pb(this)},Hb.prototype.toString=function(){return this.path.toString()+":cancel"},h=Ib.prototype,h.pf=function(t){return"value"===t},h.createEvent=function(t,e){var n=e.w.m;return new Gb("value",this,new C(t.Wa,e.hc(),n))},h.Pb=function(t){var e=this.vc;if("cancel"===t.oe()){x(this.mb,"Raising a cancel event on a listener with no cancel callback");var n=this.mb;return function(){n.call(e,t.error)}}var r=this.Kb;return function(){r.call(e,t.Ld)}},h.Te=function(t,e){return this.mb?new Hb(this,t,e):null},h.matches=function(t){return t instanceof Ib&&(!t.Kb||!this.Kb||t.Kb===this.Kb)&&t.vc===this.vc},h.cf=function(){return null!==this.Kb},h=Jb.prototype,h.pf=function(t){return t="children_added"===t?"child_added":t,("children_removed"===t?"child_removed":t)in this.ba},h.Te=function(t,e){return this.mb?new Hb(this,t,e):null},h.createEvent=function(t,e){var n=e.hc().k(t.nb);return new Gb(t.type,this,new C(t.Wa,n,e.w.m),t.Rc)},h.Pb=function(t){var e=this.vc;if("cancel"===t.oe()){x(this.mb,"Raising a cancel event on a listener with no cancel callback");var n=this.mb;return function(){n.call(e,t.error)}}var r=this.ba[t.nd];return function(){r.call(e,t.Ld,t.Rc)}},h.matches=function(t){if(t instanceof Jb){if(this.ba&&t.ba){var e=Kb(t.ba);if(e===Kb(this.ba)){if(1===e){var e=Lb(t.ba),n=Lb(this.ba);return!(n!==e||t.ba[e]&&this.ba[n]&&t.ba[e]!==this.ba[n])}return Mb(this.ba,function(e,n){return t.ba[n]===e})}return!1}return!0}return!1},h.cf=function(){return null!==this.ba};var Ob=/[\[\].#$\/\u0000-\u001F\u007F]/,Pb=/[\[\].#$\u0000-\u001F\u007F]/,hc={};gc.prototype.df=function(t,e){return 0!==this.compare(new I("[MIN_NAME]",t),new I("[MIN_NAME]",e))},gc.prototype.Ae=function(){return ic},na(jc,gc),h=jc.prototype,h.se=function(t){return!t.B(this.Vb).e()},h.compare=function(t,e){var n=t.K.B(this.Vb),r=e.K.B(this.Vb),n=n.he(r);return 0===n?xb(t.name,e.name):n},h.ye=function(t,e){var n=J(t),n=K.I(this.Vb,n);return new I(e,n)},h.ze=function(){var t=K.I(this.Vb,kc);return new I("[MAX_NAME]",t)},h.toString=function(){return this.Vb};var L=new jc(".priority");na(lc,gc),h=lc.prototype,h.compare=function(t,e){return xb(t.name,e.name)},h.se=function(){throw ib("KeyIndex.isDefinedOn not expected to be called.")},h.df=function(){return!1},h.Ae=function(){return ic},h.ze=function(){return new I("[MAX_NAME]",K)},h.ye=function(t){return x(p(t),"KeyIndex indexValue must always be a string."),new I(t,K)},h.toString=function(){return".key"};var mc=new lc,oc=new nc;h=nc.prototype,h.ve=function(t){var e=uc(this);return e.ka=!0,e.xb=t,e.Hb="",e},h.we=function(t){var e=uc(this);return e.ka=!0,e.xb=t,e.Hb="l",e},h.xe=function(t){var e=uc(this);return e.ka=!0,e.xb=t,e.Hb="r",e},h.Md=function(t,e){var n=uc(this);return n.ga=!0,n.Bc=t,null!=e?(n.nc=!0,n.Xb=e):(n.nc=!1,n.Xb=""),n},h.md=function(t,e){var r=uc(this);return r.na=!0,r.Ac=t,n(e)?(r.yc=!0,r.Ub=e):(r.Dg=!1,r.Ub=""),r},M.prototype.hc=function(){return D("Query.ref",0,0,arguments.length),new O(this.g,this.path)},M.prototype.ref=M.prototype.hc,M.prototype.zb=function(t,e,n,r){D("Query.on",2,4,arguments.length),Xb("Query.on",t,!1),F("Query.on",2,e,!1);var i=Ac("Query.on",n,r);if("value"===t)Bc(this.g,this,new Ib(e,i.cancel||null,i.Ha||null));else{var o={};o[t]=e,Bc(this.g,this,new Jb(o,i.cancel,i.Ha))}return e},M.prototype.on=M.prototype.zb,M.prototype.bc=function(t,e,n){D("Query.off",0,3,arguments.length),Xb("Query.off",t,!0),F("Query.off",2,e,!0),Nb("Query.off",3,n);var r=null,i=null;"value"===t?r=new Ib(e||null,null,n||null):t&&(e&&(i={},i[t]=e),r=new Jb(i,null,n||null)),i=this.g,r=".info"===G(this.path)?i.ud.hb(this,r):i.M.hb(this,r),Cc(i.Z,this.path,r)},M.prototype.off=M.prototype.bc,M.prototype.gg=function(t,e){function n(s){o&&(o=!1,i.bc(t,n),e.call(r.Ha,s))}D("Query.once",2,4,arguments.length),Xb("Query.once",t,!1),F("Query.once",2,e,!1);var r=Ac("Query.once",arguments[2],arguments[3]),i=this,o=!0;this.zb(t,n,function(e){i.bc(t,n),r.cancel&&r.cancel.call(r.Ha,e)})},M.prototype.once=M.prototype.gg,M.prototype.ve=function(t){if(z("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead."),D("Query.limit",1,1,arguments.length),!ga(t)||Math.floor(t)!==t||0>=t)throw Error("Query.limit: First argument must be a positive integer.");if(this.w.ka)throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var e=this.w.ve(t);return yc(e),new M(this.g,this.path,e,this.dc)},M.prototype.limit=M.prototype.ve,M.prototype.we=function(t){if(D("Query.limitToFirst",1,1,arguments.length),!ga(t)||Math.floor(t)!==t||0>=t)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.w.ka)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new M(this.g,this.path,this.w.we(t),this.dc)},M.prototype.limitToFirst=M.prototype.we,M.prototype.xe=function(t){if(D("Query.limitToLast",1,1,arguments.length),!ga(t)||Math.floor(t)!==t||0>=t)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.w.ka)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new M(this.g,this.path,this.w.xe(t),this.dc)},M.prototype.limitToLast=M.prototype.xe,M.prototype.hg=function(t){if(D("Query.orderByChild",1,1,arguments.length),"$key"===t)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');Yb("Query.orderByChild",1,t,!1),zc(this,"Query.orderByChild");var e=vc(this.w,new jc(t));return xc(e),new M(this.g,this.path,e,!0)},M.prototype.orderByChild=M.prototype.hg,M.prototype.ig=function(){D("Query.orderByKey",0,0,arguments.length),zc(this,"Query.orderByKey");var t=vc(this.w,mc);return xc(t),new M(this.g,this.path,t,!0)},M.prototype.orderByKey=M.prototype.ig,M.prototype.jg=function(){D("Query.orderByPriority",0,0,arguments.length),zc(this,"Query.orderByPriority");var t=vc(this.w,L);return xc(t),new M(this.g,this.path,t,!0)},M.prototype.orderByPriority=M.prototype.jg,M.prototype.Md=function(t,e){D("Query.startAt",0,2,arguments.length),Sb("Query.startAt",t,!0),Yb("Query.startAt",2,e,!0);var r=this.w.Md(t,e);if(yc(r),xc(r),this.w.ga)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return n(t)||(e=t=null),new M(this.g,this.path,r,this.dc)},M.prototype.startAt=M.prototype.Md,M.prototype.md=function(t,e){D("Query.endAt",0,2,arguments.length),Sb("Query.endAt",t,!0),Yb("Query.endAt",2,e,!0);var n=this.w.md(t,e);if(yc(n),xc(n),this.w.na)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new M(this.g,this.path,n,this.dc)},M.prototype.endAt=M.prototype.md,M.prototype.Of=function(t,e){if(D("Query.equalTo",1,2,arguments.length),Sb("Query.equalTo",t,!1),Yb("Query.equalTo",2,e,!0),this.w.ga)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.w.na)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.Md(t,e).md(t,e)},M.prototype.equalTo=M.prototype.Of,M.prototype.Da=function(){var t=Ab(Dc(this));return"{}"===t?"default":t},P.prototype.toString=function(){for(var t="",e=this.aa;e<this.n.length;e++)""!==this.n[e]&&(t+="/"+this.n[e]);return t||"/"},P.prototype.parent=function(){if(this.aa>=this.n.length)return null;for(var t=[],e=this.aa;e<this.n.length-1;e++)t.push(this.n[e]);return new P(t,0)},P.prototype.k=function(t){for(var e=[],n=this.aa;n<this.n.length;n++)e.push(this.n[n]);if(t instanceof P)for(n=t.aa;n<t.n.length;n++)e.push(t.n[n]);else for(t=t.split("/"),n=0;n<t.length;n++)0<t[n].length&&e.push(t[n]);return new P(e,0)},P.prototype.e=function(){return this.aa>=this.n.length};var S=new P("");P.prototype.ja=function(t){if(Q(this)!==Q(t))return!1;for(var e=this.aa,n=t.aa;e<=this.n.length;e++,n++)if(this.n[e]!==t.n[n])return!1;return!0},P.prototype.contains=function(t){var e=this.aa,n=t.aa;if(Q(this)>Q(t))return!1;for(;e<this.n.length;){if(this.n[e]!==t.n[n])return!1;++e,++n}return!0},h=Fc.prototype,h.ta=function(){return this.D.value},h.clear=function(){this.D.value=null,this.D.children={},this.D.dd=0,Ic(this)},h.pd=function(){return 0<this.D.dd},h.e=function(){return null===this.ta()&&!this.pd()},h.ca=function(t){var e=this;A(this.D.children,function(n,r){t(new Fc(r,e,n))})},h.path=function(){return new P(null===this.Oc?this.yd:this.Oc.path()+"/"+this.yd)},h.name=function(){return this.yd},h.parent=function(){return this.Oc},h=Lc.prototype,h.Ja=function(t,e){return new Lc(this.Ga,this.pa.Ja(t,e,this.Ga).W(null,null,!1,null,null))},h.remove=function(t){return new Lc(this.Ga,this.pa.remove(t,this.Ga).W(null,null,!1,null,null))},h.get=function(t){for(var e,n=this.pa;!n.e();){if(e=this.Ga(t,n.key),0===e)return n.value;0>e?n=n.left:e>0&&(n=n.right)}return null},h.e=function(){return this.pa.e()},h.count=function(){return this.pa.count()},h.Ic=function(){return this.pa.Ic()},h.Zb=function(){return this.pa.Zb()},h.Ba=function(t){return this.pa.Ba(t)},h.Aa=function(t){return new Oc(this.pa,null,this.Ga,!1,t)},h.rb=function(t,e){return new Oc(this.pa,t,this.Ga,!1,e)},h.Sb=function(t,e){return new Oc(this.pa,t,this.Ga,!0,e)},h.bf=function(t){return new Oc(this.pa,null,this.Ga,!0,t)},h=Pc.prototype,h.W=function(t,e,n,r,i){return new Pc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},h.count=function(){return this.left.count()+1+this.right.count()},h.e=function(){return!1},h.Ba=function(t){return this.left.Ba(t)||t(this.key,this.value)||this.right.Ba(t)},h.Ic=function(){return Qc(this).key},h.Zb=function(){return this.right.e()?this.key:this.right.Zb()},h.Ja=function(t,e,n){var r,i;return i=this,r=n(t,i.key),i=0>r?i.W(null,null,null,i.left.Ja(t,e,n),null):0===r?i.W(null,e,null,null,null):i.W(null,null,null,null,i.right.Ja(t,e,n)),Rc(i)},h.remove=function(t,e){var n,r;if(n=this,0>e(t,n.key))n.left.e()||n.left.$()||n.left.left.$()||(n=Tc(n)),n=n.W(null,null,null,n.left.remove(t,e),null);else{if(n.left.$()&&(n=Uc(n)),n.right.e()||n.right.$()||n.right.left.$()||(n=Vc(n),n.left.left.$()&&(n=Uc(n),n=Vc(n))),0===e(t,n.key)){if(n.right.e())return Mc;r=Qc(n.right),n=n.W(r.key,r.value,null,null,Sc(n.right))}n=n.W(null,null,null,null,n.right.remove(t,e))}return Rc(n)},h.$=function(){return this.color},h=Xc.prototype,h.W=function(){return this},h.Ja=function(t,e){return new Pc(t,e,null)},h.remove=function(){return this},h.count=function(){return 0},h.e=function(){return!0},h.Ba=function(){return!1},h.Ic=function(){return null},h.Zb=function(){return null},h.$=function(){return!1};var Mc=new Xc;h=Zc.prototype,h.P=function(){return!0},h.O=function(){return this.fa},h.ib=function(t){return new Zc(this.A,t)},h.B=function(t){return".priority"===t?this.fa:K},h.da=function(t){return t.e()?this:".priority"===G(t)?this.fa:K},h.Y=function(){return!1},h.af=function(){return null},h.I=function(t,e){return".priority"===t?this.ib(e):K.I(t,e).ib(this.fa)},h.L=function(t,e){var n=G(t);return null===n?e:(x(".priority"!==n||1===Q(t),".priority must be the last token in a path"),this.I(n,K.L(R(t),e)))},h.e=function(){return!1},h.Ua=function(){return 0},h.N=function(t){return t&&!this.O().e()?{".value":this.ta(),".priority":this.O().N()}:this.ta()},h.hash=function(){if(null===this.wb){var t="";this.fa.e()||(t+="priority:"+ad(this.fa.N())+":");var e=typeof this.A,t=t+(e+":"),t="number"===e?t+Db(this.A):t+this.A;this.wb=lb(t)}return this.wb},h.ta=function(){return this.A},h.he=function(t){if(t===K)return 1;if(t instanceof bd)return-1;x(t.P(),"Unknown node type");var e=typeof t.A,n=typeof this.A,r=Ia(cd,e),i=Ia(cd,n);return x(r>=0,"Unknown leaf type: "+e),x(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.A<t.A?-1:this.A===t.A?0:1:i-r};var cd=["object","boolean","number","string"];Zc.prototype.Wd=function(){return this},Zc.prototype.Yb=function(){return!0},Zc.prototype.ja=function(t){return t===this?!0:t.P()?this.A===t.A&&this.fa.ja(t.fa):!1},Zc.prototype.toString=function(){return"string"==typeof this.A?this.A:'"'+this.A+'"'},dd.prototype.get=function(t){var e=v(this.td,t);if(!e)throw Error("No index defined for "+t);return e===hc?null:e};var id=new dd({".priority":hc},{".priority":L});h=bd.prototype,h.P=function(){return!1},h.O=function(){return this.fa||K},h.ib=function(t){return new bd(this.j,t,this.sb)},h.B=function(t){return".priority"===t?this.O():(t=this.j.get(t),null===t?K:t)},h.da=function(t){var e=G(t);return null===e?this:this.B(e).da(R(t))},h.Y=function(t){return null!==this.j.get(t)},h.I=function(t,e){if(x(e,"We should always be passing snapshot nodes"),".priority"===t)return this.ib(e);var n,r=new I(t,e);return e.e()?(n=this.j.remove(t),r=hd(this.sb,r,this.j)):(n=this.j.Ja(t,e),r=ed(this.sb,r,this.j)),new bd(n,this.fa,r)},h.L=function(t,e){var n=G(t);if(null===n)return e;x(".priority"!==G(t)||1===Q(t),".priority must be the last token in a path");var r=this.B(n).L(R(t),e);return this.I(n,r)},h.e=function(){return this.j.e()},h.Ua=function(){return this.j.count()};var jd=/^(0|[1-9]\d*)$/;h=bd.prototype,h.N=function(t){if(this.e())return null;var e={},n=0,r=0,i=!0;if(this.ca(L,function(o,s){e[o]=s.N(t),n++,i&&jd.test(o)?r=Math.max(r,Number(o)):i=!1}),!t&&i&&2*n>r){var o,s=[];for(o in e)s[o]=e[o];return s}return t&&!this.O().e()&&(e[".priority"]=this.O().N()),e},h.hash=function(){if(null===this.wb){var t="";this.O().e()||(t+="priority:"+ad(this.O().N())+":"),this.ca(L,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.wb=""===t?"":lb(t)}return this.wb},h.af=function(t,e,n){return(n=kd(this,n))?(t=Nc(n,new I(t,e)))?t.name:null:Nc(this.j,t)},h.ca=function(t,e){var n=kd(this,t);return n?n.Ba(function(t){return e(t.name,t.K)}):this.j.Ba(e)},h.Aa=function(t){return this.rb(t.Ae(),t)},h.rb=function(t,e){var n=kd(this,e);return n?n.rb(t,function(t){return t}):this.j.rb(t.name,Yc)},h.bf=function(t){return this.Sb(t.ze(),t)},h.Sb=function(t,e){var n=kd(this,e);return n?n.Sb(t,function(t){return t}):this.j.Sb(t.name,Yc)},h.he=function(t){return this.e()?t.e()?0:-1:t.P()||t.e()?1:t===kc?-1:0},h.Wd=function(t){if(t===mc||nd(this.sb.Wb,t.toString()))return this;var e=this.sb,n=this.j;x(t!==mc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,n=n.Aa(Yc),o=U(n);o;)i=i||t.se(o.K),r.push(o),o=U(n);return r=i?gd(r,H(t)):hc,i=t.toString(),n=od(e.Wb),n[i]=t,t=od(e.td),t[i]=r,new bd(this.j,this.fa,new dd(t,n))},h.Yb=function(t){return t===mc||nd(this.sb.Wb,t.toString())},h.ja=function(t){if(t===this)return!0;if(t.P())return!1;if(this.O().ja(t.O())&&this.j.count()===t.j.count()){var e=this.Aa(L);t=t.Aa(L);for(var n=U(e),r=U(t);n&&r;){if(n.name!==r.name||!n.K.ja(r.K))return!1;n=U(e),r=U(t)}return null===n&&null===r}return!1},h.toString=function(){var t="{",e=!0;return this.ca(L,function(n,r){e?e=!1:t+=", ",t+='"'+n+'" : '+r.toString()}),t+="}"};var pd=Math.log(2),K=new bd(new Lc(fc),null,id);na(sd,bd),h=sd.prototype,h.he=function(t){return t===this?0:1},h.ja=function(t){return t===this},h.O=function(){throw ib("Why is this called?")},h.B=function(){return K},h.e=function(){return!1};var kc=new sd,ic=new I("[MIN_NAME]",K);C.prototype.N=function(){return D("Firebase.DataSnapshot.val",0,0,arguments.length),this.D.N()},C.prototype.val=C.prototype.N,C.prototype.Xe=function(){return D("Firebase.DataSnapshot.exportVal",0,0,arguments.length),this.D.N(!0)},C.prototype.exportVal=C.prototype.Xe,C.prototype.Qf=function(){return D("Firebase.DataSnapshot.exists",0,0,arguments.length),!this.D.e()},C.prototype.exists=C.prototype.Qf,C.prototype.k=function(t){D("Firebase.DataSnapshot.child",0,1,arguments.length),ga(t)&&(t=String(t)),Zb("Firebase.DataSnapshot.child",t);var e=new P(t),n=this.U.k(e);return new C(this.D.da(e),n,L)},C.prototype.child=C.prototype.k,C.prototype.Y=function(t){D("Firebase.DataSnapshot.hasChild",1,1,arguments.length),Zb("Firebase.DataSnapshot.hasChild",t);var e=new P(t);return!this.D.da(e).e()},C.prototype.hasChild=C.prototype.Y,C.prototype.O=function(){return D("Firebase.DataSnapshot.getPriority",0,0,arguments.length),this.D.O().N()},C.prototype.getPriority=C.prototype.O,C.prototype.forEach=function(t){if(D("Firebase.DataSnapshot.forEach",1,1,arguments.length),F("Firebase.DataSnapshot.forEach",1,t,!1),this.D.P())return!1;var e=this;return!!this.D.ca(this.m,function(n,r){return t(new C(r,e.U.k(n),L))})},C.prototype.forEach=C.prototype.forEach,C.prototype.pd=function(){return D("Firebase.DataSnapshot.hasChildren",0,0,arguments.length),this.D.P()?!1:!this.D.e()},C.prototype.hasChildren=C.prototype.pd,C.prototype.name=function(){return z("Firebase.DataSnapshot.name() being deprecated. Please use Firebase.DataSnapshot.key() instead."),D("Firebase.DataSnapshot.name",0,0,arguments.length),this.key()},C.prototype.name=C.prototype.name,C.prototype.key=function(){return D("Firebase.DataSnapshot.key",0,0,arguments.length),this.U.key()},C.prototype.key=C.prototype.key,C.prototype.Ua=function(){return D("Firebase.DataSnapshot.numChildren",0,0,arguments.length),this.D.Ua()},C.prototype.numChildren=C.prototype.Ua,C.prototype.hc=function(){return D("Firebase.DataSnapshot.ref",0,0,arguments.length),this.U},C.prototype.ref=C.prototype.hc,td.prototype.Td=function(t){for(var e=this.Gc[t]||[],n=0;n<e.length;n++)e[n].sc.apply(e[n].Ha,Array.prototype.slice.call(arguments,1))},td.prototype.zb=function(t,e,n){ud(this,t),this.Gc[t]=this.Gc[t]||[],this.Gc[t].push({sc:e,Ha:n}),(t=this.pe(t))&&e.apply(n,t)},td.prototype.bc=function(t,e,n){ud(this,t),t=this.Gc[t]||[];for(var r=0;r<t.length;r++)if(t[r].sc===e&&(!n||n===t[r].Ha)){t.splice(r,1);break}},na(vd,td),ca(vd),vd.prototype.pe=function(t){return x("visible"===t,"Unknown event type: "+t),[this.qc]},na(wd,td),ca(wd),wd.prototype.pe=function(t){return x("online"===t,"Unknown event type: "+t),[this.Lc]};var Dd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");Fd.prototype.get=function(){return od(this.wc)},Hd.prototype.get=function(){var t=this.Kf.get(),e=od(t);if(this.vd)for(var n in this.vd)e[n]-=this.vd[n];return this.vd=t,e},Id.prototype.nf=function(){var t,e=this.Nd.get(),n={},r=!1;for(t in e)0<e[t]&&u(this.uf,t)&&(n[t]=e[t],r=!0);r&&(e=this.S,e.ia&&(n={c:n},e.f("reportStats",n),e.wa("s",n))),setTimeout(q(this.nf,this),Math.floor(6e5*Math.random()))};var Jd={},Kd={},Nd=null;"undefined"!=typeof MozWebSocket?Nd=MozWebSocket:"undefined"!=typeof WebSocket&&(Nd=WebSocket);var Pd;Od.prototype.open=function(t,e){this.fb=e,this.cg=t,this.f("Websocket connecting to "+this.Za),this.zc=!1,Aa.set("previous_websocket_failure",!0);try{this.oa=new Nd(this.Za)}catch(n){this.f("Error instantiating WebSocket.");var r=n.message||n.data;return r&&this.f(r),void this.eb()}var i=this;this.oa.onopen=function(){i.f("Websocket connected."),i.zc=!0},this.oa.onclose=function(){i.f("Websocket connection was disconnected."),i.oa=null,i.eb()},this.oa.onmessage=function(t){if(null!==i.oa)if(t=t.data,i.kb+=t.length,Gd(i.Qa,"bytes_received",t.length),Qd(i),null!==i.frames)Rd(i,t);else{t:{if(x(null===i.frames,"We already have a frame buffer"),6>=t.length){var e=Number(t);if(!isNaN(e)){i.Oe=e,i.frames=[],t=null;break t}}i.Oe=1,i.frames=[]}null!==t&&Rd(i,t)}},this.oa.onerror=function(t){i.f("WebSocket error.  Closing connection."),(t=t.message||t.data)&&i.f(t),i.eb()}},Od.prototype.start=function(){},Od.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&4.4>parseFloat(e[1])&&(t=!0)}return!t&&null!==Nd&&!Pd},Od.responsesRequiredToBeHealthy=2,Od.healthyTimeout=3e4,h=Od.prototype,h.wd=function(){Aa.remove("previous_websocket_failure")},h.send=function(e){Qd(this),e=t(e),this.lb+=e.length,Gd(this.Qa,"bytes_sent",e.length),e=Bb(e,16384),1<e.length&&this.oa.send(String(e.length));for(var n=0;n<e.length;n++)this.oa.send(e[n])},h.Yc=function(){this.ub=!0,this.Cc&&(clearInterval(this.Cc),this.Cc=null),this.oa&&(this.oa.close(),this.oa=null)},h.eb=function(){this.ub||(this.f("WebSocket is closing itself"),this.Yc(),this.fb&&(this.fb(this.zc),this.fb=null))},h.close=function(){this.ub||(this.f("WebSocket is being closed"),this.Yc())},h=Vd.prototype,h.add=function(t,e){this.set[t]=null!==e?e:!0},h.contains=function(t){return u(this.set,t)},h.get=function(t){return this.contains(t)?this.set[t]:void 0},h.remove=function(t){delete this.set[t]},h.clear=function(){this.set={}},h.e=function(){return Bd(this.set)},h.count=function(){return Kb(this.set)};var Yd,Zd;Xd.prototype.open=function(t,e){this.Ue=0,this.ea=e,this.gf=new Sd(t),this.ub=!1;var n=this;this.ob=setTimeout(function(){n.f("Timed out trying to connect."),n.eb(),n.ob=null},Math.floor(3e4)),wb(function(){if(!n.ub){n.Na=new $d(function(t,e,r){if(ae(n,arguments),n.Na)if(n.ob&&(clearTimeout(n.ob),n.ob=null),n.zc=!0,"start"==t)n.id=e,n.mf=r;else{if("close"!==t)throw Error("Unrecognized command received: "+t);e?(n.Na.Jd=!1,Td(n.gf,e,function(){n.eb()})):n.eb()}},function(t,e){ae(n,arguments),Ud(n.gf,t,e)},function(){n.eb()},n.bd);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.Na.Ud&&(t.cb=n.Na.Ud),t.v="5",n.Kd&&(t.s=n.Kd),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f"),t=n.bd(t),n.f("Connecting via long-poll to "+t),be(n.Na,t,function(){})}})},Xd.prototype.start=function(){var t=this.Na,e=this.mf;for(t.Xf=this.id,t.Yf=e,t.Zd=!0;ce(t););t=this.id,e=this.mf,this.$b=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.$b.src=this.bd(n),this.$b.style.display="none",document.body.appendChild(this.$b)},Xd.isAvailable=function(){return!(Zd||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.zg)},h=Xd.prototype,h.wd=function(){},h.Yc=function(){this.ub=!0,this.Na&&(this.Na.close(),this.Na=null),this.$b&&(document.body.removeChild(this.$b),this.$b=null),this.ob&&(clearTimeout(this.ob),this.ob=null)},h.eb=function(){this.ub||(this.f("Longpoll is closing itself"),this.Yc(),this.ea&&(this.ea(this.zc),this.ea=null))},h.close=function(){this.ub||(this.f("Longpoll is being closed."),this.Yc())},h.send=function(e){e=t(e),this.lb+=e.length,Gd(this.Qa,"bytes_sent",e.length),e=mb(e),e=fb(e,!0),e=Bb(e,1840);for(var n=0;n<e.length;n++){var r=this.Na;r.Qc.push({og:this.Ue,wg:e.length,We:e[n]}),r.Zd&&ce(r),this.Ue++}},$d.prototype.close=function(){if(this.Zd=!1,this.va){this.va.$a.body.innerHTML="";var t=this;setTimeout(function(){null!==t.va&&(document.body.removeChild(t.va),t.va=null)},Math.floor(0))}var e=this.fb;e&&(this.fb=null,e())};var ge=[Xd,Od];ie.prototype.wa=function(t){te(this,{t:"d",d:t})},ie.prototype.Bd=function(t){qe(this),this.cc(t)},ie.prototype.close=function(){2!==this.Pa&&(this.f("Closing realtime connection."),this.Pa=2,pe(this),this.ea&&(this.ea(),this.ea=null))};var ye=0,Ae=0;h=xe.prototype,h.wa=function(e,n,r){var i=++this.ng;e={r:i,a:e,b:n},this.f(t(e)),x(this.ia,"sendRequest call when we're not connected not allowed."),this.La.wa(e),r&&(this.Tc[i]=r)
},h.T=function(t,e,n){this.Lb={Mf:t,Ye:!1,sc:e,cd:n},this.f("Authenticating using credential: "+t),Ee(this),(e=40==t.length)||(t=ue(t).fe,e="object"==typeof t&&!0===v(t,"admin")),e&&(this.f("Admin auth credential detected.  Reducing max reconnect time."),this.xd=3e4)},h.Pe=function(t){delete this.Lb,this.ia&&this.wa("unauth",{},function(e){t(e.s,e.d)})},h.Ce=function(t,e){this.ia?Ge(this,"oc",t,null,e):this.Jc.push({Pc:t,action:"oc",data:null,H:e})},h.put=function(t,e,n,r){Ie(this,"p",t,e,n,r)},h.Bd=function(e){if("r"in e){this.f("from server: "+t(e));var n=e.r,r=this.Tc[n];r&&(delete this.Tc[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&(n=e.a,r=e.b,this.f("handleServerMessage",n,r),"d"===n?this.Cd(r.p,r.d,!1,r.t):"m"===n?this.Cd(r.p,r.d,!0,r.t):"c"===n?Me(this,r.p,r.q):"ac"===n?(e=r.s,n=r.d,r=this.Lb,delete this.Lb,r&&r.cd&&r.cd(e,n)):"sd"===n?this.Ke?this.Ke(r):"msg"in r&&"undefined"!=typeof console&&console.log("FIREBASE: "+r.msg.replace("\n","\nFIREBASE: ")):sb("Unrecognized action received from server: "+t(n)+"\nAre you using the latest client?"))}},h.Kc=function(t){this.f("connection ready"),this.ia=!0,this.Dc=(new Date).getTime(),this.Ee({serverTimeOffset:t-(new Date).getTime()}),Ne(this),this.Ad(!0)},h.fg=function(t){t&&!this.qc&&this.Va===this.xd&&(this.f("Window became visible.  Reducing delay."),this.Va=1e3,this.La||ze(this,0)),this.qc=t},h.dg=function(t){t?(this.f("Browser went online.  Reconnecting."),this.Va=1e3,this.Eb=!0,this.La||ze(this,0)):(this.f("Browser went offline.  Killing connection; don't reconnect."),this.Eb=!1,this.La&&this.La.close())},h.jf=function(){this.f("data client disconnected"),this.ia=!1,this.La=null;for(var t=0;t<this.la.length;t++){var e=this.la[t];e&&"h"in e.of&&e.lg&&(e.H&&e.H("disconnect"),delete this.la[t],this.Nc--)}if(0===this.Nc&&(this.la=[]),this.Eb)this.qc?this.Dc&&(3e4<(new Date).getTime()-this.Dc&&(this.Va=1e3),this.Dc=null):(this.f("Window isn't visible.  Delaying reconnect."),this.Va=this.xd,this.ue=(new Date).getTime()),t=Math.max(0,this.Va-((new Date).getTime()-this.ue)),t*=Math.random(),this.f("Trying to reconnect in "+t+"ms"),ze(this,t),this.Va=Math.min(this.xd,1.3*this.Va);else for(var n in this.Tc)delete this.Tc[n];this.Ad(!1)},h.tb=function(){this.Eb=!1,this.La?this.La.close():(this.Nb&&(clearTimeout(this.Nb),this.Nb=null),this.ia&&this.jf())},h.kc=function(){this.Eb=!0,this.Va=1e3,this.La||ze(this,0)},Pe.prototype.ic=function(t,e){if(t.e())this.A=e,this.j=null;else if(null!==this.A)this.A=this.A.L(t,e);else{null==this.j&&(this.j=new Vd);var n=G(t);this.j.contains(n)||this.j.add(n,new Pe),n=this.j.get(n),t=R(t),n.ic(t,e)}},Pe.prototype.ca=function(t){null!==this.j&&Wd(this.j,function(e,n){t(e,n)})},Se.prototype.toString=function(){return this.Wc.toString()},Ve.prototype.add=function(t){this.od.push(t)},Ve.prototype.Rb=function(){return this.Ca};var Ye="auth.firebase.com",$e=["remember","redirectTo"],bf={NETWORK_ERROR:"Unable to contact the Firebase server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};mf.prototype.open=function(e,n,r){function i(){r&&(r(V("REQUEST_INTERRUPTED")),r=null)}var o,s=new XMLHttpRequest,a=this.options.method.toUpperCase();if(df(window,"beforeunload",i),s.onreadystatechange=function(){if(r&&4===s.readyState){var t;if(200<=s.status&&300>s.status){try{t=ua(s.responseText)}catch(e){}r(null,t)}else r(500<=s.status&&600>s.status?V("SERVER_ERROR"):V("NETWORK_ERROR"));r=null,ef(window,"beforeunload",i)}},"GET"===a)e+=(/\?/.test(e)?"":"?")+hf(n),o=null;else{var u=this.options.headers.content_type;"application/json"===u&&(o=t(n)),"application/x-www-form-urlencoded"===u&&(o=hf(n))}s.open(a,e,!0),e={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"},Ed(e,this.options.headers);for(var c in e)s.setRequestHeader(c,e[c]);s.send(o)},mf.isAvailable=function(){return!!window.XMLHttpRequest&&"string"==typeof(new XMLHttpRequest).responseType&&(!(navigator.userAgent.match(/MSIE/)||navigator.userAgent.match(/Trident/))||lf())},mf.prototype.uc=function(){return"json"},nf.prototype.open=function(t,e,n){function r(){n&&(n(V("USER_CANCELLED")),n=null)}var i,o=this,s=ub(Ye);e.requestId=this.Uc,e.redirectTo=s.scheme+"://"+s.host+"/blank/page.html",t+=/\?/.test(t)?"":"?",t+=hf(e),(i=window.open(t,"_blank","location=no"))&&ha(i.addEventListener)?(i.addEventListener("loadstart",function(t){var e;if(e=t&&t.url)t:{var s=t.url;try{var a=document.createElement("a");a.href=s,e=a.host===ub(Ye).host&&"/blank/page.html"===a.pathname;break t}catch(u){}e=!1}e&&(t=gf(t.url),i.removeEventListener("exit",r),i.close(),t=new Ze(null,null,{requestId:o.Uc,requestKey:t}),o.kf.requestWithCredential("/auth/session",t,n),n=null)}),i.addEventListener("exit",r)):n(V("TRANSPORT_UNAVAILABLE"))},nf.isAvailable=function(){return kf()},nf.prototype.uc=function(){return"redirect"},of.prototype.open=function(e,n,r){function i(t){if(s&&(document.body.removeChild(s),s=void 0),h&&(h=clearInterval(h)),ef(window,"message",o),ef(window,"unload",i),l&&!t)try{l.close()}catch(e){a.postMessage("die",c)}l=a=void 0}function o(t){if(t.origin===c)try{var e=ua(t.data);"ready"===e.a?a.postMessage(f,c):"error"===e.a?(i(!1),r&&(r(e.d),r=null)):"response"===e.a&&(i(e.forceKeepWindowOpen),r&&(r(null,e.d),r=null))}catch(n){}}var s,a,u=lf(),c=ff(e);if(c!==ff(this.options.relay_url))r&&setTimeout(function(){r(Error("invalid arguments: origin of url and relay_url must match"))},0);else{u&&(s=document.createElement("iframe"),s.setAttribute("src",this.options.relay_url),s.style.display="none",s.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(s),a=s.contentWindow),e+=(/\?/.test(e)?"":"?")+hf(n);var l=window.open(e,this.options.window_name,this.options.window_features);a||(a=l);var h=setInterval(function(){l&&l.closed&&(i(!1),r&&(r(V("USER_CANCELLED")),r=null))},500),f=t({a:"request",d:n});df(window,"unload",i),df(window,"message",o)}},of.isAvailable=function(){return"postMessage"in window&&!/^file:\//.test(location.href)&&!(kf()||navigator.userAgent.match(/Windows Phone/)||window.Windows&&/^ms-appx:/.test(location.href)||navigator.userAgent.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)||navigator.userAgent.match(/CriOS/)||navigator.userAgent.match(/Twitter for iPhone/)||navigator.userAgent.match(/FBAN\/FBIOS/)||window.navigator.standalone)&&!navigator.userAgent.match(/PhantomJS/)},of.prototype.uc=function(){return"popup"},pf.prototype.open=function(t,e,n){function r(){n&&(n(V("REQUEST_INTERRUPTED")),n=null)}function i(){setTimeout(function(){window.__firebase_auth_jsonp[o]=void 0,Bd(window.__firebase_auth_jsonp)&&(window.__firebase_auth_jsonp=void 0);try{var t=document.getElementById(o);t&&t.parentNode.removeChild(t)}catch(e){}},1),ef(window,"beforeunload",r)}var o="fn"+(new Date).getTime()+Math.floor(99999*Math.random());e[this.options.callback_parameter]="__firebase_auth_jsonp."+o,t+=(/\?/.test(t)?"":"?")+hf(e),df(window,"beforeunload",r),window.__firebase_auth_jsonp[o]=function(t){n&&(n(null,t),n=null),i()},qf(o,t,n)},pf.isAvailable=function(){return!kf()},pf.prototype.uc=function(){return"json"},rf.prototype.set=function(t,e){if(!e){if(!this.Pd.length)throw Error("fb.login.SessionManager : No storage options available!");e=this.Pd[0]}e.set(this.Ge,t)},rf.prototype.get=function(){var t=La(this.Pd,q(this.Tf,this)),t=Ka(t,function(t){return null!==t});return Ta(t,function(t,e){return ve(e.token)-ve(t.token)}),0<t.length?t.shift():null},rf.prototype.Tf=function(t){try{var e=t.get(this.Ge);if(e&&e.token)return e}catch(n){}return null},rf.prototype.clear=function(){var t=this;Ja(this.Pd,function(e){e.remove(t.Ge)})},sf.prototype.open=function(t,e){Ba.set("redirect_request_id",this.Uc),e.requestId=this.Uc,e.redirectTo=e.redirectTo||window.location.href,t+=(/\?/.test(t)?"":"?")+hf(e),window.location=t},sf.isAvailable=function(){return!/^file:\//.test(location.href)&&!kf()},sf.prototype.uc=function(){return"redirect"},na(tf,td),h=tf.prototype,h.ne=function(){return this.jb||null},h.je=function(t,e){Cf(this);var n=af(t);n.lc._method="POST",this.Vc("/users",n,function(t,n){t?B(e,t):B(e,t,n)})},h.Ie=function(t,e){var n=this;Cf(this);var r="/users/"+encodeURIComponent(t.email),i=af(t);i.lc._method="DELETE",this.Vc(r,i,function(t,r){!t&&r&&r.uid&&n.jb&&n.jb.uid&&n.jb.uid===r.uid&&Af(n),B(e,t)})},h.ee=function(t,e){Cf(this);var n="/users/"+encodeURIComponent(t.email)+"/password",r=af(t);r.lc._method="PUT",r.lc.password=t.newPassword,this.Vc(n,r,function(t){B(e,t)})},h.Je=function(t,e){Cf(this);var n="/users/"+encodeURIComponent(t.email)+"/password",r=af(t);r.lc._method="POST",this.Vc(n,r,function(t){B(e,t)})},h.Vc=function(t,e,n){Ff(this,[mf,pf],t,e,n)},h.pe=function(t){return x("auth_status"===t,'initial event must be of type "auth_status"'),[this.jb]};var Kf=new Jf;Jf.prototype.kd=function(t,e,n,r){return(t=X(t))&&t.Y(n)?(t=t.B(n),n=t.ja(r)?[]:r.e()?[new W("child_removed",t,n)]:[new W("child_changed",r,n,t)]):n=r.e()?[]:[new W("child_added",r,n)],0<n.length&&e.u&&n.push(new W("value",X(e))),n},na(Of,Jf),Of.prototype.kd=function(t,e,n,r){var i=X(t)||K,o=X(e)||K;if(i.Ua()<this.bb||o.Ua()<this.bb)return Of.oc.kd.call(this,t,e,n,r);x(!i.P()&&!o.P(),"If it's a leaf node, we should have hit the above case."),t=[];var s=i.B(n);return s.e()?o.Y(n)&&(i=this.Ma?ld(i,this.m):md(i,this.m),t.push(new W("child_removed",i.K,i.name)),t.push(new W("child_added",r,n))):o.Y(n)?r.ja(s)||t.push(new W("child_changed",r,n,i.B(n))):(t.push(new W("child_removed",s,n)),i=this.Ma?ld(o,this.m):md(o,this.m),t.push(new W("child_added",i.K,i.name))),0<t.length&&e.u&&t.push(new W("value",o)),t},h=Pf.prototype,h.Xa=function(t,e,n,r){var i;if(e.type===Qf)return e.source.$e?this.Fa(t,e.path,e.Oa,n,r):(x(e.source.Ze,"Unknown source."),i=e.source.wf,this.Sa(t,e.path,e.Oa,n,r,i));if(e.type===Rf)return e.source.$e?this.ae(t,e.path,e.children,n,r):(x(e.source.Ze,"Unknown source."),i=e.source.wf,this.$d(t,e.path,e.children,n,r,i));if(e.type===Sf){if(e.sf)t:{var o=e.path;if(Tf(this,t),e=t.u,i=t.X,t.F){x(t.u,"Must have event snap if we have server snap");var s=n.Ya(o,t.u,t.F);if(s){if(e=t.u.L(o,s),!o.e()){i=G(o),e=e.B(i),t=this.Ra(t,i,e,t.F,t.o,n,r);break t}e=this.G(e)}}else if(t.o)t.u?(r=n.Ob())?e=this.G(r):(n=n.Ya(o,t.u,t.o))&&(e=this.G(e.L(o,n))):(x(t.X,"We must at least have complete children"),x(!o.e(),"If the path were empty, we would have an event snap from the set"),(n=n.Ya(o,t.X,t.o))&&(i=t.X.L(o,n),i=this.G(i)));else if(t.u)(n=n.Ob())&&(e=this.G(n));else if(t.X){if(x(!o.e(),"If the path was empty, we would have an event snap"),s=G(o),t.X.Y(s)){t=(e=n.Ib.Ob(n.Gb.k(s)))?this.Ra(t,s,e,t.F,t.o,n,r):this.Ra(t,s,K,t.F,t.o,n,null);break t}x(1<Q(o),"Must be a deep set being reverted")}t=new Uf(t.F,t.o,e,i)}else t=this.Ea(t,e.path,n,r);return t}if(e.type===Vf)return e=e.path,Tf(this,t),this.Sa(t,e,(t.ab()||K).da(e),n,r,!1);throw ib("Unknown operation type: "+e.type)},h.Fa=function(t,e,n,r,i){if(Tf(this,t),e.e())return e=this.G(n),new Uf(t.F,t.o,e,null);var o=X(t)||K,s=G(e);return 1===Q(e)||t.u||o.Y(s)?(n=o.B(G(e)).L(R(e),n),this.Ra(t,G(e),n,t.F,t.o,r,i)):t},h.ae=function(t,e,n,r,i){Tf(this,t);var o=this,s=t;return Xf(n,function(n,a){var u=e.k(n);Yf(t,G(u))&&(s=o.Fa(s,u,a,r,i))}),Xf(n,function(n,a){var u=e.k(n);Yf(t,G(u))||(s=o.Fa(s,u,a,r,i))}),s},h.Ea=function(t,e,n,r){var i,o=t.u,s=t.X;if(Tf(this,t),t.F){x(o,"If we have a server snap, we must have an event snap");var a=n.Ya(e,t.u,t.F);if(a){if(!e.e())return i=G(e),e=o.L(e,a).B(i),this.Ra(t,i,e,t.F,t.o,n,r);o=this.G(a)}}else if(t.o)if(o){var u=!1;t.o.ca(L,function(t,e){u||o.B(t).ja(e)||(u=!0),u&&(o=o.I(t,e))}),u&&(o=this.G(o))}else if(s&&(x(0<Q(e),"If it were an empty path, we would have an event snap"),i=G(e),1===Q(e)||s.Y(i))&&(a=n.Ya(e,s,t.o)))return e=s.L(e,a).B(i),this.Ra(t,i,e,t.F,t.o,n,r);return new Uf(t.F,t.o,o,s)},h.Sa=function(t,e,n,r,i,o){var s;Tf(this,t);var a=t.F,u=t.o;if(t.F)a=e.e()?this.G(n,o):this.G(t.F.L(e,n),o);else if(e.e())a=this.G(n,o),u=null;else if(1!==Q(e)||!t.o&&n.e()){if(t.o&&(s=G(e),t.o.Y(s)))var c=t.o.B(s).L(R(e),n),u=this.G(t.o.I(s,c),o)}else u=t.o||this.Ia(K),u=this.G(u.L(e,n),o);if(s=!1,o=t.u,c=t.X,a!==t.F||u!==t.o)if(a&&!o)o=this.G(r.xa(a)),c=null;else if(a&&o&&!n.e()&&a.da(e).ja(o.da(e)))s=!0;else if(n=r.Ya(e,o,a||u)){if(!e.e()){s=G(e),e=R(e);t:{if(o=s,t.u)c=t.u.B(o);else if(t.X)t.X.Y(o)?c=t.X.B(o):(x(e.e(),"According to precondition, this must be true"),c=K);else{if(e.e()){c=n;break t}x(t.F||t.o,"If we do not have event data, we must have server data"),c=(t.F||t.o).B(o)}c=c.e()&&t.ab()?t.ab().B(o).L(e,n):c.L(e,n)}return this.Ra(t,s,c,a,u,r,i)}o=this.G(n),c=null}else s=!0;return x(!s||o===t.u&&c===t.X,"We thought we could skip diffing, but we changed the eventCache."),new Uf(a,u,o,c)},h.$d=function(t,e,n,r,i,o){if(!t.F&&!t.o&&e.e())return t;Tf(this,t);var s=this,a=t;return Xf(n,function(n,u){var c=e.k(n);Yf(t,G(c))&&(a=s.Sa(a,c,u,r,i,o))}),Xf(n,function(n,u){var c=e.k(n);Yf(t,G(c))||(a=s.Sa(a,c,u,r,i,o))}),a},h.Ra=function(t,e,n,r,i){var o=t.u;return t=t.X,o?o=this.G(o.I(e,n)):(t||(t=this.Ia(K)),t=this.G(t.I(e,n))),new Uf(r,i,o,t)},h.G=function(t){return this.Ia(t)},na(Zf,Pf),Zf.prototype.Ia=function(t){return t.Wd(this.index)},Zf.prototype.Yb=function(t){return t.Yb(this.index)},Zf.prototype.G=function(t,e){if(!1===e)return Zf.oc.G.call(this,t,!1);if(t.P())return this.Ia(K);for(var n=this.Ia(t),r=this.Fb,i=this.pb,o=H(this.index),s=n.Aa(this.index),a=U(s);a&&0<o(r,a);)n=n.I(a.name,K),a=U(s);for(s=n.rb(i,this.index),(a=U(s))&&0>=o(a,i)&&(a=U(s));a;)n=n.I(a.name,K),a=U(s);return n},Zf.prototype.Fa=function(t,e,n,r,i){if(Tf(this,t),1<Q(e)){var o=G(e);if((null!==X(t)?X(t):K).Y(o))return Zf.oc.Fa.call(this,t,e,n,r,i);var s=null!==i?i:t.ab(),s=null!==s&&s.Y(o)?s.B(o):null,s=r.k(o).xa(s);return null!==s?(e=s.L(R(e),n),this.Ra(t,o,e,t.F,t.o,r,i)):t}return Zf.oc.Fa.call(this,t,e,n,r,i)},na($f,Zf),$f.prototype.G=function(t,e){if(!1===e)return $f.oc.G.call(this,t,!1);if(t.P())return this.Ia(K);var n,r,i,o,s=this.Ia(t);if(2*this.bb<t.Ua())for(n=this.Ia(K.ib(t.O())),s=this.Ma?s.Sb(this.pb,this.index):s.rb(this.Fb,this.index),r=U(s),i=0;r&&i<this.bb&&(o=this.Ma?0>=H(this.index)(this.Fb,r):0>=H(this.index)(r,this.pb));)n=n.I(r.name,r.K),i++,r=U(s);else{n=this.Ia(t);var a,u,c=H(this.index);if(this.Ma){s=s.bf(this.index),a=this.pb,u=this.Fb;var l=c,c=function(t,e){return-1*l(t,e)}}else s=s.Aa(this.index),a=this.Fb,u=this.pb;i=0;var h=!1;for(r=U(s);r;)!h&&0>=c(a,r)&&(h=!0),(o=h&&i<this.bb&&0>=c(r,u))?i++:n=n.I(r.name,K),r=U(s)}return n},$f.prototype.Ra=function(t,e,n,r,i,o,s){var a=X(t);return!a||a.Ua()<this.bb?$f.oc.Ra.call(this,t,e,n,r,i,o,s):(e=ag(this,t,e,n,o,s||r))?t.u?new Uf(r,i,e,null):new Uf(r,i,null,e):new Uf(r,i,t.u,t.X)},na(bg,Pf),bg.prototype.Ia=function(t){return t.Wd(this.m)},bg.prototype.Yb=function(t){return t.Yb(this.m)},cg.prototype.Lf=function(t,e){if(null==t.nb||null==e.nb)throw ib("Should only compare child_ events.");return this.m.compare(new I(t.nb,t.Wa),new I(e.nb,e.Wa))},h=gg.prototype,h.ab=function(){return this.ha.ab()},h.za=function(t){var e=this.ha.za();return e&&(wc(this.U.w)||!t.e()&&!e.B(G(t)).e())?e.da(t):null},h.e=function(){return 0===this.ya.length},h.Jb=function(t){this.ya.push(t)},h.hb=function(t,e){var n=[];if(e){x(null==t,"A cancel should cancel all event registrations.");var r=this.U.path;Ja(this.ya,function(t){(t=t.Te(e,r))&&n.push(t)})}if(t){for(var i=[],o=0;o<this.ya.length;++o){var s=this.ya[o];if(s.matches(t)){if(t.cf()){i=i.concat(this.ya.slice(o+1));break}}else i.push(s)}this.ya=i}else this.ya=[];return n},h.Xa=function(t,e,n){t.type===Rf&&null!==t.source.fc&&(x(this.ha.za(),"We should always have a full cache before handling merges"),x(!!this.ha.u,"Missing event cache, even though we have a server cache"));var r=this.ha;return e=this.ec.Xa(r,t,e,n),Tf(this.ec,e),this.ha=e,X(e)!==X(r)?(t=Lf(this.ld,r,e,t.path),r=X(e),dg(this.le,t,r,this.ya)):e.u&&!r.u?(x(X(e)===X(r),"Caches should be the same."),r=X(e),dg(this.le,[new W("value",r)],r,this.ya)):[]},Uf.prototype.ab=function(){return this.F||this.o},Uf.prototype.za=function(){return this.F};var ig=new Uf(null,null,null,null),kg=new Lc(function(t,e){return t===e?0:e>t?-1:1}),lg=new jg(null);h=jg.prototype,h.e=function(){return null===this.value&&this.children.e()},h.subtree=function(t){if(t.e())return this;var e=this.children.get(G(t));return null!==e?e.subtree(R(t)):lg},h.set=function(t,e){if(t.e())return new jg(e,this.children);var n=G(t),r=(this.children.get(n)||lg).set(R(t),e),n=this.children.Ja(n,r);return new jg(this.value,n)},h.remove=function(t){if(t.e())return this.children.e()?lg:new jg(null,this.children);var e=G(t),n=this.children.get(e);return n?(t=n.remove(R(t)),e=t.e()?this.children.remove(e):this.children.Ja(e,t),null===this.value&&e.e()?lg:new jg(this.value,e)):this},h.get=function(t){if(t.e())return this.value;var e=this.children.get(G(t));return e?e.get(R(t)):null},h=yg.prototype,h.e=function(){return Bd(this.qa)},h.Xa=function(t,e,n){var r=t.source.fc;if(null!==r)return r=v(this.qa,r),x(null!=r,"SyncTree gave us an op for an invalid query."),r.Xa(t,e,n);var i=[];return A(this.qa,function(r){i=i.concat(r.Xa(t,e,n))}),i},h.Jb=function(t,e,n,r,i){var o=t.Da(),s=v(this.qa,o);return s||(n=(s=n.xa(r))?null:n.ce(i),r=new Uf(r,i,s,n),s=new gg(t,r),this.qa[o]=s),s.Jb(e),t=s,(o=X(t.ha))?(r=Lf(t.ld,ig,t.ha,S),e=dg(t.le,r,o,e?[e]:t.ya)):e=[],e},h.hb=function(t,e,n){var r=t.Da(),i=[],o=[],s=null!=zg(this);if("default"===r){var a=this;A(this.qa,function(t,r){o=o.concat(t.hb(e,n)),t.e()&&(delete a.qa[r],wc(t.U.w)||i.push(t.U))})}else{var u=v(this.qa,r);u&&(o=o.concat(u.hb(e,n)),u.e()&&(delete this.qa[r],wc(u.U.w)||i.push(u.U)))}return s&&null==zg(this)&&i.push(new O(t.g,t.path)),{mg:i,Pf:o}},h.za=function(t){var e=null;return A(this.qa,function(n){e=e||n.za(t)}),e},h=Cg.prototype,h.Ob=function(t){var e=og(this.V,t);if(e){var n=e.value;return t=T(e.path,t),n.da(t)}return null},h.xa=function(t,e,n,r){var i,o;return n||r?(i=this.V.subtree(t),!r&&i.e()?e:r||null!==e||null!==i.value?(i=Gg(this.ra,function(e){return!(!e.visible&&!r||n&&0<=Ia(n,e.Xd)||!e.path.contains(t)&&!t.contains(e.path))},t),o=e||K,Xf(i,function(t,e){o=o.L(t,e)}),o):null):(i=og(this.V,t))?(e=T(i.path,t),i.value.da(e)):(i=this.V.subtree(t),i.e()?e:e||i.value?(o=e||K,Xf(i,function(t,e){o=o.L(t,e)}),o):null)},h.ce=function(t,e){var n=!1,r=K,i=this.Ob(t);return i?(i.P()||i.ca(L,function(t,e){r=r.I(t,e)}),r):e?(r=e,xg(this.V.subtree(t),function(t,e){r=r.I(t,e)}),r):(xg(this.V.subtree(t),function(t,e){n=!0,r=r.I(t,e)}),n?r:null)},h.Ya=function(t,e,n,r){if(x(n||r,"Either existingEventSnap or existingServerSnap must exist"),t=t.k(e),og(this.V,t))return null;if(t=this.V.subtree(t),t.e())return r.da(e);var i=r.da(e);return Xf(t,function(t,e){i=i.L(t,e)}),i},h.de=function(t,e,n,r,i,o){var s;if(t=this.V.subtree(t),t.value?s=t.value:e&&(s=e,Xf(t,function(t,e){s=s.L(t,e)})),s){for(e=[],s=s.Wd(o),t=H(o),i=i?s.Sb(n,o):s.rb(n,o),o=U(i);o&&e.length<r;)0!==t(o,n)&&e.push(o),o=U(i);return e}return[]},h=Kg.prototype,h.Ob=function(){return this.Ib.Ob(this.Gb)},h.xa=function(t,e,n){return this.Ib.xa(this.Gb,t,e,n)},h.ce=function(t){return this.Ib.ce(this.Gb,t)},h.Ya=function(t,e,n){return this.Ib.Ya(this.Gb,t,e,n)},h.de=function(t,e,n,r,i){return this.Ib.de(this.Gb,t,e,n,r,i)},h.k=function(t){return new Kg(this.Gb.k(t),this.Ib)},Lg.prototype.Mc=function(t){return this.path.e()?new Lg(this.source,S,this.Oa.B(t)):new Lg(this.source,R(this.path),this.Oa)},Mg.prototype.Mc=function(){return this.path.e()?this:new Mg(R(this.path),this.sf)},Og.prototype.Mc=function(){return this.path.e()?new Og(this.source,S):new Og(this.source,R(this.path))},Pg.prototype.Mc=function(t){return this.path.e()?(t=this.children.subtree(new P(t)),t.e()?null:t.value?new Lg(this.source,S,t.value):new Pg(this.source,S,t)):(x(G(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Pg(this.source,R(this.path),this.children))};var Qf=0,Rf=1,Sf=2,Vf=3,Ng=new Qg(!0,!1,null,!1),Rg=new Qg(!1,!0,null,!1);h=Sg.prototype,h.Fa=function(t,e,r,i){var o=this.Bb,s=i;return x(r>o.Ec,"Stacking an older write on top of newer ones"),n(s)||(s=!0),o.ra.push({path:t,Oa:e,Xd:r,visible:s}),s&&(o.V=Ig(o.V,t,e)),o.Ec=r,i?Tg(this,new Lg(Ng,t,e)):[]},h.ae=function(t,e,n){var r=this.Bb;return x(n>r.Ec,"Stacking an older merge on top of newer ones"),r.ra.push({path:t,children:e,Xd:n,visible:!0}),r.V=Jg(r.V,t,e),r.Ec=n,e=mg(e),Tg(this,new Pg(Ng,t,e))},h.Ea=function(t,e){e=e||!1;var n=Dg(this.Bb,t);return null==n?[]:Tg(this,new Mg(n,e))},h.Sa=function(t,e){return Tg(this,new Lg(Rg,t,e))},h.$d=function(t,e){var n=mg(e);return Tg(this,new Pg(Rg,t,n))},h.Jb=function(t,e){var n=t.path,r=null,i=!1;ug(this.ma,n,function(t,e){var o=T(t,n);return r=e.za(o),i=i||null!=zg(e),!r});var o=this.ma.get(n);o?(i=i||null!=zg(o),r=r||o.za(S)):(o=new yg,this.ma=this.ma.set(n,o));var s=null;if(!r){var a=!1,s=K;xg(this.ma.subtree(n),function(t,e){var n=e.za(S);n&&(a=!0,s=s.I(t,n))}),a||(s=null)}var u=null!=Bg(o,t);if(!u&&!wc(t.w)){var c=Yg(t);x(!(c in this.gc),"View does not exist, but we have a tag");var l=Zg++;this.gc[c]=l,this.Zc["_"+l]=c}return c=o.Jb(t,e,new Kg(n,this.Bb),r,s),u||i||(o=Bg(o,t),c=c.concat($g(this,t,o))),c},h.hb=function(t,e,n){var r=t.path,i=this.ma.get(r),o=[];if(i&&("default"===t.Da()||null!=Bg(i,t))){o=i.hb(t,e,n),i.e()&&(this.ma=this.ma.remove(r)),i=o.mg,o=o.Pf,e=-1!==Pa(i,function(t){return wc(t.w)});var s=sg(this.ma,r,function(t,e){return null!=zg(e)});if(e&&!s&&(r=this.ma.subtree(r),!r.e()))for(var r=ah(r),a=0;a<r.length;++a){var u=r[a],c=u.U,u=bh(this,u);this.Fc.Le(c,ch(this,c),u.qd,u.H)}if(!s&&0<i.length&&!n)if(e)this.Fc.Od(t,null);else{var l=this;Ja(i,function(t){t.Da();var e=l.gc[Yg(t)];l.Fc.Od(t,e)})}dh(this,i)}return o},h.xa=function(t,e){var n=this.Bb,r=sg(this.ma,t,function(e,n){var r=T(e,t);return(r=n.za(r))?r:void 0});return n.xa(t,r,e,!0)};var Zg=1;h=gh.prototype,h.toString=function(){return(this.Q.Cb?"https://":"http://")+this.Q.host},h.name=function(){return this.Q.yb},h.Cd=function(t,e,n,r){this.jd++;var i=new P(t);e=this.re?this.re(t,e):e,t=[],r?n?(e=fd(e,function(t){return J(t)}),t=Xg(this.M,i,e,r)):(e=J(e),t=Ug(this.M,i,e,r)):n?(r=fd(e,function(t){return J(t)}),t=this.M.$d(i,r)):(r=J(e),t=this.M.Sa(i,r)),r=i,0<t.length&&(r=kh(this,i)),Xe(this.Z,r,t)},h.Ad=function(t){hh(this,"connected",t),!1===t&&lh(this)},h.Ee=function(t){var e=this;Cb(t,function(t,n){hh(e,n,t)})},h.Be=function(t){hh(this,"authenticated",t)},h.Db=function(t,e,n,r){this.f("set",{path:t.toString(),value:e,Cg:n});var i=jh(this);e=J(e,n);var i=If(e,i),o=this.zd++,i=this.M.Fa(t,i,o,!0);Ue(this.Z,i);var s=this;this.S.put(t.toString(),e.N(!0),function(e,n){var i="ok"===e;i||z("set at "+t+" failed: "+e),i=s.M.Ea(o,!i),Xe(s.Z,t,i),mh(r,e,n)}),i=nh(this,t),kh(this,i),Xe(this.Z,i,[])},h.update=function(t,e,n){this.f("update",{path:t.toString(),value:e});var r=!0,i=jh(this),o={};if(A(e,function(t,e){r=!1;var n=J(t);o[e]=If(n,i)}),r)kb("update() called with empty data.  Don't do anything."),mh(n,"ok");else{var s=this.zd++,a=this.M.ae(t,o,s);Ue(this.Z,a);var u=this;Ke(this.S,t.toString(),e,function(e,r){x("ok"===e||"permission_denied"===e,"merge at "+t+" failed.");var i="ok"===e;i||z("update at "+t+" failed: "+e);var i=u.M.Ea(s,!i),o=t;0<i.length&&(o=kh(u,t)),Xe(u.Z,o,i),mh(n,e,r)}),e=nh(this,t),kh(this,e),Xe(this.Z,t,[])}},h.Ce=function(t,e){var n=this;this.S.Ce(t.toString(),function(r,i){"ok"===r&&Qe(n.ea,t),mh(e,r,i)})},h.tb=function(){this.S.tb()},h.kc=function(){this.S.kc()},h.Me=function(t){if("undefined"!=typeof console){t?(this.Nd||(this.Nd=new Hd(this.Qa)),t=this.Nd.get()):t=this.Qa.get();var e,n=Ma(yd(t),function(t,e){return Math.max(e.length,t)},0);for(e in t){for(var r=t[e],i=e.length;n+2>i;i++)e+=" ";console.log(e+r)}}},h.Ne=function(t){Gd(this.Qa,t),this.ug.uf[t]=!0},h.f=function(){kb("r:"+this.S.id+":",arguments)},ca(Ah),Ah.prototype.tb=function(){for(var t in this.jc)this.jc[t].tb()},Ah.prototype.interrupt=Ah.prototype.tb,Ah.prototype.kc=function(){for(var t in this.jc)this.jc[t].kc()},Ah.prototype.resume=Ah.prototype.kc,Bh.prototype.cc=function(t){var e,n=this;try{e=ua(t.data)}catch(r){}e&&"request"===e.a&&(ef(window,"message",this.cc),this.Qd=t.origin,this.tc&&setTimeout(function(){n.tc(n.Qd,e.d,function(t,e){n.If=!e,n.tc=void 0,Ch(n,{a:"response",d:t,forceKeepWindowOpen:e})})},0))},Bh.prototype.eg=function(){try{ef(this.sd,"message",this.hf)}catch(t){}this.tc&&(Ch(this,{a:"error",d:"unknown closed window"}),this.tc=void 0);try{window.close()}catch(e){}},Bh.prototype.hf=function(t){if(this.If&&"die"===t.data)try{window.close()}catch(e){}};var Y={Rf:function(){Yd=Pd=!0}};Y.forceLongPolling=Y.Rf,Y.Sf=function(){Zd=!0},Y.forceWebSockets=Y.Sf,Y.rg=function(t,e){t.g.S.Ke=e},Y.setSecurityDebugCallback=Y.rg,Y.Me=function(t,e){t.g.Me(e)},Y.stats=Y.Me,Y.Ne=function(t,e){t.g.Ne(e)},Y.statsIncrementCounter=Y.Ne,Y.jd=function(t){return t.g.jd},Y.dataUpdateCount=Y.jd,Y.Vf=function(t,e){t.g.re=e},Y.interceptServerData=Y.Vf,Y.bg=function(t){new Bh(t)},Y.onPopupOpen=Y.bg,Y.pg=function(t){Ye=t},Y.setAuthenticationServer=Y.pg,Z.prototype.cancel=function(t){D("Firebase.onDisconnect().cancel",0,1,arguments.length),F("Firebase.onDisconnect().cancel",1,t,!0),this.Sc.Ce(this.Ca,t||null)},Z.prototype.cancel=Z.prototype.cancel,Z.prototype.remove=function(t){D("Firebase.onDisconnect().remove",0,1,arguments.length),$b("Firebase.onDisconnect().remove",this.Ca),F("Firebase.onDisconnect().remove",1,t,!0),oh(this.Sc,this.Ca,null,t)},Z.prototype.remove=Z.prototype.remove,Z.prototype.set=function(t,e){D("Firebase.onDisconnect().set",1,2,arguments.length),$b("Firebase.onDisconnect().set",this.Ca),Sb("Firebase.onDisconnect().set",t,!1),F("Firebase.onDisconnect().set",2,e,!0),oh(this.Sc,this.Ca,t,e)},Z.prototype.set=Z.prototype.set,Z.prototype.Db=function(t,e,n){D("Firebase.onDisconnect().setWithPriority",2,3,arguments.length),$b("Firebase.onDisconnect().setWithPriority",this.Ca),Sb("Firebase.onDisconnect().setWithPriority",t,!1),Wb("Firebase.onDisconnect().setWithPriority",2,e),F("Firebase.onDisconnect().setWithPriority",3,n,!0),ph(this.Sc,this.Ca,t,e,n)},Z.prototype.setWithPriority=Z.prototype.Db,Z.prototype.update=function(t,e){if(D("Firebase.onDisconnect().update",1,2,arguments.length),$b("Firebase.onDisconnect().update",this.Ca),ea(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,z("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Vb("Firebase.onDisconnect().update",t),F("Firebase.onDisconnect().update",2,e,!0),qh(this.Sc,this.Ca,t,e)},Z.prototype.update=Z.prototype.update;var $={};$.rc=xe,$.DataConnection=$.rc,xe.prototype.tg=function(t,e){this.wa("q",{p:t},e)},$.rc.prototype.simpleListen=$.rc.prototype.tg,xe.prototype.Nf=function(t,e){this.wa("echo",{d:t},e)},$.rc.prototype.echo=$.rc.prototype.Nf,xe.prototype.interrupt=xe.prototype.tb,$.zf=ie,$.RealTimeConnection=$.zf,ie.prototype.sendRequest=ie.prototype.wa,ie.prototype.close=ie.prototype.close,$.Uf=function(t){var e=xe.prototype.put;return xe.prototype.put=function(r,i,o,s){n(s)&&(s=t()),e.call(this,r,i,o,s)},function(){xe.prototype.put=e}},$.hijackHash=$.Uf,$.yf=Ca,$.ConnectionTarget=$.yf,$.Da=function(t){return t.Da()},$.queryIdentifier=$.Da,$.Wf=function(t){return t.g.S.ua},$.listens=$.Wf;var Dh=function(){var t=0,e=[];return function(n){var r=n===t;t=n;for(var i=Array(8),o=7;o>=0;o--)i[o]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(n%64),n=Math.floor(n/64);if(x(0===n,"Cannot push at time == 0"),n=i.join(""),r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;12>o;o++)e[o]=Math.floor(64*Math.random());for(o=0;12>o;o++)n+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(e[o]);return x(20===n.length,"NextPushId: Length should be 20."),n}}();na(O,M);var Eh=O,Fh=["Firebase"],Gh=aa;Fh[0]in Gh||!Gh.execScript||Gh.execScript("var "+Fh[0]);for(var Hh;Fh.length&&(Hh=Fh.shift());)!Fh.length&&n(Eh)?Gh[Hh]=Eh:Gh=Gh[Hh]?Gh[Hh]:Gh[Hh]={};O.prototype.name=function(){return z("Firebase.name() being deprecated. Please use Firebase.key() instead."),D("Firebase.name",0,0,arguments.length),this.key()},O.prototype.name=O.prototype.name,O.prototype.key=function(){D("Firebase.key",0,0,arguments.length);var t;return this.path.e()?t=null:(t=this.path,t=t.aa<t.n.length?t.n[t.n.length-1]:null),t},O.prototype.key=O.prototype.key,O.prototype.k=function(t){if(D("Firebase.child",1,1,arguments.length),ga(t))t=String(t);else if(!(t instanceof P))if(null===G(this.path)){var e=t;e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Zb("Firebase.child",e)}else Zb("Firebase.child",t);return new O(this.g,this.path.k(t))},O.prototype.child=O.prototype.k,O.prototype.parent=function(){D("Firebase.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new O(this.g,t)},O.prototype.parent=O.prototype.parent,O.prototype.root=function(){D("Firebase.ref",0,0,arguments.length);for(var t=this;null!==t.parent();)t=t.parent();return t},O.prototype.root=O.prototype.root,O.prototype.toString=function(){D("Firebase.toString",0,0,arguments.length);var t;if(null===this.parent())t=this.g.toString();else{t=this.parent().toString()+"/";var e=this.key();t+=encodeURIComponent(String(e))}return t},O.prototype.toString=O.prototype.toString,O.prototype.set=function(t,e){D("Firebase.set",1,2,arguments.length),$b("Firebase.set",this.path),Sb("Firebase.set",t,!1),F("Firebase.set",2,e,!0),this.g.Db(this.path,t,null,e||null)},O.prototype.set=O.prototype.set,O.prototype.update=function(t,e){if(D("Firebase.update",1,2,arguments.length),$b("Firebase.update",this.path),ea(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,z("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}if(Vb("Firebase.update",t),F("Firebase.update",2,e,!0),u(t,".priority"))throw Error("update() does not currently support updating .priority.");this.g.update(this.path,t,e||null)},O.prototype.update=O.prototype.update,O.prototype.Db=function(t,e,n){if(D("Firebase.setWithPriority",2,3,arguments.length),$b("Firebase.setWithPriority",this.path),Sb("Firebase.setWithPriority",t,!1),Wb("Firebase.setWithPriority",2,e),F("Firebase.setWithPriority",3,n,!0),".length"===this.key()||".keys"===this.key())throw"Firebase.setWithPriority failed: "+this.key()+" is a read-only object.";this.g.Db(this.path,t,e,n||null)},O.prototype.setWithPriority=O.prototype.Db,O.prototype.remove=function(t){D("Firebase.remove",0,1,arguments.length),$b("Firebase.remove",this.path),F("Firebase.remove",1,t,!0),this.set(null,t)},O.prototype.remove=O.prototype.remove,O.prototype.transaction=function(t,e,r){if(D("Firebase.transaction",1,3,arguments.length),$b("Firebase.transaction",this.path),F("Firebase.transaction",1,t,!1),F("Firebase.transaction",2,e,!0),n(r)&&"boolean"!=typeof r)throw Error(E("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.key()||".keys"===this.key())throw"Firebase.transaction failed: "+this.key()+" is a read-only object.";"undefined"==typeof r&&(r=!0),rh(this.g,this.path,t,e||null,r)},O.prototype.transaction=O.prototype.transaction,O.prototype.qg=function(t,e){D("Firebase.setPriority",1,2,arguments.length),$b("Firebase.setPriority",this.path),Wb("Firebase.setPriority",1,t),F("Firebase.setPriority",2,e,!0),this.g.Db(this.path.k(".priority"),t,null,e)},O.prototype.setPriority=O.prototype.qg,O.prototype.push=function(t,e){D("Firebase.push",0,2,arguments.length),$b("Firebase.push",this.path),Sb("Firebase.push",t,!0),F("Firebase.push",2,e,!0);
var n=ih(this.g),n=Dh(n),n=this.k(n);return"undefined"!=typeof t&&null!==t&&n.set(t,e),n},O.prototype.push=O.prototype.push,O.prototype.fb=function(){return $b("Firebase.onDisconnect",this.path),new Z(this.g,this.path)},O.prototype.onDisconnect=O.prototype.fb,O.prototype.T=function(t,e,n){z("FirebaseRef.auth() being deprecated. Please use FirebaseRef.authWithCustomToken() instead."),D("Firebase.auth",1,3,arguments.length),ac("Firebase.auth",t),F("Firebase.auth",2,e,!0),F("Firebase.auth",3,e,!0),zf(this.g.T,t,{},{remember:"none"},e,n)},O.prototype.auth=O.prototype.T,O.prototype.Pe=function(t){D("Firebase.unauth",0,1,arguments.length),F("Firebase.unauth",1,t,!0),Af(this.g.T,t)},O.prototype.unauth=O.prototype.Pe,O.prototype.ne=function(){return D("Firebase.getAuth",0,0,arguments.length),this.g.T.ne()},O.prototype.getAuth=O.prototype.ne,O.prototype.ag=function(t,e){D("Firebase.onAuth",1,2,arguments.length),F("Firebase.onAuth",1,t,!1),Nb("Firebase.onAuth",2,e),this.g.T.zb("auth_status",t,e)},O.prototype.onAuth=O.prototype.ag,O.prototype.Zf=function(t,e){D("Firebase.offAuth",1,2,arguments.length),F("Firebase.offAuth",1,t,!1),Nb("Firebase.offAuth",2,e),this.g.T.bc("auth_status",t,e)},O.prototype.offAuth=O.prototype.Zf,O.prototype.Df=function(t,e,n){D("Firebase.authWithCustomToken",2,3,arguments.length),ac("Firebase.authWithCustomToken",t),F("Firebase.authWithCustomToken",2,e,!1),cc("Firebase.authWithCustomToken",3,n,!0),zf(this.g.T,t,{},n||{},e)},O.prototype.authWithCustomToken=O.prototype.Df,O.prototype.Ef=function(t,e,n){D("Firebase.authWithOAuthPopup",2,3,arguments.length),bc("Firebase.authWithOAuthPopup",1,t),F("Firebase.authWithOAuthPopup",2,e,!1),cc("Firebase.authWithOAuthPopup",3,n,!0),Ef(this.g.T,t,n,e)},O.prototype.authWithOAuthPopup=O.prototype.Ef,O.prototype.Ff=function(t,e,n){D("Firebase.authWithOAuthRedirect",2,3,arguments.length),bc("Firebase.authWithOAuthRedirect",1,t),F("Firebase.authWithOAuthRedirect",2,e,!1),cc("Firebase.authWithOAuthRedirect",3,n,!0);var r=this.g.T;Cf(r);var i=[sf],o=af(n);"anonymous"===t||"firebase"===t?B(e,V("TRANSPORT_UNAVAILABLE")):(Ba.set("redirect_client_options",o.ed),Df(r,i,"/auth/"+t,o,e))},O.prototype.authWithOAuthRedirect=O.prototype.Ff,O.prototype.Gf=function(t,e,n,r){D("Firebase.authWithOAuthToken",3,4,arguments.length),bc("Firebase.authWithOAuthToken",1,t),F("Firebase.authWithOAuthToken",3,n,!1),cc("Firebase.authWithOAuthToken",4,r,!0),p(e)?(bc("Firebase.authWithOAuthToken",2,e),Bf(this.g.T,t+"/token",{access_token:e},r,n)):(cc("Firebase.authWithOAuthToken",2,e,!1),Bf(this.g.T,t+"/token",e,r,n))},O.prototype.authWithOAuthToken=O.prototype.Gf,O.prototype.Cf=function(t,e){D("Firebase.authAnonymously",1,2,arguments.length),F("Firebase.authAnonymously",1,t,!1),cc("Firebase.authAnonymously",2,e,!0),Bf(this.g.T,"anonymous",{},e,t)},O.prototype.authAnonymously=O.prototype.Cf,O.prototype.Hf=function(t,e,n){D("Firebase.authWithPassword",2,3,arguments.length),cc("Firebase.authWithPassword",1,t,!1),dc("Firebase.authWithPassword",t,"email"),dc("Firebase.authWithPassword",t,"password"),F("Firebase.authAnonymously",2,e,!1),cc("Firebase.authAnonymously",3,n,!0),Bf(this.g.T,"password",t,n,e)},O.prototype.authWithPassword=O.prototype.Hf,O.prototype.je=function(t,e){D("Firebase.createUser",2,2,arguments.length),cc("Firebase.createUser",1,t,!1),dc("Firebase.createUser",t,"email"),dc("Firebase.createUser",t,"password"),F("Firebase.createUser",2,e,!1),this.g.T.je(t,e)},O.prototype.createUser=O.prototype.je,O.prototype.Ie=function(t,e){D("Firebase.removeUser",2,2,arguments.length),cc("Firebase.removeUser",1,t,!1),dc("Firebase.removeUser",t,"email"),dc("Firebase.removeUser",t,"password"),F("Firebase.removeUser",2,e,!1),this.g.T.Ie(t,e)},O.prototype.removeUser=O.prototype.Ie,O.prototype.ee=function(t,e){D("Firebase.changePassword",2,2,arguments.length),cc("Firebase.changePassword",1,t,!1),dc("Firebase.changePassword",t,"email"),dc("Firebase.changePassword",t,"oldPassword"),dc("Firebase.changePassword",t,"newPassword"),F("Firebase.changePassword",2,e,!1),this.g.T.ee(t,e)},O.prototype.changePassword=O.prototype.ee,O.prototype.Je=function(t,e){D("Firebase.resetPassword",2,2,arguments.length),cc("Firebase.resetPassword",1,t,!1),dc("Firebase.resetPassword",t,"email"),F("Firebase.resetPassword",2,e,!1),this.g.T.Je(t,e)},O.prototype.resetPassword=O.prototype.Je,O.goOffline=function(){D("Firebase.goOffline",0,0,arguments.length),Ah.Qb().tb()},O.goOnline=function(){D("Firebase.goOnline",0,0,arguments.length),Ah.Qb().kc()},O.enableLogging=qb,O.ServerValue={TIMESTAMP:{".sv":"timestamp"}},O.SDK_VERSION="2.0.6",O.INTERNAL=Y,O.Context=Ah,O.TEST_ACCESS=$}(),module.exports=Firebase},{}],80:[function(t,e,n){arguments[4][71][0].apply(n,arguments)},{dup:71}],81:[function(t,e,n){arguments[4][73][0].apply(n,arguments)},{_process:57,dup:73}],82:[function(t,e,n){(function(){var e;e=t("../lib/xml2js"),n.stripBOM=function(t){return"﻿"===t[0]?t.substring(1):t}}).call(this)},{"../lib/xml2js":84}],83:[function(t,e,n){(function(){var t;t=new RegExp(/(?!xmlns)^.*:/),n.normalize=function(t){return t.toLowerCase()},n.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},n.stripPrefix=function(e){return e.replace(t,"")}}).call(this)},{}],84:[function(t,e,n){(function(e){(function(){var r,i,o,s,a,u,c,l={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f=function(t,e){return function(){return t.apply(e,arguments)}};c=t("sax"),o=t("events"),i=t("xmlbuilder"),r=t("./bom"),u=t("./processors"),s=function(t){return"object"==typeof t&&null!=t&&0===Object.keys(t).length},a=function(t,e){var n,r,i;for(r=0,i=t.length;i>r;r++)n=t[r],e=n(e);return e},n.processors=u,n.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,async:!1,strict:!0,attrNameProcessors:null,tagNameProcessors:null},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,childkey:"$$",charsAsChildren:!1,async:!1,strict:!0,attrNameProcessors:null,tagNameProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1}},n.ValidationError=function(t){function e(t){this.message=t}return h(e,t),e}(Error),n.Builder=function(){function t(t){var e,r,i;this.options={},i=n.defaults[.2];for(e in i)l.call(i,e)&&(r=i[e],this.options[e]=r);for(e in t)l.call(t,e)&&(r=t[e],this.options[e]=r)}return t.prototype.buildObject=function(t){var e,r,o,s,a;return e=this.options.attrkey,r=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===n.defaults[.2].rootName?(a=Object.keys(t)[0],t=t[a]):a=this.options.rootName,o=function(t,n){var i,o,s,a,u,c,h,f;if("object"!=typeof n)t.txt(n);else for(u in n)if(l.call(n,u))if(o=n[u],u===e){if("object"==typeof o)for(i in o)c=o[i],t=t.att(i,c)}else if(u===r)t=t.txt(o);else if("object"==typeof o&&null!=(null!=o?o.constructor:void 0)&&null!=(null!=o&&null!=(h=o.constructor)?h.name:void 0)&&"Array"===(null!=o&&null!=(f=o.constructor)?f.name:void 0))for(a in o)l.call(o,a)&&(s=o[a],t="string"==typeof s?t.ele(u,s).up():arguments.callee(t.ele(u),s).up());else t="object"==typeof o?arguments.callee(t.ele(u),o).up():t.ele(u,o.toString()).up();return t},s=i.create(a,this.options.xmldec,this.options.doctype,{headless:this.options.headless}),o(s,t).end(this.options.renderOpts)},t}(),n.Parser=function(t){function i(t){this.parseString=f(this.parseString,this),this.reset=f(this.reset,this),this.assignOrPush=f(this.assignOrPush,this);var e,r,i;if(!(this instanceof n.Parser))return new n.Parser(t);this.options={},i=n.defaults[.2];for(e in i)l.call(i,e)&&(r=i[e],this.options[e]=r);for(e in t)l.call(t,e)&&(r=t[e],this.options[e]=r);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(u.normalize)),this.reset()}return h(i,t),i.prototype.assignOrPush=function(t,e,n){return e in t?(t[e]instanceof Array||(t[e]=[t[e]]),t[e].push(n)):t[e]=this.options.explicitArray?[n]:n},i.prototype.reset=function(){var t,e,n,r;return this.removeAllListeners(),this.saxParser=c.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(t){return function(e){return t.saxParser.resume(),t.saxParser.errThrown?void 0:(t.saxParser.errThrown=!0,t.emit("error",e))}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,r=[],t=this.options.attrkey,e=this.options.charkey,this.saxParser.onopentag=function(n){return function(i){var o,s,u,c,h;if(u={},u[e]="",!n.options.ignoreAttrs){h=i.attributes;for(o in h)l.call(h,o)&&(t in u||n.options.mergeAttrs||(u[t]={}),s=i.attributes[o],c=n.options.attrNameProcessors?a(n.options.attrNameProcessors,o):o,n.options.mergeAttrs?n.assignOrPush(u,c,s):u[t][c]=s)}return u["#name"]=n.options.tagNameProcessors?a(n.options.tagNameProcessors,i.name):i.name,n.options.xmlns&&(u[n.options.xmlnskey]={uri:i.uri,local:i.local}),r.push(u)}}(this),this.saxParser.onclosetag=function(t){return function(){var n,i,o,a,u,c,l,h,f;if(c=r.pop(),u=c["#name"],delete c["#name"],n=c.cdata,delete c.cdata,h=r[r.length-1],c[e].match(/^\s*$/)&&!n?(i=c[e],delete c[e]):(t.options.trim&&(c[e]=c[e].trim()),t.options.normalize&&(c[e]=c[e].replace(/\s{2,}/g," ").trim()),1===Object.keys(c).length&&e in c&&!t.EXPLICIT_CHARKEY&&(c=c[e])),s(c)&&(c=void 0!==t.options.emptyTag?t.options.emptyTag:i),null!=t.options.validator){f="/"+function(){var t,e,n;for(n=[],t=0,e=r.length;e>t;t++)a=r[t],n.push(a["#name"]);return n}().concat(u).join("/");try{c=t.options.validator(f,h&&h[u],c)}catch(d){o=d,t.emit("error",o)}}return t.options.explicitChildren&&!t.options.mergeAttrs&&"object"==typeof c&&(a={},t.options.attrkey in c&&(a[t.options.attrkey]=c[t.options.attrkey],delete c[t.options.attrkey]),!t.options.charsAsChildren&&t.options.charkey in c&&(a[t.options.charkey]=c[t.options.charkey],delete c[t.options.charkey]),Object.getOwnPropertyNames(c).length>0&&(a[t.options.childkey]=c),c=a),r.length>0?t.assignOrPush(h,u,c):(t.options.explicitRoot&&(l=c,c={},c[u]=l),t.resultObject=c,t.saxParser.ended=!0,t.emit("end",t.resultObject))}}(this),n=function(){return function(t){var n;return n=r[r.length-1],n?(n[e]+=t,n):void 0}}(this),this.saxParser.ontext=n,this.saxParser.oncdata=function(){return function(t){var e;return e=n(t),e?e.cdata=!0:void 0}}(this)},i.prototype.parseString=function(t,n){var i;if(null!=n&&"function"==typeof n&&(this.on("end",function(t){return this.reset(),this.options.async?e.nextTick(function(){return n(null,t)}):n(null,t)}),this.on("error",function(t){return this.reset(),this.options.async?e.nextTick(function(){return n(t)}):n(t)})),""===t.toString().trim())return this.emit("end",null),!0;try{return this.saxParser.write(r.stripBOM(t.toString())).close()}catch(o){if(i=o,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",i),this.saxParser.errThrown=!0}},i}(o.EventEmitter),n.parseString=function(t,e,r){var i,o,s;return null!=r?("function"==typeof r&&(i=r),"object"==typeof e&&(o=e)):("function"==typeof e&&(i=e),o={}),s=new n.Parser(o),s.parseString(t,i)}}).call(this)}).call(this,t("_process"))},{"./bom":82,"./processors":83,_process:57,events:54,sax:85,xmlbuilder:102}],85:[function(t,e,n){(function(e){!function(n){function r(t,e){if(!(this instanceof r))return new r(t,e);var i=this;o(i),i.q=i.c="",i.bufferCheckPosition=n.MAX_BUFFER_LENGTH,i.opt=e||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!t,i.noscript=!(!t&&!i.opt.noscript),i.state=$.BEGIN,i.ENTITIES=Object.create(n.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(W)),i.trackPosition=i.opt.position!==!1,i.trackPosition&&(i.position=i.line=i.column=0),d(i,"onready")}function i(t){for(var e=Math.max(n.MAX_BUFFER_LENGTH,10),r=0,i=0,o=D.length;o>i;i++){var s=t[D[i]].length;if(s>e)switch(D[i]){case"textNode":m(t);break;case"cdata":p(t,"oncdata",t.cdata),t.cdata="";break;case"script":p(t,"onscript",t.script),t.script="";break;default:y(t,"Max buffer length exceeded: "+D[i])}r=Math.max(r,s)}t.bufferCheckPosition=n.MAX_BUFFER_LENGTH-r+t.position}function o(t){for(var e=0,n=D.length;n>e;e++)t[D[e]]=""}function s(t){m(t),""!==t.cdata&&(p(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(p(t,"onscript",t.script),t.script="")}function a(t,e){return new u(t,e)}function u(t,e){if(!(this instanceof u))return new u(t,e);C.apply(this),this._parser=new r(t,e),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(t){n.emit("error",t),n._parser.error=null},this._decoder=null,O.forEach(function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){return e?void n.on(t,e):(n.removeAllListeners(t),n._parser["on"+t]=e)},enumerable:!0,configurable:!1})})}function c(t){return t.split("").reduce(function(t,e){return t[e]=!0,t},{})}function l(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function h(t,e){return l(t)?!!e.match(t):t[e]}function f(t,e){return!h(t,e)}function d(t,e,n){t[e]&&t[e](n)}function p(t,e,n){t.textNode&&m(t),d(t,e,n)}function m(t){t.textNode=g(t.opt,t.textNode),t.textNode&&d(t,"ontext",t.textNode),t.textNode=""}function g(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function y(t,e){return m(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,d(t,"onerror",e),t}function v(t){return t.closedRoot||b(t,"Unclosed root tag"),t.state!==$.BEGIN&&t.state!==$.TEXT&&y(t,"Unexpected end"),m(t),t.c="",t.closed=!0,d(t,"onend"),r.call(t,t.strict,t.opt),t}function b(t,e){if("object"!=typeof t||!(t instanceof r))throw new Error("bad call to strictFail");t.strict&&y(t,e)}function w(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,n=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(n.ns=e.ns),t.attribList.length=0}function S(t,e){var n=t.indexOf(":"),r=0>n?["",t]:t.split(":"),i=r[0],o=r[1];return e&&"xmlns"===t&&(i="xmlns",o=""),{prefix:i,local:o}}function _(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))return t.attribName=t.attribValue="";if(t.opt.xmlns){var e=S(t.attribName,!0),n=e.prefix,r=e.local;if("xmlns"===n)if("xml"===r&&t.attribValue!==U)b(t,"xml: prefix must be bound to "+U+"\nActual: "+t.attribValue);else if("xmlns"===r&&t.attribValue!==B)b(t,"xmlns: prefix must be bound to "+B+"\nActual: "+t.attribValue);else{var i=t.tag,o=t.tags[t.tags.length-1]||t;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,p(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}function T(t,e){if(t.opt.xmlns){var n=t.tag,r=S(t.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(b(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=r.prefix);var i=t.tags[t.tags.length-1]||t;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(e){p(t,"onopennamespace",{prefix:e,uri:n.ns[e]})});for(var o=0,s=t.attribList.length;s>o;o++){var a=t.attribList[o],u=a[0],c=a[1],l=S(u,!0),h=l.prefix,f=l.local,d=""==h?"":n.ns[h]||"",m={name:u,value:c,prefix:h,local:f,uri:d};h&&"xmlns"!=h&&!d&&(b(t,"Unbound namespace prefix: "+JSON.stringify(h)),m.uri=h),t.tag.attributes[u]=m,p(t,"onattribute",m)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),p(t,"onopentag",t.tag),e||(t.state=t.noscript||"script"!==t.tagName.toLowerCase()?$.TEXT:$.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function E(t){if(!t.tagName)return b(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=$.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=$.SCRIPT);p(t,"onscript",t.script),t.script=""}var e=t.tags.length,n=t.tagName;t.strict||(n=n[t.looseCase]());for(var r=n;e--;){var i=t.tags[e];if(i.name===r)break;b(t,"Unexpected close tag")}if(0>e)return b(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=$.TEXT);t.tagName=n;for(var o=t.tags.length;o-->e;){var s=t.tag=t.tags.pop();t.tagName=t.tag.name,p(t,"onclosetag",t.tagName);var a={};for(var u in s.ns)a[u]=s.ns[u];var c=t.tags[t.tags.length-1]||t;t.opt.xmlns&&s.ns!==c.ns&&Object.keys(s.ns).forEach(function(e){var n=s.ns[e];p(t,"onclosenamespace",{prefix:e,uri:n})})}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=$.TEXT}function A(t){var e,n=t.entity,r=n.toLowerCase(),i="";return t.ENTITIES[n]?t.ENTITIES[n]:t.ENTITIES[r]?t.ENTITIES[r]:(n=r,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),e=parseInt(n,16),i=e.toString(16)):(n=n.slice(1),e=parseInt(n,10),i=e.toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(b(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function x(t){var e=this;if(this.error)throw this.error;if(e.closed)return y(e,"Cannot write after close. Assign an onready handler.");if(null===t)return v(e);for(var n=0,r="";e.c=r=t.charAt(n++);)switch(e.trackPosition&&(e.position++,"\n"===r?(e.line++,e.column=0):e.column++),e.state){case $.BEGIN:"<"===r?(e.state=$.OPEN_WAKA,e.startTagPosition=e.position):f(k,r)&&(b(e,"Non-whitespace before first tag."),e.textNode=r,e.state=$.TEXT);continue;case $.TEXT:if(e.sawRoot&&!e.closedRoot){for(var o=n-1;r&&"<"!==r&&"&"!==r;)r=t.charAt(n++),r&&e.trackPosition&&(e.position++,"\n"===r?(e.line++,e.column=0):e.column++);e.textNode+=t.substring(o,n-1)}"<"===r?(e.state=$.OPEN_WAKA,e.startTagPosition=e.position):(!f(k,r)||e.sawRoot&&!e.closedRoot||b(e,"Text data outside of root node."),"&"===r?e.state=$.TEXT_ENTITY:e.textNode+=r);continue;case $.SCRIPT:"<"===r?e.state=$.SCRIPT_ENDING:e.script+=r;continue;case $.SCRIPT_ENDING:"/"===r?e.state=$.CLOSE_TAG:(e.script+="<"+r,e.state=$.SCRIPT);continue;case $.OPEN_WAKA:if("!"===r)e.state=$.SGML_DECL,e.sgmlDecl="";else if(h(k,r));else if(h(z,r))e.state=$.OPEN_TAG,e.tagName=r;else if("/"===r)e.state=$.CLOSE_TAG,e.tagName="";else if("?"===r)e.state=$.PROC_INST,e.procInstName=e.procInstBody="";else{if(b(e,"Unencoded <"),e.startTagPosition+1<e.position){var s=e.position-e.startTagPosition;r=new Array(s).join(" ")+r}e.textNode+="<"+r,e.state=$.TEXT}continue;case $.SGML_DECL:(e.sgmlDecl+r).toUpperCase()===F?(p(e,"onopencdata"),e.state=$.CDATA,e.sgmlDecl="",e.cdata=""):e.sgmlDecl+r==="--"?(e.state=$.COMMENT,e.comment="",e.sgmlDecl=""):(e.sgmlDecl+r).toUpperCase()===R?(e.state=$.DOCTYPE,(e.doctype||e.sawRoot)&&b(e,"Inappropriately located doctype declaration"),e.doctype="",e.sgmlDecl=""):">"===r?(p(e,"onsgmldeclaration",e.sgmlDecl),e.sgmlDecl="",e.state=$.TEXT):h(N,r)?(e.state=$.SGML_DECL_QUOTED,e.sgmlDecl+=r):e.sgmlDecl+=r;continue;case $.SGML_DECL_QUOTED:r===e.q&&(e.state=$.SGML_DECL,e.q=""),e.sgmlDecl+=r;continue;case $.DOCTYPE:">"===r?(e.state=$.TEXT,p(e,"ondoctype",e.doctype),e.doctype=!0):(e.doctype+=r,"["===r?e.state=$.DOCTYPE_DTD:h(N,r)&&(e.state=$.DOCTYPE_QUOTED,e.q=r));continue;case $.DOCTYPE_QUOTED:e.doctype+=r,r===e.q&&(e.q="",e.state=$.DOCTYPE);continue;case $.DOCTYPE_DTD:e.doctype+=r,"]"===r?e.state=$.DOCTYPE:h(N,r)&&(e.state=$.DOCTYPE_DTD_QUOTED,e.q=r);continue;case $.DOCTYPE_DTD_QUOTED:e.doctype+=r,r===e.q&&(e.state=$.DOCTYPE_DTD,e.q="");continue;case $.COMMENT:"-"===r?e.state=$.COMMENT_ENDING:e.comment+=r;continue;case $.COMMENT_ENDING:"-"===r?(e.state=$.COMMENT_ENDED,e.comment=g(e.opt,e.comment),e.comment&&p(e,"oncomment",e.comment),e.comment=""):(e.comment+="-"+r,e.state=$.COMMENT);continue;case $.COMMENT_ENDED:">"!==r?(b(e,"Malformed comment"),e.comment+="--"+r,e.state=$.COMMENT):e.state=$.TEXT;continue;case $.CDATA:"]"===r?e.state=$.CDATA_ENDING:e.cdata+=r;continue;case $.CDATA_ENDING:"]"===r?e.state=$.CDATA_ENDING_2:(e.cdata+="]"+r,e.state=$.CDATA);continue;case $.CDATA_ENDING_2:">"===r?(e.cdata&&p(e,"oncdata",e.cdata),p(e,"onclosecdata"),e.cdata="",e.state=$.TEXT):"]"===r?e.cdata+="]":(e.cdata+="]]"+r,e.state=$.CDATA);continue;case $.PROC_INST:"?"===r?e.state=$.PROC_INST_ENDING:h(k,r)?e.state=$.PROC_INST_BODY:e.procInstName+=r;continue;case $.PROC_INST_BODY:if(!e.procInstBody&&h(k,r))continue;"?"===r?e.state=$.PROC_INST_ENDING:e.procInstBody+=r;continue;case $.PROC_INST_ENDING:">"===r?(p(e,"onprocessinginstruction",{name:e.procInstName,body:e.procInstBody}),e.procInstName=e.procInstBody="",e.state=$.TEXT):(e.procInstBody+="?"+r,e.state=$.PROC_INST_BODY);continue;case $.OPEN_TAG:h(Y,r)?e.tagName+=r:(w(e),">"===r?T(e):"/"===r?e.state=$.OPEN_TAG_SLASH:(f(k,r)&&b(e,"Invalid character in tag name"),e.state=$.ATTRIB));continue;case $.OPEN_TAG_SLASH:">"===r?(T(e,!0),E(e)):(b(e,"Forward-slash in opening tag not followed by >"),e.state=$.ATTRIB);continue;case $.ATTRIB:if(h(k,r))continue;">"===r?T(e):"/"===r?e.state=$.OPEN_TAG_SLASH:h(z,r)?(e.attribName=r,e.attribValue="",e.state=$.ATTRIB_NAME):b(e,"Invalid attribute name");continue;case $.ATTRIB_NAME:"="===r?e.state=$.ATTRIB_VALUE:">"===r?(b(e,"Attribute without value"),e.attribValue=e.attribName,_(e),T(e)):h(k,r)?e.state=$.ATTRIB_NAME_SAW_WHITE:h(Y,r)?e.attribName+=r:b(e,"Invalid attribute name");continue;case $.ATTRIB_NAME_SAW_WHITE:if("="===r)e.state=$.ATTRIB_VALUE;else{if(h(k,r))continue;b(e,"Attribute without value"),e.tag.attributes[e.attribName]="",e.attribValue="",p(e,"onattribute",{name:e.attribName,value:""}),e.attribName="",">"===r?T(e):h(z,r)?(e.attribName=r,e.state=$.ATTRIB_NAME):(b(e,"Invalid attribute name"),e.state=$.ATTRIB)}continue;case $.ATTRIB_VALUE:if(h(k,r))continue;h(N,r)?(e.q=r,e.state=$.ATTRIB_VALUE_QUOTED):(b(e,"Unquoted attribute value"),e.state=$.ATTRIB_VALUE_UNQUOTED,e.attribValue=r);continue;case $.ATTRIB_VALUE_QUOTED:if(r!==e.q){"&"===r?e.state=$.ATTRIB_VALUE_ENTITY_Q:e.attribValue+=r;continue}_(e),e.q="",e.state=$.ATTRIB_VALUE_CLOSED;continue;case $.ATTRIB_VALUE_CLOSED:h(k,r)?e.state=$.ATTRIB:">"===r?T(e):"/"===r?e.state=$.OPEN_TAG_SLASH:h(z,r)?(b(e,"No whitespace between attributes"),e.attribName=r,e.attribValue="",e.state=$.ATTRIB_NAME):b(e,"Invalid attribute name");continue;case $.ATTRIB_VALUE_UNQUOTED:if(f(j,r)){"&"===r?e.state=$.ATTRIB_VALUE_ENTITY_U:e.attribValue+=r;continue}_(e),">"===r?T(e):e.state=$.ATTRIB;continue;case $.CLOSE_TAG:if(e.tagName)">"===r?E(e):h(Y,r)?e.tagName+=r:e.script?(e.script+="</"+e.tagName,e.tagName="",e.state=$.SCRIPT):(f(k,r)&&b(e,"Invalid tagname in closing tag"),e.state=$.CLOSE_TAG_SAW_WHITE);else{if(h(k,r))continue;f(z,r)?e.script?(e.script+="</"+r,e.state=$.SCRIPT):b(e,"Invalid tagname in closing tag."):e.tagName=r}continue;case $.CLOSE_TAG_SAW_WHITE:if(h(k,r))continue;">"===r?E(e):b(e,"Invalid characters in closing tag");continue;case $.TEXT_ENTITY:case $.ATTRIB_VALUE_ENTITY_Q:case $.ATTRIB_VALUE_ENTITY_U:switch(e.state){case $.TEXT_ENTITY:var a=$.TEXT,u="textNode";break;case $.ATTRIB_VALUE_ENTITY_Q:var a=$.ATTRIB_VALUE_QUOTED,u="attribValue";break;case $.ATTRIB_VALUE_ENTITY_U:var a=$.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===r?(e[u]+=A(e),e.entity="",e.state=a):h(L,r)?e.entity+=r:(b(e,"Invalid character entity"),e[u]+="&"+e.entity+r,e.entity="",e.state=a);continue;default:throw new Error(e,"Unknown state: "+e.state)}return e.position>=e.bufferCheckPosition&&i(e),e}n.parser=function(t,e){return new r(t,e)},n.SAXParser=r,n.SAXStream=u,n.createStream=a,n.MAX_BUFFER_LENGTH=65536;var D=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){this.__proto__=t}return e.prototype=t,new e}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),r.prototype={end:function(){v(this)},write:x,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};try{var C=t("stream").Stream}catch(M){var C=function(){}}var O=n.EVENTS.filter(function(t){return"error"!==t&&"end"!==t});u.prototype=Object.create(C.prototype,{constructor:{value:u}}),u.prototype.write=function(n){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(n)){if(!this._decoder){var r=t("string_decoder").StringDecoder;this._decoder=new r("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},u.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},u.prototype.on=function(t,e){var n=this;return n._parser["on"+t]||-1===O.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e)}),C.prototype.on.call(n,t,e)};var k="\r\n	 ",I="0124356789",P="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",N="'\"",L=I+P+"#",j=k+">",F="[CDATA[",R="DOCTYPE",U="http://www.w3.org/XML/1998/namespace",B="http://www.w3.org/2000/xmlns/",W={xml:U,xmlns:B};k=c(k),I=c(I),P=c(P);var z=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;N=c(N),L=c(L),j=c(j);var $=0;n.STATE={BEGIN:$++,TEXT:$++,TEXT_ENTITY:$++,OPEN_WAKA:$++,SGML_DECL:$++,SGML_DECL_QUOTED:$++,DOCTYPE:$++,DOCTYPE_QUOTED:$++,DOCTYPE_DTD:$++,DOCTYPE_DTD_QUOTED:$++,COMMENT_STARTING:$++,COMMENT:$++,COMMENT_ENDING:$++,COMMENT_ENDED:$++,CDATA:$++,CDATA_ENDING:$++,CDATA_ENDING_2:$++,PROC_INST:$++,PROC_INST_BODY:$++,PROC_INST_ENDING:$++,OPEN_TAG:$++,OPEN_TAG_SLASH:$++,ATTRIB:$++,ATTRIB_NAME:$++,ATTRIB_NAME_SAW_WHITE:$++,ATTRIB_VALUE:$++,ATTRIB_VALUE_QUOTED:$++,ATTRIB_VALUE_CLOSED:$++,ATTRIB_VALUE_UNQUOTED:$++,ATTRIB_VALUE_ENTITY_Q:$++,ATTRIB_VALUE_ENTITY_U:$++,CLOSE_TAG:$++,CLOSE_TAG_SAW_WHITE:$++,SCRIPT:$++,SCRIPT_ENDING:$++},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(t){var e=n.ENTITIES[t],r="number"==typeof e?String.fromCharCode(e):e;n.ENTITIES[t]=r});for(var $ in n.STATE)n.STATE[n.STATE[$]]=$;$=n.STATE,String.fromCodePoint||!function(){var t=String.fromCharCode,e=Math.floor,n=function(){var n,r,i=16384,o=[],s=-1,a=arguments.length;if(!a)return"";for(var u="";++s<a;){var c=Number(arguments[s]);if(!isFinite(c)||0>c||c>1114111||e(c)!=c)throw RangeError("Invalid code point: "+c);65535>=c?o.push(c):(c-=65536,n=(c>>10)+55296,r=c%1024+56320,o.push(n,r)),(s+1==a||o.length>i)&&(u+=t.apply(null,o),o.length=0)}return u};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()}("undefined"==typeof n?sax={}:n)}).call(this,t("buffer").Buffer)},{buffer:50,stream:69,string_decoder:70}],86:[function(t,e){(function(){var n,r;r=t("lodash-node/modern/objects/create"),e.exports=n=function(){function t(t,e,n){if(this.stringify=t.stringify,null==e)throw new Error("Missing attribute name");if(null==n)throw new Error("Missing attribute value");this.name=this.stringify.attName(e),this.value=this.stringify.attValue(n)}return t.prototype.clone=function(){return r(t.prototype,this)},t.prototype.toString=function(){return" "+this.name+'="'+this.value+'"'},t}()}).call(this)},{"lodash-node/modern/objects/create":115}],87:[function(t,e){(function(){var n,r,i,o,s;s=t("./XMLStringifier"),r=t("./XMLDeclaration"),i=t("./XMLDocType"),o=t("./XMLElement"),e.exports=n=function(){function t(t,e){var n,r;if(null==t)throw new Error("Root element needs a name");null==e&&(e={}),this.options=e,this.stringify=new s(e),r=new o(this,"doc"),n=r.element(t),n.isRoot=!0,n.documentObject=this,this.rootObject=n,e.headless||(n.declaration(e),(null!=e.pubID||null!=e.sysID)&&n.doctype(e))}return t.prototype.root=function(){return this.rootObject},t.prototype.end=function(t){return this.toString(t)},t.prototype.toString=function(t){var e,n,r,i,o,s,a,u;return i=(null!=t?t.pretty:void 0)||!1,e=null!=(s=null!=t?t.indent:void 0)?s:"  ",r=null!=(a=null!=t?t.offset:void 0)?a:0,n=null!=(u=null!=t?t.newline:void 0)?u:"\n",o="",null!=this.xmldec&&(o+=this.xmldec.toString(t)),null!=this.doctype&&(o+=this.doctype.toString(t)),o+=this.rootObject.toString(t),i&&o.slice(-n.length)===n&&(o=o.slice(0,-n.length)),o},t}()}).call(this)},{"./XMLDeclaration":94,"./XMLDocType":95,"./XMLElement":96,"./XMLStringifier":100}],88:[function(t,e){(function(){var n,r,i,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t
}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("lodash-node/modern/objects/create"),r=t("./XMLNode"),e.exports=n=function(t){function e(t,n){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing CDATA text");this.text=this.stringify.cdata(n)}return s(e,t),e.prototype.clone=function(){return i(e.prototype,this)},e.prototype.toString=function(t,e){var n,r,i,o,s,a,u,c,l;return o=(null!=t?t.pretty:void 0)||!1,n=null!=(u=null!=t?t.indent:void 0)?u:"  ",i=null!=(c=null!=t?t.offset:void 0)?c:0,r=null!=(l=null!=t?t.newline:void 0)?l:"\n",e||(e=0),a=new Array(e+i+1).join(n),s="",o&&(s+=a),s+="<![CDATA["+this.text+"]]>",o&&(s+=r),s},e}(r)}).call(this)},{"./XMLNode":97,"lodash-node/modern/objects/create":115}],89:[function(t,e){(function(){var n,r,i,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("lodash-node/modern/objects/create"),r=t("./XMLNode"),e.exports=n=function(t){function e(t,n){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing comment text");this.text=this.stringify.comment(n)}return s(e,t),e.prototype.clone=function(){return i(e.prototype,this)},e.prototype.toString=function(t,e){var n,r,i,o,s,a,u,c,l;return o=(null!=t?t.pretty:void 0)||!1,n=null!=(u=null!=t?t.indent:void 0)?u:"  ",i=null!=(c=null!=t?t.offset:void 0)?c:0,r=null!=(l=null!=t?t.newline:void 0)?l:"\n",e||(e=0),a=new Array(e+i+1).join(n),s="",o&&(s+=a),s+="<!-- "+this.text+" -->",o&&(s+=r),s},e}(r)}).call(this)},{"./XMLNode":97,"lodash-node/modern/objects/create":115}],90:[function(t,e){(function(){var n,r;r=t("lodash-node/modern/objects/create"),e.exports=n=function(){function t(t,e,n,r,i,o){if(this.stringify=t.stringify,null==e)throw new Error("Missing DTD element name");if(null==n)throw new Error("Missing DTD attribute name");if(!r)throw new Error("Missing DTD attribute type");if(!i)throw new Error("Missing DTD attribute default");if(0!==i.indexOf("#")&&(i="#"+i),!i.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(o&&!i.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(e),this.attributeName=this.stringify.attName(n),this.attributeType=this.stringify.dtdAttType(r),this.defaultValue=this.stringify.dtdAttDefault(o),this.defaultValueType=i}return t.prototype.clone=function(){return r(t.prototype,this)},t.prototype.toString=function(t,e){var n,r,i,o,s,a,u,c,l;return o=(null!=t?t.pretty:void 0)||!1,n=null!=(u=null!=t?t.indent:void 0)?u:"  ",i=null!=(c=null!=t?t.offset:void 0)?c:0,r=null!=(l=null!=t?t.newline:void 0)?l:"\n",e||(e=0),a=new Array(e+i+1).join(n),s="",o&&(s+=a),s+="<!ATTLIST "+this.elementName+" "+this.attributeName+" "+this.attributeType,"#DEFAULT"!==this.defaultValueType&&(s+=" "+this.defaultValueType),this.defaultValue&&(s+=' "'+this.defaultValue+'"'),s+=">",o&&(s+=r),s},t}()}).call(this)},{"lodash-node/modern/objects/create":115}],91:[function(t,e){(function(){var n,r,i;r=t("lodash-node/modern/objects/create"),i=t("lodash-node/modern/objects/isArray"),e.exports=n=function(){function t(t,e,n){if(this.stringify=t.stringify,null==e)throw new Error("Missing DTD element name");n||(n="(#PCDATA)"),i(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.eleName(e),this.value=this.stringify.dtdElementValue(n)}return t.prototype.clone=function(){return r(t.prototype,this)},t.prototype.toString=function(t,e){var n,r,i,o,s,a,u,c,l;return o=(null!=t?t.pretty:void 0)||!1,n=null!=(u=null!=t?t.indent:void 0)?u:"  ",i=null!=(c=null!=t?t.offset:void 0)?c:0,r=null!=(l=null!=t?t.newline:void 0)?l:"\n",e||(e=0),a=new Array(e+i+1).join(n),s="",o&&(s+=a),s+="<!ELEMENT "+this.name+" "+this.value+">",o&&(s+=r),s},t}()}).call(this)},{"lodash-node/modern/objects/create":115,"lodash-node/modern/objects/isArray":117}],92:[function(t,e){(function(){var n,r,i;r=t("lodash-node/modern/objects/create"),i=t("lodash-node/modern/objects/isObject"),e.exports=n=function(){function t(t,e,n,r){if(this.stringify=t.stringify,null==n)throw new Error("Missing entity name");if(null==r)throw new Error("Missing entity value");if(this.pe=!!e,this.name=this.stringify.eleName(n),i(r)){if(!r.pubID&&!r.sysID)throw new Error("Public and/or system identifiers are required for an external entity");if(r.pubID&&!r.sysID)throw new Error("System identifier is required for a public external entity");if(null!=r.pubID&&(this.pubID=this.stringify.dtdPubID(r.pubID)),null!=r.sysID&&(this.sysID=this.stringify.dtdSysID(r.sysID)),null!=r.nData&&(this.nData=this.stringify.dtdNData(r.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(r)}return t.prototype.clone=function(){return r(t.prototype,this)},t.prototype.toString=function(t,e){var n,r,i,o,s,a,u,c,l;return o=(null!=t?t.pretty:void 0)||!1,n=null!=(u=null!=t?t.indent:void 0)?u:"  ",i=null!=(c=null!=t?t.offset:void 0)?c:0,r=null!=(l=null!=t?t.newline:void 0)?l:"\n",e||(e=0),a=new Array(e+i+1).join(n),s="",o&&(s+=a),s+="<!ENTITY",this.pe&&(s+=" %"),s+=" "+this.name,this.value?s+=' "'+this.value+'"':(this.pubID&&this.sysID?s+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.sysID&&(s+=' SYSTEM "'+this.sysID+'"'),this.nData&&(s+=" NDATA "+this.nData)),s+=">",o&&(s+=r),s},t}()}).call(this)},{"lodash-node/modern/objects/create":115,"lodash-node/modern/objects/isObject":120}],93:[function(t,e){(function(){var n,r;r=t("lodash-node/modern/objects/create"),e.exports=n=function(){function t(t,e,n){if(this.stringify=t.stringify,null==e)throw new Error("Missing notation name");if(!n.pubID&&!n.sysID)throw new Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(e),null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}return t.prototype.clone=function(){return r(t.prototype,this)},t.prototype.toString=function(t,e){var n,r,i,o,s,a,u,c,l;return o=(null!=t?t.pretty:void 0)||!1,n=null!=(u=null!=t?t.indent:void 0)?u:"  ",i=null!=(c=null!=t?t.offset:void 0)?c:0,r=null!=(l=null!=t?t.newline:void 0)?l:"\n",e||(e=0),a=new Array(e+i+1).join(n),s="",o&&(s+=a),s+="<!NOTATION "+this.name,this.pubID&&this.sysID?s+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.pubID?s+=' PUBLIC "'+this.pubID+'"':this.sysID&&(s+=' SYSTEM "'+this.sysID+'"'),s+=">",o&&(s+=r),s},t}()}).call(this)},{"lodash-node/modern/objects/create":115}],94:[function(t,e){(function(){var n,r,i,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("lodash-node/modern/objects/create"),o=t("lodash-node/modern/objects/isObject"),r=t("./XMLNode"),e.exports=n=function(t){function e(t,n,r,i){var s;e.__super__.constructor.call(this,t),o(n)&&(s=n,n=s.version,r=s.encoding,i=s.standalone),n||(n="1.0"),null!=n&&(this.version=this.stringify.xmlVersion(n)),null!=r&&(this.encoding=this.stringify.xmlEncoding(r)),null!=i&&(this.standalone=this.stringify.xmlStandalone(i))}return a(e,t),e.prototype.clone=function(){return i(e.prototype,this)},e.prototype.toString=function(t,e){var n,r,i,o,s,a,u,c,l;return o=(null!=t?t.pretty:void 0)||!1,n=null!=(u=null!=t?t.indent:void 0)?u:"  ",i=null!=(c=null!=t?t.offset:void 0)?c:0,r=null!=(l=null!=t?t.newline:void 0)?l:"\n",e||(e=0),a=new Array(e+i+1).join(n),s="",o&&(s+=a),s+="<?xml",null!=this.version&&(s+=' version="'+this.version+'"'),null!=this.encoding&&(s+=' encoding="'+this.encoding+'"'),null!=this.standalone&&(s+=' standalone="'+this.standalone+'"'),s+="?>",o&&(s+=r),s},e}(r)}).call(this)},{"./XMLNode":97,"lodash-node/modern/objects/create":115,"lodash-node/modern/objects/isObject":120}],95:[function(t,e){(function(){var n,r,i,o,s,a,u,c,l,h;l=t("lodash-node/modern/objects/create"),h=t("lodash-node/modern/objects/isObject"),n=t("./XMLCData"),r=t("./XMLComment"),i=t("./XMLDTDAttList"),s=t("./XMLDTDEntity"),o=t("./XMLDTDElement"),a=t("./XMLDTDNotation"),c=t("./XMLProcessingInstruction"),e.exports=u=function(){function t(t,e,n){var r,i;this.documentObject=t,this.stringify=this.documentObject.stringify,this.children=[],h(e)&&(r=e,e=r.pubID,n=r.sysID),null==n&&(i=[e,n],n=i[0],e=i[1]),null!=e&&(this.pubID=this.stringify.dtdPubID(e)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}return t.prototype.clone=function(){return l(t.prototype,this)},t.prototype.element=function(t,e){var n;return n=new o(this,t,e),this.children.push(n),this},t.prototype.attList=function(t,e,n,r,o){var s;return s=new i(this,t,e,n,r,o),this.children.push(s),this},t.prototype.entity=function(t,e){var n;return n=new s(this,!1,t,e),this.children.push(n),this},t.prototype.pEntity=function(t,e){var n;return n=new s(this,!0,t,e),this.children.push(n),this},t.prototype.notation=function(t,e){var n;return n=new a(this,t,e),this.children.push(n),this},t.prototype.cdata=function(t){var e;return e=new n(this,t),this.children.push(e),this},t.prototype.comment=function(t){var e;return e=new r(this,t),this.children.push(e),this},t.prototype.instruction=function(t,e){var n;return n=new c(this,t,e),this.children.push(n),this},t.prototype.root=function(){return this.documentObject.root()},t.prototype.document=function(){return this.documentObject},t.prototype.toString=function(t,e){var n,r,i,o,s,a,u,c,l,h,f,d,p;if(s=(null!=t?t.pretty:void 0)||!1,r=null!=(h=null!=t?t.indent:void 0)?h:"  ",o=null!=(f=null!=t?t.offset:void 0)?f:0,i=null!=(d=null!=t?t.newline:void 0)?d:"\n",e||(e=0),u=new Array(e+o+1).join(r),a="",s&&(a+=u),a+="<!DOCTYPE "+this.root().name,this.pubID&&this.sysID?a+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.sysID&&(a+=' SYSTEM "'+this.sysID+'"'),this.children.length>0){for(a+=" [",s&&(a+=i),p=this.children,c=0,l=p.length;l>c;c++)n=p[c],a+=n.toString(t,e+1);a+="]"}return a+=">",s&&(a+=i),a},t.prototype.ele=function(t,e){return this.element(t,e)},t.prototype.att=function(t,e,n,r,i){return this.attList(t,e,n,r,i)},t.prototype.ent=function(t,e){return this.entity(t,e)},t.prototype.pent=function(t,e){return this.pEntity(t,e)},t.prototype.not=function(t,e){return this.notation(t,e)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.up=function(){return this.root()},t.prototype.doc=function(){return this.document()},t}()}).call(this)},{"./XMLCData":88,"./XMLComment":89,"./XMLDTDAttList":90,"./XMLDTDElement":91,"./XMLDTDEntity":92,"./XMLDTDNotation":93,"./XMLProcessingInstruction":98,"lodash-node/modern/objects/create":115,"lodash-node/modern/objects/isObject":120}],96:[function(t,e){(function(){var n,r,i,o,s,a,u,c,l={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};s=t("lodash-node/modern/objects/create"),c=t("lodash-node/modern/objects/isObject"),a=t("lodash-node/modern/objects/isArray"),u=t("lodash-node/modern/objects/isFunction"),i=t("./XMLNode"),n=t("./XMLAttribute"),o=t("./XMLProcessingInstruction"),e.exports=r=function(t){function e(t,n,r){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing element name");this.name=this.stringify.eleName(n),this.children=[],this.instructions=[],this.attributes={},null!=r&&this.attribute(r)}return h(e,t),e.prototype.clone=function(){var t,n,r,i,o,a,u,c;r=s(e.prototype,this),r.attributes={},u=this.attributes;for(n in u)l.call(u,n)&&(t=u[n],r.attributes[n]=t.clone());for(r.instructions=[],c=this.instructions,o=0,a=c.length;a>o;o++)i=c[o],r.instructions.push(i.clone());return r.children=[],this.children.forEach(function(t){var e;return e=t.clone(),e.parent=r,r.children.push(e)}),r},e.prototype.attribute=function(t,e){var r,i;if(null!=t&&(t=t.valueOf()),c(t))for(r in t)l.call(t,r)&&(i=t[r],this.attribute(r,i));else u(e)&&(e=e.apply()),this.options.skipNullAttributes&&null==e||(this.attributes[t]=new n(this,t,e));return this},e.prototype.removeAttribute=function(t){var e,n,r;if(null==t)throw new Error("Missing attribute name");if(t=t.valueOf(),a(t))for(n=0,r=t.length;r>n;n++)e=t[n],delete this.attributes[e];else delete this.attributes[t];return this},e.prototype.instruction=function(t,e){var n,r,i,s,h;if(null!=t&&(t=t.valueOf()),null!=e&&(e=e.valueOf()),a(t))for(s=0,h=t.length;h>s;s++)n=t[s],this.instruction(n);else if(c(t))for(n in t)l.call(t,n)&&(r=t[n],this.instruction(n,r));else u(e)&&(e=e.apply()),i=new o(this,t,e),this.instructions.push(i);return this},e.prototype.toString=function(t,e){var n,r,i,o,s,a,u,c,h,f,d,p,m,g,y,v,b,w,S,_;for(c=(null!=t?t.pretty:void 0)||!1,i=null!=(y=null!=t?t.indent:void 0)?y:"  ",u=null!=(v=null!=t?t.offset:void 0)?v:0,a=null!=(b=null!=t?t.newline:void 0)?b:"\n",e||(e=0),f=new Array(e+u+1).join(i),h="",w=this.instructions,d=0,m=w.length;m>d;d++)o=w[d],h+=o.toString(t,e+1);c&&(h+=f),h+="<"+this.name,S=this.attributes;for(s in S)l.call(S,s)&&(n=S[s],h+=n.toString(t));if(0===this.children.length)h+="/>",c&&(h+=a);else if(c&&1===this.children.length&&null!=this.children[0].value)h+=">",h+=this.children[0].value,h+="</"+this.name+">",h+=a;else{for(h+=">",c&&(h+=a),_=this.children,p=0,g=_.length;g>p;p++)r=_[p],h+=r.toString(t,e+1);c&&(h+=f),h+="</"+this.name+">",c&&(h+=a)}return h},e.prototype.att=function(t,e){return this.attribute(t,e)},e.prototype.ins=function(t,e){return this.instruction(t,e)},e.prototype.a=function(t,e){return this.attribute(t,e)},e.prototype.i=function(t,e){return this.instruction(t,e)},e}(i)}).call(this)},{"./XMLAttribute":86,"./XMLNode":97,"./XMLProcessingInstruction":98,"lodash-node/modern/objects/create":115,"lodash-node/modern/objects/isArray":117,"lodash-node/modern/objects/isFunction":119,"lodash-node/modern/objects/isObject":120}],97:[function(t,e){(function(){var n,r,i,o,s,a,u,c,l,h,f,d,p={}.hasOwnProperty;d=t("lodash-node/modern/objects/isObject"),l=t("lodash-node/modern/objects/isArray"),f=t("lodash-node/modern/objects/isFunction"),h=t("lodash-node/modern/objects/isEmpty"),s=null,n=null,r=null,i=null,o=null,u=null,c=null,e.exports=a=function(){function e(e){this.parent=e,this.options=this.parent.options,this.stringify=this.parent.stringify,null===s&&(s=t("./XMLElement"),n=t("./XMLCData"),r=t("./XMLComment"),i=t("./XMLDeclaration"),o=t("./XMLDocType"),u=t("./XMLRaw"),c=t("./XMLText"))}return e.prototype.clone=function(){throw new Error("Cannot clone generic XMLNode")},e.prototype.element=function(t,e,n){var r,i,o,s,a,u,c;if(o=null,null==e&&(e={}),e=e.valueOf(),d(e)||(c=[e,n],n=c[0],e=c[1]),null!=t&&(t=t.valueOf()),l(t))for(a=0,u=t.length;u>a;a++)r=t[a],o=this.element(r);else if(f(t))o=this.element(t.apply());else if(d(t))for(i in t)p.call(t,i)&&(s=t[i],f(s)&&(s=s.apply()),d(s)&&h(s)&&(s=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===i.indexOf(this.stringify.convertAttKey)?o=this.attribute(i.substr(this.stringify.convertAttKey.length),s):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===i.indexOf(this.stringify.convertPIKey)?o=this.instruction(i.substr(this.stringify.convertPIKey.length),s):d(s)?!this.options.ignoreDecorators&&this.stringify.convertListKey&&0===i.indexOf(this.stringify.convertListKey)&&l(s)?o=this.element(s):(o=this.element(i),o.element(s)):o=this.element(i,s));else o=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(n):this.node(t,e,n);if(null==o)throw new Error("Could not create any elements with: "+t);return o},e.prototype.insertBefore=function(t,e,n){var r,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i),r=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,o),r},e.prototype.insertAfter=function(t,e,n){var r,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i+1),r=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,o),r},e.prototype.remove=function(){var t,e;if(this.isRoot)throw new Error("Cannot remove the root element");return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat(e=[])),e,this.parent},e.prototype.node=function(t,e,n){var r,i;return null!=t&&(t=t.valueOf()),null==e&&(e={}),e=e.valueOf(),d(e)||(i=[e,n],n=i[0],e=i[1]),r=new s(this,t,e),null!=n&&r.text(n),this.children.push(r),r},e.prototype.text=function(t){var e;return e=new c(this,t),this.children.push(e),this},e.prototype.cdata=function(t){var e;return e=new n(this,t),this.children.push(e),this},e.prototype.comment=function(t){var e;return e=new r(this,t),this.children.push(e),this},e.prototype.raw=function(t){var e;return e=new u(this,t),this.children.push(e),this},e.prototype.declaration=function(t,e,n){var r,o;return r=this.document(),o=new i(r,t,e,n),r.xmldec=o,r.root()},e.prototype.doctype=function(t,e){var n,r;return n=this.document(),r=new o(n,t,e),n.doctype=r,r},e.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var t;if(this.isRoot)return this;for(t=this.parent;!t.isRoot;)t=t.parent;return t},e.prototype.document=function(){return this.root().documentObject},e.prototype.end=function(t){return this.document().toString(t)},e.prototype.prev=function(){var t;if(this.isRoot)throw new Error("Root node has no siblings");if(t=this.parent.children.indexOf(this),1>t)throw new Error("Already at the first node");return this.parent.children[t-1]},e.prototype.next=function(){var t;if(this.isRoot)throw new Error("Root node has no siblings");if(t=this.parent.children.indexOf(this),-1===t||t===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[t+1]},e.prototype.importXMLBuilder=function(t){var e;return e=t.root().clone(),e.parent=this,e.isRoot=!1,this.children.push(e),this},e.prototype.ele=function(t,e,n){return this.element(t,e,n)},e.prototype.nod=function(t,e,n){return this.node(t,e,n)},e.prototype.txt=function(t){return this.text(t)},e.prototype.dat=function(t){return this.cdata(t)},e.prototype.com=function(t){return this.comment(t)},e.prototype.doc=function(){return this.document()},e.prototype.dec=function(t,e,n){return this.declaration(t,e,n)},e.prototype.dtd=function(t,e){return this.doctype(t,e)},e.prototype.e=function(t,e,n){return this.element(t,e,n)},e.prototype.n=function(t,e,n){return this.node(t,e,n)},e.prototype.t=function(t){return this.text(t)},e.prototype.d=function(t){return this.cdata(t)},e.prototype.c=function(t){return this.comment(t)},e.prototype.r=function(t){return this.raw(t)},e.prototype.u=function(){return this.up()},e}()}).call(this)},{"./XMLCData":88,"./XMLComment":89,"./XMLDeclaration":94,"./XMLDocType":95,"./XMLElement":96,"./XMLRaw":99,"./XMLText":101,"lodash-node/modern/objects/isArray":117,"lodash-node/modern/objects/isEmpty":118,"lodash-node/modern/objects/isFunction":119,"lodash-node/modern/objects/isObject":120}],98:[function(t,e){(function(){var n,r;r=t("lodash-node/modern/objects/create"),e.exports=n=function(){function t(t,e,n){if(this.stringify=t.stringify,null==e)throw new Error("Missing instruction target");this.target=this.stringify.insTarget(e),n&&(this.value=this.stringify.insValue(n))}return t.prototype.clone=function(){return r(t.prototype,this)},t.prototype.toString=function(t,e){var n,r,i,o,s,a,u,c,l;return o=(null!=t?t.pretty:void 0)||!1,n=null!=(u=null!=t?t.indent:void 0)?u:"  ",i=null!=(c=null!=t?t.offset:void 0)?c:0,r=null!=(l=null!=t?t.newline:void 0)?l:"\n",e||(e=0),a=new Array(e+i+1).join(n),s="",o&&(s+=a),s+="<?",s+=this.target,this.value&&(s+=" "+this.value),s+="?>",o&&(s+=r),s},t}()}).call(this)},{"lodash-node/modern/objects/create":115}],99:[function(t,e){(function(){var n,r,i,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("lodash-node/modern/objects/create"),n=t("./XMLNode"),e.exports=r=function(t){function e(t,n){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing raw text");this.value=this.stringify.raw(n)}return s(e,t),e.prototype.clone=function(){return i(e.prototype,this)},e.prototype.toString=function(t,e){var n,r,i,o,s,a,u,c,l;return o=(null!=t?t.pretty:void 0)||!1,n=null!=(u=null!=t?t.indent:void 0)?u:"  ",i=null!=(c=null!=t?t.offset:void 0)?c:0,r=null!=(l=null!=t?t.newline:void 0)?l:"\n",e||(e=0),a=new Array(e+i+1).join(n),s="",o&&(s+=a),s+=this.value,o&&(s+=r),s},e}(n)}).call(this)},{"./XMLNode":97,"lodash-node/modern/objects/create":115}],100:[function(t,e){(function(){var t,n=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty;e.exports=t=function(){function t(t){this.assertLegalChar=n(this.assertLegalChar,this);var e,i,o;this.allowSurrogateChars=null!=t?t.allowSurrogateChars:void 0,o=(null!=t?t.stringify:void 0)||{};for(e in o)r.call(o,e)&&(i=o[e],this[e]=i)}return t.prototype.eleName=function(t){return t=""+t||"",this.assertLegalChar(t)},t.prototype.eleText=function(t){return t=""+t||"",this.assertLegalChar(this.elEscape(t))},t.prototype.cdata=function(t){if(t=""+t||"",t.match(/]]>/))throw new Error("Invalid CDATA text: "+t);return this.assertLegalChar(t)},t.prototype.comment=function(t){if(t=""+t||"",t.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)},t.prototype.raw=function(t){return""+t||""},t.prototype.attName=function(t){return""+t||""},t.prototype.attValue=function(t){return t=""+t||"",this.attEscape(t)},t.prototype.insTarget=function(t){return""+t||""},t.prototype.insValue=function(t){if(t=""+t||"",t.match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return t},t.prototype.xmlVersion=function(t){if(t=""+t||"",!t.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t},t.prototype.xmlEncoding=function(t){if(t=""+t||"",!t.match(/[A-Za-z](?:[A-Za-z0-9._-]|-)*/))throw new Error("Invalid encoding: "+t);return t},t.prototype.xmlStandalone=function(t){return t?"yes":"no"},t.prototype.dtdPubID=function(t){return""+t||""},t.prototype.dtdSysID=function(t){return""+t||""},t.prototype.dtdElementValue=function(t){return""+t||""},t.prototype.dtdAttType=function(t){return""+t||""},t.prototype.dtdAttDefault=function(t){return null!=t?""+t||"":t},t.prototype.dtdEntityValue=function(t){return""+t||""},t.prototype.dtdNData=function(t){return""+t||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.convertListKey="#list",t.prototype.assertLegalChar=function(t){var e,n;if(e=this.allowSurrogateChars?/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uFFFE-\uFFFF]/:/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uD800-\uDFFF\uFFFE-\uFFFF]/,n=t.match(e))throw new Error("Invalid character ("+n+") in string: "+t+" at index "+n.index);return t},t.prototype.elEscape=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},t}()}).call(this)},{}],101:[function(t,e){(function(){var n,r,i,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("lodash-node/modern/objects/create"),n=t("./XMLNode"),e.exports=r=function(t){function e(t,n){if(this.parent=t,e.__super__.constructor.call(this,t),null==n)throw new Error("Missing element text");this.value=this.stringify.eleText(n)}return s(e,t),e.prototype.clone=function(){return i(e.prototype,this)},e.prototype.toString=function(t,e){var n,r,i,o,s,a,u,c,l;return o=(null!=t?t.pretty:void 0)||!1,n=null!=(u=null!=t?t.indent:void 0)?u:"  ",i=null!=(c=null!=t?t.offset:void 0)?c:0,r=null!=(l=null!=t?t.newline:void 0)?l:"\n",e||(e=0),a=new Array(e+i+1).join(n),s="",o&&(s+=a),s+=this.value,o&&(s+=r),s},e}(n)}).call(this)},{"./XMLNode":97,"lodash-node/modern/objects/create":115}],102:[function(t,e){(function(){var n,r;r=t("lodash-node/modern/objects/assign"),n=t("./XMLBuilder"),e.exports.create=function(t,e,i,o){return o=r({},e,i,o),new n(t,o).root()}}).call(this)},{"./XMLBuilder":87,"lodash-node/modern/objects/assign":114}],103:[function(t,e){function n(t,e){return arguments.length>2?r(t,17,i(arguments,2),null,e):r(t,1,null,null,e)}var r=t("../internals/createWrapper"),i=t("../internals/slice");e.exports=n},{"../internals/createWrapper":108,"../internals/slice":113}],104:[function(t,e){function n(t){function e(){if(a){var t=s(a);u.apply(t,arguments)}if(this instanceof e){var o=r(n.prototype),l=n.apply(o,t||arguments);return i(l)?l:o}return n.apply(c,t||arguments)}var n=t[0],a=t[2],c=t[4];return o(e,t),e}var r=t("./baseCreate"),i=t("../objects/isObject"),o=t("./setBindData"),s=t("./slice"),a=[],u=a.push;e.exports=n},{"../objects/isObject":120,"./baseCreate":105,"./setBindData":111,"./slice":113}],105:[function(t,e){(function(n){function r(t){return o(t)?s(t):{}}var i=t("./isNative"),o=t("../objects/isObject"),s=(t("../utilities/noop"),i(s=Object.create)&&s);s||(r=function(){function t(){}return function(e){if(o(e)){t.prototype=e;var r=new t;t.prototype=null}return r||n.Object()}}()),e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../objects/isObject":120,"../utilities/noop":124,"./isNative":109}],106:[function(t,e){function n(t,e,n){if("function"!=typeof t)return i;if("undefined"==typeof e||!("prototype"in t))return t;var l=t.__bindData__;if("undefined"==typeof l&&(s.funcNames&&(l=!t.name),l=l||!s.funcDecomp,!l)){var h=c.call(t);s.funcNames||(l=!a.test(h)),l||(l=u.test(h),o(t,l))}if(l===!1||l!==!0&&1&l[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return r(t,e)}var r=t("../functions/bind"),i=t("../utilities/identity"),o=t("./setBindData"),s=t("../support"),a=/^\s*function[ \n\r\t]+\w/,u=/\bthis\b/,c=Function.prototype.toString;e.exports=n},{"../functions/bind":103,"../support":122,"../utilities/identity":123,"./setBindData":111}],107:[function(t,e){function n(t){function e(){var t=p?f:this;if(l){var o=s(l);u.apply(o,arguments)}if((h||g)&&(o||(o=s(arguments)),h&&u.apply(o,h),g&&o.length<d))return c|=16,n([a,y?c:-4&c,o,null,f,d]);if(o||(o=arguments),m&&(a=t[v]),this instanceof e){t=r(a.prototype);var b=a.apply(t,o);return i(b)?b:t}return a.apply(t,o)}var a=t[0],c=t[1],l=t[2],h=t[3],f=t[4],d=t[5],p=1&c,m=2&c,g=4&c,y=8&c,v=a;return o(e,t),e}var r=t("./baseCreate"),i=t("../objects/isObject"),o=t("./setBindData"),s=t("./slice"),a=[],u=a.push;e.exports=n},{"../objects/isObject":120,"./baseCreate":105,"./setBindData":111,"./slice":113}],108:[function(t,e){function n(t,e,a,l,h,f){var d=1&e,p=2&e,m=4&e,g=16&e,y=32&e;if(!p&&!o(t))throw new TypeError;g&&!a.length&&(e&=-17,g=a=!1),y&&!l.length&&(e&=-33,y=l=!1);var v=t&&t.__bindData__;if(v&&v!==!0)return v=s(v),v[2]&&(v[2]=s(v[2])),v[3]&&(v[3]=s(v[3])),!d||1&v[1]||(v[4]=h),!d&&1&v[1]&&(e|=8),!m||4&v[1]||(v[5]=f),g&&u.apply(v[2]||(v[2]=[]),a),y&&c.apply(v[3]||(v[3]=[]),l),v[1]|=e,n.apply(null,v);var b=1==e||17===e?r:i;return b([t,e,a,l,h,f])}var r=t("./baseBind"),i=t("./baseCreateWrapper"),o=t("../objects/isFunction"),s=t("./slice"),a=[],u=a.push,c=a.unshift;e.exports=n},{"../objects/isFunction":119,"./baseBind":104,"./baseCreateWrapper":107,"./slice":113}],109:[function(t,e){function n(t){return"function"==typeof t&&o.test(t)}var r=Object.prototype,i=r.toString,o=RegExp("^"+String(i).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");e.exports=n},{}],110:[function(t,e){var n={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};e.exports=n},{}],111:[function(t,e){var n=t("./isNative"),r=t("../utilities/noop"),i={configurable:!1,enumerable:!1,value:null,writable:!1},o=function(){try{var t={},e=n(e=Object.defineProperty)&&e,r=e(t,t,t)&&e}catch(i){}return r}(),s=o?function(t,e){i.value=e,o(t,"__bindData__",i)}:r;e.exports=s},{"../utilities/noop":124,"./isNative":109}],112:[function(t,e){var n=t("./objectTypes"),r=Object.prototype,i=r.hasOwnProperty,o=function(t){var e,r=t,o=[];if(!r)return o;if(!n[typeof t])return o;for(e in r)i.call(r,e)&&o.push(e);return o};e.exports=o},{"./objectTypes":110}],113:[function(t,e){function n(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(0>i?0:i);++r<i;)o[r]=t[e+r];return o}e.exports=n},{}],114:[function(t,e){var n=t("../internals/baseCreateCallback"),r=t("./keys"),i=t("../internals/objectTypes"),o=function(t,e,o){var s,a=t,u=a;if(!a)return u;var c=arguments,l=0,h="number"==typeof o?2:c.length;if(h>3&&"function"==typeof c[h-2])var f=n(c[--h-1],c[h--],2);else h>2&&"function"==typeof c[h-1]&&(f=c[--h]);for(;++l<h;)if(a=c[l],a&&i[typeof a])for(var d=-1,p=i[typeof a]&&r(a),m=p?p.length:0;++d<m;)s=p[d],u[s]=f?f(u[s],a[s]):a[s];return u};e.exports=o},{"../internals/baseCreateCallback":106,"../internals/objectTypes":110,"./keys":121}],115:[function(t,e){function n(t,e){var n=i(t);return e?r(n,e):n}var r=t("./assign"),i=t("../internals/baseCreate");e.exports=n},{"../internals/baseCreate":105,"./assign":114}],116:[function(t,e){var n=t("../internals/baseCreateCallback"),r=t("./keys"),i=t("../internals/objectTypes"),o=function(t,e,o){var s,a=t,u=a;if(!a)return u;if(!i[typeof a])return u;e=e&&"undefined"==typeof o?e:n(e,o,3);for(var c=-1,l=i[typeof a]&&r(a),h=l?l.length:0;++c<h;)if(s=l[c],e(a[s],s,t)===!1)return u;return u};e.exports=o},{"../internals/baseCreateCallback":106,"../internals/objectTypes":110,"./keys":121}],117:[function(t,e){var n=t("../internals/isNative"),r="[object Array]",i=Object.prototype,o=i.toString,s=n(s=Array.isArray)&&s,a=s||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&o.call(t)==r||!1};e.exports=a},{"../internals/isNative":109}],118:[function(t,e){function n(t){var e=!0;if(!t)return e;var n=l.call(t),c=t.length;return n==s||n==u||n==o||n==a&&"number"==typeof c&&i(t.splice)?!c:(r(t,function(){return e=!1}),e)}var r=t("./forOwn"),i=t("./isFunction"),o="[object Arguments]",s="[object Array]",a="[object Object]",u="[object String]",c=Object.prototype,l=c.toString;e.exports=n},{"./forOwn":116,"./isFunction":119}],119:[function(t,e){function n(t){return"function"==typeof t}e.exports=n},{}],120:[function(t,e){function n(t){return!(!t||!r[typeof t])}var r=t("../internals/objectTypes");e.exports=n},{"../internals/objectTypes":110}],121:[function(t,e){var n=t("../internals/isNative"),r=t("./isObject"),i=t("../internals/shimKeys"),o=n(o=Object.keys)&&o,s=o?function(t){return r(t)?o(t):[]}:i;e.exports=s},{"../internals/isNative":109,"../internals/shimKeys":112,"./isObject":120}],122:[function(t,e){(function(n){var r=t("./internals/isNative"),i=/\bthis\b/,o={};
o.funcDecomp=!r(n.WinRTError)&&i.test(function(){return this}),o.funcNames="string"==typeof Function.name,e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./internals/isNative":109}],123:[function(t,e){function n(t){return t}e.exports=n},{}],124:[function(t,e){function n(){}e.exports=n},{}],125:[function(t,e){"use strict";function n(t,e,n,r){this.wormholes=t?t:[],this.bridges=e?e:[],this.excludes=n?n:{},this.minBridgeRange=void 0!==r?r:3,this.forbiddenBridges={},this.forbiddenWormholes={},this.connectedNodesCache={}}function r(t){for(var e=[],n=i.getSystem(t),r=n.getGates(),s=0;s<r.length;s++){var a=r[s];if(!this.isExcluded(a)){var u=new o(a,"gate");e.push(u)}}for(var s=0;s<this.wormholes.length;s++){var c=this.wormholes[s],l=c.getStartSystem(),h=c.getEndSystem(),a=l===n?h:h===n?l:null;if(a&&!this.isExcluded(a)){var f=new o(a,"wormhole",c);e.push(f)}}for(var s=0;s<this.bridges.length;s++){var d=this.bridges[s];if(d.getHomeSystem()===n)for(var p=this.getConnectionsForBridge(d),m=0;m<p.length;m++){var a=p[m];if(!this.isExcluded(a)){var f=new o(a,"bridge",d);e.push(f)}}}return e}e.exports=n;var i=t("local/repositories/system"),o=t("./node.js"),s=t("./priority-shortest-path.js");n.prototype.copy=function(){var t=new n(this.wormholes,this.bridges,this.excludes,this.minBridgeRange);return t},n.prototype.getNode=function(t){var e=i.getSystem(t);return new o(e,"start")},n.prototype.getConnectedNodes=function(t){var e=this.connectedNodesCache[t];e||(e=r.call(this,t),this.connectedNodesCache[t]=e);for(var n=[],i=0,o=e.length;o>i;i++){var s=e[i],a=s.methodData;"wormhole"===s.methodType&&this.forbiddenWormholes[a.id]||"bridge"===s.methodType&&this.forbiddenBridges[a.id]||n.push(s)}return n},n.prototype.getConnectionsForBridge=function(t){if(this.staticGraph||(this.staticGraph=new n(null,null,this.excludes)),this.bridgeConnectionsCache||(this.bridgeConnectionsCache={}),!this.bridgeConnectionsCache[t.id]){var e=t.getHomeSystem().id,r=t.getSystemsInRange();r=r.filter(function(t){var n=s(this.staticGraph,e,t.id,null,this.minBridgeRange);return null===n},this),this.bridgeConnectionsCache[t.id]=r}return this.bridgeConnectionsCache[t.id]},n.prototype.forbidBridge=function(t){this.forbiddenBridges[t]=!0},n.prototype.forbidWormhole=function(t){this.forbiddenWormholes[t]=!0},n.prototype.bridgeIsForbidden=function(t){return this.forbiddenBridges[t]},n.prototype.wormholeIsForbidden=function(t){return this.forbiddenWormholes[t]},n.prototype.clearForbidden=function(){this.forbiddenBridges={},this.forbiddenWormholes={}},n.prototype.isExcluded=function(t){return this.excludes.hi&&t.isHighsec()?!0:this.excludes.lo&&t.isLowsec()?!0:this.excludes.nl&&t.isNullsec()?!0:this.excludes.ws&&t.isWormholeSpace()?!0:!1}},{"./node.js":128,"./priority-shortest-path.js":131,"local/repositories/system":158}],126:[function(t,e){e.exports=t("./pathfinder-interface.js")},{"./pathfinder-interface.js":130}],127:[function(t,e){"use strict";function n(t,e,n,a,u,c,l){void 0===c&&(c=2),l||(l=o),a||(a=20);for(var h=[],f=[],d=Date.now(),p=!1;h.length<a&&d+l>Date.now();){for(var m=0;m<f.length;m++){var g=f[m],y=g.bridges.every(function(e){return!t.bridgeIsForbidden(e)}),v=g.wormholes.every(function(e){return!t.wormholeIsForbidden(e)});y&&v&&(g.bridges.length>0?t.forbidBridge(g.bridges[0]):t.forbidWormhole(g.wormholes[0]))}if(!y||!v){var b=s(t,e,n,u);if(t.clearForbidden(),!b)break;var g=i(b);if(f.push(g),r(b)<=c&&h.push(b),0===g.wormholes.length&&0===g.bridges.length){p=!0;break}}}if(!p){t=t.copy(),t.bridges=[],t.wormholes=[];var w=s(t,e,n,u);w&&h.push(w)}return h=h.sort(function(t,e){return t.length===e.length?0:t.length<e.length?-1:1})}function r(t){for(var e=0,n=0;n<t.length;n++)"bridge"===t[n].methodType&&e++;return e}function i(t){var e=t.filter(function(t){return"wormhole"==t.methodType}).map(function(t){return t.methodData.id}),n=t.filter(function(t){return"bridge"==t.methodType}).map(function(t){return t.methodData.id});return{wormholes:e,bridges:n}}var o=2e3;e.exports=n;var s=t("./priority-shortest-path.js")},{"./priority-shortest-path.js":131}],128:[function(t,e){function n(t,e,n){this.id=t.id,this.system=t,this.methodType=e,this.methodData=n}e.exports=n,n.prototype.copy=function(){var t=new n;return t.id=this.id,t.system=this.system,t.methodType=this.methodType,t.methodData=this.methodData,t}},{}],129:[function(t,e){"use strict";function n(t){var e="static_"+t.startSys.id+"_"+t.endSys.id,n=new s(h.get(e));return n}function r(t,e){var n="static_"+e.startSys.id+"_"+e.endSys.id;h.set(n,t.data)}function i(t){return t.map(function(t){var e=l.getSystem(t);return new c(e,"gate")})}function o(t){return t.map(function(t){return t.id})}function s(t){this.data=t?t:{}}function a(t,e,n){return t=t?1:0,e=e?1:0,n=n?1:0,t+"_"+e+"_"+n}var u={};e.exports=u;var c=t("./node.js"),l=t("local/repositories/system"),h=t("./store");u.hasPath=function(t){var e=n(t).getPath(!t.noHighsec,!t.noLowsec,!t.noNullsec);return void 0!==e},u.hasJumpCount=function(t){var e=n(t).getJumps(!t.noHighsec,!t.noLowsec,!t.noNullsec);return void 0!==e},u.getPath=function(t){var e=n(t).getPath(!t.noHighsec,!t.noLowsec,!t.noNullsec);return e?i(e):e},u.getJumpCount=function(t){return n(t).getJumps(!t.noHighsec,!t.noLowsec,!t.noNullsec)},u.setPath=function(t,e){var i=n(e);t&&(t=o(t)),i.setPath(t,!e.noHighsec,!e.noLowsec,!e.noNullsec),r(i,e)},u.setJumpCount=function(t,e){var i=n(e);i.setJumps(t,!e.noHighsec,!e.noLowsec,!e.noNullsec),r(i,e)},u.clearCache=function(){h.clear()},u.countCachedPaths=function(){var t=h.getAll(),e=Object.keys(t).reduce(function(e,n){var r=t[n],i=new s(r);return e+i.countCachedPaths()},0);return e},u.countCachedJumps=function(){var t=h.getAll(),e=Object.keys(t).reduce(function(e,n){var r=t[n],i=new s(r);return e+i.countCachedJumps()},0);return e},s.prototype.getPath=function(t,e,n){var r=a(t,e,n)+"_route";return this.data[r]},s.prototype.setPath=function(t,e,n,r){var i=a(e,n,r)+"_route";this.data[i]=t},s.prototype.getJumps=function(t,e,n){var r=a(t,e,n)+"_jumps";return this.data[r]},s.prototype.setJumps=function(t,e,n,r){var i=a(e,n,r)+"_jumps";this.data[i]=t},s.prototype.countCachedPaths=function(){return this.countCached("route")},s.prototype.countCachedJumps=function(){return this.countCached("jumps")},s.prototype.countCached=function(t){var e=Object.keys(this.data),n=e.reduce(function(e,n){var r=n.indexOf(t)>-1;return r?e+1:e},0);return n}},{"./node.js":128,"./store":134,"local/repositories/system":158}],130:[function(t,e){"use strict";function n(t){var e=new s(null,null,{hi:t.noHighsec,lo:t.noLowsec,nl:t.noNullsec});return o(e,t.startSys.id,t.endSys.id)}var r=t("local/repositories/system"),i=t("./path-cache.js"),o=t("./priority-shortest-path.js"),s=t("./graph.js"),a=t("./route-details.js"),u=t("./k-shortest-paths.js"),c=(t("q"),{});e.exports=c,c.findPaths=function(t){return t.maxPaths||(t.maxPaths=20),r.initialize().then(function(){var e={hi:2===t.highsec,lo:2===t.lowsec,nl:2===t.nullsec,ws:2===t.wspace},n=new s(t.wormholes,t.bridges,e,t.minBridgeDistance),r=function(e){return 1===t.highsec&&e.system.isHighsec()?!0:1===t.lowsec&&e.system.isHighsec()?!0:1===t.nullsec&&e.system.isHighsec()?!0:1===t.wspace&&e.system.isHighsec()?!0:!1},i=t.startSys.id,o=t.endSys.id,c=u(n,i,o,t.maxPaths,r,t.maxBridges,t.maxTime);return c=c.map(function(t){return new a(t)})})},c.findStaticPath=function(t){if(!i.hasPath(t)){var e=n(t);i.setPath(e,t)}var r=i.getPath(t);return r?new a(r):r},c.findStaticJumpCount=function(t){if(!i.hasJumpCount(t)){var e=n(t),r=e?e.length-1:null;i.setJumpCount(r,t)}return i.getJumpCount(t)}},{"./graph.js":125,"./k-shortest-paths.js":127,"./path-cache.js":129,"./priority-shortest-path.js":131,"./route-details.js":133,"local/repositories/system":158,q:81}],131:[function(t,e){"use strict";function n(t,e,n,s,a){if(e===n)return null;if(0===a)return null;s||(s=function(){return!1}),a||(a=o);var u=new i(s),c={},l=t.getNode(e);for(u.enq(l),c[l.id]=!0,l.distance=0;!u.isEmpty();){var h=u.deq();if(!(h.distance>a)){if(h.id===n)return r(h);for(var f=t.getConnectedNodes(h.id),d=0;d<f.length;d++){var p=f[d];c[p.id]||(p.distance=h.distance+1,p.parent=h,u.enq(p),c[p.id]=!0)}}}return null}function r(t){for(var e=[t],n=t.parent;n;)e.push(n),n=n.parent;return e.reverse()}e.exports=n;var i=t("./two-priority-queue.js"),o=100},{"./two-priority-queue.js":135}],132:[function(t,e){"use strict";function n(){this.queue=[],this.offset=0}e.exports=n,n.prototype.getLength=function(){return this.queue.length-this.offset},n.prototype.isEmpty=function(){return 0==this.queue.length},n.prototype.enq=function(t){this.queue.push(t)},n.prototype.deq=function(){if(0==this.queue.length)return void 0;var t=this.queue[this.offset];return 2*++this.offset>=this.queue.length&&(this.queue=this.queue.slice(this.offset),this.offset=0),t},n.prototype.peek=function(){return this.queue.length>0?this.queue[this.offset]:void 0}},{}],133:[function(t,e){"use strict";function n(t){this.route=t,this.routePartition=this.getPartition(t),this.startSystem=t[0].system,this.endSystem=t[t.length-1].system,this.jumps=t.length-1,this.goesHighsec=t.some(function(t){return t.system.isHighsec()}),this.goesLowsec=t.some(function(t){return t.system.isLowsec()}),this.goesNullsec=t.some(function(t){return t.system.isNullsec()}),this.goesWspace=t.some(function(t){return t.system.isWormholeSpace()}),this.hasBridges=this.route.some(function(t){return"bridge"===t.methodType}),this.hasStargates=this.route.some(function(t){return"gate"===t.methodType}),this.hasWormholes=this.route.some(function(t){return"wormhole"===t.methodType}),this.hasTitans=this.route.some(function(t){return"bridge"===t.methodType&&"titan"===t.methodData.bridgeType}),this.hasBlackops=this.route.some(function(t){return"bridge"===t.methodType&&"blackops"===t.methodData.bridgeType})}function r(t,e){for(var n=0,r=0;r<t.length;r++){var i=t[r];if("bridge"===i.type)n="blackops"===i.bridgeType?s(n,i.distance,.5):s(n,i.distance,1);else{var a=o(i.jumps,e),u=a/10;n=Math.max(0,n-u)}}return n}function i(t,e){for(var n=0,r=0,i=0;i<t.length;i++){var a=t[i];if("bridge"===a.type)r+=n+o(1,e),n="blackops"===a.bridgeType?s(n,a.distance,.5):s(n,a.distance,1);else{var u=o(a.jumps,e);r+=u;var c=u/10;n=Math.max(0,n-c)}}return r}function o(t,e){var n=e.alignTime+e.warpTime20;return n+=10,n*t/60}function s(t,e,n){var r,i=1+e*n;return r=1>t?i:i*t}var a=t("moment");n.prototype.getPartition=function(t){function e(t){return"bridge"===t?new u(i):"k-k wormhole"===t||"wormhole chain"===t?new c(t,i):new l(n,i)}var n,r=[],i=[];i.push(t[0]);for(var o=1;o<t.length;o++){var s=t[o],a=s.methodType;"wormhole"===a&&(a=s.methodData.isKtoK()?"k-k wormhole":"wormhole chain");var h=2===i.length&&("k-k wormhole"===n||"bridge"===n);if(h||n&&n!==a){var f=i[i.length-1],d=e(n,i);r.push(d),i=[],i.push(f),i.push(s),n=a}else n=a,i.push(s)}return r.push(e(n,i)),r},n.prototype.getWormholes=function(){var t=this.route.filter(function(t){return"wormhole"===t.methodType}).map(function(t){return t.methodData});return t},n.prototype.getBridges=function(){var t=this.route.filter(function(t){return"bridge"===t.methodType}).map(function(t){return t.methodData});return t},n.prototype.getAge=function(){if(void 0===this.age){var t=this.getWormholes();if(0===t.length)this.age=null;else{var e;t.forEach(function(t){(!e||t.getLastObserved()<e)&&(e=t.getLastObserved())}),this.age=e}}return this.age},n.prototype.getAgeFuzzy=function(){var t=this.getWormholes().some(function(t){return t.isExpired()});if(t)return"Expired";var e=this.getAge();return e?a(e).fromNow().replace("ago","old"):"Static"},n.prototype.getDateExpires=function(){var t=this.getWormholes();return 0===t.length?null:t.reduce(function(t,e){var n=e.getDateExpires();return Math.min(t,n)},Number.POSITIVE_INFINITY)},n.prototype.getDateExpiresFuzzy=function(){var t=this.getDateExpires();return t?t<(new Date).getTime()?"Expired":a(t).fromNow().replace("in","Expires: "):"Static"},n.prototype.getFatigue=function(t){return r(this.routePartition,t)},n.prototype.getMinutes=function(t){return i(this.routePartition,t)},n.prototype.getFatiguePretty=function(t){return this.getFatigue(t).toFixed(1)},n.prototype.getMinutesPretty=function(t){return Math.ceil(this.getMinutes(t))};var u=function(t){this.type="bridge",this.startSystem=t[0].system,this.endSystem=t[1].system,this.jumps=1,this.bridger=t[1].methodData,this.bridgeType=this.bridger.bridgeType,this.distance=this.startSystem.getDistanceFromSystem(this.endSystem)};u.prototype.getDistancePretty=function(){var t=this.distance.toFixed(2);return t};var c=function(t,e){this.type="wormhole",this.subtype=t,this.systems=e,this.jumps=e.length-1,this.startSystem=this.systems[0].system,this.endSystem=this.systems[this.systems.length-1].system,this.wormholes=e.slice(1).map(function(t){return t.methodData}),this.missingClass=this.wormholes.some(function(t){return!t.hasClass()})},l=function(t,e){this.type=t,this.systems=e,this.jumps=e.length-1,this.startSystem=this.systems[0].system,this.endSystem=this.systems[this.systems.length-1].system};e.exports=n},{moment:80}],134:[function(require,module,exports){this.JSON||(this.JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,i,o,s,a=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;o>n;n+=1)s[n]=str(n,u)||"null";return i=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)r=rep[n],"string"==typeof r&&(i=str(r,u),i&&s.push(quote(r)+(gap?": ":":")+i));else for(r in u)Object.hasOwnProperty.call(u,r)&&(i=str(r,u),i&&s.push(quote(r)+(gap?": ":":")+i));return i=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,!e||"function"==typeof e||"object"==typeof e&&"number"==typeof e.length)return str("",{"":t});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,i=t[e];if(i&&"object"==typeof i)for(n in i)Object.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(t,e,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t){function e(){try{return a in t&&t[a]}catch(e){return!1}}function n(t){return function(){var e=Array.prototype.slice.call(arguments,0);e.unshift(i),c.appendChild(i),i.addBehavior("#default#userData"),i.load(a);var n=t.apply(o,e);return c.removeChild(i),n}}function r(t){return t.replace(/^d/,"___$&").replace(f,"___")}var i,o={},s=t.document,a="localStorage",u="script";if(o.disabled=!1,o.set=function(){},o.get=function(){},o.remove=function(){},o.clear=function(){},o.transact=function(t,e,n){var r=o.get(t);null==n&&(n=e,e=null),"undefined"==typeof r&&(r=e||{}),n(r),o.set(t,r)},o.getAll=function(){},o.forEach=function(){},o.serialize=function(t){return JSON.stringify(t)},o.deserialize=function(t){if("string"!=typeof t)return void 0;try{return JSON.parse(t)}catch(e){return t||void 0}},e())i=t[a],o.set=function(t,e){return void 0===e?o.remove(t):(i.setItem(t,o.serialize(e)),e)},o.get=function(t){return o.deserialize(i.getItem(t))},o.remove=function(t){i.removeItem(t)},o.clear=function(){i.clear()},o.getAll=function(){var t={};return o.forEach(function(e,n){t[e]=n}),t},o.forEach=function(t){for(var e=0;e<i.length;e++){var n=i.key(e);t(n,o.get(n))}};else if(s.documentElement.addBehavior){var c,l;try{l=new ActiveXObject("htmlfile"),l.open(),l.write("<"+u+">document.w=window</"+u+'><iframe src="/favicon.ico"></iframe>'),l.close(),c=l.w.frames[0].document,i=c.createElement("div")}catch(h){i=s.createElement("div"),c=s.body}var f=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");o.set=n(function(t,e,n){return e=r(e),void 0===n?o.remove(e):(t.setAttribute(e,o.serialize(n)),t.save(a),n)}),o.get=n(function(t,e){return e=r(e),o.deserialize(t.getAttribute(e))}),o.remove=n(function(t,e){e=r(e),t.removeAttribute(e),t.save(a)}),o.clear=n(function(t){var e=t.XMLDocument.documentElement.attributes;t.load(a);for(var n,r=0;n=e[r];r++)t.removeAttribute(n.name);t.save(a)}),o.getAll=function(){var t={};return o.forEach(function(e,n){t[e]=n}),t},o.forEach=n(function(t,e){for(var n,r=t.XMLDocument.documentElement.attributes,i=0;n=r[i];++i)e(n.name,o.deserialize(t.getAttribute(n.name)))})}try{var d="__storejs__";o.set(d,d),o.get(d)!=d&&(o.disabled=!0),o.remove(d)}catch(h){o.disabled=!0}o.enabled=!o.disabled,"undefined"!=typeof module&&module.exports&&this.module!==module?module.exports=o:"function"==typeof define&&define.amd?define(o):t.store=o}(Function("return this")())},{}],135:[function(t,e){"use strict";function n(t){this.lowPriorityFunc=t,this.hiQueue=new r,this.loQueue=new r}e.exports=n;var r=t("./queue.js");n.prototype.enq=function(t){this.lowPriorityFunc(t)?this.loQueue.enq(t):this.hiQueue.enq(t)},n.prototype.deq=function(){return this.hiQueue.isEmpty()?this.loQueue.deq():this.hiQueue.deq()},n.prototype.isEmpty=function(){return this.hiQueue.isEmpty()&&this.loQueue.isEmpty()}},{"./queue.js":132}],136:[function(t,e){"use strict";var n=t("../base"),r=t("local/eve-api/image-server"),i=t("moment"),o=function(t,e){this.id=t,this.name=e.name,this.type=e.type,this.lastModified=e.mod};o.prototype.getPortraitUrl=function(t){return r(this.id,this.type,t)},o.prototype.getLastModifiedPretty=function(){return this.lastModified?i(this.lastModified).format("llll"):"-"},o.prototype.getLastModifiedFuzzy=function(){return this.lastModified?i(this.lastModified).fromNow():"-"};var s=n({path:"authorizations",makeLocal:function(t,e){return new o(t,e)},makeRemote:function(t){var e={name:t.name,type:t.type,mod:Date.now()};return e}}),a={get:s.get,getAll:s.getAll,getArray:s.getArray,"delete":s.delete,changed:s.changed,changedRemoveHandler:s.changedRemoveHandler,initialize:s.initialize,supressChanged:s.supressChanged};a.set=function(t,e,n){var r=new o(t,{name:e,type:n});s.update(r)},e.exports=a},{"../base":138,"local/eve-api/image-server":77,moment:80}],137:[function(t,e){e.exports=t("./authorization-repository")},{"./authorization-repository":136}],138:[function(t,e){"use strict";var n,r=t("q"),i=t("firebase"),o=function(t){function e(){if(!n)throw new Error("You must first set the firebase URL");return o||(o=n.child(t.path)),o}function i(t){for(var e in t)t[e]||delete t[e],"object"==typeof t[e]&&i(t[e]);return t}var o,s=t.makeLocal?t.makeLocal:function(t,e){return e},a=t.makeRemote?t.makeRemote:function(t){return t},u=t.idFromLocal?t.idFromLocal:function(t){return t.id},c=t.isValid?t.isValid:function(){return!0};if(t.pruneRemote){var l=a;a=function(t){var e=l(t);return i(e)}}var h,f=[],d=!1,p=!1,m={hash:{},array:[]},g=null,y={};y.get=function(t){return y.getAll()[t]},y.getAll=function(){return g&&(m=v(g),g=null),m.hash},y.getArray=function(){return g&&(m=v(g),g=null),m.array},y.create=function(t){if(!c(t))throw"Invalid data";var n=e().push(a(t));return n.key()},y.update=function(t){if(!c(t))throw"Invalid data";var n=u(t);n?e().child(n).set(a(t)):y.create(t)},y.delete=function(t){var n=u(t);e().child(n).remove()},y.changed=function(t){if(void 0!==t)f.push(t);else{if(d)return;f.forEach(function(t){t()})}},y.changedRemoveHandler=function(t){f.remove(t)},y.supressChanged=function(t){t!==d&&(d=t,!t&&p&&(p=!1,y.changed()))},y.getSupressChanged=function(){return d};var v=function(t){var e={},n=Object.keys(t).map(function(n){var r=s(n,t[n]);return e[n]=r,r});return{hash:e,array:n}};return y.initialize=function(){if(!h){h=r.defer();var t=!0;e().on("value",function(e){var n=e.val();g=n?n:{},d||t?d?p=!0:t&&(t=!1,h.resolve()):y.changed()},function(t){console.log("firebase init error:",t),h.reject(),h=null})}return h.promise},y};o.setFirebaseUrl=function(t){n=new i(t)},o.getRef=function(){if(!n)throw new Error("Must set firebase url");return n};var s="./";o.setStaticDataRoot=function(t){s=t},o.getStaticDataRoot=function(){return s},e.exports=o},{firebase:79,q:81}],139:[function(t,e){"use strict";var n=t("./bridge"),r=t("../base"),i=r({path:"bridges",makeLocal:function(t,e){return new n(t,e)},makeRemote:function(t){var e={homeSystem:t.homeSystemId,bridgeType:t.bridgeType,name:t.name,lastModified:(new Date).getTime()};return e}}),o={getBridge:i.get,getBridges:i.getAll,getBridgesArray:i.getArray,createBridge:i.create,updateBridge:i.update,deleteBridge:i.delete,bridgesChanged:i.changed,bridgesChangedRemoveHandler:i.changedRemoveHandler,initialize:i.initialize};e.exports=o},{"../base":138,"./bridge":140}],140:[function(t,e){"use strict";var n,r=function(t,e){t&&(this.id=t,this.homeSystemId=e.homeSystem,this.bridgeType=e.bridgeType,this.name=e.name,this.lastModified=e.lastModified)};r.prototype.getBridgeRange=function(){return"titan"===this.bridgeType?5:"blackops"===this.bridgeType?8:0},r.prototype.getBridgeTypePretty=function(){var t=r.possibleBridgeTypes.find(function(t){return this.bridgeType===t.key},this);return t?t.value:void 0},r.prototype.clone=function(){var t=new r;return t.id=this.id,t.homeSystemId=this.homeSystemId,t.bridgeType=this.bridgeType,t.name=this.name,t};var i={};r.prototype.getHomeSystem=function(){return n.getSystem(this.homeSystemId)},r.prototype.getSystemsInRange=function(){return void 0===i[this.id]&&(i[this.id]=n.getSystemsWithinLightyears(this.getHomeSystem(),this.getBridgeRange())),i[this.id]},r.attachRepositories=function(t){n=t},r.possibleBridgeTypes=[{key:"titan",value:"Titan"},{key:"blackops",value:"Black Ops"}],e.exports=r},{}],141:[function(t,e){e.exports=t("./bridge-repository")},{"./bridge-repository":139}],142:[function(t,e){e.exports=t("./principal-service")},{"./principal-service":143}],143:[function(t,e){"use strict";function n(t){return t&&!t.roles&&(t.roles=["user"],t.auth.isAdmin&&t.roles.push("admin")),t}function r(){i.onAuth(function(t){t?(u=t,n(t),c=!0):(u=null,c=!1),a.resolve(u),f.principalChanged()})}var i,o=t("q"),s=t("../base"),a=o.defer(),u=void 0,c=!1,l=[],h=!1,f={isIdentityResolved:function(){return f.initialize(),void 0!==u},isAuthenticated:function(){return f.initialize(),c},isInRole:function(t){return f.initialize(),c&&u.roles?-1!=u.roles.indexOf(t):!1},isInAnyRole:function(t){if(f.initialize(),!c||!u.roles)return!1;for(var e=0;e<t.length;e++)if(this.isInRole(t[e]))return!0;return!1},identity:function(){return f.initialize(),void 0===u?a.promise:o(u)},loginWithFirebase:function(t){f.initialize();var e=o.defer();return i.authWithCustomToken(t,function(t,r){t&&e.reject(t),n(r),e.resolve(r)}),e.promise},logout:function(){f.initialize(),i.unauth()},principalChanged:function(t){f.initialize(),void 0!==t?l.push(t):l.forEach(function(t){t(u)})},initialize:function(){h||(h=!0,i=s.getRef(),r())}};e.exports=f},{"../base":138,q:81}],144:[function(t,e){var n=t("./system/system.js"),r=t("./wormhole/wormhole.js"),i=t("./bridge/bridge.js"),o=t("./signature/signature.js"),s=t("./base.js"),a=t("local/pathfinder"),u=t("./system"),c=t("./wormhole"),l=t("./wormhole-class"),h=t("./signature"),f=t("./user");i.attachRepositories(u),n.attachRepositories(u,c,h),r.attachRepositories(u,c,l,f),o.attachRepositories(f),n.attachPathfinder(a),r.attachPathfinder(a),e.exports=s},{"./base.js":138,"./bridge/bridge.js":140,"./signature":155,"./signature/signature.js":157,"./system":158,"./system/system.js":160,"./user":161,"./wormhole":166,"./wormhole-class":163,"./wormhole/wormhole.js":168,"local/pathfinder":126}],145:[function(t,e){e.exports=t("./leaderboard-repository")},{"./leaderboard-repository":146}],146:[function(t,e){"use strict";var n=t("../base"),r=t("./leaderboard"),i=n({path:"leaderboard-new",makeLocal:function(t,e){return new r(t,e)},makeRemote:function(t){var e={};for(var n in t.days)e[n]=t.days[n].toRemoteForm();var r={allTime:t.allTime?t.allTime.toRemoteForm():null,findsPaidFor:t.findsPaidFor?t.findsPaidFor.toRemoteForm():null,totalPaidAmount:t.totalPaidAmount,days:e,lastModified:Date.now()};return r},pruneRemote:!0}),o={getAll:i.getAll,getArray:i.getArray,update:i.update,"delete":i.delete,changed:i.changed,changedRemoveHandler:i.changedRemoveHandler,initialize:i.initialize,supressChanged:i.supressChanged};o.get=function(t){var e=i.get(t);return e||(e=new r(t)),e},e.exports=o},{"../base":138,"./leaderboard":148}],147:[function(t,e){"use strict";var n=t("moment"),r=function(t,e){e||(e={}),this.id=t,this.periodStart=e.ps?e.ps:0,this.periodEnd=e.pe?e.pe:0,this.wormholesAdded=e.wa?e.wa:0,this.wormholesPartCompleted=e.wpc?e.wpc:0,this.wormholesCompleted=e.wc?e.wc:0,this.foreignWormholesPartCompleted=e.fwpc?e.fwpc:0,this.foreignWormholesCompleted=e.fwc?e.fwc:0,this.systemsUpdated=e.su?e.su:0,this.systemsPartScanned=e.sps?e.sps:0,this.systemsFullScanned=e.sfs?e.sfs:0,this.likes=e.l?e.l:0,Object.defineProperties(this,{totalWormholesPartCompleted:{get:function(){return this.wormholesPartCompleted+this.foreignWormholesPartCompleted}},totalWormholesCompleted:{get:function(){return this.wormholesCompleted+this.foreignWormholesCompleted}}})};r.prototype.toRemoteForm=function(){return{ps:this.periodStart,pe:this.periodEnd,wa:this.wormholesAdded,wpc:this.wormholesPartCompleted,wc:this.wormholesCompleted,fwpc:this.foreignWormholesPartCompleted,fwc:this.foreignWormholesCompleted,su:this.systemsUpdated,sps:this.systemsPartScanned,sfs:this.systemsFullScanned,l:this.likes}},r.prototype.timeInPeriod=function(t){return t>=this.periodStart&&t<this.periodEnd},r.prototype.add=function(t){return t.wormholesAdded&&(this.wormholesAdded+=t.wormholesAdded),t.wormholesPartCompleted&&(this.wormholesPartCompleted+=t.wormholesPartCompleted),t.wormholesCompleted&&(this.wormholesCompleted+=t.wormholesCompleted),t.foreignWormholesPartCompleted&&(this.foreignWormholesPartCompleted+=t.foreignWormholesPartCompleted),t.foreignWormholesCompleted&&(this.foreignWormholesCompleted+=t.foreignWormholesCompleted),t.systemsUpdated&&(this.systemsUpdated+=t.systemsUpdated),t.systemsPartScanned&&(this.systemsPartScanned+=t.systemsPartScanned),t.systemsFullScanned&&(this.systemsFullScanned+=t.systemsFullScanned),t.likes&&(this.likes+=t.likes),this},r.prototype.getPeriodStartPretty=function(){return n(this.periodStart).zone("+0000").format("Do MMM, dddd")},e.exports=r},{moment:80}],148:[function(t,e){"use strict";var n=t("moment"),r=t("./leaderboard-segment"),i=function(t,e){e||(e={}),e.days||(e.days={}),this.id=t,this.allTime=new r("allTime",e.allTime),this.findsPaidFor=new r("findsPaidFor",e.findsPaidFor),this.totalPaidAmount=e.totalPaidAmount?e.totalPaidAmount:0,this.days={};for(var n in e.days)this.days[n]=new r(n,e.days[n]);this.lastModified=e.lastModified?e.lastModified:0};i.prototype.addStats=function(t,e){var n=this.getDayForTime(t);n||(n=this.createNewDay(t),this.days[n.id]=n),n.add(e)},i.prototype.getDayForTime=function(t){for(var e in this.days){var n=this.days[e];if(n.timeInPeriod(t))return n}return null},i.prototype.createNewDay=function(t){var e=n(t).zone("+0000"),i=e.startOf("day").valueOf(),o=e.endOf("day").valueOf(),s=e.startOf("day").format("YYYY-MM-DD"),a=new r(s,{ps:i,pe:o});return a},i.prototype.getLastModifiedPretty=function(){return this.lastModified?n(this.lastModified).format("llll"):"-"},i.prototype.getLastModifiedFuzzy=function(){return this.lastModified?n(this.lastModified).fromNow():"-"},i.prototype.getTotal=function(){var t=new r;for(var e in this.days){var n=this.days[e];t.add(n)}return t.add(this.allTime),t},i.prototype.getFindsPaidFor=function(){return this.findsPaidFor},i.prototype.setFindsPaidFor=function(t){this.findsPaidFor=new r("findsPaidFor",t.toRemoteForm())},i.prototype.getDays=function(t){for(var e=Date.now(),n=[],r=0;t>r;r++){var i=e-1e3*r*60*60*24,o=this.getDayForTime(i);o||(o=this.createNewDay(i)),n.push(o)}return n},i.prototype.getDaysTotal=function(t){var e=this.getDays(t);return e.reduce(function(t,e){return t.add(e)},new r)},e.exports=i},{"./leaderboard-segment":147,moment:80}],149:[function(t,e){"use strict";var n=t("local/repositories/user"),r={getCreatorId:function(){var t=this.log;for(var e in t){var n=t[e];if("c"===n.type)return n.user}return null},getLastEditorId:function(){var t=this.log,e=Object.keys(t);if(0==t.length)return null;e=e.sort();var n=t[e[e.length-1]];return n?n.user:null},getCreator:function(){return n.get(this.getCreatorId())},getLastEditor:function(){return n.get(this.getLastEditorId())}};e.exports=r},{"local/repositories/user":161}],150:[function(t,e){e.exports=t("./metadata-repository.js")},{"./metadata-repository.js":151}],151:[function(t,e){"use strict";var n=t("../base"),r=n({path:"metadata",makeRemote:function(t){return void 0===t.value?null:t.value},idFromLocal:function(t){return t.key}}),i={get:r.get,initialize:r.initialize,changed:r.changed,changedRemoveHandler:r.changedRemoveHandler};i.set=function(t,e){r.update({key:t,value:e})},e.exports=i},{"../base":138}],152:[function(t,e){e.exports=t("./scanned-system-repository")},{"./scanned-system-repository":153}],153:[function(t,e){"use strict";function n(t){d[t.id]={lastModified:t.lastModified,wormholes:t.getWormholes(),sigs:t.getSignatures()}}function r(t){n(t),h.systemChanged(t.id)}var i=t("./scanned-system"),o=t("../base"),s=t("../wormhole"),a=t("../signature"),u=t("../system"),c=t("q"),l=o({path:"systems",isValid:function(t){return t.id},makeLocal:function(t,e){return new i(u.getSystem(t),e)},makeRemote:function(t){var e={isPinned:t.isPinned?!0:!1,isStarred:t.isStarred?!0:!1,lastScanned:t.lastScanned?t.lastScanned:null,lastPartialScan:t.lastPartialScan?t.lastPartialScan:null,lastModified:(new Date).getTime(),note:t.note?t.note:null};return e},pruneRemote:!0}),h={getSystems:l.getAll,getSystemsArray:l.getArray,updateSystem:l.update,deleteSystem:l.delete,systemsChanged:l.changed,systemsChangedRemoveHandler:l.changedRemoveHandler,initialize:l.initialize,supressChanged:l.supressChanged};h.getSystem=function(t){var e=l.get(t);return e||(e=new i(u.getSystem(t))),e},h.initialize=function(){var t=l.initialize(),e=u.initialize(),n=a.initialize(),r=s.initialize();return c.all([t,e,n,r])};var f={},d={};h.systemChanged=function(t,e){var r=t;void 0!==e?(f[r]||(f[r]=[]),n(h.getSystem(r)),f[r].push(e)):f[r].forEach(function(t){t(h.getSystem(r))})
},h.systemChangedRemoveHandler=function(t,e){f[t].remove(e)},h.systemsChanged(function(){var t=h.getSystemsArray();t.forEach(function(t){var e=d[t.id];e&&e.lastModified!==t.lastModified&&r(t)})}),s.changed(function(){Object.keys(d).forEach(function(t){var e=d[t],n=h.getSystem(t),i=e.wormholes,o=n.getWormholes(),s=i.detectChanges(o);s&&r(n)})}),a.signaturesChanged(function(){Object.keys(d).forEach(function(t){var e=d[t],n=h.getSystem(t),i=e.sigs,o=n.getSignatures(),s=i.detectChanges(o);s&&r(n)})}),e.exports=h},{"../base":138,"../signature":155,"../system":158,"../wormhole":166,"./scanned-system":154,q:81}],154:[function(t,e){"use strict";var n=t("moment"),r=function(t,e){e=e?e:{};var n=e.lastPartialScan?e.lastPartialScan:0,r=Object.create(t,{lastPartialScan:{get:function(){return Math.max(this.lastScanned,n)},set:function(t){n=t}}});return r.isPinned=e.isPinned,r.isStarred=e.isStarred,r.lastScanned=e.lastScanned?e.lastScanned:0,r.lastModified=e.lastModified,r.note=e.note,r.getLastScannedPretty=i.getLastScannedPretty,r.getLastScannedFuzzy=i.getLastScannedFuzzy,r.getLastPartialScanPretty=i.getLastPartialScanPretty,r.getLastPartialScanFuzzy=i.getLastPartialScanFuzzy,r},i={getLastScannedPretty:function(){return this.lastScanned?n(this.lastScanned).format("llll"):"unrecorded"},getLastScannedFuzzy:function(){return this.lastScanned?n(this.lastScanned).fromNow():"-"},getLastPartialScanPretty:function(){return this.lastPartialScan?n(this.lastPartialScan).format("llll"):"unrecorded"},getLastPartialScanFuzzy:function(){return this.lastPartialScan?n(this.lastPartialScan).fromNow():"-"}};r.MAX_NOTE_LENGTH=280,e.exports=r},{moment:80}],155:[function(t,e){e.exports=t("./signature-repository")},{"./signature-repository":156}],156:[function(t,e){"use strict";var n=t("q"),r=t("./signature"),i=t("../base"),o=t("../user"),s={},a=i({path:"signatures",makeLocal:function(t,e){return new r(e)},makeRemote:function(t){var e={id:t.id.toUpperCase(),systemId:parseInt(t.systemId),type:t.type?t.type:null,wormholeId:t.wormholeId?t.wormholeId:null,dateFound:t.dateFound?t.dateFound:(new Date).getTime(),lastScanned:t.lastScanned?t.lastScanned:(new Date).getTime(),lastModified:(new Date).getTime(),note:t.note&&t.note.length<=140?t.note:null,log:t.log?t.log:{}};return e},idFromLocal:function(t){return t.systemId+"_"+t.id.toUpperCase()},isValid:function(t){return t.systemId&&t.id}}),u={getSignature:a.get,getSignatures:a.getAll,getSignaturesArray:a.getArray,createSignature:a.update,updateSignature:a.update,deleteSignature:a.delete,signaturesChanged:a.changed,signaturesChangedRemoveHandler:a.changedRemoveHandler,supressChanged:a.supressChanged};u.initialize=function(){var t=a.initialize(),e=o.initialize();return n.all([t,e])},u.signaturesChanged(function(){s={}}),u.getSignaturesForSystem=function(t){var e=t.id;return void 0===s[e]&&(s[e]=u.getSignaturesArray().filter(function(t){return t.systemId==e})),s[e]},u.invalidateCache=function(){s={}},e.exports=u},{"../base":138,"../user":161,"./signature":157,q:81}],157:[function(t,e){"use strict";var n,r=t("moment"),i=t("../log-access-helpers"),o=function(t){t&&(this.id=t.id,this.systemId=t.systemId,this.wormholeId=t.wormholeId,this.type=t.type,this.dateFound=t.dateFound,this.lastScanned=t.lastScanned,this.lastModified=t.lastModified,this.note=t.note,this.log=t.log?t.log:{})};o.prototype.clone=function(){var t=new o;return t.id=this.id,t.systemId=this.systemId,t.wormholeId=this.wormholeId,t.type=this.type,t.dateFound=this.dateFound,t.lastScanned=this.lastScanned,t.lastModified=this.lastModified,t.note=this.note,t.log=this.log,t},o.prototype.equals=function(t){if(this.systemId!==t.systemId)return!1;if(this.id===t.id)return!0;try{var e=this.id.split("-")[0],n=t.id.split("-")[0];return e===n}catch(r){return!1}},o.prototype.getDateFoundPretty=function(){return r(this.dateFound).format("llll")},o.prototype.getDateFoundFuzzy=function(){return r(this.dateFound).fromNow()},o.prototype.getLastScannedPretty=function(){return r(this.lastScanned).format("llll")},o.prototype.getLastScannedFuzzy=function(){return r(this.lastScanned).fromNow()},o.SHORT_NOTE_LENGTH=16,o.prototype.noteIsShort=function(){return this.note?this.note.length<=o.SHORT_NOTE_LENGTH:!0},o.prototype.noteIsMedium=function(){return!this.noteIsShort()&&this.note.length<=140},o.prototype.noteIsTooLong=function(){return this.note?this.note.length>140:!1},o.prototype.getShortNote=function(){return this.note?this.noteIsShort()?this.note:this.note.substring(0,o.SHORT_NOTE_LENGTH)+"…":null},o.prototype.getCreatorId=i.getCreatorId,o.prototype.getLastEditorId=i.getLastEditorId,o.prototype.getCreator=i.getCreator,o.prototype.getLastEditor=i.getLastEditor,o.attachRepositories=function(t){n=t},o.allowedTypes=["wormhole","combat","data","ore","relic","gas"],e.exports=o},{"../log-access-helpers":149,moment:80}],158:[function(t,e){e.exports=t("./system-repository")},{"./system-repository":159}],159:[function(t,e){"use strict";function n(){return l.getStaticDataRoot()+h}var r,i,o,s,a=t("local/fetch-file"),u=t("q"),c=t("./system"),l=t("../base"),h="data/systems.json",f={};f.initialize=function(){return d()};var d=function(){return s||(s=u.defer(),a(n(),function(t,e,n){if(t)console.error(t),s.reject(t);else{var r=JSON.parse(n);p(r),s.resolve()}})),s.promise},p=function(t){r=Object.create(null),i={},o=[];for(var e=0;e<t.length;e++){var n=t[e],s=new c(n);r[n.systemId]=s,i[n.systemName.toLowerCase()]=s,o.push(s)}o.sort(function(t,e){return t.systemName>e.systemName?1:t.systemName<e.systemName?-1:0})};f.getSystems=function(){return r},f.getSystem=function(t){return r[t]},f.getSystemByName=function(t){return t?i[t.toLowerCase()]:void 0},f.getSystemsByName=function(t){return t.map(function(t){return f.getSystemByName(t)})},f.searchSystems=function(t,e,n){if(n){var r=f.getSystemByName(t);return r?r:m(t,e)}return m(t,e)};var m=function(t,e){t=t.trim().toLowerCase();for(var n=[],r=0;r<o.length;r++){var i=o[r].systemName.toLowerCase();if(i.startsWith(t)&&n.push(o[r]),n.length>=e)break}return n};f.getSystemsWithinLightyears=function(t,e){for(var n=[],r=0;r<o.length;r++){var i=o[r];if(t!==i&&!i.isHighsec()){var s=Math.abs(i.xpos-t.xpos),a=Math.abs(i.ypos-t.ypos),u=Math.abs(i.zpos-t.zpos);if(e>s&&e>a&&e>u){var c=Math.sqrt(s*s+a*a+u*u);e>c&&n.push(i)}}}return n},f.getSystemsDistance=function(t,e){var n=Math.abs(t.xpos-e.xpos),r=Math.abs(t.ypos-e.ypos),i=Math.abs(t.zpos-e.zpos),o=Math.sqrt(n*n+r*r+i*i);return o},e.exports=f},{"../base":138,"./system":160,"local/fetch-file":78,q:81}],160:[function(t,e){"use strict";var n,r,i,o,s=function(t){this.id=t.systemId,this.systemName=t.systemName,this.regionName=t.regionName,this.security=t.security,this.connectedSystemsIds=t.connectedSystems,this.xpos=t.xpos,this.ypos=t.ypos,this.zpos=t.zpos};s.prototype.isHighsec=function(){return this.security>=.45},s.prototype.isLowsec=function(){return this.security<.45&&this.security>0},s.prototype.isNullsec=function(){return this.security<=0&&!this.isWormholeSpace()},s.prototype.isWormholeSpace=function(){var t=this.systemName.match(/^J[0-9]+$/);return null!==t||"Thera"===this.systemName},s.prototype.isKnownSpace=function(){return!this.isWormholeSpace()},s.prototype.getSecurityPretty=function(){return this.security<0?"0.0":(Math.round(10*this.security)/10).toFixed(1)},s.prototype.getTooltip=function(){return"{0} / {1}".format(this.getSecurityPretty(),this.regionName)};var a={};s.prototype.getGates=function(){return void 0===a[this.id]&&(a[this.id]=this.connectedSystemsIds.map(function(t){return n.getSystem(t)})),a[this.id]},s.prototype.getDistanceFromSystem=function(t){return n.getSystemsDistance(this,t)},s.prototype.getStaticJumpsToSystem=function(t){var e=o.findStaticJumpCount({startSys:this,endSys:t});return e},s.prototype.getSignatures=function(){return i.getSignaturesForSystem(this)},s.prototype.getWormholes=function(){var t=r.getArray().filter(function(t){return t.startSystemId==this.id||t.endSystemId==this.id},this);return t},s.attachRepositories=function(t,e,o){n=t,r=e,i=o},s.attachPathfinder=function(t){o=t},e.exports=s},{}],161:[function(t,e){e.exports=t("./user-repository")},{"./user-repository":162}],162:[function(t,e){"use strict";var n=t("../base"),r=t("moment"),i=function(t,e){this.id=Number(t),this.name=e.name,this.alliance=e.alliance,this.corporation=e.corp?e.corp:"",this.lastLogin=e.lastLogin?e.lastLogin:0,this.routesSearched=e.rs?e.rs:0,this.lastActivity=e.la?e.la:0};i.prototype.getPortraitUrl=function(t){return"https://image.eveonline.com/Character/"+this.id+"_"+t+".jpg"},i.prototype.getLastLoginPretty=function(){return this.lastLogin?r(this.lastLogin).format("llll"):"-"},i.prototype.getLastLoginFuzzy=function(){return this.lastLogin?r(this.lastLogin).fromNow():"-"},i.prototype.getLastActivityPretty=function(){return this.lastActivity?r(this.lastActivity).format("llll"):"-"},i.prototype.getLastActivityFuzzy=function(){return this.lastActivity?r(this.lastActivity).fromNow():"-"};var o=n({path:"users",makeLocal:function(t,e){return new i(t,e)},makeRemote:function(t){return{name:t.name,corp:t.corporation,alliance:t.alliance,lastLogin:t.lastLogin,rs:t.routesSearched,la:t.lastActivity}},pruneRemote:!0}),s={get:o.get,getAll:o.getAll,getArray:o.getArray,create:o.create,update:o.update,"delete":o.delete,changed:o.changed,changedRemoveHandler:o.changedRemoveHandler,initialize:o.initialize};s.getByName=function(t){var e=s.getArray().find(function(e){return e.name===t});return e},e.exports=s},{"../base":138,moment:80}],163:[function(t,e){e.exports=t("./wormhole-class-repository")},{"./wormhole-class-repository":164}],164:[function(t,e){"use strict";function n(){return u.getStaticDataRoot()+l}var r,i,o,s=t("local/fetch-file"),a=t("q"),u=t("../base"),c=t("./wormhole-class"),l="data/wormhole-classes.json",h={};h.initialize=function(){return f()};var f=function(){return o||(o=a.defer(),s(n(),function(t,e,n){if(t)console.error(t),o.reject(t);else{var r=JSON.parse(n);d(r),o.resolve()}})),o.promise},d=function(t){r={},i=[],t.forEach(function(t){var e=new c(t);r[t.className]=e,i.push(e)})};h.getWormholeClasses=function(){return r},h.getWormholeClass=function(t){return t?r[t.toUpperCase()]:void 0},h.searchWormholeClasses=function(t,e,n){if(n){var r=h.getWormholeClass(t);return r?r:p(t,e)}return p(t,e)};var p=function(t,e){t=t.trim().toUpperCase();for(var n=[],r=0;r<i.length;r++){var o=i[r].className.toUpperCase();if(o.startsWith(t)&&n.push(i[r]),n.length>=e)break}return n};e.exports=h},{"../base":138,"./wormhole-class":165,"local/fetch-file":78,q:81}],165:[function(t,e){"use strict";var n=function(t){this.totalMass=t.totalMass,this.maxIndividualMass=t.maxIndividualMass,this.className=t.className,this.massRegeneration=t.massRegeneration,this.maxStableTime=t.maxStableTime};n.FRIGATE_MASS=16e5,n.CRUISER_MASS=15e6,n.BATTLECRUISER_MASS=17e6,n.BATTLESHIP_MASS=1e8,n.CAPITAL_MASS=12e8,n.prototype.getMaxShipSize=function(){var t=this.maxIndividualMass;return t>n.CAPITAL_MASS?"Capital Ship":t>n.BATTLESHIP_MASS?"Battleship":t>n.BATTLECRUISER_MASS?"Battlecruiser":t>n.CRUISER_MASS?"Cruiser":t>n.FRIGATE_MASS?"Frigate":"-"},n.prototype.getMaxNumForMass=function(t){var e=this.maxIndividualMass,n=this.totalMass;return t>e?0:Math.floor(n/t)},n.prototype.getTooltip=function(){var t=this.maxStableTime+"h",e=(this.regen,this.maxIndividualMass,[]);e.push({num:this.getMaxNumForMass(n.CAPITAL_MASS),type:"carriers"}),e.push({num:this.getMaxNumForMass(n.BATTLESHIP_MASS),type:"battleships"}),e.push({num:this.getMaxNumForMass(n.CRUISER_MASS),type:"cruisers"});var r="";return e.forEach(function(t){if(0!==t.num){var e=" / "+t.num+" "+t.type;r+=e}}),"{0}".format(t)+r},n.prototype.getPopoverData=function(){var t={"Max Lifetime":this.maxStableTime+"h","Max Ship Size":this.getMaxShipSize(),"Mass Regen":this.massRegeneration,"Total Mass":this.totalMass.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),Carriers:this.getMaxNumForMass(n.CAPITAL_MASS),Battleships:this.getMaxNumForMass(n.BATTLESHIP_MASS),Battlecruisers:this.getMaxNumForMass(n.BATTLECRUISER_MASS),Cruisers:this.getMaxNumForMass(n.CRUISER_MASS),Frigates:this.getMaxNumForMass(n.FRIGATE_MASS)};for(var e in t)0==t[e]&&delete t[e];return t},e.exports=n},{}],166:[function(t,e){e.exports=t("./wormhole-repository")},{"./wormhole-repository":167}],167:[function(t,e){"use strict";var n=t("./wormhole"),r=t("../base"),i=t("../signature"),o=t("../wormhole-class"),s=t("../user"),a=t("../system"),u=t("q"),c=r({path:"wormholes",makeLocal:function(t,e){return new n(t,e)},makeRemote:function(t){var e={startSystem:t.startSystemId,endSystem:t.endSystemId,dateFound:t._dateFound?t._dateFound:(new Date).getTime(),lastModified:(new Date).getTime(),lastObserved:t._lastObserved?t._lastObserved:(new Date).getTime(),wormholeClass:t.wormholeClassName?t.wormholeClassName:null,knownDirection:void 0!==t.wormholeClassName,note:t.note&&t.note.length<=140?t.note:null,log:t.log?t.log:{}};return e}}),l={get:c.get,getAll:c.getAll,getArray:c.getArray,create:c.create,update:c.update,changed:c.changed,changedRemoveHandler:c.changedRemoveHandler,supressChanged:c.supressChanged};l.delete=function(t){if(t){var e=t.getStartSignature(),n=t.getEndSignature();e&&i.deleteSignature(e),n&&i.deleteSignature(n),c.delete(t)}},l.initialize=function(){var t=c.initialize(),e=i.initialize(),n=o.initialize(),r=s.initialize(),l=a.initialize();return u.all([t,e,n,r,l])},e.exports=l},{"../base":138,"../signature":155,"../system":158,"../user":161,"../wormhole-class":163,"./wormhole":168,q:81}],168:[function(t,e){"use strict";var n,r,i,o,s,a=t("moment"),u=t("../log-access-helpers"),c=function(t,e){t&&(this.id=t,this.startSystemId=e.startSystem,this.endSystemId=e.endSystem,this.wormholeClassName=e.wormholeClass,this.lastModified=e.lastModified,this.knownDirection=e.knownDirection,this._dateFound=e.dateFound,this._lastObserved=e.lastObserved,this.note=e.note,this.log=e.log?e.log:{})};c.prototype.clone=function(){var t=new c;return t.id=this.id,t.startSystemId=this.startSystemId,t.endSystemId=this.endSystemId,t.wormholeClassName=this.wormholeClassName,t.lastModified=this.lastModified,t.knownDirection=this.knownDirection,t._dateFound=this._dateFound,t._lastObserved=this._lastObserved,t.note=this.note,t.log=this.log,t},c.SHORT_NOTE_LENGTH=16,c.prototype.getDateFound=function(){var t=this.getStartSignature(),e=this.getEndSignature(),n=this._dateFound;return t&&(n=Math.min(n,t.dateFound)),e&&(n=Math.min(n,e.dateFound)),n},c.prototype.getLastObserved=function(){var t=this.getStartSignature(),e=this.getEndSignature(),n=this._lastObserved;return t&&(n=Math.max(n,t.lastScanned)),e&&(n=Math.max(n,e.lastScanned)),0!==n?n:void 0},c.prototype.getDateExpires=function(){return this.getDateFound()+60*this.getMaxHours()*60*1e3},c.prototype.isExpired=function(){return this.getDateExpires()<(new Date).getTime()},c.prototype.getDateFoundPretty=function(){return a(this.getDateFound()).format("llll")},c.prototype.getDateFoundFuzzy=function(){return a(this.getDateFound()).fromNow()},c.prototype.getDateExpiresPretty=function(){return a(this.getDateExpires()).format("llll")},c.prototype.getDateExpiresFuzzy=function(){return this.getDateExpires()<(new Date).getTime()?"(expired)":a(this.getDateExpires()).fromNow().replace(/^in /,"")},c.prototype.getLastObservedPretty=function(){return a(this.getLastObserved()).format("llll")},c.prototype.getLastObservedFuzzy=function(){return a(this.getLastObserved()).fromNow()},c.prototype.getWormholeClass=function(){return i.getWormholeClass(this.wormholeClassName)},c.prototype.getClassName=function(){return this.wormholeClassName},c.prototype.getClassNamePretty=function(){return this.wormholeClassName?this.wormholeClassName:"-"},c.prototype.getMaxShipSizePretty=function(){return this.getWormholeClass()?this.getWormholeClass().getMaxShipSize():"-"},c.prototype.getMaxHours=function(){var t=this.getWormholeClass();return t?t.maxStableTime:24},c.prototype.hasClass=function(){return!!this.wormholeClassName},c.prototype.getStartSystem=function(){return n.getSystem(this.startSystemId)},c.prototype.getEndSystem=function(){return n.getSystem(this.endSystemId)},c.prototype.getStartSignature=function(){var t=this.getStartSystem().getSignatures();return t.find(function(t){return t.wormholeId===this.id},this)},c.prototype.getEndSignature=function(){var t=this.getEndSystem().getSignatures();return t.find(function(t){return t.wormholeId===this.id},this)},c.prototype.getStaticJumps=function(){var t=s.findStaticJumpCount({startSys:this.getStartSystem(),endSys:this.getEndSystem()});return t},c.prototype.getStaticJumpsNoHighsec=function(){var t=s.findStaticJumpCount({startSys:this.getStartSystem(),endSys:this.getEndSystem(),noHighsec:!0});return t},c.prototype.getClosestEndToHome=function(){var t=siteConfig.homeSystem,e=t.getStaticJumpsToSystem(this.getStartSystem()),n=t.getStaticJumpsToSystem(this.getEndSystem());return null===e&&null===n?null:null===e?this.getEndSystem():null===n?this.getStartSystem():n>e?this.getStartSystem():this.getEndSystem()},c.prototype.getWormholeType=function(){var t=this.getStartSystem().isWormholeSpace(),e=this.getEndSystem().isWormholeSpace();return t&&e?"w-w":t||e?"w-k":"k-k"},c.prototype.isWtoW=function(){return"w-w"===this.getWormholeType()},c.prototype.isWtoK=function(){return"w-k"===this.getWormholeType()},c.prototype.isKtoK=function(){return"k-k"===this.getWormholeType()},c.prototype.isDuplicate=function(t){var e=this.startSystemId,n=this.endSystemId,r=t.startSystemId,i=t.endSystemId;return e===r&&n===i||e===i&&n===r},c.prototype.hasDuplicate=function(){return r.getArray().some(function(t){return t.id===this.id?!1:this.isDuplicate(t)},this)},c.prototype.noteIsShort=function(){return this.note?this.note.length<=c.SHORT_NOTE_LENGTH:!0},c.prototype.noteIsMedium=function(){return!this.noteIsShort()&&this.note.length<=140},c.prototype.noteIsTooLong=function(){return this.note?this.note.length>140:!1},c.prototype.getShortNote=function(){return this.note?this.noteIsShort()?this.note:this.note.substring(0,c.SHORT_NOTE_LENGTH)+"…":null},c.prototype.getCreator=u.getCreator,c.prototype.getLastEditor=u.getLastEditor,c.prototype.getCreatorId=u.getCreatorId,c.prototype.getLastEditorId=u.getLastEditorId,c.attachRepositories=function(t,e,s,a){n=t,r=e,i=s,o=a},c.attachPathfinder=function(t){s=t},e.exports=c},{"../log-access-helpers":149,moment:80}]},{},[1]);